(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"41l2":function(e,o,t){"use strict";t.d(o,"a",function(){return p});var s=t("mrSG"),n=t("ZyuK"),i=t("iOQE"),c=t("DFXC"),r=t("Q0Ba"),a=t("fXoL");let p=(()=>{class e extends i.a{constructor(e,o,t){super(e,o),this.omniPull=t,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(e=>{if(e){const o=e.get(this.options.fcName);o&&o.LOV_TYPE_ID&&o.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var e;return Object(s.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(e=this.defaultDropDownLovOptions.listOfOptions)||void 0===e?void 0:e.length)){const e=this.commonProv.getElementValidations(this.options.fcName);if(e&&e.LOV_TYPE_ID&&(this.options.lovTypeId=e.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const e=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);e&&(this.options.lovAdminFilterParamName=e[this.options.lovAdminFilterParamName])}const o={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},t=yield this.omniPull.returnLovTypesValues(o).catch(e=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",e)});if(this.defaultDropDownLovOptions.listOfOptions=[],t&&t.length>0){for(const e of t){const o={itemValue:e.itemValue,description:e.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(e.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:e};o.selectedObj[this.options.fcName]=e.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(o)}this.showLovDropdown=!0}}})}selectDropDownChange(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(o){return new(o||e)(a.Rb(r.a),a.Rb(c.a),a.Rb(n.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,o){1&e&&(a.Xb(0,"ps-select-dropdown",0),a.fc("onPsChange",function(e){return o.selectDropDownChange(e)}),a.Wb()),2&e&&a.pc("id",o.id)("options",o.defaultDropDownLovOptions)},directives:[i.a],styles:[""]}),e})()},"Q5h/":function(e,o,t){"use strict";t.r(o),t.d(o,"BreakTermDepositAccountPage",function(){return T});var s=t("3Pt+"),n=t("OVQh"),i=t("/M2N"),c=t("V0Fi"),r=t("fOh1"),a=t("ZyuK"),p=t("f42Q"),l=t("DFXC"),u=t("zngb"),m=t("qEF5"),h=t("woXy"),f=t("Q0Ba"),d=t("gKqT"),O=t("fXoL"),y=t("kRg/"),b=t("sAFK"),g=t("+f2X"),_=t("VEWP"),k=t("41l2");let A=(()=>{class e extends k.a{constructor(e,o){super(e,o),this.defaultOptions={labelKey:"breakage_type_key",placeHolder:"select_breakage_type_key",lovTypeId:c.a.LOV_TYPE_ID_BREAKAGE_TYPE}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}onChangeLov(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(o){return new(o||e)(O.Rb(f.a),O.Rb(l.a))},e.\u0275cmp=O.Lb({type:e,selectors:[["ps-lov-breakage-type"]],inputs:{options:"options"},features:[O.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,o){1&e&&(O.Xb(0,"ps-dropdown-lov",0),O.fc("onPsChange",function(e){return o.onChangeLov(e)}),O.Wb()),2&e&&O.pc("id",o.id)("options",o.defaultOptions)},directives:[k.a],styles:[""]}),e})(),T=(()=>{class e extends d.OmniBasePage{constructor(e,o,t,i,c){super(),this.commonProv=e,this.navService=o,this.loggerP=t,this.eventEmitterService=i,this.omniPull=c,this.formGroup=new s.f({}),this.breakTermDepositVO={},this.stepperOptions={isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["break_term_deposit1"],group:this.formGroup,requestObject:this.breakTermDepositVO,submitOptions:{extraParams:{},submitServiceUrl:r.a.serviceUrl.accountOpeningEndPoint,group:this.formGroup,postCallFunction:{func(e){return new Promise((o,t)=>{o(this.executionClass.serviceRes(e))})},params:[this],executionClass:this}}},this.panelOptionsStep1={isExpandable:!0,labelKey:"account_details_key",iconName:"document",expanded:!0},this.panelOptionsStep2={isExpandable:!0,labelKey:"break_account_details_key",iconName:"document",expanded:!1},this.filterDateOptions={fcName:"date",group:this.formGroup,labelKey:"date_key",placeHolder:"select_date_key"},this.transferToOptions={labelKey:"transfer_to_key",placeHolder:"select_transfer_to_key",component:n.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"toAccount",accountType:"G",fromTo:"to",requestObject:this.breakTermDepositVO},this.psComplexAmountOptions={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:this.formGroup,fcName:"currency"},amountOptions:{labelKey:"breakage_amount_key",placeHolder:"enter_breakage_amount_key",fcName:"inputAmount",group:this.formGroup,type:"amount",decimalPoints:3}},this.psComplexAmountOptions1={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:this.formGroup,fcName:"accountCurrency"},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"amount",group:this.formGroup,type:"amount",decimalPoints:3}},this.breakTypeOptions={fcName:"brekageType",group:this.formGroup,labelKey:"breakage_type_key",placeHolder:"select_breakage_type_key"},this.comAmountOptions={currency:"",currenciesOptions:{placeHolder:"currency_key",group:this.formGroup,fcName:"currency"},amountOptions:{labelKey:"amount",fcName:"amount",group:this.formGroup,type:"amount",decimalPoints:3}},this.fullBreakOptions={labelKey:"fuller_partial_break_key",placeHolder:"fuller_partial_break_key",group:this.formGroup,fcName:"fullerOrPartialBreakToggle",psClass:"toggleColor"},this.showAmt=!0,this.accountTypesOptions={accountTypesOptions:{allowedAccountType:u.a.AllowedFixedMaturityAccountsTypes,accountCategory:u.a.ACC_TYPE_T,group:this.formGroup,fcName:"accountTypes"},periodicity:{group:this.formGroup,fcName:"periodiCity"},minimumBalance:{group:this.formGroup,fcName:"minBalance"},group:this.formGroup,requestObject:this.breakTermDepositVO},this.lblPeriodicityOptions={labelKey:"Term: 5 Years"},this.profitRateOptions={placeHolder:"profit_rate_key",labelKey:"profit_rate_key",group:this.formGroup,fcName:"profitRate"},this.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:n.a,currency:"USD",group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"transferTo",accountType:"G",fromTo:"from",requestObject:this.breakTermDepositVO},this.maturityTransferOptions={labelKey:"on_maturity_transfer_balance_to_key",placeHolder:"select_maturity_account_key",component:n.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"maturityAccount",accountType:"G",fromTo:"to",requestObject:this.breakTermDepositVO},this.profitAccOptions={labelKey:"post_profit_to_key",placeHolder:"select_post_profit_to_key",component:n.a,currency:"USD",group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"profitAccount",accountType:"G",fromTo:"to",requestObject:this.breakTermDepositVO},this.mainOptions={toggleOptions:{labelKey:"renew_key",placeHolder:"renew_key",group:this.formGroup,fcName:"renew",psClass:"toggleColor"},toggleProfitOptions:{labelKey:"post_profit_to_same_account_key",placeHolder:"post_profit_to_same_account_key",group:this.formGroup,fcName:"renewWithSame",psClass:"toggleColor"}},this.instructMsgLabelOptions={labelKey:"Renewal Instructions: New Balance Renewed in Same Account",group:this.formGroup,fcName:"instrcutions"},this.actionImageOptions={imageName:"account_Deactivation_Remark_icon.png"},this.termsAccountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:n.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"F",fromTo:"from",requestObject:this.breakTermDepositVO},this.complexExchangeOptions={editableMode:!1,showToCurrencyOptions:!0,fromAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromCurrency",group:this.formGroup},amountOptions:{labelKey:"breakage_amount_key",placeHolder:"breakage_amount_key",fcName:"transactionAmount",group:this.formGroup,decimalPoints:3,revertToOldValue:!1},requestObject:this.breakTermDepositVO},toAmountOptions:{currency:"",currenciesOptions:{placeHolder:"exchange_currency_key",labelKey:"exchange_currency_key",fcName:"toCurrency",group:this.formGroup},amountOptions:{labelKey:"exchange_amount_key",placeHolder:"enter_amount_key",fcName:"toAmount",group:this.formGroup,decimalPoints:2},requestObject:this.breakTermDepositVO},requestObject:this.breakTermDepositVO,group:this.formGroup},this.enablePeriodicity=!1,this.showLabel=!1,this.enableMaturityTransfer=!1,this.enableProfit=!1}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup,this.cifInfo=this.commonProv.session.getValueOf(u.a.USERINFO),this.commonProv.copyObject(this.breakTermDepositVO,this.navService.getAllParams()?this.navService.getAllParams().ScreenVO?this.navService.getAllParams().ScreenVO:this.navService.getAllParams():{}),this.breakTermDepositVO&&this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{branch:this.cifInfo.customerInfoCO?this.cifInfo.customerInfoCO.branchCode:""},!1,!0)}ionViewDidEnter(){super.ionViewDidEnter(),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.termsAccountListOptions.fcName,this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.amountOptions.fcName],1),this.commonProv.addDefaultValidator(this.formGroup,this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,this.commonProv.prepareValidation(!1,null,null,null,null,null,null,null,[this.custAmountValidator()]))}ngAfterViewInit(){this.commonProv.setValInsideNestedObj(this.termsAccountListOptions.fcName,this.breakTermDepositVO.additionalRef,this.breakTermDepositVO),this.commonProv.setValInsideNestedObj(this.termsAccountListOptions.fcName+"_lookupKey",this.breakTermDepositVO.additionalRef,this.breakTermDepositVO),this.breakTermDepositVO[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=this.breakTermDepositVO.currency,this.complexExchangeOptions.fromAmountOptions.currencyCode=Number(this.breakTermDepositVO.currency)}onBreakageAmountChange(e){}onchange(e){this.availableBal=this.breakTermDepositVO.availableBalance.split(" "),e&&(e.itemValue==c.a.FULL_BREAKAGE_TERM_DEPOSIT?(this.commonProv.setValInsideNestedObj(this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,parseFloat(this.availableBal[0].replace(/,/g,"")),this.breakTermDepositVO),setTimeout(()=>{this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName],1)},1)):e.itemValue==c.a.PARTIAL_BREAKAGE_TERM_DEPOSIT&&(this.commonProv.setValInsideNestedObj(this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,null,this.breakTermDepositVO),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName],0)))}onTransferTo(e){e&&(this.breakTermDepositVO[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=e.currency.toString(),this.complexExchangeOptions.toAmountOptions.currencyCode=Number(e.currency),this.showExchangeRate())}showExchangeRate(){this.exchangeChild.showToCurrency()}custAmountValidator(){return e=>this.checkFieldControlsValidity(e)?null:(m.a.presentInfoAlert(this.commonProv.translate("partial_break_amount_cannot_be_greater_or_equal_to_account_balance_key")),this.formGroup.controls[this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName].setValue(null),{"equal or greater than balance":""})}checkFieldControlsValidity(e){return!(!m.a.isEmptyOrNull(this.availableBal)&&null!=(null==e?void 0:e.value)&&""!=(null==e?void 0:e.value)&&e.value>=this.availableBal)}}return e.\u0275fac=function(o){return new(o||e)(O.Rb(f.a),O.Rb(h.a),O.Rb(l.a),O.Rb(p.a),O.Rb(a.a))},e.\u0275cmp=O.Lb({type:e,selectors:[["app-break-term-deposit-account"]],viewQuery:function(e,o){if(1&e&&O.Wc(i.a,1),2&e){let e;O.Bc(e=O.gc())&&(o.exchangeChild=e.first)}},features:[O.Cb],decls:8,vars:7,consts:[[3,"options"],["step1",""],["id","break_term_panel1",3,"options"],["id","break_term_panel2",3,"options"],["id","breakageType",3,"options","onPsChange"],["id","'transferTo'+ id",3,"options","onAccountChange"],["id","exchangeComponent",3,"options","onPsChange"]],template:function(e,o){1&e&&(O.Xb(0,"ps-template-stepper",0),O.Xb(1,"ps-form-step",1),O.Xb(2,"ps-container-panel",2),O.Sb(3,"ps-lookup-own-accounts",0),O.Wb(),O.Xb(4,"ps-container-panel",3),O.Xb(5,"ps-lov-breakage-type",4),O.fc("onPsChange",function(e){return o.onchange(e)}),O.Wb(),O.Xb(6,"ps-lookup-own-accounts",5),O.fc("onAccountChange",function(e){return o.onTransferTo(e)}),O.Wb(),O.Xb(7,"ps-complex-exchange",6),O.fc("onPsChange",function(e){return o.onBreakageAmountChange(e)}),O.Wb(),O.Wb(),O.Wb(),O.Wb()),2&e&&(O.pc("options",o.stepperOptions),O.Fb(2),O.pc("options",o.panelOptionsStep1),O.Fb(1),O.pc("options",o.termsAccountListOptions),O.Fb(1),O.pc("options",o.panelOptionsStep2),O.Fb(1),O.pc("options",o.breakTypeOptions),O.Fb(1),O.pc("options",o.transferToOptions),O.Fb(1),O.pc("options",o.complexExchangeOptions))},directives:[y.a,b.a,g.a,_.a,A,i.a],styles:[".test[_ngcontent-%COMP%] {\n  text-align: center;\n}"]}),e})()},VEWP:function(e,o,t){"use strict";t.d(o,"a",function(){return O});var s=t("mrSG"),n=t("fXoL"),i=t("4lGw"),c=t("V0Fi"),r=t("ZyuK"),a=t("ZF3V"),p=t("EIUR"),l=t("DFXC"),u=t("zngb"),m=t("Q0Ba"),h=t("Isd1"),f=t("L0og");const d=["complexLookupComponentObj"];let O=(()=>{class e extends a.a{constructor(e,o,t,s){super(e,o),this.commonService=e,this.omniPull=t,this.accountsService=s,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new n.o,this.onAccountDeleted=new n.o,this.labelValuesMap=new Map,this.psCurrency=new p.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(e){return Object(s.b)(this,void 0,void 0,function*(){if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const o=this.commonService.session.getValueOf(u.a.USERINFO),t=this.prepareRequestData(o);this.returnAccountList(t)})}returnAccountList(e){return Object(s.b)(this,void 0,void 0,function*(){const o=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const t=yield this.omniPull.returnAccounts(e).catch(e=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});if(t&&t.gridModel.length>0){if(this.allType){e.accountType="F",e.permittedGls="F";const o=yield this.omniPull.returnAccounts(e).catch(e=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});o&&o.gridModel.length>0&&(t.gridModel=[...t.gridModel,...o.gridModel])}if(this.options.listOfAccounts=t.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((e,o)=>e.rowIndex=o),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let e="QR"===this.options.purpose?null==o?void 0:o.defaultQrPaymentAccKey:null==o?void 0:o.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(o=>{o.personalizeKey&&o.personalizeKey===e&&(this.common.setValInsideNestedObj(this.options.fcName,o.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",o.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(e){const o=[];for(const t of e){const e={briefNameEnglish:t.briefNameEnglish,cifShortNameEnglish:t.cifShortNameEnglish,accountNumber:t.accountNumber,balance:this.psCurrency.transform(null==t.balance?"0.0":t.balance,t.currencyDecimalPoints)+" "+(t.currencyBriefName||t.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==t.availableBalance?"0.0":t.availableBalance,t.currencyDecimalPoints)+" "+(t.currencyBriefName||t.currencyBriefNameEnglish),currencyBriefName:t.currencyBriefName||t.currencyBriefNameEnglish,currencyBriefNameEnglish:t.currencyBriefNameEnglish,currency:t.currency,accountTypeDesc:t.accountTypeDesc,additionalRef:t.additionalRef,ibanAccNo:t.ibanAccNo,accGl:t.accGl,serialNo:t.serialNo,branch:t.branch,cif:t.cif,formattedAccount:this.accountsService.returnFormattedAccount(t).formattedAccount,personalizeKey:t.personalizeKey,nickName:t.nickName,briefName:t.briefName,lookupKey:t.additionalRef,branchDescription:t.branchDescription?t.branchDescription:"",generalLedgerBriefNameEng:t.generalLedgerBriefNameEng?t.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:t.statusDescription,statusCode:t.status,accountFormat:this.accountsService.returnFormattedAccount(t).accountFormat};this.options.multiple&&(e.excludeType=t.excludeType),o.push(e)}return o}prepareRequestData(e){let o={};if(e&&e.omniUserVO&&(o={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(o={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(o.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(o.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(o.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(o.endUserId=this.options.endUserId),null!=this.options.fromCurrency?o.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(o.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)o.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let e="";for(const o in this.options.accountAllowedCurrencies)e+=this.options.accountAllowedCurrencies[o]+",";e=e.slice(0,e.lastIndexOf(",")),o.accountAllowedCurrencies=e}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)o.accountAllowedTypes=this.options.accountAllowedTypes;else{let e="";for(const o in this.options.accountAllowedTypes)e+=this.options.accountAllowedTypes[o]+",";e=e.slice(0,e.lastIndexOf(",")),o.accountAllowedTypes=e}return o}fetchAccountBasedOnCurrency(e){return this.options.listOfAccounts}onChange(e){this.logger.log(e)}populateOwnAccountMap(){let e={},o={},t={};e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},o={key:"currentBalance",value:"0.0",isEdit:!1},t={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",o),this.labelValuesMap.set("available_balance_key",t)}onChangeItem(e){this.onAccountChange.emit(e)}onDeleteItem(e){e&&this.onAccountDeleted.emit(e)}handleMultipleSelection(){const e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(e=>this.options.requestObject[this.options.fcName].some(o=>o.accountNumber==e.accountNumber)):[];this.complexLookupOptions.selectedItems=e.filter(e=>this.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(e=>Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(o=>e.accountNumber!=o.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}return e.\u0275fac=function(o){return new(o||e)(n.Rb(m.a),n.Rb(l.a),n.Rb(r.a),n.Rb(i.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,o){if(1&e&&n.Wc(d,1),2&e){let e;n.Bc(e=n.gc())&&(o.complexLookupComponentObj=e.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[n.Cb,n.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,o){1&e&&(n.Xb(0,"ps-container-complex",0),n.Xb(1,"ps-complex-lookup",1,2),n.fc("changeItem",function(e){return o.onChangeItem(e)})("onDeleteItem",function(e){return o.onDeleteItem(e)}),n.Wb(),n.Wb()),2&e&&(n.Fb(1),n.pc("id",o.id)("options",o.complexLookupOptions))},directives:[h.a,f.a],styles:[""]}),e})()}}]);