{"version":3,"sources":["webpack:///src/app/pages/personalize-accounts/personalize-accounts.page.html","webpack:///src/app/pages/personalize-accounts/personalize-accounts.page.scss","webpack:///src/app/pages/personalize-accounts/personalize-accounts.page.ts"],"names":["PersonalizeAccountsPage","commonService","logger","router","omniPull","formGroup","personalizeVO","stepperOptions","stepperName","isHorizontalStepper","numberOfSteps","namesofSteps","group","submitOptions","extraParams","submitServiceUrl","serviceUrl","updateUserInfoProfile","preCallFunction","func","response","Promise","resolve","reject","executionClass","updateScreenVO","params","requestObject","panelOptionStep1","isExpandable","labelKey","iconName","expanded","generalAccountOptions","placeHolder","component","accountAllowedCurrencies","accountAllowedTypes","glTypes","fcName","accountType","fromTo","multiple","setAllAccountsAsSelecetd","termAccountOptions","excludedTermAccounts","excludedTermAccounts_lookupKey","excludedGeneralAccounts","excludedGeneralAccounts_lookupKey","selectedAccountList","selectedTermAccountList","transferAccountOptions","paymentAccountOptions","purpose","ngOnInit","deleteAccount","account","type","resp","filterExcludedAccounts","updateSession","generalAccountsRef","complexLookupOptions","listOfOptions","filter","includes","map","lookupKey","termAccountsRef","deleteFromScreenVO","excludeType","onAccountsChanged","accounts","personalization","session","getValueOf","PERSONALIZATION_CO","defaultTransferAccKey","controls","value","defaultQrPaymentAccKey","remove","append","fcnamesList","fcname","selector","template"],"mappings":"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","file":"95-es5.js","sourcesContent":["export default \"<ps-template-stepper [options]=\\\"stepperOptions\\\" [id]=\\\"stepperOptions.stepperName\\\">\\n  <ps-form-step *psStep=\\\"'step1'\\\" step1 [id]=\\\"stepperOptions.namesofSteps[0]\\\">\\n    <ps-container-panel [options]=\\\"panelOptionStep1\\\" id=\\\"personalization_panel1\\\">\\n      <ps-lookup-own-accounts #generalAccountsRef id=\\\"'transferFrom'+ id\\\" [options]=\\\"generalAccountOptions\\\"\\n        (onAccountDeleted)=\\\"deleteAccount($event,'G')\\\" (onAccountChange)=\\\"onAccountsChanged($event, 'G')\\\">\\n      </ps-lookup-own-accounts>\\n      <ps-lookup-own-accounts #termAccountsRef id=\\\"'payment'+ id\\\" [options]=\\\"termAccountOptions\\\"\\n        (onAccountDeleted)=\\\"deleteAccount($event,'T')\\\" (onAccountChange)=\\\"onAccountsChanged($event, 'T')\\\">\\n      </ps-lookup-own-accounts>\\n\\n      <ps-lookup-own-accounts id=\\\"'transferFrom'+ id\\\" [options]=\\\"transferAccountOptions\\\"></ps-lookup-own-accounts>\\n      <ps-lookup-own-accounts id=\\\"'payment'+ id\\\" [options]=\\\"paymentAccountOptions\\\"></ps-lookup-own-accounts>\\n\\n    </ps-container-panel>\\n  </ps-form-step>\\n</ps-template-stepper>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwZXJzb25hbGl6ZS1hY2NvdW50cy5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { PsAccountsListComponent } from 'src/app/commonBussinessSRC/psComponents/ps-accounts-list/ps-accounts-list.component';\nimport { IOptionsPsLookupOwnAccountsExposed } from 'src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.interfaces';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { PsCommonBusinessSettings } from 'src/app/commonBussinessSRC/psServices/models/ps-commonBusiness.settings';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { IOptionsPsContainerPanel, IOptionsTemplateStepper } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonService } from 'src/app/commonSRC/psServices/ps-common/ps-common.service';\nimport { OmniBasePage } from 'src/app/pages/omni-base/omni-base.page';\n\n@Component({\n  selector: 'app-personalize-accounts',\n  templateUrl: './personalize-accounts.page.html',\n  styleUrls: ['./personalize-accounts.page.scss'],\n})\nexport class PersonalizeAccountsPage extends OmniBasePage implements OnInit {\n  @ViewChild('generalAccountsRef') generalAccountsRef\n  @ViewChild('termAccountsRef') termAccountsRef\n  formGroup: FormGroup = new FormGroup({});\n  personalizeVO: any = {};\n  stepperOptions: IOptionsTemplateStepper = {\n    stepperName: 'cash_and_cheque_stepper',\n    isHorizontalStepper: true,\n    numberOfSteps: 1,\n    namesofSteps: ['cash_cheq_collection_step1'],\n    group: this.formGroup,\n    submitOptions: {\n      extraParams: {},\n      submitServiceUrl: PsCommonBusinessSettings.serviceUrl.updateUserInfoProfile,\n      group: this.formGroup,\n      preCallFunction: {\n        func(response) {\n          return new Promise<any>((resolve, reject) => {\n            resolve(this.executionClass.updateScreenVO(response));\n          });\n        },\n        executionClass: this,\n        params: [this]\n      },\n    },\n    requestObject: this.personalizeVO\n  };\n  panelOptionStep1: IOptionsPsContainerPanel = {\n    isExpandable: true,\n    labelKey: 'my_accounts_key',\n    iconName: 'document',\n    expanded: true\n  };\n\n\n  public generalAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'general_accounts_key',\n    placeHolder: 'select_general_accounts_key',\n    component: PsAccountsListComponent,\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: 'G',\n    fcName: 'generalAccounts',\n    accountType: 'G',\n    fromTo: 'to', //should be 'from' but kept as 'to' to avoid defaulting it by user default account in ps-lookup-own-accounts component\n    multiple: true,\n    requestObject: this.personalizeVO,\n    setAllAccountsAsSelecetd: true\n  };\n\n  public termAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'term_deposit_accounts_key',\n    placeHolder: 'select_term_deposit_accounts_key',\n    component: PsAccountsListComponent,\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: 'G',\n    fcName: 'termAccounts',\n    accountType: 'F',\n    fromTo: 'to', //should be 'from' but kept as 'to' to avoid defaulting it by user default account in ps-lookup-own-accounts component\n    multiple: true,\n    requestObject: this.personalizeVO,\n    setAllAccountsAsSelecetd: true\n  };\n\n  excludedTermAccounts = [];\n  excludedTermAccounts_lookupKey = [];\n  excludedGeneralAccounts = [];\n  excludedGeneralAccounts_lookupKey = [];\n  selectedAccountList = []\n  selectedTermAccountList = []\n\n  public transferAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'my_default_transfer_account_key',\n    placeHolder: 'select_my_default_transfer_account_key',\n    component: PsAccountsListComponent,\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: 'G',\n    fcName: 'defaultAccount',\n    accountType: 'G',\n    fromTo: 'from', //edited by Marina TP:#1433069 to be able to set the component's value based on user choice in ps-lookup-own-account component \n    requestObject: this.personalizeVO\n  };\n\n  public paymentAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'my_default_qr_code_payment_account_key',\n    placeHolder: 'select_my_default_qr_code_payment_account_key',\n    component: PsAccountsListComponent,\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: 'G',\n    fcName: 'defaultQrAccount',\n    accountType: 'G',\n    fromTo: 'from', //edited by Marina TP:#1433069 to be able to set the component's value based on user choice in ps-lookup-own-account component \n    purpose: 'QR', //added by Marina TP:#1433069 to be able to distinguish QR account to set it's value based on user default QR account in ps-lookup-own-account component \n    requestObject: this.personalizeVO\n  };\n  constructor(public commonService: PsCommonService,\n    public logger: LoggerService,\n    private router: Router,\n    private omniPull: OmniPullService) {\n    super();\n  }\n\n  ngOnInit() {\n    super.init();\n  }\n\n  //edited by Marina TP:#1433069; no need to update the excluded list on each delete as it will be updated once before\n  //submit depending on the chosen values\n  deleteAccount(account, type) {\n    // if (account && account !== undefined) {\n    //   if (type === 'G') {\n    //     if (this.excludedGeneralAccounts.find(item => item.accountNumber === account.accountNumber) === undefined) {\n    //       delete account['excludeType']  //added by Marina TP:#1433069 to avoid sending unnecessary property with account object\n    //       this.excludedGeneralAccounts.push(account);\n    //       this.excludedGeneralAccounts_lookupKey.push(account.lookupKey);\n    //     }\n    //   } else {\n    //     if (this.excludedTermAccounts.find(item => item.accountNumber === account.accountNumber) === undefined) {\n    //       delete account['excludeType'] //added by Marina TP:#1433069 to avoid sending unnecessary property with account object\n    //       this.excludedTermAccounts.push(account);\n    //       this.excludedTermAccounts_lookupKey.push(account.lookupKey);\n    //     }\n    //   }\n    // }\n\n  }\n  updateScreenVO(resp) {\n    this.filterExcludedAccounts();\n    this.updateSession();\n    // Added By MFawzy TP:#1433069 - Requested by OSRV team to allow the [updateUserInfo] service to save the excluded accounts in DB\n    this.personalizeVO['type'] = 'A';\n  }\n\n  //added by Marina TP:#1433069 to avoid not sending any excluded accounts in case user submitted without change his previous choices \n  filterExcludedAccounts() {\n    //loop on list of accounts and return the account that is not included in the screen VO values (chosen accounts)\n    this.excludedGeneralAccounts = this.generalAccountsRef.complexLookupOptions.listOfOptions.filter(\n      account => !this.personalizeVO[this.generalAccountOptions.fcName]?.includes(account));\n    this.excludedGeneralAccounts_lookupKey = this.excludedGeneralAccounts.map(account => account.lookupKey);\n    this.excludedTermAccounts = this.termAccountsRef.complexLookupOptions.listOfOptions.filter(\n      account => !this.personalizeVO[this.termAccountOptions.fcName]?.includes(account));\n    this.excludedTermAccounts_lookupKey = this.excludedTermAccounts.map(account => account.lookupKey);\n    //delete the chosen accounts from the screen VO because OSRV team saves the excluded ones not the chosen\n    this.deleteFromScreenVO([this.generalAccountOptions.fcName, this.generalAccountOptions.fcName + '_lookupKey', this.termAccountOptions.fcName, this.termAccountOptions.fcName + '_lookupKey'])\n    //remove escludedType property from accounts objects as it is not needed to be sent \n    this.personalizeVO['excludedGeneralAccounts'] = this.excludedGeneralAccounts.map(\n      account => { delete account.excludeType; return account });\n    this.personalizeVO['excludedGeneralAccounts_lookupKey'] = this.excludedGeneralAccounts_lookupKey;\n    this.personalizeVO['excludedTermAccounts'] = this.excludedTermAccounts.map(\n      account => { delete account.excludeType; return account });\n    this.personalizeVO['excludedTermAccounts_lookupKey'] = this.excludedTermAccounts_lookupKey;\n  }\n\n  //edited by Marina TP:#1433069; no need to update the excluded list on each change as it will be updated once before\n  //submit depending on the chosen values\n  onAccountsChanged(accounts, type) {\n    // if (accounts && accounts) {\n    //   this.selectedAccountList = accounts;\n    //   const excludedAccountList = type === 'G' ? this.excludedGeneralAccounts : this.excludedTermAccounts;\n    //   const excludedAccountList_lookupKey = type === 'G' ? this.excludedGeneralAccounts_lookupKey : this.excludedTermAccounts_lookupKey;\n\n    //   if (excludedAccountList.length !== 0) {\n    //     for (const acc of this.selectedAccountList) {\n    //       if (excludedAccountList.find(item => item.accountNumber === acc.accountNumber)) {\n    //         excludedAccountList.splice(excludedAccountList.findIndex(item => item.accountNumber === acc.accountNumber), 1);\n    //         excludedAccountList_lookupKey.splice(excludedAccountList_lookupKey.findIndex(item => item === acc.accountNumber), 1);\n    //       }\n    //     }\n    //   }\n    // }\n  }\n\n  updateSession() {\n    const personalization = this.commonService.session.getValueOf(CommonBussinessConstant.PERSONALIZATION_CO) || {}; //Modified by ghada, tp1583585 for handling the case when user have no personalization \n    personalization.defaultTransferAccKey = this.formGroup.controls[this.transferAccountOptions.fcName].value['personalizeKey']\n    personalization.defaultQrPaymentAccKey = this.formGroup.controls[this.paymentAccountOptions.fcName].value['personalizeKey']\n    this.commonService.session.remove(CommonBussinessConstant.PERSONALIZATION_CO);\n    this.commonService.session.append(CommonBussinessConstant.PERSONALIZATION_CO, personalization);\n  }\n\n  //Added by ghada, tp1582982 for cleaner code by removing duplicatations\n  deleteFromScreenVO(fcnamesList) {\n    for (const fcname of fcnamesList) {\n      delete this.personalizeVO[fcname];\n    }\n  }\n\n\n}\n"]}