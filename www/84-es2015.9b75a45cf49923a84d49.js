(window.webpackJsonp=window.webpackJsonp||[]).push([[84,339,340,341,342,343,344,345,346,347,348,349],{"41l2":function(t,e,o){"use strict";o.d(e,"a",function(){return l});var i=o("mrSG"),s=o("ZyuK"),n=o("iOQE"),r=o("DFXC"),a=o("Q0Ba"),p=o("fXoL");let l=(()=>{class t extends n.a{constructor(t,e,o){super(t,e),this.omniPull=o,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(t=>{if(t){const e=t.get(this.options.fcName);e&&e.LOV_TYPE_ID&&e.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var t;return Object(i.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(t=this.defaultDropDownLovOptions.listOfOptions)||void 0===t?void 0:t.length)){const t=this.commonProv.getElementValidations(this.options.fcName);if(t&&t.LOV_TYPE_ID&&(this.options.lovTypeId=t.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const t=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);t&&(this.options.lovAdminFilterParamName=t[this.options.lovAdminFilterParamName])}const e={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},o=yield this.omniPull.returnLovTypesValues(e).catch(t=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",t)});if(this.defaultDropDownLovOptions.listOfOptions=[],o&&o.length>0){for(const t of o){const e={itemValue:t.itemValue,description:t.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(t.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:t};e.selectedObj[this.options.fcName]=t.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(e)}this.showLovDropdown=!0}}})}selectDropDownChange(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(a.a),p.Rb(r.a),p.Rb(s.a))},t.\u0275cmp=p.Lb({type:t,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[p.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(p.Xb(0,"ps-select-dropdown",0),p.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),p.Wb()),2&t&&p.pc("id",e.id)("options",e.defaultDropDownLovOptions)},directives:[n.a],styles:[""]}),t})()},cCV5:function(t,e,o){"use strict";o.r(e),o.d(e,"IpoRequestPage",function(){return L});var i=o("3Pt+"),s=o("fOh1"),n=o("0CJq"),r=o("nipE"),a=o("DFXC"),p=o("zngb"),l=o("woXy"),c=o("Q0Ba"),u=o("gKqT"),h=o("fXoL"),m=o("kRg/"),d=o("uKCV"),f=o("sAFK"),O=o("+f2X"),v=o("BygU"),g=o("iHxC"),P=o("WAnK"),b=o("G/Qj"),y=o("ofXK"),_=o("b23T"),D=o("V0Fi"),C=o("41l2");let I=(()=>{class t extends C.a{constructor(t,e){super(t,e),this.defaultOptions={lovTypeId:D.a.LOV_TYPE_ID_IPO_PAYMENT_METHOD_AGENT}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.defaultOptions.labelKey=this.commonProv.translate("payment_method_key"),this.defaultOptions.placeHolder=this.commonProv.translate("select_payment_key")}onChangeLov(t){this.onPsChange.emit(t),this.commonProv.presentProfile.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(c.a),h.Rb(a.a))},t.\u0275cmp=h.Lb({type:t,selectors:[["ps-lov-payment-method-agent"]],inputs:{options:"options"},features:[h.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(h.Xb(0,"ps-dropdown-lov",0),h.fc("onPsChange",function(t){return e.onChangeLov(t)}),h.Wb()),2&t&&h.pc("id",e.id)("options",e.defaultOptions)},directives:[C.a],styles:[""]}),t})(),k=(()=>{class t extends C.a{constructor(t,e){super(t,e),this.defaultOptions={lovTypeId:D.a.LOV_TYPE_ID_IPO_PAYMENT_METHOD_INDIVIDUAL}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.defaultOptions.labelKey=this.commonProv.translate("payment_method_key"),this.defaultOptions.placeHolder=this.commonProv.translate("select_payment_key")}onChangeLov(t){this.onPsChange.emit(t),this.commonProv.presentProfile.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(c.a),h.Rb(a.a))},t.\u0275cmp=h.Lb({type:t,selectors:[["ps-lov-payment-method-individual"]],inputs:{options:"options"},features:[h.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(h.Xb(0,"ps-dropdown-lov",0),h.fc("onPsChange",function(t){return e.onChangeLov(t)}),h.Wb()),2&t&&h.pc("id",e.id)("options",e.defaultOptions)},directives:[C.a],styles:[""]}),t})();function w(t,e){if(1&t&&h.Sb(0,"ps-lov-payment-method-agent",10),2&t){const t=h.ic(2);h.pc("options",t.paymentMethodOptions)}}function N(t,e){if(1&t&&h.Sb(0,"ps-lov-payment-method-individual",10),2&t){const t=h.ic(2);h.pc("options",t.paymentMethodIndividualOptions)}}function F(t,e){if(1&t){const t=h.Yb();h.Xb(0,"ps-form-step",2),h.Xb(1,"ps-container-panel",3),h.Sb(2,"ps-container-lookup-option",4),h.Sb(3,"ps-dropdown-portfolio",5),h.Xb(4,"ps-input-numeric",6),h.fc("onPsChange",function(e){return h.Fc(t),h.ic().countChange(e)}),h.Wb(),h.Sb(5,"ps-complex-amount",7),h.Pc(6,w,1,1,"ps-lov-payment-method-agent",8),h.Pc(7,N,1,1,"ps-lov-payment-method-individual",8),h.Xb(8,"ps-file-upload-bs",9),h.fc("onPsFileSelect",function(e){return h.Fc(t),h.ic().onFileSelect(e)})("onPsFileDelete",function(e){return h.Fc(t),h.ic().onFileDeleted(e)}),h.Wb(),h.Wb(),h.Wb()}if(2&t){const t=h.ic();h.pc("id",t.stepperOptions.namesofSteps[0]),h.Fb(1),h.pc("options",t.panelOptions1Step1),h.Fb(1),h.pc("options",t.cardOptions)("itemCard",t.itemCard),h.Fb(1),h.pc("options",t.portfolioOptions),h.Fb(1),h.pc("options",t.sukukOptions),h.Fb(1),h.pc("options",t.sukukValueOptions),h.Fb(1),h.pc("ngIf",t.isUserAgent),h.Fb(1),h.pc("ngIf",!t.isUserAgent),h.Fb(1),h.pc("options",t.fileUploadOptions)}}let L=(()=>{class t extends u.OmniBasePage{constructor(t,e,o,n,r){super(),this.commonProv=t,this.loggerP=e,this.omniCommon=o,this.nav=n,this.omniCommonService=r,this.formData={},this.formGroup=new i.f({}),this.ipoRequestVO={},this.stepperOptions={stepperName:"ipo_req_stepper",isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["ipo_req_step1"],group:this.formGroup,submitOptions:{extraParams:{},submitServiceUrl:s.a.serviceUrl.securityRenewal,group:this.formGroup},requestObject:this.ipoRequestVO},this.termsAndConditionsOptions={checkBoxOptions:{group:this.formGroup,fcName:"checkboxConfirm",labelKey:"agree_terms_and_conditions_key"},htmlViewerOptions:{fileName:s.a.onlineRegistrationTermsAndConditionsFileName}},this.panelOptions1Step1={isExpandable:!0,labelKey:"portfolio_and_sukuk_key",iconName:"portfolio-and-sukuk",expanded:!0},this.panelOptions2Step2={isExpandable:!0,labelKey:"ipo_related_file_key",iconName:"ipo-file",expanded:!0},this.sukukOptions={fcName:"quantity",group:this.formGroup,min:1,labelKey:"number_of_sukuk_key",placeHolder:"number_of_sukuk_key"},this.portfolioOptions={fcName:"portfolioNumber",group:this.formGroup,labelKey:"portfolio_key",placeHolder:"select_portfolio_key"},this.paymentMethodOptions={fcName:"paymentMethodAgent",group:this.formGroup},this.paymentMethodIndividualOptions={fcName:"paymentMethodIndividual",group:this.formGroup},this.sukukValueOptions={currency:"",currenciesOptions:{placeHolder:"currency_key",group:this.formGroup,fcName:"currency"},amountOptions:{labelKey:"sukuk_value_key",fcName:"sukukValue",group:this.formGroup,type:"amount",decimalPoints:3}},this.fileCommentOptions={fcName:"fileComments",group:this.formGroup,labelKey:"enter_comments_on_uploaded_file_key",rows:"4"},this.fileLabel={labelKey:"ipo_file_upload_key",position:"floating"},this.fileUploadOptions={multiple:!0,fcName:"selectedFileData",group:this.formGroup},this.itemCard={},this.cardOptions={},this.noIpoSecuritiesListFound=!1}countChange(t){const e=this.formGroup.controls[this.sukukValueOptions.amountOptions.fcName];void 0!==e&&e.setValue(this.toIPORequestComponent.calculatedSukukPrice*t.newValue)}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup;const t=new r.a,e=this.commonProv.session.getValueOf(p.a.USERINFO),o=this.omniCommonService.common.session.getValueOf("WORKINGCIF");this.isUserAgent=!!this.omniCommon.isAgent();try{this.toIPORequestComponent=this.nav.getAllParams()}catch(i){this.loggerP.error("IPORequest Screen Error ! ",i)}setTimeout(()=>{void 0!==this.toIPORequestComponent?(this.formGroup.controls[this.sukukValueOptions.amountOptions.fcName].setValue(this.toIPORequestComponent.calculatedSukukPrice),this.formGroup.controls[this.sukukValueOptions.currenciesOptions.fcName].setValue(this.toIPORequestComponent.tradingCurrencyCode)):this.formGroup.controls[this.sukukValueOptions.amountOptions.fcName].setValue(0)},100),this.ipoRequestVO[this.sukukValueOptions.amountOptions.fcName]=this.toIPORequestComponent.calculatedSukukPrice,this.ipoRequestVO[this.sukukValueOptions.currenciesOptions.fcName]=this.toIPORequestComponent.tradingCurrencyCode,this.itemCard=void 0!==this.toIPORequestComponent?this.toIPORequestComponent:this.ipoRequestVO,this.cardOptions.formGroup=this.formGroup,this.cardOptions.labelsValueMap=this.navigationServices.getParamKey("labelsValueMap"),this.cardOptions.headerMap=this.navigationServices.getParamKey("headerMap"),this.cardOptions.showInitialCardValues=this.navigationServices.getParamKey("showInitialCardValues"),this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{securityCode1:this.toIPORequestComponent.securityCode1,securityCode2:this.toIPORequestComponent.securityCode2,workingCif:o||e.omniUserVO.CIF_NO,price:this.toIPORequestComponent.calculatedSukukPrice,tradeDate:t.transform(new Date,"YYYY-MM-DD")},!1,!0)}ionViewDidEnter(){super.ionViewDidEnter(),this.commonProv.applyDynScreenDisplay(p.a.ACTION_TYPE_MANDATORY,[this.sukukValueOptions.amountOptions.fcName],0),this.commonProv.applyDynScreenDisplay(p.a.ACTION_TYPE_READONLY,[this.sukukValueOptions.amountOptions.fcName],1),this.commonProv.applyDynScreenDisplay(p.a.ACTION_TYPE_READONLY,[this.sukukValueOptions.currenciesOptions.fcName],1)}onFileSelect(t){this.uploadedFiles=[],this.uploadedFiles=t,this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{uploadedFiles:this.uploadedFiles},!1,!0)}onFileDeleted(t){for(const e of this.uploadedFiles)if(t.selectedFile.name===e.selectedFile.name){this.uploadedFiles.splice(this.uploadedFiles.indexOf(e),1);break}this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{uploadedFiles:this.uploadedFiles},!1,!0)}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(c.a),h.Rb(a.a),h.Rb(n.a),h.Rb(l.a),h.Rb(n.a))},t.\u0275cmp=h.Lb({type:t,selectors:[["app-ipo-request"]],features:[h.Cb],decls:2,vars:3,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","ipo_req_panel",3,"options"],[3,"options","itemCard"],["id","portfolio_id",3,"options"],["id","sukuk_count",3,"options","onPsChange"],["id","sukuk_value",3,"options"],["id","payment_method",3,"options",4,"ngIf"],["id","ps-file-upload",3,"options","onPsFileSelect","onPsFileDelete"],["id","payment_method",3,"options"]],template:function(t,e){1&t&&(h.Xb(0,"ps-template-stepper",0),h.Pc(1,F,9,10,"ps-form-step",1),h.Wb()),2&t&&(h.pc("options",e.stepperOptions)("id",e.stepperOptions.stepperName),h.Fb(1),h.pc("psStep","step1"))},directives:[m.a,d.a,f.a,O.a,v.a,g.a,P.a,b.a,y.o,_.a,I,k],styles:[""]}),t})()},gKqT:function(t,e,o){"use strict";o.r(e),o.d(e,"OmniBasePage",function(){return u});var i=o("oS+F"),s=o("zngb"),n=o("QZhd"),r=o("woXy"),a=o("qEF5"),p=o("Q0Ba"),l=o("lE2x"),c=o("fXoL");let u=(()=>{class t{constructor(){this.isPageDisabled=!1,this.commonProv=a.a.injectionHandler(p.a),this.navigationServices=a.a.injectionHandler(r.a)}init(){this.currentOperID=n.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();const t=this.navigationServices.getAllParams(),e={};t&&!0===t.readOnlypage?(e.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(s.a.FORM_READONLY,e)):this.customizationMap&&(e.IS_READONLY=0,this.customizationMap.set(s.a.FORM_READONLY,e)),this.screenTranslationOperIds=l.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?l.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}ngOnInit(){this.init()}ionViewDidEnter(){this.viewDidEnter()}ionViewWillLeave(){this.viewWillLeave()}ionViewWillEnter(){this.viewWillEnter()}viewWillEnter(){}disableForm(t){if(void 0!==t&&this.customizationMap){const e=this.customizationMap.get(s.a.FORM_READONLY);e&&1===e.IS_READONLY&&"DISABLED"!=t.status&&(t.disable(),Object.keys(t.controls).forEach(t=>{this.commonProv.applyDynScreenDisplay(s.a.ACTION_TYPE_READONLY,[t],1)}))}}viewDidEnter(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),i.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}viewWillLeave(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,willLeave:!0})}ngAfterViewChecked(){this.isPageDisabled||setTimeout(()=>{this.disableForm(this.baseFormGroup),this.isPageDisabled=!0},300)}getScreenTranslations(t){const e=t||2222,o=n.a.activeLanguge?n.a.activeLanguge:"EN";e&&o&&this.commonProv.language.getOperTranslation(o,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(t,e){2&t&&c.Hb(e.psClass)},decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()},iHxC:function(t,e,o){"use strict";o.d(e,"a",function(){return p});var i=o("ZyuK"),s=o("iOQE"),n=o("DFXC"),r=o("Q0Ba"),a=o("fXoL");let p=(()=>{class t extends s.a{constructor(t,e,o){super(t,e),this.omniPull=o,this.defaultSelectOptions={labelKey:"portfolio_key",placeHolder:"portfolio_key"},this.portfolio=[]}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.getPortfolio()}getPortfolio(){this.omniPull.returnPortfolioList({}).then(t=>{if(this.portfolio=[],t&&null!=t.gridModel&&t.gridModel.length>0)for(let e=0;e<t.gridModel.length;e++)this.portfolio.push({itemValue:t.gridModel[e].portfolioSeq,description:t.gridModel[e].longName,selectedObj:t.gridModel[e]});else this.logger.warn(t,"empty response");this.defaultSelectOptions.listOfOptions=this.portfolio}).catch(t=>{this.logger.log(t)})}onPortfolioChange(t){this.loggerP.log("onPortfolioChange",t),this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(r.a),a.Rb(n.a),a.Rb(i.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-dropdown-portfolio"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(a.Xb(0,"ps-select-dropdown",0),a.fc("onPsChange",function(t){return e.onPortfolioChange(t)}),a.Wb()),2&t&&a.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[s.a],styles:[""]}),t})()}}]);