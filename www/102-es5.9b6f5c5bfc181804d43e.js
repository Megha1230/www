!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,o,n,r){var i=t(d(1&r?e.prototype:e),o,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,o,t){var r=n(e,o);if(r){var i=Object.getOwnPropertyDescriptor(r,o);return i.get?i.get.call(arguments.length<3?e:t):i.value}}).apply(null,arguments)}function n(e,o){for(;!{}.hasOwnProperty.call(e,o)&&null!==(e=d(e)););return e}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,o,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function c(t,n,r,s){var c=n&&n.prototype instanceof u?n:u,l=Object.create(c.prototype);return i(l,"_invoke",function(t,n,r){var i,s,c,u=0,l=r||[],p=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(o,t){return i=o,s=0,c=e,m.n=t,a}};function f(t,n){for(s=t,c=n,o=0;!p&&u&&!r&&o<l.length;o++){var r,i=l[o],f=m.p,h=i[2];t>3?(r=h===n)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=t<2&&f<i[1])?(s=0,m.v=n,m.n=i[1]):f<h&&(r=t<3||i[0]>n||n>h)&&(i[4]=t,i[5]=n,m.n=h,s=0))}if(r||t>1)return a;throw p=!0,n}return function(r,l,h){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,h),s=l,c=h;(o=s<2?e:c)||!p;){i||(s?s<3?(s>1&&(m.n=-1),f(s,c)):m.n=c:m.v=c);try{if(u=2,i){if(s||(r="next"),o=i[r]){if(!(o=o.call(i,c)))throw TypeError("iterator result is not an object");if(!o.done)return o;c=o.value,s<2&&(s=0)}else 1===s&&(o=i.return)&&o.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=e}else if((o=(p=m.n<0)?c:t.call(n,m))!==a)break}catch(o){i=e,s=1,c=o}finally{u=1}}return{value:o,done:p}}}(t,r,s),!0),l}var a={};function u(){}function l(){}function p(){}o=Object.getPrototypeOf;var m=[][n]?o(o([][n]())):(i(o={},n,function(){return this}),o),f=p.prototype=u.prototype=Object.create(m);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,s,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=p,i(f,"constructor",p),i(p,"constructor",l),l.displayName="GeneratorFunction",i(p,s,"GeneratorFunction"),i(f),i(f,s,"Generator"),i(f,n,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:h}})()}function i(e,o,t,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(i=function(e,o,t,n){function s(o,t){i(e,o,function(e){return this._invoke(o,t,e)})}o?r?r(e,o,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[o]=t:(s("next",0),s("throw",1),s("return",2))})(e,o,t,n)}function s(e,o){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=c(e))||o&&e&&"number"==typeof e.length){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function c(e,o){if(e){if("string"==typeof e)return a(e,o);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,o):void 0}}function a(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=Array(o);t<o;t++)n[t]=e[t];return n}function u(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function l(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function p(e,o,t){return o&&l(e.prototype,o),t&&l(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var o=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,o||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==typeof o?o:o+""}function f(e,o,t){return o=d(o),function(e,o){if(o&&("object"==typeof o||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(e,y()?Reflect.construct(o,t||[],d(e).constructor):o.apply(e,t))}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),o&&b(e,o)}function b(e,o){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e})(e,o)}(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"41l2":function(e,o,t){"use strict";t.d(o,"a",function(){return h});var n=t("mrSG"),i=t("ZyuK"),c=t("iOQE"),a=t("DFXC"),l=t("Q0Ba"),m=t("fXoL"),h=function(){var e=function(e){function o(e,t,n){var r;return u(this,o),(r=f(this,o,[e,t])).omniPull=n,r.showLovDropdown=!1,r.defaultDropDownLovOptions={isLOVDropdown:!0},r}return O(o,e),p(o,[{key:"ngOnInit",value:function(){var e=this;this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(function(o){if(o){var t=o.get(e.options.fcName);t&&t.LOV_TYPE_ID&&t.LOV_TYPE_ID!==e.options.lovTypeId&&e.loadLovDropDown()}})}},{key:"loadLovDropDown",value:function(){var e;return Object(n.b)(this,void 0,void 0,r().m(function o(){var t,n,i,c,a,u,l,p,m=this;return r().w(function(o){for(;;)switch(o.n){case 0:if(this.defaultDropDownLovOptions.listOfOptions&&0!=(null===(e=this.defaultDropDownLovOptions.listOfOptions)||void 0===e?void 0:e.length)){o.n=5;break}if((t=this.commonProv.getElementValidations(this.options.fcName))&&t.LOV_TYPE_ID&&(this.options.lovTypeId=t.LOV_TYPE_ID),null!=this.options.lovTypeId&&void 0!==this.options.lovTypeId){o.n=1;break}return o.a(2,void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov"));case 1:if(!this.options.lovAdminFilterParamName){o.n=3;break}return o.n=2,this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);case 2:(n=o.v)&&(this.options.lovAdminFilterParamName=n[this.options.lovAdminFilterParamName]);case 3:return i={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},o.n=4,this.omniPull.returnLovTypesValues(i).catch(function(e){m.showLovDropdown=!1,m.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",e)});case 4:if(c=o.v,this.defaultDropDownLovOptions.listOfOptions=[],c&&c.length>0){a=s(c);try{for(a.s();!(u=a.n()).done;)l=u.value,(p={itemValue:l.itemValue,description:l.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(l.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:l}).selectedObj[this.options.fcName]=l.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(p)}catch(r){a.e(r)}finally{a.f()}this.showLovDropdown=!0}case 5:return o.a(2)}},o,this)}))}},{key:"selectDropDownChange",value:function(e){this.onPsChange.emit(e)}}])}(c.a);return e.\u0275fac=function(o){return new(o||e)(m.Rb(l.a),m.Rb(a.a),m.Rb(i.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[m.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,o){1&e&&(m.Xb(0,"ps-select-dropdown",0),m.fc("onPsChange",function(e){return o.selectDropDownChange(e)}),m.Wb()),2&e&&m.pc("id",o.id)("options",o.defaultDropDownLovOptions)},directives:[c.a],styles:[""]}),e}()},"Q5h/":function(e,t,n){"use strict";n.r(t),n.d(t,"BreakTermDepositAccountPage",function(){return L});var r,i,s=n("3Pt+"),c=n("OVQh"),a=n("/M2N"),l=n("V0Fi"),m=n("fOh1"),y=n("ZyuK"),d=n("f42Q"),b=n("DFXC"),v=n("zngb"),g=n("qEF5"),k=n("woXy"),_=n("Q0Ba"),A=n("gKqT"),T=n("fXoL"),w=n("kRg/"),N=n("sAFK"),P=n("+f2X"),C=n("VEWP"),x=n("41l2"),D=((i=function(e){function o(e,t){var n;return u(this,o),(n=f(this,o,[e,t])).defaultOptions={labelKey:"breakage_type_key",placeHolder:"select_breakage_type_key",lovTypeId:l.a.LOV_TYPE_ID_BREAKAGE_TYPE},n}return O(o,e),p(o,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}},{key:"onChangeLov",value:function(e){this.onPsChange.emit(e)}}])}(x.a)).\u0275fac=function(e){return new(e||i)(T.Rb(_.a),T.Rb(b.a))},i.\u0275cmp=T.Lb({type:i,selectors:[["ps-lov-breakage-type"]],inputs:{options:"options"},features:[T.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,o){1&e&&(T.Xb(0,"ps-dropdown-lov",0),T.fc("onPsChange",function(e){return o.onChangeLov(e)}),T.Wb()),2&e&&T.pc("id",o.id)("options",o.defaultOptions)},directives:[x.a],styles:[""]}),i),L=((r=function(e){function t(e,o,n,r,i){var a;return u(this,t),(a=f(this,t)).commonProv=e,a.navService=o,a.loggerP=n,a.eventEmitterService=r,a.omniPull=i,a.formGroup=new s.f({}),a.breakTermDepositVO={},a.stepperOptions={isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["break_term_deposit1"],group:a.formGroup,requestObject:a.breakTermDepositVO,submitOptions:{extraParams:{},submitServiceUrl:m.a.serviceUrl.accountOpeningEndPoint,group:a.formGroup,postCallFunction:{func:function(e){var o=this;return new Promise(function(t,n){t(o.executionClass.serviceRes(e))})},params:[h(a)],executionClass:h(a)}}},a.panelOptionsStep1={isExpandable:!0,labelKey:"account_details_key",iconName:"document",expanded:!0},a.panelOptionsStep2={isExpandable:!0,labelKey:"break_account_details_key",iconName:"document",expanded:!1},a.filterDateOptions={fcName:"date",group:a.formGroup,labelKey:"date_key",placeHolder:"select_date_key"},a.transferToOptions={labelKey:"transfer_to_key",placeHolder:"select_transfer_to_key",component:c.a,group:a.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"toAccount",accountType:"G",fromTo:"to",requestObject:a.breakTermDepositVO},a.psComplexAmountOptions={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:a.formGroup,fcName:"currency"},amountOptions:{labelKey:"breakage_amount_key",placeHolder:"enter_breakage_amount_key",fcName:"inputAmount",group:a.formGroup,type:"amount",decimalPoints:3}},a.psComplexAmountOptions1={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:a.formGroup,fcName:"accountCurrency"},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"amount",group:a.formGroup,type:"amount",decimalPoints:3}},a.breakTypeOptions={fcName:"brekageType",group:a.formGroup,labelKey:"breakage_type_key",placeHolder:"select_breakage_type_key"},a.comAmountOptions={currency:"",currenciesOptions:{placeHolder:"currency_key",group:a.formGroup,fcName:"currency"},amountOptions:{labelKey:"amount",fcName:"amount",group:a.formGroup,type:"amount",decimalPoints:3}},a.fullBreakOptions={labelKey:"fuller_partial_break_key",placeHolder:"fuller_partial_break_key",group:a.formGroup,fcName:"fullerOrPartialBreakToggle",psClass:"toggleColor"},a.showAmt=!0,a.accountTypesOptions={accountTypesOptions:{allowedAccountType:v.a.AllowedFixedMaturityAccountsTypes,accountCategory:v.a.ACC_TYPE_T,group:a.formGroup,fcName:"accountTypes"},periodicity:{group:a.formGroup,fcName:"periodiCity"},minimumBalance:{group:a.formGroup,fcName:"minBalance"},group:a.formGroup,requestObject:a.breakTermDepositVO},a.lblPeriodicityOptions={labelKey:"Term: 5 Years"},a.profitRateOptions={placeHolder:"profit_rate_key",labelKey:"profit_rate_key",group:a.formGroup,fcName:"profitRate"},a.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:c.a,currency:"USD",group:a.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"transferTo",accountType:"G",fromTo:"from",requestObject:a.breakTermDepositVO},a.maturityTransferOptions={labelKey:"on_maturity_transfer_balance_to_key",placeHolder:"select_maturity_account_key",component:c.a,group:a.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"maturityAccount",accountType:"G",fromTo:"to",requestObject:a.breakTermDepositVO},a.profitAccOptions={labelKey:"post_profit_to_key",placeHolder:"select_post_profit_to_key",component:c.a,currency:"USD",group:a.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"profitAccount",accountType:"G",fromTo:"to",requestObject:a.breakTermDepositVO},a.mainOptions={toggleOptions:{labelKey:"renew_key",placeHolder:"renew_key",group:a.formGroup,fcName:"renew",psClass:"toggleColor"},toggleProfitOptions:{labelKey:"post_profit_to_same_account_key",placeHolder:"post_profit_to_same_account_key",group:a.formGroup,fcName:"renewWithSame",psClass:"toggleColor"}},a.instructMsgLabelOptions={labelKey:"Renewal Instructions: New Balance Renewed in Same Account",group:a.formGroup,fcName:"instrcutions"},a.actionImageOptions={imageName:"account_Deactivation_Remark_icon.png"},a.termsAccountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:c.a,group:a.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"F",fromTo:"from",requestObject:a.breakTermDepositVO},a.complexExchangeOptions={editableMode:!1,showToCurrencyOptions:!0,fromAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromCurrency",group:a.formGroup},amountOptions:{labelKey:"breakage_amount_key",placeHolder:"breakage_amount_key",fcName:"transactionAmount",group:a.formGroup,decimalPoints:3,revertToOldValue:!1},requestObject:a.breakTermDepositVO},toAmountOptions:{currency:"",currenciesOptions:{placeHolder:"exchange_currency_key",labelKey:"exchange_currency_key",fcName:"toCurrency",group:a.formGroup},amountOptions:{labelKey:"exchange_amount_key",placeHolder:"enter_amount_key",fcName:"toAmount",group:a.formGroup,decimalPoints:2},requestObject:a.breakTermDepositVO},requestObject:a.breakTermDepositVO,group:a.formGroup},a.enablePeriodicity=!1,a.showLabel=!1,a.enableMaturityTransfer=!1,a.enableProfit=!1,a}return O(t,e),p(t,[{key:"ngOnInit",value:function(){o(t,"init",this,3)([]),this.baseFormGroup=this.formGroup,this.cifInfo=this.commonProv.session.getValueOf(v.a.USERINFO),this.commonProv.copyObject(this.breakTermDepositVO,this.navService.getAllParams()?this.navService.getAllParams().ScreenVO?this.navService.getAllParams().ScreenVO:this.navService.getAllParams():{}),this.breakTermDepositVO&&this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{branch:this.cifInfo.customerInfoCO?this.cifInfo.customerInfoCO.branchCode:""},!1,!0)}},{key:"ionViewDidEnter",value:function(){o(t,"ionViewDidEnter",this,3)([]),this.commonProv.applyDynScreenDisplay(v.a.ACTION_TYPE_READONLY,[this.termsAccountListOptions.fcName,this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.amountOptions.fcName],1),this.commonProv.addDefaultValidator(this.formGroup,this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,this.commonProv.prepareValidation(!1,null,null,null,null,null,null,null,[this.custAmountValidator()]))}},{key:"ngAfterViewInit",value:function(){this.commonProv.setValInsideNestedObj(this.termsAccountListOptions.fcName,this.breakTermDepositVO.additionalRef,this.breakTermDepositVO),this.commonProv.setValInsideNestedObj(this.termsAccountListOptions.fcName+"_lookupKey",this.breakTermDepositVO.additionalRef,this.breakTermDepositVO),this.breakTermDepositVO[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=this.breakTermDepositVO.currency,this.complexExchangeOptions.fromAmountOptions.currencyCode=Number(this.breakTermDepositVO.currency)}},{key:"onBreakageAmountChange",value:function(e){}},{key:"onchange",value:function(e){var o=this;this.availableBal=this.breakTermDepositVO.availableBalance.split(" "),e&&(e.itemValue==l.a.FULL_BREAKAGE_TERM_DEPOSIT?(this.commonProv.setValInsideNestedObj(this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,parseFloat(this.availableBal[0].replace(/,/g,"")),this.breakTermDepositVO),setTimeout(function(){o.commonProv.applyDynScreenDisplay(v.a.ACTION_TYPE_READONLY,[o.complexExchangeOptions.fromAmountOptions.amountOptions.fcName],1)},1)):e.itemValue==l.a.PARTIAL_BREAKAGE_TERM_DEPOSIT&&(this.commonProv.setValInsideNestedObj(this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName,null,this.breakTermDepositVO),this.commonProv.applyDynScreenDisplay(v.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.amountOptions.fcName],0)))}},{key:"onTransferTo",value:function(e){e&&(this.breakTermDepositVO[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=e.currency.toString(),this.complexExchangeOptions.toAmountOptions.currencyCode=Number(e.currency),this.showExchangeRate())}},{key:"showExchangeRate",value:function(){this.exchangeChild.showToCurrency()}},{key:"custAmountValidator",value:function(){var e=this;return function(o){return e.checkFieldControlsValidity(o)?null:(g.a.presentInfoAlert(e.commonProv.translate("partial_break_amount_cannot_be_greater_or_equal_to_account_balance_key")),e.formGroup.controls[e.complexExchangeOptions.fromAmountOptions.amountOptions.fcName].setValue(null),{"equal or greater than balance":""})}}},{key:"checkFieldControlsValidity",value:function(e){return!(!g.a.isEmptyOrNull(this.availableBal)&&null!=(null==e?void 0:e.value)&&""!=(null==e?void 0:e.value)&&e.value>=this.availableBal)}}])}(A.OmniBasePage)).\u0275fac=function(e){return new(e||r)(T.Rb(_.a),T.Rb(k.a),T.Rb(b.a),T.Rb(d.a),T.Rb(y.a))},r.\u0275cmp=T.Lb({type:r,selectors:[["app-break-term-deposit-account"]],viewQuery:function(e,o){var t;1&e&&T.Wc(a.a,1),2&e&&T.Bc(t=T.gc())&&(o.exchangeChild=t.first)},features:[T.Cb],decls:8,vars:7,consts:[[3,"options"],["step1",""],["id","break_term_panel1",3,"options"],["id","break_term_panel2",3,"options"],["id","breakageType",3,"options","onPsChange"],["id","'transferTo'+ id",3,"options","onAccountChange"],["id","exchangeComponent",3,"options","onPsChange"]],template:function(e,o){1&e&&(T.Xb(0,"ps-template-stepper",0),T.Xb(1,"ps-form-step",1),T.Xb(2,"ps-container-panel",2),T.Sb(3,"ps-lookup-own-accounts",0),T.Wb(),T.Xb(4,"ps-container-panel",3),T.Xb(5,"ps-lov-breakage-type",4),T.fc("onPsChange",function(e){return o.onchange(e)}),T.Wb(),T.Xb(6,"ps-lookup-own-accounts",5),T.fc("onAccountChange",function(e){return o.onTransferTo(e)}),T.Wb(),T.Xb(7,"ps-complex-exchange",6),T.fc("onPsChange",function(e){return o.onBreakageAmountChange(e)}),T.Wb(),T.Wb(),T.Wb(),T.Wb()),2&e&&(T.pc("options",o.stepperOptions),T.Fb(2),T.pc("options",o.panelOptionsStep1),T.Fb(1),T.pc("options",o.termsAccountListOptions),T.Fb(1),T.pc("options",o.panelOptionsStep2),T.Fb(1),T.pc("options",o.breakTypeOptions),T.Fb(1),T.pc("options",o.transferToOptions),T.Fb(1),T.pc("options",o.complexExchangeOptions))},directives:[w.a,N.a,P.a,C.a,D,a.a],styles:[".test[_ngcontent-%COMP%] {\n  text-align: center;\n}"]}),r)},VEWP:function(o,t,n){"use strict";n.d(t,"a",function(){return A});var i=n("mrSG"),c=n("fXoL"),a=n("4lGw"),l=n("V0Fi"),m=n("ZyuK"),h=n("ZF3V"),y=n("EIUR"),d=n("DFXC"),b=n("zngb"),v=n("Q0Ba"),g=n("Isd1"),k=n("L0og"),_=["complexLookupComponentObj"],A=function(){var o=function(o){function t(e,o,n,r){var i;return u(this,t),(i=f(this,t,[e,o])).commonService=e,i.omniPull=n,i.accountsService=r,i.options={fromTo:"",requestObject:null},i.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!i.options.multiple&&i.options.multiple},i.onAccountChange=new c.o,i.onAccountDeleted=new c.o,i.labelValuesMap=new Map,i.psCurrency=new y.a,i.labelOptions={},i.allType=!1,i}return O(t,o),p(t,[{key:"ngOnInit",value:function(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}},{key:"ngOnChanges",value:function(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}},{key:"loadAccounts",value:function(e){return Object(i.b)(this,void 0,void 0,r().m(function o(){var t,n;return r().w(function(o){for(;;)switch(o.n){case 0:if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0!==this.options.fromTo&&""!==this.options.fromTo){o.n=1;break}return o.a(2,void this.logger.error("lookup_from_to_missing_key"));case 1:t=this.commonService.session.getValueOf(b.a.USERINFO),n=this.prepareRequestData(t),this.returnAccountList(n);case 2:return o.a(2)}},o,this)}))}},{key:"returnAccountList",value:function(o){return Object(i.b)(this,void 0,void 0,r().m(function t(){var n,i,s,c,a=this;return r().w(function(t){for(;;)switch(t.n){case 0:return n=this.commonProv.session.getValueOf(l.a.PERSONALIZATION_CO),this.complexLookupOptions.listOfOptions=void 0,t.n=1,this.omniPull.returnAccounts(o).catch(function(e){a.complexLookupOptions.listOfOptions=[],a.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});case 1:if(!((i=t.v)&&i.gridModel.length>0)){t.n=4;break}if(!this.allType){t.n=3;break}return o.accountType="F",o.permittedGls="F",t.n=2,this.omniPull.returnAccounts(o).catch(function(e){a.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});case 2:(s=t.v)&&s.gridModel.length>0&&(i.gridModel=[].concat(e(i.gridModel),e(s.gridModel)));case 3:this.options.listOfAccounts=i.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(e){return e.accountNumber!==a.options.accountNumber})),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(e){return e.accountNumber!==a.options.accountNumber}))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map(function(e,o){return e.rowIndex=o}),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)&&(c="QR"===this.options.purpose?null==n?void 0:n.defaultQrPaymentAccKey:null==n?void 0:n.defaultTransferAccKey,this.complexLookupOptions.listOfOptions.map(function(e){e.personalizeKey&&e.personalizeKey===c&&(a.common.setValInsideNestedObj(a.options.fcName,e.lookupKey,a.options.requestObject),a.common.setValInsideNestedObj(a.options.fcName+"_lookupKey",e.lookupKey,a.options.requestObject))})),t.n=5;break;case 4:this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[];case 5:return t.a(2)}},t,this)}))}},{key:"populateCustomAccounts",value:function(e){var o,t=[],n=s(e);try{for(n.s();!(o=n.n()).done;){var r=o.value,i={briefNameEnglish:r.briefNameEnglish,cifShortNameEnglish:r.cifShortNameEnglish,accountNumber:r.accountNumber,balance:this.psCurrency.transform(null==r.balance?"0.0":r.balance,r.currencyDecimalPoints)+" "+(r.currencyBriefName||r.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==r.availableBalance?"0.0":r.availableBalance,r.currencyDecimalPoints)+" "+(r.currencyBriefName||r.currencyBriefNameEnglish),currencyBriefName:r.currencyBriefName||r.currencyBriefNameEnglish,currencyBriefNameEnglish:r.currencyBriefNameEnglish,currency:r.currency,accountTypeDesc:r.accountTypeDesc,additionalRef:r.additionalRef,ibanAccNo:r.ibanAccNo,accGl:r.accGl,serialNo:r.serialNo,branch:r.branch,cif:r.cif,formattedAccount:this.accountsService.returnFormattedAccount(r).formattedAccount,personalizeKey:r.personalizeKey,nickName:r.nickName,briefName:r.briefName,lookupKey:r.additionalRef,branchDescription:r.branchDescription?r.branchDescription:"",generalLedgerBriefNameEng:r.generalLedgerBriefNameEng?r.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:r.statusDescription,statusCode:r.status,accountFormat:this.accountsService.returnFormattedAccount(r).accountFormat};this.options.multiple&&(i.excludeType=r.excludeType),t.push(i)}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"prepareRequestData",value:function(e){var o={};if(e&&e.omniUserVO&&(o={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(o={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(o.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(o.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(o.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(o.endUserId=this.options.endUserId),null!=this.options.fromCurrency?o.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(o.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)o.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{var t="";for(var n in this.options.accountAllowedCurrencies)t+=this.options.accountAllowedCurrencies[n]+",";t=t.slice(0,t.lastIndexOf(",")),o.accountAllowedCurrencies=t}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)o.accountAllowedTypes=this.options.accountAllowedTypes;else{var r="";for(var i in this.options.accountAllowedTypes)r+=this.options.accountAllowedTypes[i]+",";r=r.slice(0,r.lastIndexOf(",")),o.accountAllowedTypes=r}return o}},{key:"fetchAccountBasedOnCurrency",value:function(e){return this.options.listOfAccounts}},{key:"onChange",value:function(e){this.logger.log(e)}},{key:"populateOwnAccountMap",value:function(){var e,o,t;e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},o={key:"currentBalance",value:"0.0",isEdit:!1},t={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",o),this.labelValuesMap.set("available_balance_key",t)}},{key:"onChangeItem",value:function(e){this.onAccountChange.emit(e)}},{key:"onDeleteItem",value:function(e){e&&this.onAccountDeleted.emit(e)}},{key:"handleMultipleSelection",value:function(){var e=this,o=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(function(o){return e.options.requestObject[e.options.fcName].some(function(e){return e.accountNumber==o.accountNumber})}):[];this.complexLookupOptions.selectedItems=o.filter(function(o){return e.options.setAllAccountsAsSelecetd&&(!o.excludeType||!(o.excludeType.includes(l.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||o.excludeType.includes(l.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!e.options.setAllAccountsAsSelecetd}).map(function(e){return Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})}),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}},{key:"removeAccount",value:function(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(function(o){return e.accountNumber!=o.accountNumber}):[])}},{key:"reset",value:function(){this.complexLookupComponentObj.resetLookUp()}},{key:"refreshAcounts",value:function(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}])}(h.a);return o.\u0275fac=function(e){return new(e||o)(c.Rb(v.a),c.Rb(d.a),c.Rb(m.a),c.Rb(a.a))},o.\u0275cmp=c.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,o){var t;(1&e&&c.Wc(_,1),2&e)&&(c.Bc(t=c.gc())&&(o.complexLookupComponentObj=t.first))},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[c.Cb,c.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,o){1&e&&(c.Xb(0,"ps-container-complex",0),c.Xb(1,"ps-complex-lookup",1,2),c.fc("changeItem",function(e){return o.onChangeItem(e)})("onDeleteItem",function(e){return o.onDeleteItem(e)}),c.Wb(),c.Wb()),2&e&&(c.Fb(1),c.pc("id",o.id)("options",o.complexLookupOptions))},directives:[g.a,k.a],styles:[""]}),o}()}}])}();