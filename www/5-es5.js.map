{"version":3,"sources":["webpack:///src/app/commonBussinessSRC/psServices/accounts/accounts.service.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.scss","webpack:///src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.html","webpack:///src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.module.ts"],"names":["AccountsService","omniPull","logger","getAccountAsIBAN","accountAsIBAN","undefined","getParamValOf","then","res","AccountsAsIBAN","err","log","returnFormattedAccount","account","formattedAccount","accountFormat","ibanAccNo","additionalRef","branch","currency","accGl","cif","serialNo","accountNumber","providedIn","PsLookupOwnAccountsComponent","commonService","accountsService","options","fromTo","requestObject","complexLookupOptions","notFoundMessage","multiple","onAccountChange","onAccountDeleted","labelValuesMap","Map","psCurrency","labelOptions","allType","ngOnInit","loadAccounts","labelKey","title","subTitle","labelsValueMap","commonProv","copyObject","ngOnChanges","change","placeHolder","reloadOptions","listOfAccounts","error","cifInfo","session","getValueOf","USERINFO","requestData","prepareRequestData","returnAccountList","personalizationCO","PERSONALIZATION_CO","listOfOptions","returnAccounts","result","gridModel","length","accountType","permittedGls","result1","filter","fetchAccountBasedOnCurrency","populateCustomAccounts","map","element","index","allAccounts","Object","assign","selectedItems","handleMultipleSelection","fcName","defaultByPersonalizedAcc","personalizationKeyToCheck","purpose","defaultQrPaymentAccKey","defaultTransferAccKey","personalizeKey","common","setValInsideNestedObj","lookupKey","accountsList","iterator","briefNameEnglish","cifShortNameEnglish","balance","transform","currencyDecimalPoints","currencyBriefName","currencyBriefNameEnglish","availableBalance","accountTypeDesc","nickName","briefName","branchDescription","generalLedgerBriefNameEng","previewProperty","status","statusDescription","statusCode","excludeType","push","omniUserVO","userCifNo","CIF_NO","type","queryParams","commonParametersList","glTypes","endUserId","fromCurrency","toCurrency","accountAllowedCurrencies","temp","val","value","slice","lastIndexOf","accountAllowedTypes","onChange","event","populateOwnAccountMap","accountNumberMap","accountBalanceMap","accountAvailableBalanceMap","key","isEdit","set","onChangeItem","emit","onDeleteItem","accountList","setAllAccountsAsSelecetd","item","some","item1","includes","GENERAL_ACCOUNT_EXCLUDE_TYPE","TERM_ACCOUNT_EXCLUDE_TYPE","itemLookup","complexLookupComponentObj","setSelectedItems","removeAccount","reset","resetLookUp","refreshAcounts","accountOptions","selector","template","PsLookupOwnAccountComponentModule","declarations","imports","exports","entryComponents","schemas"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;;;;UAMaA,eAAe;AAG1B,iCAAoBC,QAApB,EAAuDC,MAAvD,EAA8E;AAAA;;AAA1D,eAAAD,QAAA,GAAAA,QAAA;AAAmC,eAAAC,MAAA,GAAAA,MAAA;AACrD,eAAKC,gBAAL;AACD;;AALyB;AAAA;AAAA,iBAOnB,SAAAA,gBAAgB,GAAG;AAAA;;AACxB,gBAAI,KAAKC,aAAL,KAAuBC,SAA3B,EAAsC;AACpC,mBAAKJ,QAAL,CAAcK,aAAd,CAA4B,gBAA5B,EAA8CC,IAA9C,CAAmD,UAAAC,GAAG,EAAI;AACxD,qBAAI,CAACJ,aAAL,GAAqBI,GAAG,CAACC,cAAzB;AACD,eAFD,WAES,UAAAC,GAAG;AAAA,uBAAI,KAAI,CAACR,MAAL,CAAYS,GAAZ,CAAgBD,GAAhB,CAAJ;AAAA,eAFZ;AAGD;AACF;AAbyB;AAAA;AAAA,iBAenB,SAAAE,sBAAsB,CAACC,OAAD,EAA4B;AACvD,gBAAIC,gBAAJ;AACA,gBAAIC,aAAJ;;AACA,gBAAI,KAAKX,aAAL,KAAuB,IAAvB,IAA+B,KAAKA,aAAL,KAAuBC,SAAtD,IAAmE,KAAKD,aAAL,KAAuB,CAA9F,EAAiG;AAC/FU,8BAAgB,GAAGD,OAAO,CAACG,SAAR,KAAsB,IAAtB,IAA8BH,OAAO,CAACG,SAAR,KAAsBX,SAApD,GAAgE,EAAhE,GAAqEQ,OAAO,CAACG,SAAhG;AACAD,2BAAa,GAAG,MAAhB;AACD,aAHD,MAGO,IAAI,KAAKX,aAAL,KAAuB,IAAvB,IAA+B,KAAKA,aAAL,KAAuBC,SAAtD,IAAmE,KAAKD,aAAL,KAAuB,CAA9F,EAAiG;AACtGU,8BAAgB,GAAGD,OAAO,CAACI,aAAR,KAA0B,IAA1B,IAAkCJ,OAAO,CAACI,aAAR,KAA0BZ,SAA5D,GAAwE,EAAxE,GAA6EQ,OAAO,CAACI,aAAxG;AACAF,2BAAa,GAAG,QAAhB;AACD,aAHM,MAGA,IAAI,KAAKX,aAAL,KAAuB,IAAvB,IAA+B,KAAKA,aAAL,KAAuBC,SAAtD,IAAmE,KAAKD,aAAL,KAAuB,CAA9F,EAAiG;AACtGU,8BAAgB,GAAGD,OAAO,CAACK,MAAR,GAAiB,GAAjB,GAAuBL,OAAO,CAACM,QAA/B,GAA0C,GAA1C,GAAgDN,OAAO,CAACO,KAAxD,GAAgE,GAAhE,GAAsEP,OAAO,CAACQ,GAA9E,GAAoF,GAApF,GAA0FR,OAAO,CAACS,QAArH;AACAP,2BAAa,GAAG,MAAhB;AACD,aAHM,MAGA;AACLD,8BAAgB,GAAGD,OAAO,CAACI,aAAR,KAA0B,IAA1B,IAAkCJ,OAAO,CAACI,aAAR,KAA0BZ,SAA5D,GAAwE,EAAxE,GAA6EQ,OAAO,CAACU,aAAxG;AACAR,2BAAa,GAAG,OAAhB;AACD;;AACD,mBAAO;AACLD,8BAAgB,EAAEA,gBADb;AAELC,2BAAa,EAAEA;AAFV,aAAP;AAID;AAnCyB;AAAA,S;;;;gBAPnB;;gBAFA;;;;AASIf,qBAAe,6DAH3B,iEAAW;AACVwB,kBAAU,EAAE;AADF,OAAX,CAG2B,E,+EAGI,8E,EAAiC,gG,EAHrC,GAAfxB,eAAe,CAAf;;;;;;;;;;;;;;;;ACVb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBf;;;;;;;;UAWayB,4BAA4B;AAsBvC,8CACSC,aADT,EAEExB,MAFF,EAGUD,QAHV,EAIU0B,eAJV,EAI2C;AAAA;;AAAA;;AAEzC,mEAAMD,aAAN,EAAqBxB,MAArB;AALO,iBAAAwB,aAAA,GAAAA,aAAA;AAEC,iBAAAzB,QAAA,GAAAA,QAAA;AACA,iBAAA0B,eAAA,GAAAA,eAAA;AAzBD,iBAAAC,OAAA,GAA8C;AACrDC,kBAAM,EAAE,EAD6C;AAErDC,yBAAa,EAAE;AAFsC,WAA9C;AAIF,iBAAAC,oBAAA,GAAgE;AACrED,yBAAa,EAAE,IADsD;AAErEE,2BAAe,EAAE,4BAFoD;AAGrEC,oBAAQ,EAAE,OAAKL,OAAL,CAAaK,QAAb,GAAwB,OAAKL,OAAL,CAAaK,QAArC,GAAgD;AAHW,WAAhE,CAqBoC,CAhB3C;;AACiB,iBAAAC,eAAA,GAAqC,IAAI,0DAAJ,EAArC;AACA,iBAAAC,gBAAA,GAAsC,IAAI,0DAAJ,EAAtC;AAEV,iBAAAC,cAAA,GAAiB,IAAIC,GAAJ,EAAjB;AACC,iBAAAC,UAAA,GAAa,IAAI,qGAAJ,EAAb;AACD,iBAAAC,YAAA,GAAqC,EAArC;AACC,iBAAAC,OAAA,GAAU,KAAV;AASmC;AAG1C;;AA7BsC;;AAAA;AAAA;AAAA,iBA+BvC,SAAAC,QAAQ,GAAG;AACT,iBAAKC,YAAL,CAAkB,IAAlB;AACA,iBAAKX,oBAAL,CAA0BY,QAA1B,GAAqC,KAAKf,OAAL,CAAae,QAAlD;AACA,iBAAKZ,oBAAL,CAA0Ba,KAA1B,GAAkC,WAAlC;AACA,iBAAKb,oBAAL,CAA0Bc,QAA1B,GAAqC,eAArC;AACA,iBAAKd,oBAAL,CAA0Be,cAA1B,GAA2C,KAAKV,cAAhD;AACA,iBAAKI,OAAL,GAAe,KAAKZ,OAAL,CAAaY,OAAb,GAAuB,KAAKZ,OAAL,CAAaY,OAApC,GAA8C,KAA7D;AACA,iBAAKO,UAAL,CAAgBC,UAAhB,CAA2B,KAAKjB,oBAAhC,EAAsD,KAAKH,OAA3D,EAAoE,KAApE;AACA,iBAAKG,oBAAL,CAA0BD,aAA1B,GAA0C,KAAKF,OAAL,CAAaE,aAAvD;AACD;AAxCsC;AAAA;AAAA,iBA0CvC,SAAAmB,WAAW,CAACC,MAAD,EAAwB;AACjC,iBAAKnB,oBAAL,CAA0BY,QAA1B,GAAqC,KAAKf,OAAL,CAAae,QAAlD;AACA,iBAAKZ,oBAAL,CAA0BoB,WAA1B,GAAwC,KAAKvB,OAAL,CAAauB,WAArD,CAFiC,CAGjC;AACA;AACA;AAED;AAED;;;;AAnDuC;AAAA;AAAA,iBAsD1B,SAAAT,YAAY,CAACU,aAAD,EAAoD;;;;;;AAE3E,wBAAIA,aAAa,KAAK,IAAlB,IAA0BA,aAAa,KAAK/C,SAAhD,EAA2D;AACzD,2BAAKuB,OAAL,GAAewB,aAAf;AACD;;AACD,yBAAKxB,OAAL,CAAayB,cAAb,GAA8B,EAA9B,C,CACA;;0BACI,KAAKzB,OAAL,CAAaC,MAAb,KAAwBxB,SAAxB,IAAqC,KAAKuB,OAAL,CAAaC,MAAb,KAAwB,E;;;;;AAC/D,yBAAK3B,MAAL,CAAYoD,KAAZ,CAAkB,4BAAlB;;;;AAGIC,2B,GAAU,KAAK7B,aAAL,CAAmB8B,OAAnB,CAA2BC,UAA3B,CAAsC,oGAAeC,QAArD,C;AAEVC,+B,GAAmC,KAAKC,kBAAL,CAAwBL,OAAxB,C;AACzC,yBAAKM,iBAAL,CAAuBF,WAAvB;;;;;;;AACD;AAED;;;;;AAvEuC;AAAA;AAAA,iBA2EzB,SAAAE,iBAAiB,CAACF,WAAD,EAAmC;;;;;;;;AAC1DG,qC,GAAoB,KAAKf,UAAL,CAAgBS,OAAhB,CAAwBC,UAAxB,CAAmC,kIAAwBM,kBAA3D,C;AAC1B,yBAAKhC,oBAAL,CAA0BiC,aAA1B,GAA0C3D,SAA1C;;AACe,2BAAM,KAAKJ,QAAL,CAAcgE,cAAd,CAA6BN,WAA7B,WAAgD,UAAAL,KAAK,EAAI;AAC5E,4BAAI,CAACvB,oBAAL,CAA0BiC,aAA1B,GAA0C,EAA1C;;AACA,4BAAI,CAAC9D,MAAL,CAAYoD,KAAZ,CAAkB,kEAAlB,EAAsFA,KAAtF;AACD,qBAHoB,CAAN;;;AAATY,0B;;0BAKFA,MAAM,IAAIA,MAAM,CAACC,SAAP,CAAiBC,MAAjB,GAA0B,C;;;;;yBAIlC,KAAK5B,O;;;;;AACPmB,+BAAW,CAACU,WAAZ,GAA0B,GAA1B;AACAV,+BAAW,CAACW,YAAZ,GAA2B,GAA3B;;AACqB,2BAAM,KAAKrE,QAAL,CAAcgE,cAAd,CAA6BN,WAA7B,WAAgD,UAAAL,KAAK,EAAI;AAClF,4BAAI,CAACpD,MAAL,CAAYoD,KAAZ,CAAkB,kEAAlB,EAAsFA,KAAtF;AACD,qBAF0B,CAAN;;;AAAfiB,2B;;AAGN,wBAAIA,OAAO,IAAIA,OAAO,CAACJ,SAAR,CAAkBC,MAAlB,GAA2B,CAA1C,EAA6C;AAC3CF,4BAAM,CAACC,SAAP,gCAAuBD,MAAM,CAACC,SAA9B,sBAA4CI,OAAO,CAACJ,SAApD,GAD2C,CACoB;AAChE;;;AAGH,yBAAKvC,OAAL,CAAayB,cAAb,GAA8Ba,MAAM,CAACC,SAArC;;AACA,wBAAI,KAAKvC,OAAL,CAAaL,aAAb,IAA8B,KAAKK,OAAL,CAAaL,aAAb,KAA+B,EAAjE,EAAqE;AACnE,2BAAKQ,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKpC,OAAL,CAAayB,cAAb,CAA4BmB,MAA5B,CAAmC,UAAA3D,OAAO;AAAA,+BAAIA,OAAO,CAACU,aAAR,KAA0B,MAAI,CAACK,OAAL,CAAaL,aAA3C;AAAA,uBAA1C,CAA1C;AACD;;AACD,wBAAI,KAAKK,OAAL,CAAaT,QAAb,IAAyB,KAAKS,OAAL,CAAaT,QAAb,KAA0B,EAAvD,EAA2D;AACzD,2BAAKY,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKS,2BAAL,CAAiC,KAAK7C,OAAL,CAAaT,QAA9C,CAA1C;;AACA,0BAAI,KAAKS,OAAL,CAAaL,aAAb,IAA8B,KAAKK,OAAL,CAAaL,aAAb,KAA+B,EAAjE,EAAqE;AACnE,6BAAKQ,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKpC,OAAL,CAAayB,cAAb,CAA4BmB,MAA5B,CAAmC,UAAA3D,OAAO;AAAA,iCAAIA,OAAO,CAACU,aAAR,KAA0B,MAAI,CAACK,OAAL,CAAaL,aAA3C;AAAA,yBAA1C,CAA1C;AACD;AACF;;AAED,wBAAK,KAAKK,OAAL,CAAaL,aAAb,KAA+B,IAA/B,IAAuC,KAAKK,OAAL,CAAaL,aAAb,KAA+BlB,SAAtE,IAAmF,KAAKuB,OAAL,CAAaL,aAAb,KAA+B,EAAvH,EAA4H;AAC1H,2BAAKQ,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKpC,OAAL,CAAayB,cAAvD;AACD;;AACD,yBAAKtB,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKU,sBAAL,CAA4B,KAAK3C,oBAAL,CAA0BiC,aAAtD,CAA1C,C,CACA;;AACA,yBAAKjC,oBAAL,CAA0BiC,aAA1B,CAAwCW,GAAxC,CAA4C,UAACC,OAAD,EAAUC,KAAV;AAAA,6BAAoBD,OAAO,CAAC,UAAD,CAAP,GAAsBC,KAA1C;AAAA,qBAA5C;AACA,yBAAKC,WAAL,GAAmBC,MAAM,CAACC,MAAP,CAAwC,EAAxC,EAA4C,KAAKjD,oBAAL,CAA0BiC,aAAtE,CAAnB;;AACA,wBAAI,KAAKjC,oBAAL,CAA0BkD,aAA1B,IAA2C5E,SAA/C,EAA0D;AACxD,2BAAK0B,oBAAL,CAA0BkD,aAA1B,GAA0C,EAA1C;AACD;;AACD,wBAAI,KAAKlD,oBAAL,CAA0BE,QAA9B,EAAwC;AACtC,2BAAKiD,uBAAL;AACD,qB,CACD;AACA;AACA;;;AACA,wBAAI,CAAC,KAAKtD,OAAL,CAAaE,aAAb,CAA2B,KAAKF,OAAL,CAAauD,MAAxC,CAAL,EAAsD;AACpD,2BAAKvD,OAAL,CAAawD,wBAAb,GAAwC,KAAKxD,OAAL,CAAawD,wBAAb,IAAyC/E,SAAzC,GAAqD,KAAKuB,OAAL,CAAawD,wBAAlE,GAA6F,IAArI;;AACA,0BAAI,KAAKxD,OAAL,CAAaC,MAAb,KAAwB,MAAxB,IAAkC,KAAKD,OAAL,CAAawD,wBAAnD,EAA6E;AACvEC,iDADuE,GAC3C,KAAKzD,OAAL,CAAa0D,OAAb,KAAyB,IAAzB,GAAgCxB,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,GAAiB,MAAjB,GAAAA,iBAAiB,CAAEyB,sBAAnD,GAA4EzB,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,GAAiB,MAAjB,GAAAA,iBAAiB,CAAE0B,qBADpD;AAE3E,6BAAKzD,oBAAL,CAA0BiC,aAA1B,CAAwCW,GAAxC,CAA4C,UAAA9D,OAAO,EAAI;AACrD;AACA,8BAAIA,OAAO,CAAC4E,cAAZ,EAA4B;AAC1B,gCAAI5E,OAAO,CAAC4E,cAAR,KAA2BJ,yBAA/B,EAA0D;AACxD,oCAAI,CAACK,MAAL,CAAYC,qBAAZ,CAAkC,MAAI,CAAC/D,OAAL,CAAauD,MAA/C,EAAuDtE,OAAO,CAAC+E,SAA/D,EAA0E,MAAI,CAAChE,OAAL,CAAaE,aAAvF;;AACA,oCAAI,CAAC4D,MAAL,CAAYC,qBAAZ,CAAkC,MAAI,CAAC/D,OAAL,CAAauD,MAAb,GAAsB,YAAxD,EAAsEtE,OAAO,CAAC+E,SAA9E,EAAyF,MAAI,CAAChE,OAAL,CAAaE,aAAtG;AACD;AACF;AACF,yBARD;AASD;AACF;;;;;;AAED,yBAAKuB,cAAL,GAAsB,EAAtB;AACA,yBAAKtB,oBAAL,CAA0BiC,aAA1B,GAA0C,EAA1C;;;;;;;AAEH;AAED;;;;;AAlJuC;AAAA;AAAA,iBAsJ/B,SAAAU,sBAAsB,CAACV,aAAD,EAAkC;AAE9D,gBAAM6B,YAAY,GAAuB,EAAzC;;AAF8D,uDAGvC7B,aAHuC;AAAA;;AAAA;AAG9D,kEAAsC;AAAA,oBAA3B8B,QAA2B;AACpC,oBAAMjF,OAAO,GAAqB;AAChCkF,kCAAgB,EAAED,QAAQ,CAACC,gBADK;AAEhCC,qCAAmB,EAAEF,QAAQ,CAACE,mBAFE;AAGhCzE,+BAAa,EAAEuE,QAAQ,CAACvE,aAHQ;AAIhC0E,yBAAO,EAAE,KAAK3D,UAAL,CAAgB4D,SAAhB,CAA0BJ,QAAQ,CAACG,OAAT,KAAqB,IAArB,IAA6BH,QAAQ,CAACG,OAAT,KAAqB5F,SAAlD,GAA8D,KAA9D,GAAsEyF,QAAQ,CAACG,OAAzG,EAAkHH,QAAQ,CAACK,qBAA3H,IAAoJ,GAApJ,IAA2JL,QAAQ,CAACM,iBAAT,IAA8BN,QAAQ,CAACO,wBAAlM,CAJuB;AAKhCC,kCAAgB,EAAE,KAAKhE,UAAL,CAAgB4D,SAAhB,CAA0BJ,QAAQ,CAACQ,gBAAT,KAA8B,IAA9B,IAAsCR,QAAQ,CAACQ,gBAAT,KAA8BjG,SAApE,GAAgF,KAAhF,GAAwFyF,QAAQ,CAACQ,gBAA3H,EAA6IR,QAAQ,CAACK,qBAAtJ,IAA+K,GAA/K,IAAsLL,QAAQ,CAACM,iBAAT,IAA8BN,QAAQ,CAACO,wBAA7N,CALc;AAMhCD,mCAAiB,EAAEN,QAAQ,CAACM,iBAAT,IAA8BN,QAAQ,CAACO,wBAN1B;AAOhCA,0CAAwB,EAAEP,QAAQ,CAACO,wBAPH;AAQhClF,0BAAQ,EAAE2E,QAAQ,CAAC3E,QARa;AAShCoF,iCAAe,EAAET,QAAQ,CAACS,eATM;AAUhCtF,+BAAa,EAAE6E,QAAQ,CAAC7E,aAVQ;AAWhCD,2BAAS,EAAE8E,QAAQ,CAAC9E,SAXY;AAYhCI,uBAAK,EAAE0E,QAAQ,CAAC1E,KAZgB;AAahCE,0BAAQ,EAAEwE,QAAQ,CAACxE,QAba;AAchCJ,wBAAM,EAAE4E,QAAQ,CAAC5E,MAde;AAehCG,qBAAG,EAAEyE,QAAQ,CAACzE,GAfkB;AAgBhCP,kCAAgB,EAAE,KAAKa,eAAL,CAAqBf,sBAArB,CAA4CkF,QAA5C,EAAsDhF,gBAhBxC;AAiBhC2E,gCAAc,EAAEK,QAAQ,CAACL,cAjBO;AAkBhCe,0BAAQ,EAAEV,QAAQ,CAACU,QAlBa;AAmBhCC,2BAAS,EAAEX,QAAQ,CAACW,SAnBY;AAoBhCb,2BAAS,EAAEE,QAAQ,CAAC7E,aApBY;AAqBhCyF,mCAAiB,EAAEZ,QAAQ,CAACY,iBAAT,GAA6BZ,QAAQ,CAACY,iBAAtC,GAA0D,EArB7C;AAsBhCC,2CAAyB,EAAEb,QAAQ,CAACa,yBAAT,GAAqCb,QAAQ,CAACa,yBAA9C,GAA0E,EAtBrE;AAuBhCC,iCAAe,EAAE,eAvBe;AAwBhCC,wBAAM,EAAEf,QAAQ,CAACgB,iBAxBe;AAyBhCC,4BAAU,EAAEjB,QAAQ,CAACe,MAzBW;AA0BhC9F,+BAAa,EAAE,KAAKY,eAAL,CAAqBf,sBAArB,CAA4CkF,QAA5C,EAAsD/E;AA1BrC,iBAAlC,CADoC,CA6BpC;;AACA,oBAAI,KAAKa,OAAL,CAAaK,QAAjB,EAA2B;AACzBpB,yBAAO,CAACmG,WAAR,GAAsBlB,QAAQ,CAACkB,WAA/B;AACD;;AACDnB,4BAAY,CAACoB,IAAb,CAAkBpG,OAAlB;AACD;AArC6D;AAAA;AAAA;AAAA;AAAA;;AAsC9D,mBAAOgF,YAAP;AACD;AAED;;;;;AA/LuC;AAAA;AAAA,iBAmM/B,SAAAjC,kBAAkB,CAACL,OAAD,EAAa;AACrC,gBAAII,WAAW,GAAwB,EAAvC;;AAEA,gBAAIJ,OAAO,IAAIA,OAAO,CAAC2D,UAAvB,EAAmC;AACjCvD,yBAAW,GAAG;AACZ;AACAwD,yBAAS,EAAE5D,OAAO,CAAC2D,UAAR,CAAmBE,MAFlB;AAGZC,oBAAI,EAAE;AAHM,eAAd;AAKD;;AACD,gBAAI,KAAKzF,OAAL,CAAa0F,WAAb,IAA4B,IAA5B,IAAoC,KAAK1F,OAAL,CAAa0F,WAAb,KAA6BjH,SAAjE,IAA8E,KAAKuB,OAAL,CAAa0F,WAAb,KAA6B,EAA/G,EAAmH;AACjH3D,yBAAW,GAAG;AACZ4D,oCAAoB,EAAE,KAAK3F,OAAL,CAAa0F;AADvB,eAAd;AAGD;;AACD,gBAAI,KAAK1F,OAAL,CAAayC,WAAb,IAA4B,IAA5B,IAAoC,KAAKzC,OAAL,CAAayC,WAAb,KAA6BhE,SAAjE,IAA8E,KAAKuB,OAAL,CAAayC,WAAb,KAA6B,EAA/G,EAAmH;AACjHV,yBAAW,CAACU,WAAZ,GAA0B,KAAKzC,OAAL,CAAayC,WAAvC;AACD;;AACD,gBAAI,KAAKzC,OAAL,CAAa4F,OAAb,IAAwB,IAAxB,IAAgC,KAAK5F,OAAL,CAAa4F,OAAb,KAAyBnH,SAAzD,IAAsE,KAAKuB,OAAL,CAAa4F,OAAb,KAAyB,EAAnG,EAAuG;AACrG7D,yBAAW,CAACW,YAAZ,GAA2B,KAAK1C,OAAL,CAAa4F,OAAxC;AACD;;AACD,gBAAI,KAAK5F,OAAL,CAAaC,MAAb,KAAwB,IAAxB,IAAgC,KAAKD,OAAL,CAAaC,MAAb,KAAwBxB,SAAxD,IAAqE,KAAKuB,OAAL,CAAaC,MAAb,KAAwB,EAAjG,EAAqG;AACnG8B,yBAAW,CAAC9B,MAAZ,GAAqB,KAAKD,OAAL,CAAaC,MAAlC;AACD;;AACD,gBAAI,KAAKD,OAAL,CAAa6F,SAAb,KAA2B,IAA3B,IAAmC,KAAK7F,OAAL,CAAa6F,SAAb,KAA2BpH,SAA9D,IAA2E,KAAKuB,OAAL,CAAa6F,SAAb,KAA2B,EAA1G,EAA8G;AAC5G9D,yBAAW,CAAC8D,SAAZ,GAAwB,KAAK7F,OAAL,CAAa6F,SAArC;AACD;;AACD,gBAAI,KAAK7F,OAAL,CAAa8F,YAAb,KAA8B,IAA9B,IAAsC,KAAK9F,OAAL,CAAa8F,YAAb,KAA8BrH,SAAxE,EAAmF;AACjFsD,yBAAW,CAAC+D,YAAZ,GAA2B,KAAK9F,OAAL,CAAa8F,YAAxC;AACD,aAFD,MAEO,IAAI,KAAK9F,OAAL,CAAa+F,UAAb,KAA4B,IAA5B,IAAoC,KAAK/F,OAAL,CAAa+F,UAAb,KAA4BtH,SAApE,EAA+E;AACpFsD,yBAAW,CAACgE,UAAZ,GAAyB,KAAK/F,OAAL,CAAa+F,UAAtC;AACD;;AAED,gBAAI,KAAK/F,OAAL,CAAagG,wBAAb,IAAyC,IAAzC,IAAiD,KAAKhG,OAAL,CAAagG,wBAAb,KAA0CvH,SAA/F,EAA0G;AACxG,kBAAI,OAAO,KAAKuB,OAAL,CAAagG,wBAApB,KAAiD,QAArD,EAA+D;AAC7DjE,2BAAW,CAACiE,wBAAZ,GAAuC,KAAKhG,OAAL,CAAagG,wBAApD;AACD,eAFD,MAEO;AACL,oBAAIC,IAAI,GAAG,EAAX,CADK,CAEL;;AACA,qBAAK,IAAMC,GAAX,IAAkB,KAAKlG,OAAL,CAAagG,wBAA/B,EAAyD;AACvD,sBAAMG,KAAK,GAAG,KAAKnG,OAAL,CAAagG,wBAAb,CAAsCE,GAAtC,CAAd;AACAD,sBAAI,IAAIE,KAAK,GAAG,GAAhB;AACD;;AACDF,oBAAI,GAAGA,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcH,IAAI,CAACI,WAAL,CAAiB,GAAjB,CAAd,CAAP;AACAtE,2BAAW,CAACiE,wBAAZ,GAAuCC,IAAvC;AACD;AACF;;AAED,gBAAI,KAAKjG,OAAL,CAAasG,mBAAb,IAAoC,IAApC,IAA4C,KAAKtG,OAAL,CAAasG,mBAAb,KAAqC7H,SAArF,EAAgG;AAC9F,kBAAI,OAAO,KAAKuB,OAAL,CAAasG,mBAApB,KAA4C,QAAhD,EAA0D;AACxDvE,2BAAW,CAACuE,mBAAZ,GAAkC,KAAKtG,OAAL,CAAasG,mBAA/C;AACD,eAFD,MAEO;AACL,oBAAIL,KAAI,GAAG,EAAX,CADK,CAEL;;AACA,qBAAK,IAAMC,IAAX,IAAkB,KAAKlG,OAAL,CAAasG,mBAA/B,EAAoD;AAClD,sBAAMH,MAAK,GAAG,KAAKnG,OAAL,CAAasG,mBAAb,CAAiCJ,IAAjC,CAAd;AACAD,uBAAI,IAAIE,MAAK,GAAG,GAAhB;AACD;;AACDF,qBAAI,GAAGA,KAAI,CAACG,KAAL,CAAW,CAAX,EAAcH,KAAI,CAACI,WAAL,CAAiB,GAAjB,CAAd,CAAP;AACAtE,2BAAW,CAACuE,mBAAZ,GAAkCL,KAAlC;AACD;AACF;;AACD,mBAAOlE,WAAP;AACD;AAID;;;;AAtQuC;AAAA;AAAA,iBAyQ/B,SAAAc,2BAA2B,CAACtD,QAAD,EAAc;AAC/C;AACA,mBAAO,KAAKS,OAAL,CAAayB,cAApB;AACD;AA5QsC;AAAA;AAAA,iBA8QvC,SAAA8E,QAAQ,CAACC,KAAD,EAAe;AACrB,iBAAKlI,MAAL,CAAYS,GAAZ,CAAgByH,KAAhB,EADqB,CAErB;AACD;AAjRsC;AAAA;AAAA,iBAmR/B,SAAAC,qBAAqB,GAAG;AAC9B,gBAAIC,gBAAgB,GAAiB,EAArC;AACA,gBAAIC,iBAAiB,GAAiB,EAAtC;AACA,gBAAIC,0BAA0B,GAAiB,EAA/C;AAEAF,4BAAgB,GAAG;AACjBG,iBAAG,EAAE,eADY;AAEjBV,mBAAK,EAAE,iBAFU;AAGjBW,oBAAM,EAAE;AAHS,aAAnB;AAMAH,6BAAiB,GAAG;AAClBE,iBAAG,EAAE,gBADa;AAElBV,mBAAK,EAAE,KAFW;AAGlBW,oBAAM,EAAE;AAHU,aAApB;AAMAF,sCAA0B,GAAG;AAC3BC,iBAAG,EAAE,kBADsB;AAE3BV,mBAAK,EAAE,KAFoB;AAG3BW,oBAAM,EAAE;AAHmB,aAA7B,CAjB8B,CAuB9B;;AACA,iBAAKtG,cAAL,CAAoBuG,GAApB,CAAwB,aAAxB,EAAuCL,gBAAvC;AACA,iBAAKlG,cAAL,CAAoBuG,GAApB,CAAwB,aAAxB,EAAuCJ,iBAAvC;AACA,iBAAKnG,cAAL,CAAoBuG,GAApB,CAAwB,uBAAxB,EAAiDH,0BAAjD;AACD;AA9SsC;AAAA;AAAA,iBAgTvC,SAAAI,YAAY,CAACR,KAAD,EAAQ;AAClB,iBAAKlG,eAAL,CAAqB2G,IAArB,CAA0BT,KAA1B;AACD;AAlTsC;AAAA;AAAA,iBAoTvC,SAAAU,YAAY,CAACjI,OAAD,EAAU;AACpB,gBAAIA,OAAJ,EAAa;AACX,mBAAKsB,gBAAL,CAAsB0G,IAAtB,CAA2BhI,OAA3B;AACD;AACF;AAxTsC;AAAA;AAAA,iBA2TvC,SAAAqE,uBAAuB,GAAG;AAAA;;AACxB,gBAAM6D,WAAW,GAAG,KAAKnH,OAAL,CAAaoH,wBAAb,GAAwC,KAAKjH,oBAAL,CAA0BiC,aAAlE,GACjB,KAAKpC,OAAL,CAAaE,aAAb,CAA2B,KAAKF,OAAL,CAAauD,MAAxC,IACC,KAAKpD,oBAAL,CAA0BiC,aAA1B,CAAwCQ,MAAxC,CAA+C,UAAAyE,IAAI;AAAA,qBAAI,MAAI,CAACrH,OAAL,CAAaE,aAAb,CAA2B,MAAI,CAACF,OAAL,CAAauD,MAAxC,EAAgD+D,IAAhD,CAAqD,UAAAC,KAAK;AAAA,uBAAIA,KAAK,CAAC5H,aAAN,IAAuB0H,IAAI,CAAC1H,aAAhC;AAAA,eAA1D,CAAJ;AAAA,aAAnD,CADD,GACoK,EAFvK,CADwB,CAIxB;;AACA,iBAAKQ,oBAAL,CAA0BkD,aAA1B,GAA0C8D,WAAW,CAACvE,MAAZ,CAAmB,UAAAI,OAAO;AAAA,qBAAK,MAAI,CAAChD,OAAL,CAAaoH,wBAAb,KACnE,CAACpE,OAAO,CAACoC,WAAT,IAAwB,EAAEpC,OAAO,CAACoC,WAAR,CAAoBoC,QAApB,CAA6B,kIAAwBC,4BAArD,KACzBzE,OAAO,CAACoC,WAAR,CAAoBoC,QAApB,CAA6B,kIAAwBE,yBAArD,CADuB,CAD2C,CAAD,IAGnE,CAAC,MAAI,CAAC1H,OAAL,CAAaoH,wBAHiD;AAAA,aAA1B,EAIxCrE,GAJwC,CAIpC,UAAAC,OAAO,EAAI;AACf,qBAAO,MAAP,OAAO,CAAP;AACEqE,oBAAI,EAAErE,OAAO,CAACA,OAAO,CAACgC,eAAT;AADf,iBAEKhC,OAFL,CAAO,EAEK;AACV2E,0BAAU,EAAE3E,OAAO,CAACgB;AADV,eAFL,CAAP;AAMD,aAXyC,CAA1C;AAaA,gBAAI,KAAK7D,oBAAL,CAA0BkD,aAA1B,CAAwCb,MAAxC,GAAiD,CAArD,EACE,KAAKoF,yBAAL,CAA+BC,gBAA/B,CAAgD,KAAK1H,oBAAL,CAA0BkD,aAA1E;AACH;AA/UsC;AAAA;AAAA,iBAiVvC,SAAAyE,aAAa,CAAC7I,OAAD,EAAU;AACrB,gBAAIA,OAAJ,EAAa;AACX,kBAAI,KAAKiE,WAAL,KAAqBzE,SAAzB,EAAoC;AAClC,qBAAK0B,oBAAL,CAA0BiC,aAA1B,GAA0C,KAAKc,WAAL,GAAmB,KAAKA,WAAL,CAAiBN,MAAjB,CAAwB,UAAAyE,IAAI;AAAA,yBAAIpI,OAAO,CAACU,aAAR,IAAyB0H,IAAI,CAAC1H,aAAlC;AAAA,iBAA5B,CAAnB,GAAkG,EAA5I;AACD;AAEF;AACF;AAxVsC;AAAA;AAAA,iBA0VvC,SAAAoI,KAAK,GAAG;AACN,iBAAKH,yBAAL,CAA+BI,WAA/B;AACD;AA5VsC;AAAA;AAAA,iBA8VvC,SAAAC,cAAc,CAACC,cAAD,EAAqD;AACjE,iBAAK/H,oBAAL,CAA0BiC,aAA1B,GAA0Ce,MAAM,CAACC,MAAP,CAAwC,EAAxC,EAA4C,KAAKF,WAAjD,CAA1C;AACA,iBAAK4E,aAAL,CAAmBI,cAAnB;AACD;AAjWsC;AAAA,QAAS,iIAAT,C;;;;gBAjBhC;;gBAHA;;gBAHA;;gBAHA;;;;;;gBA2BN;;;gBAUA;;;gBACA;;;gBAQA,uD;AAAS,iBAAC,2BAAD;;;AApBCrI,kCAA4B,6DALxC,gEAAU;AACTsI,gBAAQ,EAAE,wBADD;AAETC,gBAAQ,EAAR,yFAFS;;AAAA,OAAV,CAKwC,E,+EAuBf,yG,EACd,gG,EACW,mH,EACO,+G,EA1BW,GAA5BvI,4BAA4B,CAA5B;;;;;;;;;;;;;;;;AC3Bb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UC0BFwI,iCAAiC;AAAA;AAAA,Q;;AAAjCA,uCAAiC,6DAlB7C,+DAAS;AACNC,oBAAY,EAAE,CACV,8FADU,CADR;AAINC,eAAO,EAAE,CACL,4EADK,EAEL,sGAFK,EAGL,gIAHK,EAIL,0IAJK,CAJH;AAUNC,eAAO,EAAE,CACL,8FADK,CAVH;AAaNC,uBAAe,EAAE,CACb,8FADa,CAbX;AAgBNC,eAAO,EAAE,CAAC,oEAAD;AAhBH,OAAT,CAkB6C,GAAjCL,iCAAiC,CAAjC","file":"5-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { IAccountResponse } from '../models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from '../omni-common/omni-pull.service';\n/*\nCreated by Waleed Aly 03 April 2023 to encapsulated repeated code needed in different cards components \"debit,credit,prepaid\"\n*/\n@Injectable({\n  providedIn: 'root'\n})\nexport class AccountsService {\n\n  private accountAsIBAN: any;\n  constructor(private omniPull: OmniPullService, private logger: LoggerService) {\n    this.getAccountAsIBAN();\n  }\n\n  public getAccountAsIBAN() {\n    if (this.accountAsIBAN === undefined) {\n      this.omniPull.getParamValOf('AccountsAsIBAN').then(res => {\n        this.accountAsIBAN = res.AccountsAsIBAN;\n      }).catch(err => this.logger.log(err));\n    }\n  }\n\n  public returnFormattedAccount(account: IAccountResponse) {\n    let formattedAccount: any;\n    let accountFormat: string;\n    if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 1) {\n      formattedAccount = account.ibanAccNo === null || account.ibanAccNo === undefined ? '' : account.ibanAccNo;\n      accountFormat = 'IBAN';\n    } else if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 2) {\n      formattedAccount = account.additionalRef === null || account.additionalRef === undefined ? '' : account.additionalRef;\n      accountFormat = 'AddRef';\n    } else if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 3) {\n      formattedAccount = account.branch + '-' + account.currency + '-' + account.accGl + '-' + account.cif + '-' + account.serialNo;\n      accountFormat = 'iMAL';\n    } else {\n      formattedAccount = account.additionalRef === null || account.additionalRef === undefined ? '' : account.accountNumber;\n      accountFormat = 'ACCNO';\n    }\n    return {\n      formattedAccount: formattedAccount,\n      accountFormat: accountFormat,\n    };\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcy1sb29rdXAtb3duLWFjY291bnRzLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { AccountsService } from 'src/app/commonBussinessSRC/psServices/accounts/accounts.service';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { IAccountResponse, IAccounts, IOmniAccountRequest } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { PsBaseFieldComponent } from 'src/app/commonSRC/psComponents/ps-base/ps-base-field/ps-base-field.component';\nimport { PsCurrencyPipe } from 'src/app/commonSRC/psPipes/ps-currency/ps-currency.pipe';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IMapKeyValue, IOptionsPsLabelInput } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonService } from 'src/app/commonSRC/psServices/ps-common/ps-common.service';\nimport { IOptionsPsComplexLookUpComponentExposed } from '../../ps-complex-components/ps-complex-lookup/ps-complex-lookup.component.interfaces';\nimport { IOptionsPsLookupOwnAccountsExposed } from './ps-lookup-own-accounts.component.interfaces';\n\n\n\n/**\n * @author Aftab.Ali\n * @since 03/02/2020\n *\n * <p> PsComplexOwnAccountComponent is complex component to show accounts list fetched from server, balance and available balance</p>\n */\n@Component({\n  selector: 'ps-lookup-own-accounts',\n  templateUrl: './ps-lookup-own-accounts.component.html',\n  styleUrls: ['./ps-lookup-own-accounts.component.scss'],\n})\nexport class PsLookupOwnAccountsComponent extends PsBaseFieldComponent implements OnInit, OnChanges {\n  @Input() options: IOptionsPsLookupOwnAccountsExposed = {\n    fromTo: '',\n    requestObject: null,\n  };\n  public complexLookupOptions: IOptionsPsComplexLookUpComponentExposed = {\n    requestObject: null,\n    notFoundMessage: 'no_valid_account_found_key',\n    multiple: this.options.multiple ? this.options.multiple : false\n  };\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() public onAccountChange: EventEmitter<any> = new EventEmitter<any>();\n  @Output() public onAccountDeleted: EventEmitter<any> = new EventEmitter<any>();\n  public listOfAccounts?: IAccounts[];\n  public labelValuesMap = new Map<string, IMapKeyValue>();\n  private psCurrency = new PsCurrencyPipe();\n  public labelOptions: IOptionsPsLabelInput = {};\n  private allType = false;\n  private allAccounts?: IAccounts[];\n\n  @ViewChild('complexLookupComponentObj') complexLookupComponentObj;\n\n  constructor(\n    public commonService: PsCommonService,\n    logger: LoggerService,\n    private omniPull?: OmniPullService,\n    private accountsService?: AccountsService\n  ) {\n    super(commonService, logger);\n  }\n\n  ngOnInit() {\n    this.loadAccounts(null);\n    this.complexLookupOptions.labelKey = this.options.labelKey;\n    this.complexLookupOptions.title = 'title_key';\n    this.complexLookupOptions.subTitle = 'sub_title_key';\n    this.complexLookupOptions.labelsValueMap = this.labelValuesMap;\n    this.allType = this.options.allType ? this.options.allType : false;\n    this.commonProv.copyObject(this.complexLookupOptions, this.options, false);\n    this.complexLookupOptions.requestObject = this.options.requestObject;\n  }\n\n  ngOnChanges(change: SimpleChanges) {\n    this.complexLookupOptions.labelKey = this.options.labelKey;\n    this.complexLookupOptions.placeHolder = this.options.placeHolder;\n    // if (this.options.accountNumber !== undefined) {\n    //   this.loadAccounts(null);\n    // }\n\n  }\n\n  /**\n   * populating account - fetching from server\n   */\n  public async loadAccounts(reloadOptions: IOptionsPsLookupOwnAccountsExposed) {\n\n    if (reloadOptions !== null && reloadOptions !== undefined) {\n      this.options = reloadOptions;\n    }\n    this.options.listOfAccounts = [];\n    // TODO: when the service is ready : we will get the account list based on cif number from server. service will take the cif number -- options.cifNumber will provide the cif number\n    if (this.options.fromTo === undefined || this.options.fromTo === '') {\n      this.logger.error('lookup_from_to_missing_key');\n      return;\n    }\n    const cifInfo = this.commonService.session.getValueOf(ConstantCommon.USERINFO);\n\n    const requestData: IOmniAccountRequest = this.prepareRequestData(cifInfo);\n    this.returnAccountList(requestData);\n  }\n\n  /**\n   * fetching account list from server\n   * @param requestData IOmniAccountRequest\n   */\n  private async returnAccountList(requestData: IOmniAccountRequest) {\n    const personalizationCO = this.commonProv.session.getValueOf(CommonBussinessConstant.PERSONALIZATION_CO)\n    this.complexLookupOptions.listOfOptions = undefined;\n    const result = await this.omniPull.returnAccounts(requestData).catch(error => {\n      this.complexLookupOptions.listOfOptions = [];\n      this.logger.error('Error: While fetching accounts in PsComplexOwnAccountComponent :', error);\n    });\n\n    if (result && result.gridModel.length > 0) {\n      /**\n       * for fetching all the account types if allType flag is passed\n       */\n      if (this.allType) {\n        requestData.accountType = 'F';\n        requestData.permittedGls = 'F';\n        const result1: any = await this.omniPull.returnAccounts(requestData).catch(error => {\n          this.logger.error('Error: While fetching accounts in PsComplexOwnAccountComponent :', error);\n        });\n        if (result1 && result1.gridModel.length > 0) {\n          result.gridModel = [...result.gridModel, ...result1.gridModel];//Jira #7129 The correct way to merge two arrays \n        }\n      }\n\n      this.options.listOfAccounts = result.gridModel;\n      if (this.options.accountNumber && this.options.accountNumber !== '') {\n        this.complexLookupOptions.listOfOptions = this.options.listOfAccounts.filter(account => account.accountNumber !== this.options.accountNumber);\n      }\n      if (this.options.currency && this.options.currency !== '') {\n        this.complexLookupOptions.listOfOptions = this.fetchAccountBasedOnCurrency(this.options.currency);\n        if (this.options.accountNumber && this.options.accountNumber !== '') {\n          this.complexLookupOptions.listOfOptions = this.options.listOfAccounts.filter(account => account.accountNumber !== this.options.accountNumber);\n        }\n      }\n\n      if ((this.options.accountNumber === null || this.options.accountNumber === undefined || this.options.accountNumber === '')) {\n        this.complexLookupOptions.listOfOptions = this.options.listOfAccounts;\n      }\n      this.complexLookupOptions.listOfOptions = this.populateCustomAccounts(this.complexLookupOptions.listOfOptions);\n      //AZDB-1203, Moved here by ghada from ps-accounts-list in order to reasure that data is retured from service to assign rowIndex for each record\n      this.complexLookupOptions.listOfOptions.map((element, index) => element['rowIndex'] = index);\n      this.allAccounts = Object.assign<IAccounts[], IAccounts[]>([], this.complexLookupOptions.listOfOptions);\n      if (this.complexLookupOptions.selectedItems == undefined) {\n        this.complexLookupOptions.selectedItems = [];\n      }\n      if (this.complexLookupOptions.multiple) {\n        this.handleMultipleSelection();\n      }\n      //added by Marina for TP:#1433069 to default any from account field to the account chosen by the user in personalization settings\n      //loop on listOfOptions instead of accountsList to be able to use lookup property of the account because\n      //it is the property used by ps-complex-lookup component to set the lookup value    \n      if (!this.options.requestObject[this.options.fcName]) {\n        this.options.defaultByPersonalizedAcc = this.options.defaultByPersonalizedAcc != undefined ? this.options.defaultByPersonalizedAcc : true;\n        if (this.options.fromTo === 'from' && this.options.defaultByPersonalizedAcc) {\n          let personalizationKeyToCheck = this.options.purpose === 'QR' ? personalizationCO?.defaultQrPaymentAccKey : personalizationCO?.defaultTransferAccKey;\n          this.complexLookupOptions.listOfOptions.map(account => {\n            //Makki: Jira #5578, Having two undefined values doesn't mean the condition is fulfilled, need to check personalizeKey is not 'undefined'\n            if (account.personalizeKey) {\n              if (account.personalizeKey === personalizationKeyToCheck) {\n                this.common.setValInsideNestedObj(this.options.fcName, account.lookupKey, this.options.requestObject);\n                this.common.setValInsideNestedObj(this.options.fcName + '_lookupKey', account.lookupKey, this.options.requestObject);\n              }\n            }\n          });\n        }\n      }\n    } else {\n      this.listOfAccounts = [];\n      this.complexLookupOptions.listOfOptions = [];\n    }\n  }\n\n  /**\n   *\n   * @param listOfOptions\n   */\n  private populateCustomAccounts(listOfOptions: IAccountResponse[]): IAccountResponse[] {\n\n    const accountsList: IAccountResponse[] = [];\n    for (const iterator of listOfOptions) {\n      const account: IAccountResponse = {\n        briefNameEnglish: iterator.briefNameEnglish,\n        cifShortNameEnglish: iterator.cifShortNameEnglish,\n        accountNumber: iterator.accountNumber,\n        balance: this.psCurrency.transform(iterator.balance === null || iterator.balance === undefined ? '0.0' : iterator.balance, iterator.currencyDecimalPoints) + ' ' + (iterator.currencyBriefName || iterator.currencyBriefNameEnglish),\n        availableBalance: this.psCurrency.transform(iterator.availableBalance === null || iterator.availableBalance === undefined ? '0.0' : iterator.availableBalance, iterator.currencyDecimalPoints) + ' ' + (iterator.currencyBriefName || iterator.currencyBriefNameEnglish),\n        currencyBriefName: iterator.currencyBriefName || iterator.currencyBriefNameEnglish,\n        currencyBriefNameEnglish: iterator.currencyBriefNameEnglish,\n        currency: iterator.currency,\n        accountTypeDesc: iterator.accountTypeDesc,\n        additionalRef: iterator.additionalRef,\n        ibanAccNo: iterator.ibanAccNo,\n        accGl: iterator.accGl,\n        serialNo: iterator.serialNo,\n        branch: iterator.branch,\n        cif: iterator.cif,\n        formattedAccount: this.accountsService.returnFormattedAccount(iterator).formattedAccount,\n        personalizeKey: iterator.personalizeKey,\n        nickName: iterator.nickName,\n        briefName: iterator.briefName,\n        lookupKey: iterator.additionalRef,\n        branchDescription: iterator.branchDescription ? iterator.branchDescription : '',\n        generalLedgerBriefNameEng: iterator.generalLedgerBriefNameEng ? iterator.generalLedgerBriefNameEng : '',\n        previewProperty: 'accountNumber', //changed by ghada and confirmed by Aline, tp1487062 to set some descriptive info for user on select\n        status: iterator.statusDescription,//'Active...\n        statusCode: iterator.status,//'A','I',..\n        accountFormat: this.accountsService.returnFormattedAccount(iterator).accountFormat\n      };\n      //added by Marina TP:#1433069 to include the excludeType property with each account if the lookup is multiselect\n      if (this.options.multiple) {\n        account.excludeType = iterator.excludeType;\n      }\n      accountsList.push(account);\n    }\n    return accountsList;\n  }\n\n  /**\n   * preparing request data\n   * @param cifInfo: any\n   */\n  private prepareRequestData(cifInfo: any): IOmniAccountRequest {\n    let requestData: IOmniAccountRequest = {};\n\n    if (cifInfo && cifInfo.omniUserVO) {\n      requestData = {\n        // vsBranchCode: cifInfo.branchCode,\n        userCifNo: cifInfo.omniUserVO.CIF_NO,\n        type: 'A'\n      };\n    }\n    if (this.options.queryParams != null && this.options.queryParams !== undefined && this.options.queryParams !== '') {\n      requestData = {\n        commonParametersList: this.options.queryParams\n      };\n    }\n    if (this.options.accountType != null && this.options.accountType !== undefined && this.options.accountType !== '') {\n      requestData.accountType = this.options.accountType;\n    }\n    if (this.options.glTypes != null && this.options.glTypes !== undefined && this.options.glTypes !== '') {\n      requestData.permittedGls = this.options.glTypes;\n    }\n    if (this.options.fromTo !== null && this.options.fromTo !== undefined && this.options.fromTo !== '') {\n      requestData.fromTo = this.options.fromTo;\n    }\n    if (this.options.endUserId !== null && this.options.endUserId !== undefined && this.options.endUserId !== '') {\n      requestData.endUserId = this.options.endUserId;\n    }\n    if (this.options.fromCurrency !== null && this.options.fromCurrency !== undefined) {\n      requestData.fromCurrency = this.options.fromCurrency;\n    } else if (this.options.toCurrency !== null && this.options.toCurrency !== undefined) {\n      requestData.toCurrency = this.options.toCurrency;\n    }\n\n    if (this.options.accountAllowedCurrencies != null && this.options.accountAllowedCurrencies !== undefined) {\n      if (typeof this.options.accountAllowedCurrencies === 'string') {\n        requestData.accountAllowedCurrencies = this.options.accountAllowedCurrencies;\n      } else {\n        let temp = '';\n        // eslint-disable-next-line guard-for-in\n        for (const val in this.options.accountAllowedCurrencies) {\n          const value = this.options.accountAllowedCurrencies[val];\n          temp += value + ',';\n        }\n        temp = temp.slice(0, temp.lastIndexOf(','));\n        requestData.accountAllowedCurrencies = temp;\n      }\n    }\n\n    if (this.options.accountAllowedTypes != null && this.options.accountAllowedTypes !== undefined) {\n      if (typeof this.options.accountAllowedTypes === 'string') {\n        requestData.accountAllowedTypes = this.options.accountAllowedTypes;\n      } else {\n        let temp = '';\n        // eslint-disable-next-line guard-for-in\n        for (const val in this.options.accountAllowedTypes) {\n          const value = this.options.accountAllowedTypes[val];\n          temp += value + ',';\n        }\n        temp = temp.slice(0, temp.lastIndexOf(','));\n        requestData.accountAllowedTypes = temp;\n      }\n    }\n    return requestData;\n  }\n\n\n\n  /**\n   * will fetch the list of accounts from server based currecy filter\n   */\n  private fetchAccountBasedOnCurrency(currency: any): IAccounts[] {\n    // TODO: when service is available: account list will be fetched from server based on currency if passed any\n    return this.options.listOfAccounts;\n  }\n\n  onChange(event: any[]) {\n    this.logger.log(event);\n    // TODO: get the updated data from server\n  }\n\n  private populateOwnAccountMap() {\n    let accountNumberMap: IMapKeyValue = {};\n    let accountBalanceMap: IMapKeyValue = {};\n    let accountAvailableBalanceMap: IMapKeyValue = {};\n\n    accountNumberMap = {\n      key: 'accountNumber', // will be used in lookup compoent to get the value of account nummer from list of accounts\n      value: '--- --- --- ---',\n      isEdit: false,\n    };\n\n    accountBalanceMap = {\n      key: 'currentBalance', // will be used in lookup compoent to get the value of account balance from list of accounts\n      value: '0.0',\n      isEdit: false,\n    };\n\n    accountAvailableBalanceMap = {\n      key: 'availableBalance', // will be used in lookup compoent to get the value of account available balance from list of accounts\n      value: '0.0',\n      isEdit: false\n    };\n\n    // key here will be used as label in look up details component\n    this.labelValuesMap.set('account_key', accountNumberMap);\n    this.labelValuesMap.set('balance_key', accountBalanceMap);\n    this.labelValuesMap.set('available_balance_key', accountAvailableBalanceMap);\n  }\n\n  onChangeItem(event) {\n    this.onAccountChange.emit(event);\n  }\n\n  onDeleteItem(account) {\n    if (account) {\n      this.onAccountDeleted.emit(account);\n    }\n  }\n\n\n  handleMultipleSelection() {\n    const accountList = this.options.setAllAccountsAsSelecetd ? this.complexLookupOptions.listOfOptions :\n      (this.options.requestObject[this.options.fcName] ?\n        this.complexLookupOptions.listOfOptions.filter(item => this.options.requestObject[this.options.fcName].some(item1 => item1.accountNumber == item.accountNumber)) : []);\n    //edited by Marina TP:#1433069 to avoid adding excluded general or term accounts with the selected items\n    this.complexLookupOptions.selectedItems = accountList.filter(element => (this.options.setAllAccountsAsSelecetd\n      && (!element.excludeType || !(element.excludeType.includes(CommonBussinessConstant.GENERAL_ACCOUNT_EXCLUDE_TYPE)\n        || element.excludeType.includes(CommonBussinessConstant.TERM_ACCOUNT_EXCLUDE_TYPE))))\n      || !this.options.setAllAccountsAsSelecetd\n    ).map(element => {\n      return {\n        item: element[element.previewProperty],\n        ...element,\n        itemLookup: element.lookupKey\n      };\n\n    });\n\n    if (this.complexLookupOptions.selectedItems.length > 0)\n      this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems);\n  }\n\n  removeAccount(account) {\n    if (account) {\n      if (this.allAccounts !== undefined) {\n        this.complexLookupOptions.listOfOptions = this.allAccounts ? this.allAccounts.filter(item => account.accountNumber != item.accountNumber) : [];\n      }\n\n    }\n  }\n\n  reset() {\n    this.complexLookupComponentObj.resetLookUp();\n  }\n\n  refreshAcounts(accountOptions: IOptionsPsLookupOwnAccountsExposed) {\n    this.complexLookupOptions.listOfOptions = Object.assign<IAccounts[], IAccounts[]>([], this.allAccounts);\n    this.removeAccount(accountOptions)\n  }\n}\n\n","export default \"<ps-container-complex class=\\\"ps-complex-own-account\\\">\\n\\n  <ps-complex-lookup [id]=\\\"id\\\" #complexLookupComponentObj (changeItem)=\\\"onChangeItem($event)\\\"\\n    (onDeleteItem)=\\\"onDeleteItem($event)\\\" [options]=\\\"complexLookupOptions\\\">\\n  </ps-complex-lookup>\\n\\n</ps-container-complex>\";","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\r\nimport { PsComponentsModule } from 'src/app/commonSRC/psComponents/ps-components.module';\r\nimport { SharedModule } from 'src/app/commonSRC/shared.module';\r\n\r\nimport { PsComplexLookupComponentModule } from '../../ps-complex-components/ps-complex-lookup/ps-complex-lookup.component.module';\r\nimport { PsInputVarcharComponentModule } from '../../ps-keyin-input/ps-input-varchar/ps-input-varchar.component.module';\r\nimport { PsLookupOwnAccountsComponent } from './ps-lookup-own-accounts.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        PsLookupOwnAccountsComponent\r\n    ],\r\n    imports: [\r\n        SharedModule,\r\n        PsComponentsModule,\r\n        PsInputVarcharComponentModule,\r\n        PsComplexLookupComponentModule\r\n    ],\r\n    exports: [\r\n        PsLookupOwnAccountsComponent\r\n    ],\r\n    entryComponents: [\r\n        PsLookupOwnAccountsComponent\r\n    ],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class PsLookupOwnAccountComponentModule { }\r\n"]}