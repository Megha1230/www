(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"4lGw":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("DFXC"),a=i("ZyuK"),s=i("fXoL");let o=(()=>{class e{constructor(e,t){this.omniPull=e,this.logger=t,this.getAccountAsIBAN()}getAccountAsIBAN(){void 0===this.accountAsIBAN&&this.omniPull.getParamValOf("AccountsAsIBAN").then(e=>{this.accountAsIBAN=e.AccountsAsIBAN}).catch(e=>this.logger.log(e))}returnFormattedAccount(e){let t,i;return null!=this.accountAsIBAN&&1===this.accountAsIBAN?(t=null==e.ibanAccNo?"":e.ibanAccNo,i="IBAN"):null!=this.accountAsIBAN&&2===this.accountAsIBAN?(t=null==e.additionalRef?"":e.additionalRef,i="AddRef"):null!=this.accountAsIBAN&&3===this.accountAsIBAN?(t=e.branch+"-"+e.currency+"-"+e.accGl+"-"+e.cif+"-"+e.serialNo,i="iMAL"):(t=null==e.additionalRef?"":e.accountNumber,i="ACCNO"),{formattedAccount:t,accountFormat:i}}}return e.\u0275fac=function(t){return new(t||e)(s.bc(a.a),s.bc(n.a))},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},EZLY:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i("fXoL"),a=i("uqA0"),s=i("xV2m"),o=i("KVmc");const r=["templateList"],c=function(){return{labelKey:"no_matching_found_key",translate:!0}},l=["*"];let u=(()=>{class e extends a.a{constructor(){super(),this.searchOptions={contentReference:"container-lookup-option",selectors:"ion-label,span:not(:has(ps-label,ion-label),.highlight)",actionType:"filter"}}ngOnInit(){this.init()}init(){super.init()}ngAfterViewInit(){this.searchOptions.templateRef=this.templateList}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ps-template-list"]],viewQuery:function(e,t){if(1&e&&n.Wc(r,1,n.m),2&e){let e;n.Bc(e=n.gc())&&(t.templateList=e.first)}},features:[n.Cb],ngContentSelectors:l,decls:7,vars:3,consts:[[1,"ps-template-list-searchbar-wrapper"],["id","search_in_template_list",3,"options"],[1,"ps-template-list-container"],["templateList",""],[1,"no-matching-found",3,"options"],["id","ps-template-list-main-content"]],template:function(e,t){1&e&&(n.oc(),n.Xb(0,"div",0),n.Sb(1,"ps-input-search-html",1),n.Wb(),n.Xb(2,"div",2,3),n.Sb(4,"ps-label",4),n.Xb(5,"div",5),n.nc(6),n.Wb(),n.Wb()),2&e&&(n.Fb(1),n.pc("options",t.searchOptions),n.Fb(3),n.pc("options",n.rc(2,c)))},directives:[s.a,o.a],encapsulation:2}),e})()},OVQh:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var n=i("fXoL"),a=i("V0Fi"),s=i("MfpM"),o=i("r40+"),r=i("EZLY"),c=i("fOh1"),l=i("ZyuK"),u=i("zngb"),p=i("QZhd"),h=i("Q0Ba"),d=i("ofXK"),m=i("BygU");function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div"),n.Xb(1,"ps-container-lookup-option",3),n.fc("clickedCard",function(t){return n.Fc(e),n.ic(2).updateCard(t)}),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.ic(2);n.Fb(1),n.pc("id",i.id+"_opt")("options",i.getContainerLookUpOptions(e))("itemCard",e)}}function y(e,t){if(1&e&&(n.Xb(0,"div",1),n.Pc(1,b,2,3,"div",2),n.Wb()),2&e){const e=n.ic();n.Fb(1),n.pc("ngForOf",e.options.itemList)}}let _=(()=>{class e extends r.a{constructor(e,t,i,a){super(),this.commonServices=e,this.cdRef=t,this.event=i,this.omniPull=a,this.options={},this.onClickCard=new n.o,this.labelValuesMap=new Map,this.headerMap=new Map,this.showSingleAccount=!1,this.requestMap=new Map,this.editRequestMap=new Map,this.businessProfileMap=[],this.lookUpOptions=[],this.lookUpDetailsOptionsDict={},this.lookUpDetailsOptions=null,this.eventSub=this.event.subscribe("refreshList",e=>{})}ngOnDestroy(){super.ngOnDestroy(),this.eventSub&&this.eventSub.unsubscribe()}ngOnInit(){let e;super.init(),this.businessProfileMap=this.commonProv.session.getValueOf(u.a.BUSINESS_PROFILE_MAP),this.businessProfileMap&&(e=this.businessProfileMap.filter(e=>e.OPER_ID===p.a.oper_ID).shift());this.options.enableListPagination||(this.options.itemList=this.options.listOfOptions),this.populateAccountsMap()}getContainerLookUpOptions(e){return void 0!==this.lookUpDetailsOptionsDict[e.rowIndex]||(this.lookUpDetailsOptionsDict[e.rowIndex]=this.prepareLookUp(e)),this.lookUpDetailsOptionsDict[e.rowIndex]}prepareLookUp(e){let t={translateSubTitle:!1};return t.labelKey=this.options.labelKey,t.fcName=this.options.fcName,t.currencyDescription="currencyBriefName",t.currencyFlag="currencyBriefNameEnglish",t.labelsValueMap=this.labelValuesMap,t.headerMap=this.headerMap,t.formGroup=this.options.group,t.group=this.options.group,t.balanceMapping=this.balanceMapping(),t.balanceFcNames=this.options.balanceFcNames?this.options.balanceFcNames:[],t.isEditable=this.options.isEditable,t.editActionUrl=c.a.serviceUrl.personalizationNicknameEndPoint,t.requestMap=this.requestMap,t.editRequestMap=this.editRequestMap,t.showInitialCardValues=a.a.VISIBLE_FIELD,this.options.refreshTermDepositList&&(t.detailServiceUrl=[{url:c.a.serviceUrl.maturityAccountDetailsRestEndPoint,paramsKeyLabels:[{key:"accountNumber",value:"accountNumber"},{key:"accountType",staticValue:"F"}],responseKeyLabel:[{key:"investmentCapital",value:"investmentCapital"},{key:"tenor",value:"tenor"},{key:"maturityDateStr",value:"maturityDateStr"},{key:"profitRate",value:"profitRate"},{key:"accruedDividends",value:"accruedDividends"},{key:"dividendsPaid",value:"dividendsPaid"},{key:"renew",value:"renew"},{key:"renewWithSame",value:"renewWithSame"}]}]),t.actionDetailsOptions=[this.options.type==a.a.GENERAL_ACCOUNT_TYPE?{id:"pending_transfers",label:"pending_transfers_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"pending-transfers",labelOptions:{labelKey:"pending_transfers_key"}},route:"pending-transfers-report",pageOptions:{operId:a.a.PENDING_TRANSFERS_REPORT_OPER_ID,iconName:"pending-transfers",title:"pending_transfers_key"},psClass:"pending-transfers-action"}}:{},this.commonProv.hasAccessOnOperation(a.a.REQUEST_HARD_COPY_STATEMENT_OPER_ID)?{id:"request_hard",label:"request_hard_copy_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"hard-copy-statement-request-icon",labelOptions:{labelKey:"request_hard_copy_key"}},route:"hard-copy-statement-request",pageOptions:{operId:a.a.REQUEST_HARD_COPY_STATEMENT_OPER_ID,iconName:"hard-copy-statement-request-icon",title:"request_hard_copy_key"},psClass:"hard-copy-statement-request"}}:{},this.commonProv.isNativeMobile()||p.a.custMode?{id:"share",labelOptions:{labelKey:"share_key"},component:s.a,componentOptions:{message:null==e?void 0:e.sharedMessage}}:{}],this.options.refreshTermDepositList&&this.commonProv.hasAccessOnOperation(a.a.CHANGE_MATURITY_ACCOUNT_OPER_ID)&&(t.actionDetailsOptions.push({id:"change_maturity",label:"change_maturity_instructions_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"document",labelOptions:{labelKey:"change_maturity_instructions_key"}},route:"change-maturity-instructions",pageOptions:{operId:a.a.CHANGE_MATURITY_ACCOUNT_OPER_ID,iconName:"document",title:"change_maturity_instructions_key"},preCallFunction:{func(){return new Promise((e,i)=>{e(this.executionClass.prepareMaturityAccountInfo(t.actionDetailsOptions[3].actionHyperlink))})},executionClass:this,params:[]},psClass:"change-maturity-instructions"}}),t.actionDetailsOptions.push({fcName:"break",label:"break_key",id:"break",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"pending-transfers",labelOptions:{labelKey:"break_key"}},route:"break-term-deposit-account",pageOptions:{operId:a.a.BREAK_TERM_DEPOSIT_ACCOUNT_OPER_ID,iconName:"pending-transfers",title:"break_key"},psClass:"break-term-deposit-account"}})),e&&e.statusCode===a.a.ACCOUNTS_STATE_ACTIVE&&this.commonProv.hasAccessOnOperation(a.a.E_STATEMENT_REQUEST_OPER_ID)&&t.actionDetailsOptions.push({id:"statement_request",label:"e_statement_request_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"paper-plane",labelOptions:{labelKey:"e_statement_request_key"}},route:"e-statement-request",pageOptions:{operId:a.a.E_STATEMENT_REQUEST_OPER_ID,iconName:"paper-plane",title:"e_statement_request_key"},psClass:"e-statement-request"}}),t.listOfStatementOptions=[{buttonIcon:"account-statement",redirectUrl:"account-statement-report",operId:u.a.VIEW_STATEMENT_OF_TRANSACTIONS,title:"accounts_report_key"}],this.options.generatedToQR&&(null==t.actionDetailsOptions&&(t.actionDetailsOptions=[]),t.actionDetailsOptions.push({id:"qr_code",buttonIcon:"qr_code_2",actionUrl:p.a.serviceUrl.commonSubmitAction,cssClass:"qr-code-account-list fab-edit-button",iconName:"qr_code_2",labelOptions:{labelKey:"qr_code_key"},actionType:"QR",label:"qr_code_key",alertType:"QR",qrData:{AdditionalRef:"AddRef-"+e.additionalRef,IBAN:"IBAN-"+e.ibanAccNo,AccountRef:e.accountFormat+"-"+e.formattedAccount,briefName:e.briefName}})),t}prepareMaturityAccountInfo(e){return new Promise((t,i)=>{this.omniPull.returnMaturityAccountInformation({accountNumber:e.navigationOptions.queryParams.accountNumber,accountType:"F"}).then(i=>{i&&(this.commonProv.copyObject(e.navigationOptions.queryParams,{MaturityInfo:{renew:"yes"===i.renew,renewWithSame:"yes"===i.renewWithSame,maturityAccount:"yes"===i.renew?null:i.transferAccount.additionalRef,maturityAccount_lookupKey:"yes"===i.renew?null:i.transferAccount.additionalRef,profitAccount:"yes"===i.renewWithSame?null:i.profitAccount.additionalRef,profitAccount_lookupKey:"yes"===i.renewWithSame?null:i.profitAccount.additionalRef}},!1),e.navigationOptions.queryParams=Object.assign({},e.navigationOptions.queryParams),t(e.navigationOptions.queryParams))}).catch(e=>{this.commonProv.logger.error("Error: While fetching returnMaturityAccountInformation in change maturity page:",e)})})}generateSharedMessage(e){let t="";return null!=e.cifShortNameEnglish&&null!=e.cifShortNameEnglish&&(t=this.commonServices.translate("account_holder_name_key")+": "+e.cifShortNameEnglish),null!=e.briefName&&null!=e.briefName&&(t=(""!=t?t+" - ":"")+this.commonServices.translate("account_name_key")+": "+e.briefName),null!=e.accountNumber&&null!=e.accountNumber&&(t=(""!=t?t+" - ":"")+this.commonServices.translate("account_number_key")+": "+e.accountNumber),null!=e.additionalRef&&null!=e.additionalRef&&(t=(""!=t?t+" - ":"")+this.commonServices.translate("account_ref_key")+": "+e.additionalRef),null!=e.ibanAccNo&&null!=e.ibanAccNo&&(t=(""!=t?t+" - ":"")+this.commonServices.translate("iban_key")+": "+e.ibanAccNo),t=(""!=t?t+" - ":"")+this.commonServices.translate("bank_name_key")+": "+this.commonProv.session.getValueOf(u.a.USERINFO).companySettingsCO.briefDesc,null!=e.branchDescription&&null!=e.branchDescription&&(t=(""!=t?t+" - ":"")+this.commonServices.translate("branch_name_key")+": "+e.branchDescription),t}ngAfterViewChecked(){this.cdRef.detectChanges()}updateCard(e){e&&this.options.listOfOptions&&(this.options.itemList=this.options.listOfOptions.filter(t=>t===e),this.options.item=this.options.itemList[0],this.showSingleAccount=!this.showSingleAccount,this.options.showItemPopUp=!this.options.showItemPopUp),this.onClickCard.emit(this.options)}populateAccountsMap(){let e={},t={},i={},n={},s={},o={},r={},c={},l={},u={},p={},h={},d={},m={},b={},y={},_={};e={key:"formattedAccount",value:"--- --- --- ---",isEdit:!1},t={key:"balance",value:"0.0",isEdit:!1},i={key:"availableBalance",value:"0.0",isEdit:!1},n={key:"investmentCapital",value:"0",isEdit:!1},s={key:"profitRate",value:"0",isEdit:!1},o={key:"tenor",value:"0",isEdit:!1},r={key:"maturityDateStr",value:"0",isEdit:!1},c={key:"dividendsPaid",value:"0",isEdit:!1},l={key:"accruedDividends",value:"0",isEdit:!1},u={key:"renew",value:"0",isEdit:!1},p={key:"renewWithSame",value:"0",isEdit:!1},h={key:"maturityInstructions",value:"0",isEdit:!1},d={key:"actualAmount",value:"0",isEdit:!1,showMappingOnNoValue:!0},m={key:"outstandingAmount",value:"0",isEdit:!1,showMappingOnNoValue:!0},b={key:"accumulatedAmount",value:"0",isEdit:!1,showMappingOnNoValue:!0},y={key:"title",value:"accountTypeDesc",isEdit:!1},_={key:"subTitle",value:"briefName",isEdit:!0,formGroupMap:{placeHolder:"enter_account_nick",fcName:"briefName"}},this.labelValuesMap.set("account_key",e),this.options.refreshTermDepositList&&(this.labelValuesMap.set("investment_capital_key",n),this.labelValuesMap.set("profit_rate_key",s),this.labelValuesMap.set("tenor_key",o),this.labelValuesMap.set("maturity_date_key",r),this.labelValuesMap.set("dividends_paid_key",c),this.labelValuesMap.set("accrued_dividends_key",l),this.labelValuesMap.set("renew_key",u),this.labelValuesMap.set("renew_new_balance_within_same_account_key",p)),this.options.type===a.a.GENERAL_ACCOUNT_TYPE&&(this.labelValuesMap.set("overdraft_actual_key",d),this.labelValuesMap.set("overdraft_outstand_key",m),this.labelValuesMap.set("overdraft_accumulated_key",b)),this.headerMap.set("title",y),this.headerMap.set("subTitle",_),this.requestMap.set("nickNameNumber","personalizeKey"),this.requestMap.set("oldNickName","briefName"),this.editRequestMap.set("newNickName","briefName"),this.editRequestMap.set("type","A")}balanceMapping(){return[{key:"current_balance_key",value:"balance"},{key:"available_balance_key",value:"availableBalance"},{key:"currency_iso_key",value:"currencyBriefName"}]}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(h.a),n.Rb(n.i),n.Rb(o.a),n.Rb(l.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["ps-accounts-list"]],inputs:{options:"options"},outputs:{onClickCard:"onClickCard"},features:[n.Cb],decls:2,vars:1,consts:[["class","account-list",4,"ngIf"],[1,"account-list"],[4,"ngFor","ngForOf"],[3,"id","options","itemCard","clickedCard"]],template:function(e,t){1&e&&(n.Xb(0,"ps-template-list"),n.Pc(1,y,2,1,"div",0),n.Wb()),2&e&&(n.Fb(1),n.pc("ngIf",(null==t.options||null==t.options.itemList?null:t.options.itemList.length)>0))},directives:[r.a,d.o,d.n,m.a],styles:[""],changeDetection:0}),e})()}}]);