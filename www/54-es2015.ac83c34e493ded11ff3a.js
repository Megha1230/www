(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"7XXa":function(e,t,o){"use strict";o.d(t,"a",function(){return A});var i=o("mrSG"),s=o("fXoL"),n=o("3Pt+"),p=o("V0Fi"),a=o("ZyuK"),c=o("ZF3V"),r=o("DFXC"),l=o("zngb"),d=o("Q0Ba"),u=o("y70R"),h=o("Isd1"),m=o("ofXK"),f=o("iOQE"),y=o("QZhd");let O=(()=>{class e extends f.a{constructor(e,t,o){super(e,t),this.commonProv=e,this.loggerP=t,this.omniPull=o,this.defaultSelectOptions={labelKey:"cif_types_key",placeHolder:"cif_type_key"}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.returnCifTypes()}onChange(e){this.onPsChange.emit(e)}returnCifTypes(){return Object(i.b)(this,void 0,void 0,function*(){this.omniPull.returnCifTypes({language:y.a.activeLanguge}).then(e=>{if(this.defaultSelectOptions.listOfOptions=[],e&&e.gridModel&&e.gridModel.length>0)for(const t of e.gridModel){const e={itemValue:t.typeCode.toString(),description:t.briefDesc,selectedObj:t};this.defaultSelectOptions.listOfOptions.push(e)}},e=>{this.logger.error("Error: While fetching data : ",e)})})}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(d.a),s.Rb(r.a),s.Rb(a.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["ps-dropdown-cif-types"]],inputs:{options:"options"},features:[s.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(s.Xb(0,"ps-select-dropdown",0),s.fc("onPsChange",function(e){return t.onChange(e)}),s.Wb()),2&e&&s.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[f.a],styles:[""]}),e})();const b=["idDetailsComp"];function _(e,t){if(1&e){const e=s.Yb();s.Xb(0,"ps-dropdown-cif-types",3),s.fc("onPsChange",function(t){return s.Fc(e),s.ic().onChange(t)}),s.Wb()}if(2&e){const e=s.ic();s.pc("options",e.defaultOptions.cifTypeOptions)}}function g(e,t){1&e&&s.Sb(0,"ps-complex-id-details",9,10),2&e&&s.pc("options",t.$implicit)}function N(e,t){if(1&e&&(s.Vb(0),s.Pc(1,g,2,1,"ps-complex-id-details",8),s.Ub()),2&e){const e=s.ic(2);s.Fb(1),s.pc("ngForOf",e.mandatoryIdTypes)}}function C(e,t){if(1&e){const e=s.Yb();s.Xb(0,"ps-complex-id-details",11,10),s.fc("onPsChange",function(t){return s.Fc(e),s.ic(2).onItemChange(t)}),s.Wb()}if(2&e){const e=s.ic(2);s.pc("options",e.defaultOptions.complexIdDetailsOptions1)}}function T(e,t){if(1&e){const e=s.Yb();s.Xb(0,"ps-complex-id-details",12,10),s.fc("onPsChange",function(t){return s.Fc(e),s.ic(2).onItemChange(t)}),s.Wb()}if(2&e){const e=s.ic(2);s.pc("options",e.defaultOptions.complexIdDetailsOptions)}}function I(e,t){if(1&e&&(s.Xb(0,"div",4),s.Pc(1,N,2,1,"ng-container",5),s.Pc(2,C,2,1,"ps-complex-id-details",6),s.Pc(3,T,2,1,"ps-complex-id-details",7),s.Wb()),2&e){const e=s.ic();s.Fb(1),s.pc("ngIf",e.mandatoryIdTypes&&e.mandatoryIdTypes.length>0&&!e.showIdDropDown),s.Fb(1),s.pc("ngIf",0==e.mandatoryIdTypes.length&&e.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.listOfOptions&&e.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.listOfOptions.length>0&&!e.showIdDropDown&&!e.mandatoryIdThere),s.Fb(1),s.pc("ngIf",0==e.mandatoryIdTypes.length&&0==e.optionalIdTypes.length&&e.showIdDropDown)}}let A=(()=>{class e extends c.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.onIdTypesGetLoaded=new s.o,this.defaultOptions={cifTypeOptions:{labelKey:"cif_key",placeHolder:"select_cif_type_key",iconOptions:{iconName:"clipboard"}},complexIdDetailsOptions:{dropdownIdTypesOptions:{fcName:"idType1",labelKey:"national_id_type_key",placeHolder:"enter_national_id_type_key"},idNumberOptions:{labelKey:"id_number_key",placeHolder:"enter_id_number_key",fcName:"idNumber1"},dateExpiryOptions:{labelKey:"expiry_date_key",placeHolder:"enter_expiry_date_key",fcName:"expiryDate1"},countriesOptions:{labelKey:"country_of_issuance_key",placeHolder:"select_country_of_issuance_key",fcName:"issuanceCountry1",iconOptions:{iconName:"clipboard"}},issueDateOptions:{labelKey:"issue_date_key",placeHolder:"issue_date_key",fcName:"issueDate1"}},complexIdDetailsOptions1:{dropdownIdTypesOptions:{fcName:"idType1",labelKey:"national_id_type_key",placeHolder:"enter_national_id_type_key"},idNumberOptions:{labelKey:"id_number_key",placeHolder:"enter_id_number_key",fcName:"idNumber1"},dateExpiryOptions:{labelKey:"expiry_date_key",placeHolder:"enter_expiry_date_key",fcName:"expiryDate1"},countriesOptions:{labelKey:"country_of_issuance_key",placeHolder:"select_country_of_issuance_key",fcName:"issuanceCountry1",iconOptions:{iconName:"clipboard"}},issueDateOptions:{labelKey:"issue_date_key",placeHolder:"issue_date_key",fcName:"issueDate1"}},showCifType:!0},this.showBG=!1,this.mandatoryIdTypes=[],this.optionalIdTypes=[],this.showIdDropDown=!1,this.mandatoryIdThere=!1,this.gridModelItemLength=0}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options),this.defaultOptions.requestObject=this.options.requestObject,super.init(),0==this.defaultOptions.showCifType&&this.returnIDTypes(null)}onChange(e){void 0!==this.defaultOptions.group.controls[this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName]&&(this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_READONLY,[this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName],0),this.defaultOptions.group.controls[this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName].setValue(null)),void 0!==this.defaultOptions.group.controls[this.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.fcName]&&(this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_READONLY,[this.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.fcName],0),this.defaultOptions.group.controls[this.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.fcName].setValue(null)),e&&e.selectedObj&&(this.returnIDTypes(e.selectedObj),this.onPsChange.emit(e))}returnIDTypes(e){var t;return Object(i.b)(this,void 0,void 0,function*(){const o={cifType:{selectedObj:e},param:null===(t=this.options)||void 0===t?void 0:t.param};this.omniPull.returnIdTypesList(o).then(e=>{var t;let o;if(this.mandatoryIdTypes=[],this.optionalIdTypes=[],e&&e.gridModel&&e.gridModel.length>0){this.removeIdDetailControls(),this.showIdDropDown=!1;let i=1;const s=e.gridModel.filter(e=>!0===e.mandatory);this.gridModelItemLength=s.length,this.mandatoryIdThere=s.length>0;for(const t of e.gridModel){const e={group:this.options.group,dropdownIdTypesOptions:{labelKey:"national_id_type_key",placeHolder:"enter_national_id_type_key",group:this.options.group},idNumberOptions:{labelKey:"id_number_key",placeHolder:"enter_id_number_key",group:this.options.group},dateExpiryOptions:{labelKey:"expiry_date_key",placeHolder:"enter_expiry_date_key",group:this.options.group},countriesOptions:{labelKey:"country_of_issuance_key",placeHolder:"select_country_of_issuance_key",iconOptions:{iconName:"clipboard"},group:this.options.group},issueDateOptions:{labelKey:"issue_date_key",placeHolder:"issue_date_key",group:this.options.group}};if(!0===t.mandatory){e.dropdownIdTypesOptions.fcName="idType"+i,e.idNumberOptions.fcName="idNumber"+i,e.dateExpiryOptions.fcName="expiryDate"+i,e.countriesOptions.fcName="issuanceCountry"+i,e.issueDateOptions.fcName="issueDate"+i,this.showBG=!0;const o=[{itemValue:t.CODE.toString(),description:t.briefDesc,selectedObj:t}];e.dropdownIdTypesOptions.listOfOptions=o,this.mandatoryIdTypes.push(e),this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_READONLY,[e.dropdownIdTypesOptions.fcName],1),this.options.group.addControl(e.dropdownIdTypesOptions.fcName,new n.d),this.commonProv.setValInsideNestedObj(e.dropdownIdTypesOptions.fcName,t.CODE.toString(),this.options.requestObject),t.fromLen&&this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_MINLENGTH,[e.idNumberOptions.fcName],t.fromLen),t.toLen&&this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_MAXLENGTH,[e.idNumberOptions.fcName],t.toLen),t.DATA_TYPE&&this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_PATTERN,[e.idNumberOptions.fcName],this.getDataType(t.DATA_TYPE)),i+=1}else if(!1===t.mandatory&&!this.mandatoryIdThere){this.showBG=!0;const e={itemValue:t.CODE.toString(),description:t.briefDesc,selectedObj:t};o="",o=t.CODE.toString(),this.optionalIdTypes.push(e)}}this.optionalIdTypes&&this.optionalIdTypes.length>0&&!this.mandatoryIdThere&&(this.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.listOfOptions=this.optionalIdTypes,null===(t=this.options.group.controls[this.defaultOptions.complexIdDetailsOptions1.idNumberOptions.fcName])||void 0===t||t.reset())}else this.showIdDropDown=!0,this.showBG=!0,this.mandatoryIdTypes=[],this.optionalIdTypes=[],this.defaultOptions.complexIdDetailsOptions1.dropdownIdTypesOptions.listOfOptions=[],this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_READONLY,[this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName],0),this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_PATTERN,[this.defaultOptions.complexIdDetailsOptions.idNumberOptions.fcName],this.getDataType(0)),this.defaultOptions.group.controls[this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName]&&this.commonProv.setValInsideNestedObj(this.defaultOptions.complexIdDetailsOptions.dropdownIdTypesOptions.fcName,null,this.options.requestObject)},e=>{this.logger.error("Error: While fetching data : ",e)}).finally(()=>{this.onIdTypesGetLoaded.emit(!0)})})}getDataType(e){switch(e){case p.a.DEFAULT_DATA_TYPE:return{expression:l.a.numericRegex,errorMsg:"field_should_contain_numeric_characters_key"};case p.a.ALPHA_DATA_TYPE:return{expression:l.a.alphaRegex,errorMsg:"field_should_contain_alphabetic_characters_key"};case p.a.NUMERIC_DATA_TYPE:return{expression:l.a.numericRegex,errorMsg:"field_should_contain_numeric_characters_key"};case p.a.ALPHA_NUMERIC_DATA_TYPE:return{expression:l.a.alphaNumericRegex,errorMsg:"field_should_contain_alpha_numeric_characters_key"};default:return{expression:l.a.numericRegex,errorMsg:"field_should_contain_numeric_characters_key"}}}removeIdDetailControls(){if(this.gridModelItemLength>0)for(let e=1;e<this.gridModelItemLength+1;e++)this.defaultOptions.group.removeControl("idType"+e),this.defaultOptions.group.removeControl("idNumber"+e),this.defaultOptions.group.removeControl("expiryDate"+e),this.defaultOptions.group.removeControl("issuanceCountry"+e),this.defaultOptions.group.removeControl("issueDate"+e)}onItemChange(e){if(e&&e.selectedObj){const t=this.getDataType(e.selectedObj.DATA_TYPE);this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_PATTERN,[this.defaultOptions.complexIdDetailsOptions.idNumberOptions.fcName],t),this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_MINLENGTH,[this.defaultOptions.complexIdDetailsOptions.idNumberOptions.fcName],e.selectedObj.FROM_LEN),this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_MAXLENGTH,[this.defaultOptions.complexIdDetailsOptions.idNumberOptions.fcName],e.selectedObj.TO_LEN)}}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(d.a),s.Rb(r.a),s.Rb(a.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["ps-complex-cif-id-types"]],viewQuery:function(e,t){if(1&e&&s.Wc(b,1),2&e){let e;s.Bc(e=s.gc())&&(t.idDetailsComp=e.first)}},inputs:{options:"options"},outputs:{onIdTypesGetLoaded:"onIdTypesGetLoaded"},features:[s.Cb],decls:3,vars:3,consts:[[3,"options"],[3,"options","onPsChange",4,"ngIf"],["class","cifIdTypes",4,"ngIf"],[3,"options","onPsChange"],[1,"cifIdTypes"],[4,"ngIf"],["id","complex_id_details1",3,"options","onPsChange",4,"ngIf"],["id","complex_id_details2",3,"options","onPsChange",4,"ngIf"],["id","complex_id_details",3,"options",4,"ngFor","ngForOf"],["id","complex_id_details",3,"options"],["idDetailsComp",""],["id","complex_id_details1",3,"options","onPsChange"],["id","complex_id_details2",3,"options","onPsChange"]],template:function(e,t){1&e&&(s.Xb(0,"ps-container-complex",0),s.Pc(1,_,1,1,"ps-dropdown-cif-types",1),s.Pc(2,I,4,3,"div",2),s.Wb()),2&e&&(s.pc("options",t.defaultOptions),s.Fb(1),s.pc("ngIf",t.defaultOptions.showCifType),s.Fb(1),s.pc("ngIf",t.showBG))},directives:[h.a,m.o,O,m.n,u.a],styles:[""]}),e})()},Nnln:function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return s});var i=function(e){return e.BENEFICIARY="B",e.OTHER="O",e}({}),s=function(e){return e.SINGLE="S",e.DAILY="D",e.WEEKLY="W",e.MONTHLY="M",e.YEARLY="Y",e.FORTNIGHTLY="F",e}({})},VEWP:function(e,t,o){"use strict";o.d(t,"a",function(){return y});var i=o("mrSG"),s=o("fXoL"),n=o("4lGw"),p=o("V0Fi"),a=o("ZyuK"),c=o("ZF3V"),r=o("EIUR"),l=o("DFXC"),d=o("zngb"),u=o("Q0Ba"),h=o("Isd1"),m=o("L0og");const f=["complexLookupComponentObj"];let y=(()=>{class e extends c.a{constructor(e,t,o,i){super(e,t),this.commonService=e,this.omniPull=o,this.accountsService=i,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new s.o,this.onAccountDeleted=new s.o,this.labelValuesMap=new Map,this.psCurrency=new r.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(e){return Object(i.b)(this,void 0,void 0,function*(){if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const t=this.commonService.session.getValueOf(d.a.USERINFO),o=this.prepareRequestData(t);this.returnAccountList(o)})}returnAccountList(e){return Object(i.b)(this,void 0,void 0,function*(){const t=this.commonProv.session.getValueOf(p.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const o=yield this.omniPull.returnAccounts(e).catch(e=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});if(o&&o.gridModel.length>0){if(this.allType){e.accountType="F",e.permittedGls="F";const t=yield this.omniPull.returnAccounts(e).catch(e=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});t&&t.gridModel.length>0&&(o.gridModel=[...o.gridModel,...t.gridModel])}if(this.options.listOfAccounts=o.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((e,t)=>e.rowIndex=t),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let e="QR"===this.options.purpose?null==t?void 0:t.defaultQrPaymentAccKey:null==t?void 0:t.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(t=>{t.personalizeKey&&t.personalizeKey===e&&(this.common.setValInsideNestedObj(this.options.fcName,t.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",t.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(e){const t=[];for(const o of e){const e={briefNameEnglish:o.briefNameEnglish,cifShortNameEnglish:o.cifShortNameEnglish,accountNumber:o.accountNumber,balance:this.psCurrency.transform(null==o.balance?"0.0":o.balance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==o.availableBalance?"0.0":o.availableBalance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),currencyBriefName:o.currencyBriefName||o.currencyBriefNameEnglish,currencyBriefNameEnglish:o.currencyBriefNameEnglish,currency:o.currency,accountTypeDesc:o.accountTypeDesc,additionalRef:o.additionalRef,ibanAccNo:o.ibanAccNo,accGl:o.accGl,serialNo:o.serialNo,branch:o.branch,cif:o.cif,formattedAccount:this.accountsService.returnFormattedAccount(o).formattedAccount,personalizeKey:o.personalizeKey,nickName:o.nickName,briefName:o.briefName,lookupKey:o.additionalRef,branchDescription:o.branchDescription?o.branchDescription:"",generalLedgerBriefNameEng:o.generalLedgerBriefNameEng?o.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:o.statusDescription,statusCode:o.status,accountFormat:this.accountsService.returnFormattedAccount(o).accountFormat};this.options.multiple&&(e.excludeType=o.excludeType),t.push(e)}return t}prepareRequestData(e){let t={};if(e&&e.omniUserVO&&(t={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let e="";for(const t in this.options.accountAllowedCurrencies)e+=this.options.accountAllowedCurrencies[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedCurrencies=e}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{let e="";for(const t in this.options.accountAllowedTypes)e+=this.options.accountAllowedTypes[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedTypes=e}return t}fetchAccountBasedOnCurrency(e){return this.options.listOfAccounts}onChange(e){this.logger.log(e)}populateOwnAccountMap(){let e={},t={},o={};e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",o)}onChangeItem(e){this.onAccountChange.emit(e)}onDeleteItem(e){e&&this.onAccountDeleted.emit(e)}handleMultipleSelection(){const e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(e=>this.options.requestObject[this.options.fcName].some(t=>t.accountNumber==e.accountNumber)):[];this.complexLookupOptions.selectedItems=e.filter(e=>this.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(p.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(p.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(e=>Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(t=>e.accountNumber!=t.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(u.a),s.Rb(l.a),s.Rb(a.a),s.Rb(n.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,t){if(1&e&&s.Wc(f,1),2&e){let e;s.Bc(e=s.gc())&&(t.complexLookupComponentObj=e.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[s.Cb,s.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,t){1&e&&(s.Xb(0,"ps-container-complex",0),s.Xb(1,"ps-complex-lookup",1,2),s.fc("changeItem",function(e){return t.onChangeItem(e)})("onDeleteItem",function(e){return t.onDeleteItem(e)}),s.Wb(),s.Wb()),2&e&&(s.Fb(1),s.pc("id",t.id)("options",t.complexLookupOptions))},directives:[h.a,m.a],styles:[""]}),e})()},aAEG:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var i=o("mrSG"),s=(o("Nnln"),o("ZyuK")),n=o("iOQE"),p=o("DFXC"),a=o("Q0Ba"),c=o("fXoL");let r=(()=>{class e extends n.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.defaultSelectOptions={}}ngOnInit(){this.loggerP.log("loadcreditTypes---ngOnInit : "+this.options.cardType),this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.loadcreditTypes()}loadcreditTypes(){return Object(i.b)(this,void 0,void 0,function*(){const e={cardType:this.options.cardType};this.loggerP.log("loadcreditTypes"+e);const t=yield this.omniPull.returnCardTypes(e).catch(e=>{this.logger.error("Error: While fetching Card types in PsDropdownCardTypesComponent : ",e)});if(this.defaultSelectOptions.listOfOptions=[],t&&t.gridModel&&t.gridModel.length>0)for(const o of t.gridModel)this.defaultSelectOptions.listOfOptions.push({itemValue:o.briefName,description:o.briefName,selectedObj:o})})}onCardTypeChange(e){this.loggerP.log("onCardTypeChange@@@@"+e.newValue),this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(a.a),c.Rb(p.a),c.Rb(s.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["ps-dropdown-card-types"]],inputs:{options:"options"},features:[c.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(c.Xb(0,"ps-select-dropdown",0),c.fc("onPsChange",function(e){return t.onCardTypeChange(e)}),c.Wb()),2&e&&c.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[n.a],styles:[""]}),e})()},vjIa:function(e,t,o){"use strict";o.r(t),o.d(t,"CardRequestPage",function(){return q});var i=o("mrSG"),s=o("3Pt+"),n=o("OVQh"),p=o("fOh1"),a=o("0CJq"),c=o("ZyuK"),r=o("f42Q"),l=o("DFXC"),d=o("zngb"),u=o("Q0Ba"),h=o("gKqT"),m=o("V0Fi"),f=o("fXoL"),y=o("kRg/"),O=o("uKCV"),b=o("sAFK"),_=o("+f2X"),g=o("VEWP"),N=o("/QlS"),C=o("aAEG"),T=o("ofXK"),I=o("pvj/"),A=o("ULj9"),D=o("ggmK"),k=o("KuXP"),P=o("7XXa"),w=o("iTqn");function L(e,t){if(1&e&&f.Sb(0,"ps-input-display-only",20),2&e){const e=f.ic(3);f.pc("options",e.withdrawalLimitOptions)}}function x(e,t){if(1&e&&f.Sb(0,"ps-input-display-only",21),2&e){const e=f.ic(3);f.pc("options",e.posLimitOptions)}}function E(e,t){if(1&e&&(f.Vb(0),f.Pc(1,L,1,1,"ps-input-display-only",18),f.Pc(2,x,1,1,"ps-input-display-only",19),f.Ub()),2&e){const e=f.ic(2);f.Fb(1),f.pc("ngIf",e.enableCardLimit),f.Fb(1),f.pc("ngIf",e.enablePosLimit)}}function v(e,t){if(1&e&&f.Sb(0,"ps-input-varchar",22),2&e){const e=f.ic(2);f.pc("options",e.collectorNameOptions)}}function S(e,t){if(1&e&&f.Sb(0,"ps-complex-cif-id-types",23),2&e){const e=f.ic(2);f.pc("options",e.defaultCifIdTypesOptions)}}function B(e,t){if(1&e){const e=f.Yb();f.Xb(0,"ps-form-step",3),f.Xb(1,"ps-container-panel",4),f.Sb(2,"ps-lookup-own-accounts",5),f.Sb(3,"ps-input-varchar",6),f.Xb(4,"ps-dropdown-card-types",7),f.fc("onPsChange",function(t){return f.Fc(e),f.ic().onCardTypeChangeItem(t)}),f.Wb(),f.Pc(5,E,3,2,"ng-container",8),f.Sb(6,"br"),f.Sb(7,"ps-lookup-own-accounts",9),f.Xb(8,"ps-complex-location",10),f.fc("parentFun",function(){return f.Fc(e),f.ic().hideDestinationMap()}),f.Wb(),f.Wb(),f.Xb(9,"ps-container-panel",11),f.Xb(10,"ps-complex-select-branch",12),f.fc("onPsChange",function(t){return f.Fc(e),f.ic().onSelectBranch(t)}),f.Wb(),f.Wb(),f.Xb(11,"ps-container-panel",13),f.Sb(12,"ps-input-display-only",14),f.Wb(),f.Xb(13,"ps-container-panel",15),f.Xb(14,"ps-select-toggle",12),f.fc("onPsChange",function(t){return f.Fc(e),f.ic().onPersonalToggleClicked(t)}),f.Wb(),f.Pc(15,v,1,1,"ps-input-varchar",16),f.Pc(16,S,1,1,"ps-complex-cif-id-types",17),f.Wb(),f.Wb()}if(2&e){const e=f.ic();f.pc("id",e.stepperOptions.namesofSteps[0]),f.Fb(1),f.pc("options",e.panelOptions1Step1),f.Fb(1),f.pc("options",e.primaryAccountOptions),f.Fb(1),f.pc("options",e.cardHolderNameOptions),f.Fb(1),f.pc("options",e.cardTypeOptions),f.Fb(1),f.pc("ngIf",e.enableCardLimit||e.enablePosLimit),f.Fb(2),f.pc("options",e.secondaryAccountOptions),f.Fb(1),f.pc("options",e.deliveryAddressDetails),f.Fb(1),f.pc("options",e.panelOptions2Step1),f.Fb(1),f.pc("options",e.selectBranchOptions),f.Fb(1),f.pc("options",e.panelOptions4Step1),f.Fb(1),f.pc("options",e.cifrequestBranchOptions),f.Fb(1),f.pc("options",e.panelOptions3Step1),f.Fb(1),f.pc("options",e.personalCollectToggleOptions),f.Fb(1),f.pc("ngIf",e.showCollectorPanel),f.Fb(1),f.pc("ngIf",e.showCollectorPanel)}}function R(e,t){if(1&e&&(f.Xb(0,"ps-form-step",24),f.Xb(1,"ps-container-panel",25),f.Xb(2,"div",26),f.Sb(3,"ps-map-atm-branches",27),f.Wb(),f.Wb(),f.Xb(4,"ps-container-panel",28),f.Xb(5,"div",26),f.Sb(6,"ps-map-atm-branches",27),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.ic();f.pc("id",e.stepperOptions.namesofSteps[1]),f.Fb(1),f.pc("options",e.atmBranchesPanelOptions),f.Fb(2),f.pc("options",e.mapAtmBranchesOptions),f.Fb(1),f.pc("options",e.panelOptionsStep2),f.Fb(2),f.pc("options",e.destinationBranchesOptions)}}let q=(()=>{class e extends h.OmniBasePage{constructor(e,t,o,i,a){super(),this.loggerP=e,this.commonProv=t,this.omniPull=o,this.omniCommon=i,this.eventEmitterService=a,this.formGroup=new s.f({}),this.debitCardRequestVO={},this.enableCardLimit=!1,this.enablePosLimit=!1,this.stepperOptions={stepperName:"deb_card_stepper",isHorizontalStepper:!0,numberOfSteps:2,namesofSteps:["debit_card_req_step1","debit_card_req_step2"],group:this.formGroup,requestObject:this.debitCardRequestVO,submitOptions:{extraParams:{},submitServiceUrl:p.a.serviceUrl.debitCardRequest,group:this.formGroup}},this.mapAtmBranchesOptions={group:this.formGroup,fcName:"mapAtmBranches",labelKey:"map_atm_branch_key",mapOptions:{labelKey:"map"},showSegments:!1,mapTypesInclude:"'B'",parameterToCheck:m.a.CARDS_REQUEST_BRANCH,requestVO:this.debitCardRequestVO},this.panelOptions1Step1={isExpandable:!0,labelKey:"debit_card_request_key",iconName:"new-card-request",expanded:!0},this.lblOptions={group:this.formGroup,labelKey:"branch_key"},this.lblOptionsCif={group:this.formGroup,labelKey:"embossed_name_key"},this.cifNameOptions={group:this.formGroup},this.cifBranchOtpions={},this.cardTypeOptions={labelKey:"card_type_key",placeHolder:"card_type_key",group:this.formGroup,fcName:"cardType",cardType:d.a.CARDTYPE_D},this.primaryAccountOptions={labelKey:"primary_account_key",placeHolder:"primary_account_key",accountNumber:"",currency:"",group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:d.a.GeneralType,fcName:"primaryAccount",component:n.a,fromTo:"from",accountType:d.a.GeneralType,requestObject:this.debitCardRequestVO},this.secondaryAccountOptions={labelKey:"secondary_account_key",placeHolder:"secondary_account_key",accountNumber:"",currency:"",group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:d.a.GeneralType,fcName:"supplementaryAccount",component:n.a,fromTo:"from",accountType:d.a.GeneralType,requestObject:this.debitCardRequestVO},this.branchOptions={placeHolder:"request_branch_key",labelKey:"request_branch_key",group:this.formGroup,fcName:"branchName"},this.withdrawalLimitOptions={placeHolder:"",labelKey:"Withdrawal_Limit_key",group:this.formGroup,fcName:"withdrawalLimit"},this.posLimitOptions={placeHolder:"",labelKey:"pos_Limit_key",group:this.formGroup,fcName:"posLimit"},this.cardHolderNameOptions={placeHolder:"cardholder_name_key",labelKey:"cardholder_name_key",group:this.formGroup,fcName:"embossedName"},this.deliveryAddressDetails={collectionModeOptions:{group:this.formGroup,fcName:"deliveryLoc"},branchLocationOptions:{fcName:"destinationBranchesDropdown",group:this.formGroup,countryRegionCityOptions:{countriesOptions:{fcName:"destinationBranchCountry"},regionOptions:{fcName:"destinationBranchRegion"},cityOptions:{fcName:"destinationBranchCity"}},branchesOptions:{fcName:"destinationBranch"}},homeAddressOptions:{placeHolder:"home_address_key",labelKey:"home_address_key",group:this.formGroup,fcName:"homeAddress",requestVO:this.debitCardRequestVO},workAddressOptions:{placeHolder:"work_address_key",labelKey:"work_address_key",group:this.formGroup,fcName:"workAddress",requestVO:this.debitCardRequestVO},otherAddressOptions:{labelKey:"address_details_key",rows:"3",cols:"10",fcName:"otherAddressDetails",group:this.formGroup},branchCifOptions:{placeHolder:"request_branch_key",labelKey:"request_branch_key",group:this.formGroup,fcName:"branchName"},cifBranchChecking:!0},this.atmBranchesPanelOptions={isExpandable:!0,labelKey:"choose_request_branch_key",iconName:"crop",expanded:!0},this.panelOptionsStep2={isExpandable:!0,labelKey:"choose_destination_Branch_key",iconName:"location-pin",expanded:!0},this.panelOptions2Step1={isExpandable:!0,labelKey:"select_map_branch_key",iconName:"location-pin",expanded:!0},this.panelOptions3Step1={isExpandable:!0,labelKey:"collect_or_reveiver_details_key",iconName:"new-card-request",expanded:!0},this.panelOptions4Step1={isExpandable:!0,labelKey:"request_branch_key",iconName:"location-pin",expanded:!0},this.requestBranchOptions={labelKey:"request_branch_key",fcName:"requestBranch",placeHolder:"",group:this.formGroup},this.deliveryBranchOptions={placeHolder:"",labelKey:"delivery_location_key",group:this.formGroup,fcName:"deliveryLocationBranch"},this.destinationBranchesOptions={group:this.formGroup,fcName:"destinationBranches",labelKey:"destination_branch_key",mapOptions:{labelKey:"map"},showSegments:!1,mapTypesInclude:"'B'",requestVO:this.debitCardRequestVO},this.selectBranchOptions={fcName:"mapAtmBranchesDropdown",group:this.formGroup},this.personalCollectToggleOptions={labelKey:"i_will_be_collecting_personally_my_debit_card_key",group:this.formGroup,fcName:"personalCollect",psClass:"toggleColor"},this.collectorNameOptions={placeHolder:"collector_or_receiver_name_key",labelKey:"collector_or_receiver_name_key",group:this.formGroup,fcName:"collectorName"},this.defaultCifIdTypesOptions={showCifType:!1,group:this.formGroup,cifTypeOptions:{group:this.formGroup,fcName:"idType"},complexIdDetailsOptions:{dropdownIdTypesOptions:{group:this.formGroup},idNumberOptions:{group:this.formGroup},dateExpiryOptions:{group:this.formGroup},countriesOptions:{group:this.formGroup},issueDateOptions:{group:this.formGroup}},complexIdDetailsOptions1:{dropdownIdTypesOptions:{group:this.formGroup},idNumberOptions:{group:this.formGroup},dateExpiryOptions:{group:this.formGroup},countriesOptions:{group:this.formGroup},issueDateOptions:{group:this.formGroup}},requestObject:this.debitCardRequestVO},this.selectedBranchObj={},this.enableCifBranch=!1,this.enableCifName=!1,this.showCollectorPanel=!0,this.enableDeliveryLoc=!1,this.cifrequestBranchOptions={labelKey:"account_branch_key",group:this.formGroup,fcName:"branch"}}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup}ionViewDidEnter(){super.ionViewDidEnter(),this.cifNameOptions.labelKey=this.omniCommon.common.getLoginResponse().customerInfoCO.longName,this.fetchParameter()}fetchParameter(){return Object(i.b)(this,void 0,void 0,function*(){this.cifInfo=this.commonProv.session.getValueOf(d.a.USERINFO);const e=yield this.omniPull.getParamValOf(m.a.CARDS_REQUEST_BRANCH).catch(e=>{this.loggerP.error(e)});-1!==e&&e.RequestBranch===m.a.END_USER_INPUT_ID?(this.enableCifBranch=!1,this.omniCommon.branchSelectionAndMapControl(0,[{fcName:"credit_card_req_panel3"}]),this.omniCommon.branchSelectionAndMapControl(1,[{fcName:"credit_card_req_pane2"}]),this.omniCommon.branchSelectionAndMapControl(1,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"reqBranch"}],!0)):(e.RequestBranch===m.a.ACCOUNT_BRANCH_ID?(this.cifrequestBranchOptions.labelKey="account_branch_key",this.commonProv.setValInsideNestedObj(this.cifrequestBranchOptions.fcName,this.cifInfo.cifBranch?this.cifInfo.customerInfoCO.branchCode:"",this.debitCardRequestVO)):(this.cifrequestBranchOptions.labelKey="cif_branch_key",this.commonProv.setValInsideNestedObj(this.cifrequestBranchOptions.fcName,this.cifInfo.cifBranch?this.cifInfo.customerInfoCO.branchBriefDesc:"",this.debitCardRequestVO)),this.enableCifBranch=!0,this.omniCommon.branchSelectionAndMapControl(1,[{fcName:"credit_card_req_panel3"}]),this.omniCommon.branchSelectionAndMapControl(0,[{fcName:"credit_card_req_pane2"}]),this.omniCommon.branchSelectionAndMapControl(0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"reqBranch"}],!0)),this.omniCommon.branchSelectionAndMapControl(-1!==e&&e.CollectionDestinationBranch===m.a.END_USER_INPUT_ID?1:0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"destBranch"}],!0),this.omniCommon.branchSelectionAndMapControl(-1!==e&&e.RequestBranch!==m.a.END_USER_INPUT_ID&&-1!==e&&e.CollectionDestinationBranch!==m.a.END_USER_INPUT_ID?0:1,[{fcName:this.stepperOptions.namesofSteps[1]}],!0),this.commonProv.setValInsideNestedObj(this.requestBranchOptions.fcName,this.cifInfo.cifBranch?this.cifInfo.customerInfoCO.branchBriefDesc:"",this.debitCardRequestVO)})}onCardTypeChangeItem(e){if(e&&e.selectedObj){switch(e.selectedObj.wdLimitBasedOn){case"L":this.debitCardRequestVO[this.withdrawalLimitOptions.fcName]=e.selectedObj.wdLimitAmount+" / "+this.getPeriodicCity(e.selectedObj.wdLimitCheckPeriod),this.enableCardLimit=!0;break;case"O":this.debitCardRequestVO[this.withdrawalLimitOptions.fcName]="Unlimited",this.enableCardLimit=!0;break;case"B":this.debitCardRequestVO[this.withdrawalLimitOptions.fcName]="Account balance",this.enableCardLimit=!0;break;default:this.enableCardLimit=!1}switch(e.selectedObj.posLimitBasedOn){case"L":this.debitCardRequestVO[this.posLimitOptions.fcName]=e.selectedObj.posLimitAmount,this.enablePosLimit=!0;break;case"O":this.debitCardRequestVO[this.posLimitOptions.fcName]="Unlimited",this.enablePosLimit=!0;break;case"B":this.debitCardRequestVO[this.posLimitOptions.fcName]="Account balance",this.enablePosLimit=!0;break;default:this.enablePosLimit=!1}}}onSelectBranch(e){void 0!==e.itemValue&&(this.formGroup.controls[this.selectBranchOptions.fcName].setValue(e),this.commonProv.setValInsideNestedObj(this.selectBranchOptions.fcName,e.selectedObj,this.debitCardRequestVO))}getPeriodicCity(e){switch(e){case m.a.DAYS:return m.a.DY;case m.a.MONTHS:return m.a.MNTH;case m.a.WEEK_CODE:return m.a.WEEK;case m.a.QUATER_CODE:return m.a.QUATER;case m.a.YEAR:return m.a.YR;default:return m.a.DY}}hideDestinationMap(){let e=this.debitCardRequestVO?this.debitCardRequestVO[this.deliveryAddressDetails.collectionModeOptions.fcName]:{};(null==e?void 0:e.itemValue)===m.a.SPECIFIC_BRANCH_VALUE||e===m.a.SPECIFIC_BRANCH_VALUE||(null==e?void 0:e.itemValue)===m.a.OTHER_ADDRESS_VALUE||e===m.a.OTHER_ADDRESS_VALUE?this.omniCommon.branchSelectionAndMapControl(1,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"destBranch"}],!0):(this.omniCommon.branchSelectionAndMapControl(0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"destBranch"}],!0),this.omniCommon.branchSelectionAndMapControl(this.enableCifBranch?0:1,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:"reqBranch"}],!0))}onPersonalToggleClicked(e){this.showCollectorPanel=!e.newValue}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(l.a),f.Rb(u.a),f.Rb(c.a),f.Rb(a.a),f.Rb(r.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["debit-card-request"]],features:[f.Cb],decls:3,vars:4,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step2","",3,"id",4,"psStep"],["step1","",3,"id"],["id","debit_card_req_panel",3,"options"],["id","'primaryAccount'+ id",3,"options"],["id","'cardHolderName' + id",3,"options"],["id","'cardType' + id",3,"options","onPsChange"],[4,"ngIf"],["id","'secondaryAccount'+ id",3,"options"],[3,"options","parentFun"],["id","credit_card_req_pane2",3,"options"],[3,"options","onPsChange"],["id","credit_card_req_panel3",3,"options"],["id","accountCifBranch",3,"options"],["id","persoal_collect_panel",3,"options"],["id"," collectorName",3,"options",4,"ngIf"],[3,"options",4,"ngIf"],["id","'withdrawalLimit' + id",3,"options",4,"ngIf"],["id","'pOSLimit' + id",3,"options",4,"ngIf"],["id","'withdrawalLimit' + id",3,"options"],["id","'pOSLimit' + id",3,"options"],["id"," collectorName",3,"options"],[3,"options"],["step2","",3,"id"],["id","reqBranch",3,"options"],[1,"dcMapLocator"],[1,"component-map-container",3,"options"],["id","destBranch",3,"options"]],template:function(e,t){1&e&&(f.Xb(0,"ps-template-stepper",0),f.Pc(1,B,17,16,"ps-form-step",1),f.Pc(2,R,7,5,"ps-form-step",2),f.Wb()),2&e&&(f.pc("options",t.stepperOptions)("id",t.stepperOptions.stepperName),f.Fb(1),f.pc("psStep","step1"),f.Fb(1),f.pc("psStep","step2"))},directives:[y.a,O.a,b.a,_.a,g.a,N.a,C.a,T.o,I.a,A.a,D.a,k.a,P.a,w.a],styles:[""]}),e})()}}]);