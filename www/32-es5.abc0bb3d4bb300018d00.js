!function(){function t(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e,n,i){var s=o(y(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof s?function(t){return s.apply(n,t)}:s}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var i=n(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(arguments.length<3?t:o):s.value}}).apply(null,arguments)}function n(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function c(o,n,i,r){var c=n&&n.prototype instanceof l?n:l,u=Object.create(c.prototype);return s(u,"_invoke",function(o,n,i){var s,r,c,l=0,u=i||[],p=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,o){return s=e,r=0,c=t,f.n=o,a}};function m(o,n){for(r=o,c=n,e=0;!p&&l&&!i&&e<u.length;e++){var i,s=u[e],m=f.p,h=s[2];o>3?(i=h===n)&&(c=s[(r=s[4])?5:(r=3,3)],s[4]=s[5]=t):s[0]<=m&&((i=o<2&&m<s[1])?(r=0,f.v=n,f.n=s[1]):m<h&&(i=o<3||s[0]>n||n>h)&&(s[4]=o,s[5]=n,f.n=h,r=0))}if(i||o>1)return a;throw p=!0,n}return function(i,u,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===u&&m(u,h),r=u,c=h;(e=r<2?t:c)||!p;){s||(r?r<3?(r>1&&(f.n=-1),m(r,c)):f.n=c:f.v=c);try{if(l=2,s){if(r||(i="next"),e=s[i]){if(!(e=e.call(s,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,r<2&&(r=0)}else 1===r&&(e=s.return)&&e.call(s),r<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),r=1);s=t}else if((e=(p=f.n<0)?c:o.call(n,f))!==a)break}catch(e){s=t,r=1,c=e}finally{l=1}}return{value:e,done:p}}}(o,i,r),!0),u}var a={};function l(){}function u(){}function p(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(s(e={},n,function(){return this}),e),m=p.prototype=l.prototype=Object.create(f);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=p,s(m,"constructor",p),s(p,"constructor",u),u.displayName="GeneratorFunction",s(p,r,"GeneratorFunction"),s(m),s(m,r,"Generator"),s(m,n,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),(i=function(){return{w:c,m:h}})()}function s(t,e,o,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}(s=function(t,e,o,n){function r(e,o){s(t,e,function(t){return this._invoke(e,o,t)})}e?i?i(t,e,{value:o,enumerable:!n,configurable:!n,writable:!n}):t[e]=o:(r("next",0),r("throw",1),r("return",2))})(t,e,o,n)}function r(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=c(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return r=t.done,t},e:function(t){a=!0,s=t},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw s}}}}function c(t,e){if(t){if("string"==typeof t)return a(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function p(t,e,o){return e&&u(t.prototype,e),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function m(t,e,o){return e=y(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(t,d()?Reflect.construct(e,o||[],y(t).constructor):e.apply(t,o))}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(d=function(){return!!t})()}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"41l2":function(t,e,o){"use strict";o.d(e,"a",function(){return h});var n=o("mrSG"),s=o("ZyuK"),c=o("iOQE"),a=o("DFXC"),u=o("Q0Ba"),f=o("fXoL"),h=function(){var t=function(t){function e(t,o,n){var i;return l(this,e),(i=m(this,e,[t,o])).omniPull=n,i.showLovDropdown=!1,i.defaultDropDownLovOptions={isLOVDropdown:!0},i}return b(e,t),p(e,[{key:"ngOnInit",value:function(){var t=this;this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(function(e){if(e){var o=e.get(t.options.fcName);o&&o.LOV_TYPE_ID&&o.LOV_TYPE_ID!==t.options.lovTypeId&&t.loadLovDropDown()}})}},{key:"loadLovDropDown",value:function(){var t;return Object(n.b)(this,void 0,void 0,i().m(function e(){var o,n,s,c,a,l,u,p,f=this;return i().w(function(e){for(;;)switch(e.n){case 0:if(this.defaultDropDownLovOptions.listOfOptions&&0!=(null===(t=this.defaultDropDownLovOptions.listOfOptions)||void 0===t?void 0:t.length)){e.n=5;break}if((o=this.commonProv.getElementValidations(this.options.fcName))&&o.LOV_TYPE_ID&&(this.options.lovTypeId=o.LOV_TYPE_ID),null!=this.options.lovTypeId&&void 0!==this.options.lovTypeId){e.n=1;break}return e.a(2,void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov"));case 1:if(!this.options.lovAdminFilterParamName){e.n=3;break}return e.n=2,this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);case 2:(n=e.v)&&(this.options.lovAdminFilterParamName=n[this.options.lovAdminFilterParamName]);case 3:return s={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},e.n=4,this.omniPull.returnLovTypesValues(s).catch(function(t){f.showLovDropdown=!1,f.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",t)});case 4:if(c=e.v,this.defaultDropDownLovOptions.listOfOptions=[],c&&c.length>0){a=r(c);try{for(a.s();!(l=a.n()).done;)u=l.value,(p={itemValue:u.itemValue,description:u.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(u.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:u}).selectedObj[this.options.fcName]=u.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(p)}catch(i){a.e(i)}finally{a.f()}this.showLovDropdown=!0}case 5:return e.a(2)}},e,this)}))}},{key:"selectDropDownChange",value:function(t){this.onPsChange.emit(t)}}])}(c.a);return t.\u0275fac=function(e){return new(e||t)(f.Rb(u.a),f.Rb(a.a),f.Rb(s.a))},t.\u0275cmp=f.Lb({type:t,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[f.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(f.Xb(0,"ps-select-dropdown",0),f.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),f.Wb()),2&t&&f.pc("id",e.id)("options",e.defaultDropDownLovOptions)},directives:[c.a],styles:[""]}),t}()},TST8:function(t,o,n){"use strict";n.r(o),n.d(o,"BulkPaymentPage",function(){return U});var i,s=n("3Pt+"),r=n("OVQh"),c=n("V0Fi"),a=n("fOh1"),u=n("ZyuK"),f=n("DFXC"),d=n("QZhd"),y=n("woXy"),O=n("Q0Ba"),v=n("gKqT"),g=n("zngb"),k=n("lE2x"),w=n("fXoL"),T=n("kRg/"),A=n("uKCV"),P=n("sAFK"),_=n("+f2X"),N=n("ofXK"),L=n("VEWP"),C=n("b23T"),E=n("BYmO"),D=n("41l2"),S=((i=function(t){function e(t,o){var n;return l(this,e),(n=m(this,e,[t,o])).defaultOptions={labelKey:"file_type_key",placeHolder:"select_file_type_key",lovTypeId:c.a.LOV_TYPE_FILE_TYPES},n}return b(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}},{key:"onChangeLov",value:function(t){this.onPsChange.emit(t)}}])}(D.a)).\u0275fac=function(t){return new(t||i)(w.Rb(O.a),w.Rb(f.a))},i.\u0275cmp=w.Lb({type:i,selectors:[["ps-lov-file-types"]],inputs:{options:"options"},features:[w.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(w.Xb(0,"ps-dropdown-lov",0),w.fc("onPsChange",function(t){return e.onChangeLov(t)}),w.Wb()),2&t&&w.pc("id",e.id)("options",e.defaultOptions)},directives:[D.a],styles:[""]}),i),F=n("+U2o"),I=n("TEn/"),x=n("ilDp");function j(t,e){if(1&t&&w.Sb(0,"ps-lov-file-types",8),2&t){var o=w.ic(2);w.pc("options",o.fileTypesOptions)}}function V(t,e){if(1&t){var o=w.Yb();w.Xb(0,"div",11),w.Xb(1,"ion-item",12),w.Xb(2,"ion-label"),w.Xb(3,"b",13),w.Rc(4),w.Wb(),w.Xb(5,"p",14),w.Rc(6),w.Wb(),w.Wb(),w.Vb(7),w.Xb(8,"ps-action-icon",15),w.fc("click",function(){w.Fc(o);var t=e.index;return w.ic(3).downloadFile(t)}),w.Wb(),w.Ub(),w.Wb(),w.Wb()}if(2&t){var n=e.$implicit,i=w.ic(3);w.Fb(4),w.Sc(n.fileName),w.Fb(2),w.Tc(" ",n.fileSize,""),w.Fb(2),w.pc("options",i.downloadIconOptions)}}function B(t,e){if(1&t&&(w.Vb(0),w.Sb(1,"ps-label-header",9),w.Pc(2,V,9,3,"div",10),w.Ub()),2&t){var o=w.ic(2);w.Fb(1),w.pc("options",o.headerOptions),w.Fb(1),w.pc("ngForOf",o.listOfTemplatesFiles)}}function R(t,e){if(1&t&&(w.Xb(0,"ps-form-step",2),w.Xb(1,"ps-container-panel",3),w.Pc(2,j,1,1,"ps-lov-file-types",4),w.Sb(3,"ps-lookup-own-accounts",5),w.Sb(4,"ps-file-upload-bs",6),w.Pc(5,B,3,2,"ng-container",7),w.Sb(6,"ps-keyin-input",0),w.Sb(7,"ps-keyin-input",0),w.Sb(8,"ps-keyin-input",0),w.Wb(),w.Wb()),2&t){var o=w.ic();w.pc("id",o.stepperOptions.namesofSteps[0]),w.Fb(1),w.pc("options",o.panelOptionsStep1),w.Fb(1),w.pc("ngIf",!o.offlineScreen),w.Fb(1),w.pc("options",o.accountListOptions),w.Fb(1),w.pc("options",o.fileUploadOptions),w.Fb(1),w.pc("ngIf",o.listOfTemplatesFiles.length>0),w.Fb(1),w.pc("options",o.rowCountOptions),w.Fb(1),w.pc("options",o.amountSumOptions),w.Fb(1),w.pc("options",o.batchNoOptions)}}var K,U=((K=function(t){function o(t,e,n,i){var c;return l(this,o),(c=m(this,o)).commonProv=t,c.loggerP=e,c.omniPull=n,c.navService=i,c.bulkPaymentForm=new s.f({}),c.defaultVO={},c.options={group:c.bulkPaymentForm},c.stepperOptions={isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["bulk_payment_step1"],group:c.bulkPaymentForm,submitOptions:{extraParams:{},submitServiceUrl:a.a.serviceUrl.bulkPaymentEndPoint,group:c.bulkPaymentForm,postCallFunction:{func:function(t){var e=this;return new Promise(function(o,n){o(e.executionClass.serviceRes(t))})},params:[h(c)],executionClass:h(c)}},requestObject:c.defaultVO},c.downloadIconOptions={iconName:"download",psClass:"download-attachment"},c.headerOptions={labelKey:"bulk_salary_templates_key"},c.panelOptionsStep1={isExpandable:!0,labelKey:"bulk_salary_upload_key",iconName:"document",expanded:!0},c.fileUploadOptions={multiple:!1,fcName:"selectedFileData",group:c.bulkPaymentForm,hintLabel:"add_a_hint_key",labelKey:"upload_files_key",revertToOldValue:!1},c.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:r.a,currency:"USD",group:c.bulkPaymentForm,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:c.defaultVO},c.fileTypesOptions={group:c.bulkPaymentForm,fcName:"fileTypeOptions"},c.batchNoOptions={fcName:"batchNo",group:c.bulkPaymentForm,placeHolder:"enter_batch_no_key",labelKey:"batch_no_key"},c.rowCountOptions={fcName:"rowCount",group:c.bulkPaymentForm,placeHolder:"enter_row_count_key",labelKey:"number_of_lines_key"},c.amountSumOptions={fcName:"amountSum",group:c.bulkPaymentForm,placeHolder:"enter_amount_sum_key",labelKey:"total_amount_key"},c.listOfTemplatesFiles=[],c}return b(o,t),p(o,[{key:"ngOnInit",value:function(){e(o,"init",this,3)([]),this.baseFormGroup=this.bulkPaymentForm,this.offlineScreen=d.a.oper_ID==c.a.OFFLINE_BULK_PAYMENT_OPER_ID}},{key:"ionViewDidEnter",value:function(){e(o,"ionViewDidEnter",this,3)([]),this.loadBulkPaymentTemplates(),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.batchNoOptions.fcName],0),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_MANDATORY,[this.accountListOptions.fcName],0),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_READONLY,[this.rowCountOptions.fcName,this.amountSumOptions.fcName,this.batchNoOptions.fcName],1)}},{key:"loadBulkPaymentTemplates",value:function(){var t=this;(k.a.CLIENT_ASSETS_CONFIG.BULK_PAYMENT_TEMPLATES?k.a.CLIENT_ASSETS_CONFIG.BULK_PAYMENT_TEMPLATES:[]).forEach(function(e){t.omniPull.omniCommon.common.http.http.get(e,{responseType:"blob"}).subscribe(function(o){var n=new FileReader;n.onloadend=function(){var i=e.substr(e.lastIndexOf("/")+1),s=n.result.toString().split(",")[1];t.listOfTemplatesFiles.push({fileUrlB64:s,fileName:i,fileSize:o.size})},n.readAsDataURL(o)})})}},{key:"downloadFile",value:function(t){this.commonProv.downloadFile(this.listOfTemplatesFiles[t].fileUrlB64,this.listOfTemplatesFiles[t].fileName,this.listOfTemplatesFiles[t].fileName.split(".")[1])}}])}(v.OmniBasePage)).\u0275fac=function(t){return new(t||K)(w.Rb(O.a),w.Rb(f.a),w.Rb(u.a),w.Rb(y.a))},K.\u0275cmp=w.Lb({type:K,selectors:[["app-bulk-payment"]],features:[w.Cb],decls:2,vars:2,consts:[[3,"options"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","bulk_salary_upload_panel1",3,"options"],["id","'fileTypes'+ id",3,"options",4,"ngIf"],["id","'transferFrom'+ id",3,"options"],["id","ps-file-upload",3,"options"],[4,"ngIf"],["id","'fileTypes'+ id",3,"options"],[1,"bul-templates-title",3,"options"],["class","bulk-payment-templates",4,"ngFor","ngForOf"],[1,"bulk-payment-templates"],["positionV","top","arrow","",1,"ps-secondary-color","ps-primary-font-color","download-file"],[1,"ps-upload-file-name"],[1,"ps-upload-file-size"],[3,"options","click"]],template:function(t,e){1&t&&(w.Xb(0,"ps-template-stepper",0),w.Pc(1,R,9,9,"ps-form-step",1),w.Wb()),2&t&&(w.pc("options",e.stepperOptions),w.Fb(1),w.pc("psStep","step1"))},directives:[T.a,A.a,P.a,_.a,N.o,L.a,C.a,E.a,S,F.a,N.n,I.t,I.u,x.a],styles:[""]}),K)},VEWP:function(e,o,n){"use strict";n.d(o,"a",function(){return T});var s=n("mrSG"),c=n("fXoL"),a=n("4lGw"),u=n("V0Fi"),f=n("ZyuK"),h=n("ZF3V"),d=n("EIUR"),y=n("DFXC"),O=n("zngb"),v=n("Q0Ba"),g=n("Isd1"),k=n("L0og"),w=["complexLookupComponentObj"],T=function(){var e=function(e){function o(t,e,n,i){var s;return l(this,o),(s=m(this,o,[t,e])).commonService=t,s.omniPull=n,s.accountsService=i,s.options={fromTo:"",requestObject:null},s.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!s.options.multiple&&s.options.multiple},s.onAccountChange=new c.o,s.onAccountDeleted=new c.o,s.labelValuesMap=new Map,s.psCurrency=new d.a,s.labelOptions={},s.allType=!1,s}return b(o,e),p(o,[{key:"ngOnInit",value:function(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}},{key:"ngOnChanges",value:function(t){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}},{key:"loadAccounts",value:function(t){return Object(s.b)(this,void 0,void 0,i().m(function e(){var o,n;return i().w(function(e){for(;;)switch(e.n){case 0:if(null!=t&&(this.options=t),this.options.listOfAccounts=[],void 0!==this.options.fromTo&&""!==this.options.fromTo){e.n=1;break}return e.a(2,void this.logger.error("lookup_from_to_missing_key"));case 1:o=this.commonService.session.getValueOf(O.a.USERINFO),n=this.prepareRequestData(o),this.returnAccountList(n);case 2:return e.a(2)}},e,this)}))}},{key:"returnAccountList",value:function(e){return Object(s.b)(this,void 0,void 0,i().m(function o(){var n,s,r,c,a=this;return i().w(function(o){for(;;)switch(o.n){case 0:return n=this.commonProv.session.getValueOf(u.a.PERSONALIZATION_CO),this.complexLookupOptions.listOfOptions=void 0,o.n=1,this.omniPull.returnAccounts(e).catch(function(t){a.complexLookupOptions.listOfOptions=[],a.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});case 1:if(!((s=o.v)&&s.gridModel.length>0)){o.n=4;break}if(!this.allType){o.n=3;break}return e.accountType="F",e.permittedGls="F",o.n=2,this.omniPull.returnAccounts(e).catch(function(t){a.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});case 2:(r=o.v)&&r.gridModel.length>0&&(s.gridModel=[].concat(t(s.gridModel),t(r.gridModel)));case 3:this.options.listOfAccounts=s.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(t){return t.accountNumber!==a.options.accountNumber})),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(t){return t.accountNumber!==a.options.accountNumber}))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map(function(t,e){return t.rowIndex=e}),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)&&(c="QR"===this.options.purpose?null==n?void 0:n.defaultQrPaymentAccKey:null==n?void 0:n.defaultTransferAccKey,this.complexLookupOptions.listOfOptions.map(function(t){t.personalizeKey&&t.personalizeKey===c&&(a.common.setValInsideNestedObj(a.options.fcName,t.lookupKey,a.options.requestObject),a.common.setValInsideNestedObj(a.options.fcName+"_lookupKey",t.lookupKey,a.options.requestObject))})),o.n=5;break;case 4:this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[];case 5:return o.a(2)}},o,this)}))}},{key:"populateCustomAccounts",value:function(t){var e,o=[],n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,s={briefNameEnglish:i.briefNameEnglish,cifShortNameEnglish:i.cifShortNameEnglish,accountNumber:i.accountNumber,balance:this.psCurrency.transform(null==i.balance?"0.0":i.balance,i.currencyDecimalPoints)+" "+(i.currencyBriefName||i.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==i.availableBalance?"0.0":i.availableBalance,i.currencyDecimalPoints)+" "+(i.currencyBriefName||i.currencyBriefNameEnglish),currencyBriefName:i.currencyBriefName||i.currencyBriefNameEnglish,currencyBriefNameEnglish:i.currencyBriefNameEnglish,currency:i.currency,accountTypeDesc:i.accountTypeDesc,additionalRef:i.additionalRef,ibanAccNo:i.ibanAccNo,accGl:i.accGl,serialNo:i.serialNo,branch:i.branch,cif:i.cif,formattedAccount:this.accountsService.returnFormattedAccount(i).formattedAccount,personalizeKey:i.personalizeKey,nickName:i.nickName,briefName:i.briefName,lookupKey:i.additionalRef,branchDescription:i.branchDescription?i.branchDescription:"",generalLedgerBriefNameEng:i.generalLedgerBriefNameEng?i.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:i.statusDescription,statusCode:i.status,accountFormat:this.accountsService.returnFormattedAccount(i).accountFormat};this.options.multiple&&(s.excludeType=i.excludeType),o.push(s)}}catch(c){n.e(c)}finally{n.f()}return o}},{key:"prepareRequestData",value:function(t){var e={};if(t&&t.omniUserVO&&(e={userCifNo:t.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(e={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(e.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(e.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(e.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(e.endUserId=this.options.endUserId),null!=this.options.fromCurrency?e.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(e.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)e.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{var o="";for(var n in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[n]+",";o=o.slice(0,o.lastIndexOf(",")),e.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)e.accountAllowedTypes=this.options.accountAllowedTypes;else{var i="";for(var s in this.options.accountAllowedTypes)i+=this.options.accountAllowedTypes[s]+",";i=i.slice(0,i.lastIndexOf(",")),e.accountAllowedTypes=i}return e}},{key:"fetchAccountBasedOnCurrency",value:function(t){return this.options.listOfAccounts}},{key:"onChange",value:function(t){this.logger.log(t)}},{key:"populateOwnAccountMap",value:function(){var t,e,o;t={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},e={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",t),this.labelValuesMap.set("balance_key",e),this.labelValuesMap.set("available_balance_key",o)}},{key:"onChangeItem",value:function(t){this.onAccountChange.emit(t)}},{key:"onDeleteItem",value:function(t){t&&this.onAccountDeleted.emit(t)}},{key:"handleMultipleSelection",value:function(){var t=this,e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(function(e){return t.options.requestObject[t.options.fcName].some(function(t){return t.accountNumber==e.accountNumber})}):[];this.complexLookupOptions.selectedItems=e.filter(function(e){return t.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(u.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(u.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!t.options.setAllAccountsAsSelecetd}).map(function(t){return Object.assign(Object.assign({item:t[t.previewProperty]},t),{itemLookup:t.lookupKey})}),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}},{key:"removeAccount",value:function(t){t&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(function(e){return t.accountNumber!=e.accountNumber}):[])}},{key:"reset",value:function(){this.complexLookupComponentObj.resetLookUp()}},{key:"refreshAcounts",value:function(t){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(t)}}])}(h.a);return e.\u0275fac=function(t){return new(t||e)(c.Rb(v.a),c.Rb(y.a),c.Rb(f.a),c.Rb(a.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(t,e){var o;(1&t&&c.Wc(w,1),2&t)&&(c.Bc(o=c.gc())&&(e.complexLookupComponentObj=o.first))},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[c.Cb,c.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(t,e){1&t&&(c.Xb(0,"ps-container-complex",0),c.Xb(1,"ps-complex-lookup",1,2),c.fc("changeItem",function(t){return e.onChangeItem(t)})("onDeleteItem",function(t){return e.onDeleteItem(t)}),c.Wb(),c.Wb()),2&t&&(c.Fb(1),c.pc("id",e.id)("options",e.complexLookupOptions))},directives:[g.a,k.a],styles:[""]}),e}()}}])}();