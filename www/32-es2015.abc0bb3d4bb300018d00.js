(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"41l2":function(o,t,e){"use strict";e.d(t,"a",function(){return a});var s=e("mrSG"),i=e("ZyuK"),n=e("iOQE"),l=e("DFXC"),c=e("Q0Ba"),p=e("fXoL");let a=(()=>{class o extends n.a{constructor(o,t,e){super(o,t),this.omniPull=e,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(o=>{if(o){const t=o.get(this.options.fcName);t&&t.LOV_TYPE_ID&&t.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var o;return Object(s.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(o=this.defaultDropDownLovOptions.listOfOptions)||void 0===o?void 0:o.length)){const o=this.commonProv.getElementValidations(this.options.fcName);if(o&&o.LOV_TYPE_ID&&(this.options.lovTypeId=o.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const o=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);o&&(this.options.lovAdminFilterParamName=o[this.options.lovAdminFilterParamName])}const t={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},e=yield this.omniPull.returnLovTypesValues(t).catch(o=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",o)});if(this.defaultDropDownLovOptions.listOfOptions=[],e&&e.length>0){for(const o of e){const t={itemValue:o.itemValue,description:o.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(o.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:o};t.selectedObj[this.options.fcName]=o.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(t)}this.showLovDropdown=!0}}})}selectDropDownChange(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(p.Rb(c.a),p.Rb(l.a),p.Rb(i.a))},o.\u0275cmp=p.Lb({type:o,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[p.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,t){1&o&&(p.Xb(0,"ps-select-dropdown",0),p.fc("onPsChange",function(o){return t.selectDropDownChange(o)}),p.Wb()),2&o&&p.pc("id",t.id)("options",t.defaultDropDownLovOptions)},directives:[n.a],styles:[""]}),o})()},TST8:function(o,t,e){"use strict";e.r(t),e.d(t,"BulkPaymentPage",function(){return I});var s=e("3Pt+"),i=e("OVQh"),n=e("V0Fi"),l=e("fOh1"),c=e("ZyuK"),p=e("DFXC"),a=e("QZhd"),r=e("woXy"),u=e("Q0Ba"),h=e("gKqT"),m=e("zngb"),d=e("lE2x"),f=e("fXoL"),b=e("kRg/"),O=e("uKCV"),y=e("sAFK"),g=e("+f2X"),v=e("ofXK"),T=e("VEWP"),k=e("b23T"),A=e("BYmO"),N=e("41l2");let L=(()=>{class o extends N.a{constructor(o,t){super(o,t),this.defaultOptions={labelKey:"file_type_key",placeHolder:"select_file_type_key",lovTypeId:n.a.LOV_TYPE_FILE_TYPES}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}onChangeLov(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(f.Rb(u.a),f.Rb(p.a))},o.\u0275cmp=f.Lb({type:o,selectors:[["ps-lov-file-types"]],inputs:{options:"options"},features:[f.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,t){1&o&&(f.Xb(0,"ps-dropdown-lov",0),f.fc("onPsChange",function(o){return t.onChangeLov(o)}),f.Wb()),2&o&&f.pc("id",t.id)("options",t.defaultOptions)},directives:[N.a],styles:[""]}),o})();var _=e("+U2o"),P=e("TEn/"),w=e("ilDp");function C(o,t){if(1&o&&f.Sb(0,"ps-lov-file-types",8),2&o){const o=f.ic(2);f.pc("options",o.fileTypesOptions)}}function D(o,t){if(1&o){const o=f.Yb();f.Xb(0,"div",11),f.Xb(1,"ion-item",12),f.Xb(2,"ion-label"),f.Xb(3,"b",13),f.Rc(4),f.Wb(),f.Xb(5,"p",14),f.Rc(6),f.Wb(),f.Wb(),f.Vb(7),f.Xb(8,"ps-action-icon",15),f.fc("click",function(){f.Fc(o);const e=t.index;return f.ic(3).downloadFile(e)}),f.Wb(),f.Ub(),f.Wb(),f.Wb()}if(2&o){const o=t.$implicit,e=f.ic(3);f.Fb(4),f.Sc(o.fileName),f.Fb(2),f.Tc(" ",o.fileSize,""),f.Fb(2),f.pc("options",e.downloadIconOptions)}}function F(o,t){if(1&o&&(f.Vb(0),f.Sb(1,"ps-label-header",9),f.Pc(2,D,9,3,"div",10),f.Ub()),2&o){const o=f.ic(2);f.Fb(1),f.pc("options",o.headerOptions),f.Fb(1),f.pc("ngForOf",o.listOfTemplatesFiles)}}function E(o,t){if(1&o&&(f.Xb(0,"ps-form-step",2),f.Xb(1,"ps-container-panel",3),f.Pc(2,C,1,1,"ps-lov-file-types",4),f.Sb(3,"ps-lookup-own-accounts",5),f.Sb(4,"ps-file-upload-bs",6),f.Pc(5,F,3,2,"ng-container",7),f.Sb(6,"ps-keyin-input",0),f.Sb(7,"ps-keyin-input",0),f.Sb(8,"ps-keyin-input",0),f.Wb(),f.Wb()),2&o){const o=f.ic();f.pc("id",o.stepperOptions.namesofSteps[0]),f.Fb(1),f.pc("options",o.panelOptionsStep1),f.Fb(1),f.pc("ngIf",!o.offlineScreen),f.Fb(1),f.pc("options",o.accountListOptions),f.Fb(1),f.pc("options",o.fileUploadOptions),f.Fb(1),f.pc("ngIf",o.listOfTemplatesFiles.length>0),f.Fb(1),f.pc("options",o.rowCountOptions),f.Fb(1),f.pc("options",o.amountSumOptions),f.Fb(1),f.pc("options",o.batchNoOptions)}}let I=(()=>{class o extends h.OmniBasePage{constructor(o,t,e,n){super(),this.commonProv=o,this.loggerP=t,this.omniPull=e,this.navService=n,this.bulkPaymentForm=new s.f({}),this.defaultVO={},this.options={group:this.bulkPaymentForm},this.stepperOptions={isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["bulk_payment_step1"],group:this.bulkPaymentForm,submitOptions:{extraParams:{},submitServiceUrl:l.a.serviceUrl.bulkPaymentEndPoint,group:this.bulkPaymentForm,postCallFunction:{func(o){return new Promise((t,e)=>{t(this.executionClass.serviceRes(o))})},params:[this],executionClass:this}},requestObject:this.defaultVO},this.downloadIconOptions={iconName:"download",psClass:"download-attachment"},this.headerOptions={labelKey:"bulk_salary_templates_key"},this.panelOptionsStep1={isExpandable:!0,labelKey:"bulk_salary_upload_key",iconName:"document",expanded:!0},this.fileUploadOptions={multiple:!1,fcName:"selectedFileData",group:this.bulkPaymentForm,hintLabel:"add_a_hint_key",labelKey:"upload_files_key",revertToOldValue:!1},this.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:i.a,currency:"USD",group:this.bulkPaymentForm,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:this.defaultVO},this.fileTypesOptions={group:this.bulkPaymentForm,fcName:"fileTypeOptions"},this.batchNoOptions={fcName:"batchNo",group:this.bulkPaymentForm,placeHolder:"enter_batch_no_key",labelKey:"batch_no_key"},this.rowCountOptions={fcName:"rowCount",group:this.bulkPaymentForm,placeHolder:"enter_row_count_key",labelKey:"number_of_lines_key"},this.amountSumOptions={fcName:"amountSum",group:this.bulkPaymentForm,placeHolder:"enter_amount_sum_key",labelKey:"total_amount_key"},this.listOfTemplatesFiles=[]}ngOnInit(){super.init(),this.baseFormGroup=this.bulkPaymentForm,this.offlineScreen=a.a.oper_ID==n.a.OFFLINE_BULK_PAYMENT_OPER_ID}ionViewDidEnter(){super.ionViewDidEnter(),this.loadBulkPaymentTemplates(),this.commonProv.applyDynScreenDisplay(m.a.ACTION_TYPE_VISIBLE,[this.batchNoOptions.fcName],0),this.commonProv.applyDynScreenDisplay(m.a.ACTION_TYPE_MANDATORY,[this.accountListOptions.fcName],0),this.commonProv.applyDynScreenDisplay(m.a.ACTION_TYPE_READONLY,[this.rowCountOptions.fcName,this.amountSumOptions.fcName,this.batchNoOptions.fcName],1)}loadBulkPaymentTemplates(){(d.a.CLIENT_ASSETS_CONFIG.BULK_PAYMENT_TEMPLATES?d.a.CLIENT_ASSETS_CONFIG.BULK_PAYMENT_TEMPLATES:[]).forEach(o=>{this.omniPull.omniCommon.common.http.http.get(o,{responseType:"blob"}).subscribe(t=>{const e=new FileReader;e.onloadend=()=>{var s=o.substr(o.lastIndexOf("/")+1);let i=e.result.toString().split(",")[1];this.listOfTemplatesFiles.push({fileUrlB64:i,fileName:s,fileSize:t.size})},e.readAsDataURL(t)})})}downloadFile(o){this.commonProv.downloadFile(this.listOfTemplatesFiles[o].fileUrlB64,this.listOfTemplatesFiles[o].fileName,this.listOfTemplatesFiles[o].fileName.split(".")[1])}}return o.\u0275fac=function(t){return new(t||o)(f.Rb(u.a),f.Rb(p.a),f.Rb(c.a),f.Rb(r.a))},o.\u0275cmp=f.Lb({type:o,selectors:[["app-bulk-payment"]],features:[f.Cb],decls:2,vars:2,consts:[[3,"options"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","bulk_salary_upload_panel1",3,"options"],["id","'fileTypes'+ id",3,"options",4,"ngIf"],["id","'transferFrom'+ id",3,"options"],["id","ps-file-upload",3,"options"],[4,"ngIf"],["id","'fileTypes'+ id",3,"options"],[1,"bul-templates-title",3,"options"],["class","bulk-payment-templates",4,"ngFor","ngForOf"],[1,"bulk-payment-templates"],["positionV","top","arrow","",1,"ps-secondary-color","ps-primary-font-color","download-file"],[1,"ps-upload-file-name"],[1,"ps-upload-file-size"],[3,"options","click"]],template:function(o,t){1&o&&(f.Xb(0,"ps-template-stepper",0),f.Pc(1,E,9,9,"ps-form-step",1),f.Wb()),2&o&&(f.pc("options",t.stepperOptions),f.Fb(1),f.pc("psStep","step1"))},directives:[b.a,O.a,y.a,g.a,v.o,T.a,k.a,A.a,L,_.a,v.n,P.t,P.u,w.a],styles:[""]}),o})()},VEWP:function(o,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("mrSG"),i=e("fXoL"),n=e("4lGw"),l=e("V0Fi"),c=e("ZyuK"),p=e("ZF3V"),a=e("EIUR"),r=e("DFXC"),u=e("zngb"),h=e("Q0Ba"),m=e("Isd1"),d=e("L0og");const f=["complexLookupComponentObj"];let b=(()=>{class o extends p.a{constructor(o,t,e,s){super(o,t),this.commonService=o,this.omniPull=e,this.accountsService=s,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new i.o,this.onAccountDeleted=new i.o,this.labelValuesMap=new Map,this.psCurrency=new a.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(o){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(o){return Object(s.b)(this,void 0,void 0,function*(){if(null!=o&&(this.options=o),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const t=this.commonService.session.getValueOf(u.a.USERINFO),e=this.prepareRequestData(t);this.returnAccountList(e)})}returnAccountList(o){return Object(s.b)(this,void 0,void 0,function*(){const t=this.commonProv.session.getValueOf(l.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const e=yield this.omniPull.returnAccounts(o).catch(o=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});if(e&&e.gridModel.length>0){if(this.allType){o.accountType="F",o.permittedGls="F";const t=yield this.omniPull.returnAccounts(o).catch(o=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});t&&t.gridModel.length>0&&(e.gridModel=[...e.gridModel,...t.gridModel])}if(this.options.listOfAccounts=e.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((o,t)=>o.rowIndex=t),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let o="QR"===this.options.purpose?null==t?void 0:t.defaultQrPaymentAccKey:null==t?void 0:t.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(t=>{t.personalizeKey&&t.personalizeKey===o&&(this.common.setValInsideNestedObj(this.options.fcName,t.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",t.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(o){const t=[];for(const e of o){const o={briefNameEnglish:e.briefNameEnglish,cifShortNameEnglish:e.cifShortNameEnglish,accountNumber:e.accountNumber,balance:this.psCurrency.transform(null==e.balance?"0.0":e.balance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==e.availableBalance?"0.0":e.availableBalance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),currencyBriefName:e.currencyBriefName||e.currencyBriefNameEnglish,currencyBriefNameEnglish:e.currencyBriefNameEnglish,currency:e.currency,accountTypeDesc:e.accountTypeDesc,additionalRef:e.additionalRef,ibanAccNo:e.ibanAccNo,accGl:e.accGl,serialNo:e.serialNo,branch:e.branch,cif:e.cif,formattedAccount:this.accountsService.returnFormattedAccount(e).formattedAccount,personalizeKey:e.personalizeKey,nickName:e.nickName,briefName:e.briefName,lookupKey:e.additionalRef,branchDescription:e.branchDescription?e.branchDescription:"",generalLedgerBriefNameEng:e.generalLedgerBriefNameEng?e.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:e.statusDescription,statusCode:e.status,accountFormat:this.accountsService.returnFormattedAccount(e).accountFormat};this.options.multiple&&(o.excludeType=e.excludeType),t.push(o)}return t}prepareRequestData(o){let t={};if(o&&o.omniUserVO&&(t={userCifNo:o.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let o="";for(const t in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[t]+",";o=o.slice(0,o.lastIndexOf(",")),t.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{let o="";for(const t in this.options.accountAllowedTypes)o+=this.options.accountAllowedTypes[t]+",";o=o.slice(0,o.lastIndexOf(",")),t.accountAllowedTypes=o}return t}fetchAccountBasedOnCurrency(o){return this.options.listOfAccounts}onChange(o){this.logger.log(o)}populateOwnAccountMap(){let o={},t={},e={};o={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},e={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",o),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",e)}onChangeItem(o){this.onAccountChange.emit(o)}onDeleteItem(o){o&&this.onAccountDeleted.emit(o)}handleMultipleSelection(){const o=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(o=>this.options.requestObject[this.options.fcName].some(t=>t.accountNumber==o.accountNumber)):[];this.complexLookupOptions.selectedItems=o.filter(o=>this.options.setAllAccountsAsSelecetd&&(!o.excludeType||!(o.excludeType.includes(l.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||o.excludeType.includes(l.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(o=>Object.assign(Object.assign({item:o[o.previewProperty]},o),{itemLookup:o.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(o){o&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(t=>o.accountNumber!=t.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(o){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(o)}}return o.\u0275fac=function(t){return new(t||o)(i.Rb(h.a),i.Rb(r.a),i.Rb(c.a),i.Rb(n.a))},o.\u0275cmp=i.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(o,t){if(1&o&&i.Wc(f,1),2&o){let o;i.Bc(o=i.gc())&&(t.complexLookupComponentObj=o.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[i.Cb,i.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(o,t){1&o&&(i.Xb(0,"ps-container-complex",0),i.Xb(1,"ps-complex-lookup",1,2),i.fc("changeItem",function(o){return t.onChangeItem(o)})("onDeleteItem",function(o){return t.onDeleteItem(o)}),i.Wb(),i.Wb()),2&o&&(i.Fb(1),i.pc("id",t.id)("options",t.complexLookupOptions))},directives:[m.a,d.a],styles:[""]}),o})()}}]);