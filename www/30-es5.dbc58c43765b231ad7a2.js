!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var o,n,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",r=i.toStringTag||"@@toStringTag";function a(e,i,s,r){var a=i&&i.prototype instanceof p?i:p,l=Object.create(a.prototype);return t(l,"_invoke",function(e,t,i){var s,r,a,p=0,l=i||[],d=!1,u={p:0,n:0,v:o,a:h,f:h.bind(o,4),d:function(e,t){return s=e,r=0,a=o,u.n=t,c}};function h(e,t){for(r=e,a=t,n=0;!d&&p&&!i&&n<l.length;n++){var i,s=l[n],h=u.p,b=s[2];e>3?(i=b===t)&&(a=s[(r=s[4])?5:(r=3,3)],s[4]=s[5]=o):s[0]<=h&&((i=e<2&&h<s[1])?(r=0,u.v=t,u.n=s[1]):h<b&&(i=e<3||s[0]>t||t>b)&&(s[4]=e,s[5]=t,u.n=b,r=0))}if(i||e>1)return c;throw d=!0,t}return function(i,l,b){if(p>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,b),r=l,a=b;(n=r<2?o:a)||!d;){s||(r?r<3?(r>1&&(u.n=-1),h(r,a)):u.n=a:u.v=a);try{if(p=2,s){if(r||(i="next"),n=s[i]){if(!(n=n.call(s,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,r<2&&(r=0)}else 1===r&&(n=s.return)&&n.call(s),r<2&&(a=TypeError("The iterator does not provide a '"+i+"' method"),r=1);s=o}else if((n=(d=u.n<0)?a:e.call(t,u))!==c)break}catch(n){s=o,r=1,a=n}finally{p=1}}return{value:n,done:d}}}(e,s,r),!0),l}var c={};function p(){}function l(){}function d(){}n=Object.getPrototypeOf;var u=[][s]?n(n([][s]())):(t(n={},s,function(){return this}),n),h=d.prototype=p.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,r,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=d,t(h,"constructor",d),t(d,"constructor",l),l.displayName="GeneratorFunction",t(d,r,"GeneratorFunction"),t(h),t(h,r,"Generator"),t(h,s,function(){return this}),t(h,"toString",function(){return"[object Generator]"}),(e=function(){return{w:a,m:b}})()}function t(e,o,n,i){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}(t=function(e,o,n,i){function r(o,n){t(e,o,function(e){return this._invoke(o,n,e)})}o?s?s(e,o,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[o]=n:(r("next",0),r("throw",1),r("return",2))})(e,o,n,i)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function i(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e,t,o){return t=d(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,o||[],d(e).constructor):t.apply(e,o))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function c(e,t,o,n){var i=p(d(1&n?e.prototype:e),t,o);return 2&n&&"function"==typeof i?function(e){return i.apply(o,e)}:i}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:o):i.value}}).apply(null,arguments)}function l(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[30,268,269,270,271,272,273,274,339,340,341,342,343,344,345,346,347,348,349],{HAMJ:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var s=n("zngb"),a=n("qEF5"),p=n("lE2x"),l=n("QZhd"),d=n("uqA0"),h=n("fXoL"),b=n("ofXK"),m=n("GmoW"),f=n("ilDp"),w=n("+U2o"),g=n("Mapq");function v(e,t){if(1&e){var o=h.Yb();h.Xb(0,"div",5),h.Xb(1,"ps-action-icon",6),h.fc("onClick",function(){return h.Fc(o),h.ic().onBackIconClicked()}),h.Wb(),h.Xb(2,"ps-action-icon",7),h.fc("onClick",function(){return h.Fc(o),h.ic().openPage()}),h.Wb(),h.Wb()}if(2&e){var n=h.ic();h.Fb(1),h.pc("options",n.arrowIconOptios),h.Fb(1),h.pc("options",n.homeOptions)}}function O(e,t){if(1&e&&h.Sb(0,"ps-action-icon",11),2&e){var o=h.ic(2);h.pc("options",o.headerIconOptions)}}function y(e,t){if(1&e&&(h.Xb(0,"div",8),h.Pc(1,O,1,1,"ps-action-icon",9),h.Sb(2,"ps-label-header",10),h.Wb()),2&e){var o=h.ic();h.Fb(1),h.pc("ngIf",o.headerIconOptions.iconName),h.Fb(1),h.pc("options",o.optionsHeader)}}function P(e,t){if(1&e){var o=h.Yb();h.Xb(0,"ps-action-icon",16),h.fc("click",function(){return h.Fc(o),h.ic(2).showLess()}),h.Wb()}if(2&e){var n=h.ic(2);h.pc("options",n.collapseOptions)}}function I(e,t){if(1&e&&(h.Xb(0,"div",17),h.Sb(1,"ps-complex-menu",10),h.Wb()),2&e){var o=h.ic(2);h.Fb(1),h.pc("options",o.quickMenuHeader)}}function D(e,t){if(1&e){var o=h.Yb();h.Xb(0,"ps-action-icon",18),h.fc("click",function(){return h.Fc(o),h.ic(2).showMore()}),h.Wb()}if(2&e){var n=h.ic(2);h.pc("options",n.expandOptions)}}var k=function(e){return{collapsed:e}};function _(e,t){if(1&e&&(h.Xb(0,"div",12),h.Pc(1,P,1,1,"ps-action-icon",13),h.Pc(2,I,2,1,"div",14),h.Pc(3,D,1,1,"ps-action-icon",15),h.Wb()),2&e){var o=h.ic();h.pc("ngClass",h.sc(4,k,o.collapsed)),h.Fb(1),h.pc("ngIf",!o.collapsed),h.Fb(1),h.pc("ngIf",!o.collapsed),h.Fb(1),h.pc("ngIf",o.collapsed)}}var S=[[["","saveAsDraftButton",""]],[["","extraHeader",""]],"*",[["","psFooter",""]]],L=function(e){return{"center-header":e}},C=["[saveAsDraftButton]","[extraHeader]","*","[psFooter]"],E=function(){var e=function(e){function t(){var e;return o(this,t),(e=r(this,t)).collapseOptions={iconName:"arrow-down",labelOptions:{labelKey:"show_more_key"}},e.expandOptions={iconName:"arrow-up",labelOptions:{labelKey:"show_less_key"}},e.helpLabelOptions={labelKey:"help_key"},e.menuIcon={iconName:"menu"},e.closeIcon={iconName:"close"},e.arrowIconOptios={iconName:"arrow-back",allowCust:!0},e.homeOptions={iconName:"lock"},e.optionsHeader={},e.headerIconOptions={},e.quickMenuHeader={quicklinkMenu:!0},e.collapsed=!1,e.operId="operId_"+l.a.oper_ID,e.iconShouldBePresent=!1,e.iconShouldBeChecked=!1,e.hasSubscribed=!1,e}return u(t,e),i(t,[{key:"ngOnInit",value:function(){var e,o=this;this.landingType=p.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_UI_TYPE,(null===(e=this.screenOptions)||void 0===e?void 0:e.quickMenuCollapsed)&&(this.collapsed=!0),this.isMobile=this.commonProv.isMobileLayout(),c(t,"init",this,3)([]),this.navService.isUserLoggedIn&&(this.homeOptions.iconName="menu"),this.checkViewSubscriptionC=this.commonProv.getCheckViewByOper(l.a.oper_ID>0?l.a.oper_ID:s.a.DEFAULT_FALLBACK_OPER).subscribe(function(e){if(e){if(o.activePageSubscription&&o.activePageSubscription.unsubscribe(),e&&e.didEnter){o.hasSubscribed=!0;var t=o.navService.activePage;t&&o.updateHeader(t)}e&&e.willLeave&&o.hasSubscribed&&o.checkViewSubscriptionC&&o.checkViewSubscriptionC.unsubscribe()}else o.activePageSubscription=o.commonProv.activePage.subscribe(function(e){e?setTimeout(function(){o.updateHeader(e)},500):o.activePageSubscription&&o.activePageSubscription.unsubscribe()})}),(this.commonProv.isWebLayout()||4==this.landingType)&&this.navService.isUserLoggedIn?this.iconShouldBeChecked=!0:this.iconShouldBePresent=!0}},{key:"updateHeader",value:function(e){this.optionsHeader.labelKey="",this.headerIconOptions.iconName=null,this.optionsHeader.labelKey=e.title,this.headerIconOptions.iconName=e.icon}},{key:"openPage",value:function(){this.navService.navigateToMain()}},{key:"onBackIconClicked",value:function(){var e=this;this.navService.onCancelClicked().then(function(t){t&&e.screenOptions.nextPageOptions&&e.navService.openPage(e.screenOptions.nextPageOptions)})}},{key:"ngOnDestroy",value:function(){this.checkViewSubscriptionC&&this.checkViewSubscriptionC.unsubscribe()}},{key:"ifHomePage",get:function(){var e=p.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_PAGE_OPER;return this.iconShouldBeChecked=!1,this.iconShouldBePresent=!a.a.isNotNull(e)||e!==l.a.oper_ID,this.iconShouldBePresent}},{key:"showMore",value:function(){this.collapsed=!1}},{key:"showLess",value:function(){this.collapsed=!0}}])}(d.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Lb({type:e,selectors:[["ps-template-screen"]],hostVars:2,hostBindings:function(e,t){2&e&&h.Hb(t.operId)},inputs:{screenOptions:"screenOptions"},features:[h.Cb],ngContentSelectors:C,decls:11,vars:6,consts:[["psHeader",""],[1,"widget-style",3,"ngClass"],["class","widget-menu-icon widget-menu-icon-back",4,"ngIf"],["class","widget-header-title",4,"ngIf"],["class","common-quick-menu",3,"ngClass",4,"ngIf"],[1,"widget-menu-icon","widget-menu-icon-back"],["id","back_icon",1,"menu-icon","arrow_icon",3,"options","onClick"],[1,"menu-icon","home_icon",3,"options","onClick"],[1,"widget-header-title"],["class","menu-icon widget-header-icon",3,"options",4,"ngIf"],[3,"options"],[1,"menu-icon","widget-header-icon",3,"options"],[1,"common-quick-menu",3,"ngClass"],["class","material-icons show-more-less-icon expanded home-quick-links-expanded",3,"options","click",4,"ngIf"],["class","home-quick-links",4,"ngIf"],["class","material-icons show-more-less-icon collapsed home-quick-links-collapsed",3,"options","click",4,"ngIf"],[1,"material-icons","show-more-less-icon","expanded","home-quick-links-expanded",3,"options","click"],[1,"home-quick-links"],[1,"material-icons","show-more-less-icon","collapsed","home-quick-links-collapsed",3,"options","click"]],template:function(e,t){1&e&&(h.oc(S),h.Xb(0,"ps-template-base"),h.Vb(1,0),h.Xb(2,"div",1),h.Pc(3,v,3,2,"div",2),h.Pc(4,y,3,2,"div",3),h.nc(5),h.Wb(),h.nc(6,1),h.Ub(),h.Xb(7,"ps-container-form"),h.nc(8,2),h.Wb(),h.nc(9,3,["psFooter",""]),h.Pc(10,_,4,6,"div",4),h.Wb()),2&e&&(h.Fb(2),h.pc("ngClass",h.sc(4,L,!t.iconShouldBePresent)),h.Fb(1),h.pc("ngIf",t.iconShouldBeChecked&&!t.ifHomePage||t.iconShouldBePresent),h.Fb(1),h.pc("ngIf",t.optionsHeader.labelKey),h.Fb(6),h.pc("ngIf",t.navService.isUserLoggedIn&&t.showQuickMenu))},directives:[d.a,b.m,b.o,m.a,f.a,w.a,g.a],styles:[""]}),e}()},RkAu:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var s=n("r40+"),a=n("qEF5"),p=n("uqA0"),l=n("fXoL"),d=n("HAMJ"),h=n("ofXK"),b=n("TsIt"),m=n("5YYs");function f(e,t){if(1&e&&l.Sb(0,"ps-action-image",3),2&e){var o=l.ic();l.pc("options",o.actionImageOptions)}}var w=["*",[["","footer",""]]],g=["*","[footer]"],v=function(){var e=function(e){function t(e){var n;return o(this,t),(n=r(this,t)).events=e,n.cancelOptions={labelKey:"cancel_key",group:n.options.group},n.spinner=!1,n.actionImageOptions={imageName:a.a.getCssVariableValue("--ps-loader-image-name")},n.reqStartEvent=e.subscribe("network:request:started",function(e){n.spinner=!0}),n.reqCompletEvent=e.subscribe("network:request:completed",function(e){n.spinner=!1}),n}return u(t,e),i(t,[{key:"ngOnInit",value:function(){this.options.requestObject=this.options.requestObject?this.options.requestObject:{},this.options.group&&this.commonProv.setFormData(this.options.group,this.options.requestObject)}},{key:"onFooterClick",value:function(){void 0!==document.getElementsByTagName("ion-modal")[0]&&document.getElementsByTagName("ion-modal")[0].dismiss()}},{key:"ngOnDestroy",value:function(){c(t,"ngOnDestroy",this,3)([]),this.reqStartEvent&&this.reqStartEvent.unsubscribe(),this.reqCompletEvent&&this.reqCompletEvent.unsubscribe()}}])}(p.a);return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["ps-template-view"]],inputs:{options:"options"},features:[l.Cb],ngContentSelectors:g,decls:6,vars:3,consts:[["class","inline-loading-image",3,"options",4,"ngIf"],["psFooter",""],[3,"id","options","click"],[1,"inline-loading-image",3,"options"]],template:function(e,t){1&e&&(l.oc(w),l.Xb(0,"ps-template-screen"),l.Pc(1,f,1,1,"ps-action-image",0),l.nc(2),l.Vb(3,1),l.nc(4,1),l.Xb(5,"ps-button-cancel",2),l.fc("click",function(){return t.onFooterClick()}),l.Wb(),l.Ub(),l.Wb()),2&e&&(l.Fb(1),l.pc("ngIf",!t.options.disableLoading&&t.spinner),l.Fb(4),l.pc("id",t.id+"temp_btn_cancel")("options",t.cancelOptions))},directives:[d.a,h.o,b.a,m.a],styles:[""]}),e}()},Sx1r:function(t,n,s){"use strict";s.d(n,"a",function(){return _});var a=s("mrSG"),c=s("fXoL"),p=s("ZF3V"),l=s("DFXC"),d=s("zngb"),h=s("Q0Ba"),b=s("TEn/"),m=s("Isd1"),f=s("ofXK"),w=s("KVmc"),g=s("ilDp"),v=s("qNfM"),O=s("BqtM");function y(e,t){if(1&e){var o=c.Yb();c.Xb(0,"div",8),c.Xb(1,"ps-action-icon",9),c.fc("onClick",function(){return c.Fc(o),c.ic(2).onBackIconClicked()}),c.Wb(),c.Wb()}if(2&e){var n=c.ic(2);c.Fb(1),c.pc("options",n.backIconOptions)}}var P=function(e,t){return[e,t]};function I(e,t){if(1&e){var o=c.Yb();c.Vb(0),c.Xb(1,"ps-select-dropdown-widget",10),c.fc("onPsChange",function(e){return c.Fc(o),c.ic(2).onItemSelected(e)}),c.Wb(),c.Ub()}if(2&e){var n=t.$implicit,i=t.index;c.Fb(1),c.pc("options",n)("ngClass",c.tc(2,P,n&&n.psClass?n.psClass:"","level-"+i))}}function D(e,t){if(1&e&&(c.Vb(0),c.Xb(1,"div",3),c.Pc(2,y,2,1,"div",4),c.Xb(3,"div",5),c.Sb(4,"ps-label",6),c.Wb(),c.Wb(),c.Pc(5,I,2,5,"ng-container",7),c.Ub()),2&e){var o=c.ic();c.Fb(2),c.pc("ngIf",o.showIcon),c.Fb(2),c.pc("options",o.headerLabelOptions),c.Fb(1),c.pc("ngForOf",o.options.dropdowns)}}function k(e,t){if(1&e&&(c.Xb(0,"p",11),c.Rc(1),c.jc(2,"translate"),c.Wb()),2&e){var o=c.ic();c.Fb(1),c.Sc(c.kc(2,1,o.selectionErrorMessage))}}var _=function(){var t=function(t){function n(e,t,i){var s;return o(this,n),(s=r(this,n,[e,t])).commonProv=e,s.loggerP=t,s.modalController=i,s.onSecondValueChange=new c.o,s.numberOfDropdowns=0,s.currentDropdownPosition=0,s.selectedItemsList=[],s.selectReportsError=!1,s.selectionErrorMessage="no_selected_reports_key",s.headerLabelOptions={},s.backIconOptions={iconName:"arrow-back"},s.backClicked=!1,s.showIcon=!1,s.isPreviouslySelected=!1,s}return u(n,t),i(n,[{key:"ngOnInit",value:function(){this.options.dropdowns&&this.options.dropdowns.length>0&&(this.numberOfDropdowns=this.options.dropdowns.length,this.options.dropdowns[0].renderDropdown=!0,this.currentDropdownPosition=1,this.headerLabelOptions.labelKey=this.options.dropdowns[0].labelKey)}},{key:"onItemSelected",value:function(e){var t=this;if(this.options.requestObject&&this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName]&&e.itemValue===this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName].itemValue&&this.options.dropdowns[this.currentDropdownPosition]&&this.options.dropdowns[this.currentDropdownPosition].listOfOptions&&this.options.dropdowns[this.currentDropdownPosition].listOfOptions.length>0)this.options.dropdowns.length>this.currentDropdownPosition&&(this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",this.options.dropdowns[this.currentDropdownPosition].psClass="show-dropdown",this.currentDropdownPosition++,this.showIcon=!0);else if(this.options.dropdowns.length>1||1==this.options.dropdowns.length&&this.options.dropdowns[0].asyncURL)this.isPreviouslySelected=!(!this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName]||!this.options.requestObject[d.a.HEADER_LABEL]),this.commonProv.setValInsideNestedObj(this.options.dropdowns[this.currentDropdownPosition-1].fcName,e,this.options.requestObject),this.options.dropdowns.length>this.currentDropdownPosition?(this.backClicked&&(this.commonProv.setValInsideNestedObj(this.options.dropdowns[this.currentDropdownPosition].fcName,null,this.options.requestObject),this.options.dropdowns[this.currentDropdownPosition].renderDropdown=!1,this.options.dropdowns[this.currentDropdownPosition]={group:this.options.dropdowns[this.currentDropdownPosition].group,fcName:this.options.dropdowns[this.currentDropdownPosition].fcName,labelKey:this.options.dropdowns[this.currentDropdownPosition].labelKey,asyncURL:this.options.dropdowns[this.currentDropdownPosition].asyncURL,mapResponseProperties:this.options.dropdowns[this.currentDropdownPosition].mapResponseProperties,enablePagination:this.options.dropdowns[this.currentDropdownPosition].enablePagination,listOfOptions:[],componentInstance:this.options.dropdowns[this.currentDropdownPosition].componentInstance},this.headerLabelOptions.labelKey=this.options.dropdowns[this.currentDropdownPosition-1].labelKey),this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj?this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj.commonParametersList=e.selectedObj:this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj={commonParametersList:e.selectedObj},this.options.dropdowns[this.currentDropdownPosition].renderDropdown=!0,this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",-1!==this.headerLabelOptions.labelKey.indexOf("-")?(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,this.headerLabelOptions.labelKey.lastIndexOf("-")+1),this.headerLabelOptions.labelKey.replace(this.commonProv.translate(this.options.dropdowns[this.currentDropdownPosition-1].fcName),e.description),this.headerLabelOptions.labelKey.endsWith("-")&&(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,-1)),this.headerLabelOptions.labelKey+=" - "+this.options.dropdowns[this.currentDropdownPosition].fcName):(this.headerLabelOptions.labelKey=e.description,this.headerLabelOptions.labelKey+=" - "+this.options.dropdowns[this.currentDropdownPosition].fcName),this.showIcon=!0,this.currentDropdownPosition++,this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].reset(),this.options.dropdowns[this.currentDropdownPosition-1].componentInstance.callService()):this.options.dropdowns.length===this.currentDropdownPosition&&(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,this.isPreviouslySelected?this.headerLabelOptions.labelKey.indexOf("-")+1:this.headerLabelOptions.labelKey.lastIndexOf("-")+1),this.headerLabelOptions.labelKey+=e.description,this.options.requestObject[d.a.HEADER_LABEL]=this.headerLabelOptions.labelKey,this.common.presentLoading(),setTimeout(function(){t.onSecondValueChange.emit(t.options.requestObject),t.common.dismissLoading()},500),this.showDescriptionModal(e));else if(1==this.options.dropdowns.length&&!this.options.dropdowns[0].asyncURL){var o=!1;this.selectReportsError=!1;var n=this.options.dropdowns[0].fcName;this.selectedItemsList.forEach(function(n,i){n.itemValue==e.itemValue&&(o=!0,n.selected=!1,t.selectedItemsList.splice(i,1))}),o||this.selectedItemsList.push(e),0==this.selectedItemsList.length&&(this.selectReportsError=!0,this.options.group.controls[n].setValue([]),this.options.group.get(n).setValue([])),this.selectedItemsList.forEach(function(e){e.selected=!0}),this.options.group.controls[n].setValue(this.selectedItemsList),this.options.group.get(n).setValue(this.selectedItemsList),this.commonProv.setValInsideNestedObj(this.options.dropdowns[0].fcName,this.selectedItemsList,this.options.requestObject)}}},{key:"showDescriptionModal",value:function(t){return Object(a.b)(this,void 0,void 0,e().m(function o(){var n,i;return e().w(function(e){for(;;)switch(e.n){case 0:if(!this.options.detailsObject){e.n=2;break}return n=this.options.detailsObject.detailsModalId,e.n=1,this.modalController.create({component:this.options.detailsObject.detailsModal,componentProps:{data:Object.assign({},t.selectedObj),actions:this.options.detailsObject.detailsActionsList},cssClass:this.options.detailsObject.detailsModalClass,animated:!1,id:n});case 1:return i=e.v,e.n=2,i.present();case 2:return e.a(2)}},o,this)}))}},{key:"onBackIconClicked",value:function(){this.backClicked=!0,this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].invalid&&this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].reset(),this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",this.options.dropdowns[this.currentDropdownPosition-2].psClass="show-dropdown",this.currentDropdownPosition--,1===this.currentDropdownPosition&&(this.showIcon=!1)}},{key:"resetSelections",value:function(){var e=this.options.dropdowns[0].fcName;this.selectedItemsList.forEach(function(e){e.selected=!1}),this.selectedItemsList=[],this.options.group.controls[e].setValue([]),this.options.group.get(e).setValue(this.selectedItemsList),this.commonProv.setValInsideNestedObj(this.options.dropdowns[0].fcName,this.selectedItemsList,this.options.requestObject),this.selectReportsError=!0}}])}(p.a);return t.\u0275fac=function(e){return new(e||t)(c.Rb(h.a),c.Rb(l.a),c.Rb(b.N))},t.\u0275cmp=c.Lb({type:t,selectors:[["ps-complex-widget-dropdowns"]],inputs:{options:"options"},outputs:{onSecondValueChange:"onSecondValueChange"},features:[c.Cb],decls:3,vars:2,consts:[[1,"ps-complex-widget-dropdowns"],[4,"ngIf"],["class","select-documents-validation-message",4,"ngIf"],[1,"ps-complex-widget-dropdowns_header"],["class","ps-complex-widget-dropdowns_header-back",4,"ngIf"],[1,"ps-complex-widget-dropdowns_header-label"],[3,"options"],[4,"ngFor","ngForOf"],[1,"ps-complex-widget-dropdowns_header-back"],[3,"options","onClick"],[3,"options","ngClass","onPsChange"],[1,"select-documents-validation-message"]],template:function(e,t){1&e&&(c.Xb(0,"ps-container-complex",0),c.Pc(1,D,6,3,"ng-container",1),c.Pc(2,k,3,3,"p",2),c.Wb()),2&e&&(c.Fb(1),c.pc("ngIf",(null==t.options?null:t.options.dropdowns.length)>0),c.Fb(1),c.pc("ngIf",t.selectReportsError))},directives:[m.a,f.o,w.a,f.n,g.a,v.a,f.m],pipes:[O.a],encapsulation:2}),t}()},fXc6:function(e,t,n){"use strict";n.r(t),n.d(t,"RewardsCataloguePage",function(){return V});var s=n("3Pt+"),a=n("zngb"),p=n("QZhd"),l=n("Q0Ba"),d=n("KNX7"),h=n("qEF5"),b=n("fXoL"),m=n("TEn/"),f=n("+U2o"),w=n("OGGT"),g=n("ofXK"),v=n("KVmc"),O=n("hUjg"),y=n("5YYs"),P=function(e){return{imageName:e}};function I(e,t){if(1&e&&b.Sb(0,"ps-action-image",18),2&e){var o=b.ic();b.pc("options",b.sc(1,P,o.rewardData.pathImageUrl))}}var D=function(e){return{labelKey:e,translate:!1}};function k(e,t){if(1&e&&b.Sb(0,"ps-label",19),2&e){var o=b.ic();b.pc("options",b.sc(1,D,null==o.rewardData?null:o.rewardData.pathNumberOfPoints))}}var _,S,L=function(e){return{labelKey:e}},C=((_=function(e){function t(e,n,i){var s;return o(this,t),(s=r(this,t,[n,n.logger])).navParams=e,s.commonProv=n,s.modalCtrl=i,s.rewardData={},s.merchantLabelOptions={labelKey:"merchant_name_key"},s.validityLabelOptions={labelKey:"reward_validity_key"},s.headerOptions={labelKey:"reward_description_key"},s.maskOptions={groupSeparator:p.a.THOUSANDS_SEPARATOR,alias:"currency",autoGroup:!0,placeholder:"0",greedy:!1,digits:a.a.DEFAULT_DECIMAL_DIGITS},s}return u(t,e),i(t,[{key:"ngOnInit",value:function(){c(t,"ngOnInit",this,3)([]),this.rewardData=this.navParams.get("data"),this.rewardAction=this.navParams.get("actions")[0],this.rewardData.pathNumberOfPoints&&(this.rewardData.pathNumberOfPoints=h.a.applyMaskFormat(+this.rewardData.pathNumberOfPoints,this.maskOptions)+" "+this.commonProv.translate("points_key")),this.rewardData.pathImageUrl=this.rewardData.pathImageUrl?this.rewardData.pathImageUrl:"noImage.jpg"}},{key:"onRedeemClicked",value:function(e){this.rewardAction.action(e),this.modalCtrl.dismiss()}}])}(d.a)).\u0275fac=function(e){return new(e||_)(b.Rb(m.P),b.Rb(l.a),b.Rb(m.N))},_.\u0275cmp=b.Lb({type:_,selectors:[["ps-complex-reward-details"]],features:[b.Cb],decls:18,vars:20,consts:[[1,"ps-complex-reward-details"],[1,"reward-details_header"],[1,"reward_title",3,"options"],[1,"header_close"],[1,"reward-details_body"],[1,"reward-details_main"],["class","reward_image",3,"options",4,"ngIf"],["class","reward_points",3,"options",4,"ngIf"],[1,"reward_name",3,"options"],[1,"reward-details_desc"],[1,"reward_description",3,"options"],[1,"reward_merchant"],[1,"reward_merchant-label",3,"options"],[1,"reward_merchant-value",3,"options"],[1,"reward_validity"],[1,"reward_validity-label",3,"options"],[1,"reward_validity-value",3,"options"],[1,"redeem_action",3,"options","onClick"],[1,"reward_image",3,"options"],[1,"reward_points",3,"options"]],template:function(e,t){1&e&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Sb(2,"ps-label-header",2),b.Sb(3,"ps-icon-close",3),b.Wb(),b.Xb(4,"div",4),b.Xb(5,"div",5),b.Pc(6,I,1,3,"ps-action-image",6),b.Pc(7,k,1,3,"ps-label",7),b.Sb(8,"ps-label",8),b.Wb(),b.Xb(9,"div",9),b.Sb(10,"ps-label",10),b.Xb(11,"div",11),b.Sb(12,"ps-label",12),b.Sb(13,"ps-label",13),b.Wb(),b.Xb(14,"div",14),b.Sb(15,"ps-label",15),b.Sb(16,"ps-label",16),b.Wb(),b.Xb(17,"ps-action-button",17),b.fc("onClick",function(){return t.onRedeemClicked(t.rewardData)}),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.Fb(2),b.pc("options",t.headerOptions),b.Fb(4),b.pc("ngIf",t.rewardData.pathImageUrl),b.Fb(1),b.pc("ngIf",null==t.rewardData?null:t.rewardData.pathNumberOfPoints),b.Fb(1),b.pc("options",b.sc(10,D,null==t.rewardData?null:t.rewardData.pathName)),b.Fb(2),b.pc("options",b.sc(12,D,null==t.rewardData?null:t.rewardData.pathProductDescription)),b.Fb(2),b.pc("options",t.merchantLabelOptions),b.Fb(1),b.pc("options",b.sc(14,D,null==t.rewardData?null:t.rewardData.pathMerchantRewardsCatalogId)),b.Fb(2),b.pc("options",t.validityLabelOptions),b.Fb(1),b.pc("options",b.sc(16,D,null==t.rewardData?null:t.rewardData.pathExpiryDate)),b.Fb(1),b.pc("options",b.sc(18,L,t.rewardAction.label)))},directives:[f.a,w.a,g.o,v.a,O.a,y.a],encapsulation:2}),_),E=n("V0Fi"),N=n("ZyuK"),R=n("ysEX"),F=n("DFXC"),A=n("gKqT"),T=n("RkAu"),j=n("Sx1r"),V=((S=function(e){function t(e,n,i,c){var l;return o(this,t),(l=r(this,t)).commonService=e,l.logger=n,l.omniPull=i,l.omniPush=c,l.formGroup=new s.f({}),l.rewardsCatalogueVO={},l.showCategories=!1,l.maskOptions={groupSeparator:p.a.THOUSANDS_SEPARATOR,alias:"currency",autoGroup:!0,placeholder:"0",greedy:!1,digits:a.a.DEFAULT_DECIMAL_DIGITS},l.templateViewOptions={group:l.formGroup,disableLoading:!0},l.widgetDropdownsOptions={group:l.formGroup,requestObject:l.rewardsCatalogueVO,detailsObject:{detailsModal:C,detailsModalClass:"reward-details-modal",detailsModalId:"ps-complex-reward-details-modal",detailsActionsList:[{label:"redeem_now_key",action:function(e){return l.applyRedemption(e)}}]},dropdowns:[{group:l.formGroup,fcName:"categories",labelKey:"categories_key",listOfOptions:[],asyncURL:E.a.RETURN_REWARDS_CATEGORIES_URL,serviceRequestObj:{submitType:E.a.RETURN_CATEGORIES_SUBMIT_TYPE,operId:E.a.REWARDS_CATALOGUE_OPER},mapResponseProperties:{itemValue:"pathRewardCategoryId",description:"pathName",imageName:"pathImageUrl",fallBackImageName:E.a.NO_IMAGE_FOUND_FALLBACK},enablePagination:!1,requestObject:l.rewardsCatalogueVO,notSelectable:!0},{group:l.formGroup,fcName:"rewards",labelKey:"rewards_key",listOfOptions:[],asyncURL:E.a.RETURN_REWARDS_URL,serviceRequestObj:{submitType:E.a.RETURN_REWARDS_SUBMIT_TYPE,operId:E.a.REWARDS_CATALOGUE_OPER},mapResponseProperties:{itemValue:"pathRewardCategoryIdValue",description:"pathName",imageName:"pathImageUrl",fallBackImageName:E.a.NO_IMAGE_FOUND_FALLBACK,additionalDescList:[{propNames:["pathMerchantRewardsCatalogId"]},{propNames:["pathExpiryDate"]},{propNames:["pathNumberOfPoints"],maskOptions:l.maskOptions,concatString:"points_key"}],additionalActionList:[{labelKey:"redeem_now_key",group:l.formGroup,handler:function(e){return l.applyRedemption(e)}}]},enablePagination:!1,requestObject:l.rewardsCatalogueVO,notSelectable:!0,isMultiDescription:!0}]},l}return u(t,e),i(t,[{key:"ngOnInit",value:function(){c(t,"init",this,3)([]),this.baseFormGroup=this.formGroup,this.commonProv.setFormData(this.formGroup,this.rewardsCatalogueVO)}},{key:"applyRedemption",value:function(e){var t=this;if(e){var o={submitType:E.a.APPLY_REDEMPTION_SUBMIT_TYPE,actionType:"Submit",commonParametersList:Object.assign({},e.selectedObj)};this.commonProv.presentLoading(),this.omniPush.redeemPoints(o).then(function(){t.omniPull.getPointsBalance({}).then(function(){t.commonProv.dismissLoading()})})}}}])}(A.OmniBasePage)).\u0275fac=function(e){return new(e||S)(b.Rb(l.a),b.Rb(F.a),b.Rb(N.a),b.Rb(R.a))},S.\u0275cmp=b.Lb({type:S,selectors:[["rewards-catalogue"]],features:[b.Cb],decls:3,vars:2,consts:[[3,"options"],[1,"rewards_catalogue_widgets",3,"options"]],template:function(e,t){1&e&&(b.Xb(0,"ps-template-view",0),b.Xb(1,"div"),b.Sb(2,"ps-complex-widget-dropdowns",1),b.Wb(),b.Wb()),2&e&&(b.pc("options",t.templateViewOptions),b.Fb(2),b.pc("options",t.widgetDropdownsOptions))},directives:[T.a,j.a],encapsulation:2}),S)},gKqT:function(e,t,n){"use strict";n.r(t),n.d(t,"OmniBasePage",function(){return h});var s=n("oS+F"),r=n("zngb"),a=n("QZhd"),c=n("woXy"),p=n("qEF5"),l=n("Q0Ba"),d=n("lE2x"),u=n("fXoL"),h=function(){var e=function(){return i(function e(){o(this,e),this.isPageDisabled=!1,this.commonProv=p.a.injectionHandler(l.a),this.navigationServices=p.a.injectionHandler(c.a)},[{key:"init",value:function(){this.currentOperID=a.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();var e=this.navigationServices.getAllParams(),t={};e&&!0===e.readOnlypage?(t.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(r.a.FORM_READONLY,t)):this.customizationMap&&(t.IS_READONLY=0,this.customizationMap.set(r.a.FORM_READONLY,t)),this.screenTranslationOperIds=d.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?d.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}},{key:"ngOnInit",value:function(){this.init()}},{key:"ionViewDidEnter",value:function(){this.viewDidEnter()}},{key:"ionViewWillLeave",value:function(){this.viewWillLeave()}},{key:"ionViewWillEnter",value:function(){this.viewWillEnter()}},{key:"viewWillEnter",value:function(){}},{key:"disableForm",value:function(e){var t=this;if(void 0!==e&&this.customizationMap){var o=this.customizationMap.get(r.a.FORM_READONLY);o&&1===o.IS_READONLY&&"DISABLED"!=e.status&&(e.disable(),Object.keys(e.controls).forEach(function(e){t.commonProv.applyDynScreenDisplay(r.a.ACTION_TYPE_READONLY,[e],1)}))}}},{key:"viewDidEnter",value:function(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:a.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:a.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),s.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}},{key:"viewWillLeave",value:function(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:a.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:a.a.oper_ID,{value:!0,page:this,willLeave:!0})}},{key:"ngAfterViewChecked",value:function(){var e=this;this.isPageDisabled||setTimeout(function(){e.disableForm(e.baseFormGroup),e.isPageDisabled=!0},300)}},{key:"getScreenTranslations",value:function(e){var t=e||2222,o=a.a.activeLanguge?a.a.activeLanguge:"EN";t&&o&&this.commonProv.language.getOperTranslation(o,t)}}])}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Lb({type:e,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(e,t){2&e&&u.Hb(t.psClass)},decls:0,vars:0,template:function(e,t){},styles:[""]}),e}()}}])}();