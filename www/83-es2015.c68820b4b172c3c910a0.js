(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"2Swi":function(o,e,t){"use strict";t.r(e),t.d(e,"PrepaidCardRechargePage",function(){return V});var s=t("3Pt+"),i=t("OVQh"),n=t("fOh1"),r=t("ZyuK"),c=t("zngb"),p=t("woXy"),a=t("gKqT"),l=t("fXoL"),u=t("kRg/"),h=t("uKCV"),m=t("sAFK"),d=t("+f2X"),f=t("V0Fi"),O=t("DFXC"),b=t("Q0Ba"),y=t("41l2");let g=(()=>{class o extends y.a{constructor(o,e){super(o,e),this.defaultSelectOptions={lovTypeId:f.a.RECHARGE_METHODS_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("recharge_methods_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate("recharge_methods_key")}onChangeLov(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(e){return new(e||o)(l.Rb(b.a),l.Rb(O.a))},o.\u0275cmp=l.Lb({type:o,selectors:[["ps-lov-recharge-methods"]],inputs:{options:"options"},features:[l.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,e){1&o&&(l.Xb(0,"ps-dropdown-lov",0),l.fc("onPsChange",function(o){return e.onChangeLov(o)}),l.Wb()),2&o&&l.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[y.a],styles:[""]}),o})();var C=t("VEWP"),v=t("LpqL"),A=t("mrSG"),L=t("vbr2"),x=t("GIS6"),k=t("ZF3V"),P=t("Isd1"),_=t("L0og");const N=["complexLookupComponentObj"];let T=(()=>{class o extends k.a{constructor(o,e,t){super(o,e),this.commonService=o,this.crdsSrvce=t,this.formGroup=new s.f({}),this.options={requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_prepaid_card_found_key"},this.onPrepaidCardChange=new l.o,this.labelValuesMap=new Map,this.prepaidCardRequestParam={}}ngOnInit(){super.init(),this.loadPrepaidCards(),this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject,this.complexLookupOptions.component=this.options&&this.options.component?this.options.component:L.a}loadPrepaidCards(){this.prepaidCardRequestParam={};const o=this.commonProv.session.getValueOf(c.a.USERINFO);this.prepaidCardRequestParam.vsBranchCode=o.cifBranch,this.prepaidCardRequestParam.cardType="Prepaid",this.returnPrepaidCards(this.prepaidCardRequestParam)}returnPrepaidCards(o){return Object(A.b)(this,void 0,void 0,function*(){const e=yield this.crdsSrvce.returnCardList(o).catch(o=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching prepaid cards in PsLookupPrepaidCardsComponent :",o)});this.complexLookupOptions.listOfOptions=e&&e.gridModel.length>0?this.populatePrepaidCards(e.gridModel):[]})}onChangeItem(o){this.onPrepaidCardChange.emit(o)}populatePrepaidCards(o){return this.crdsSrvce.populateCards(o,x.a.PREPAID_CARD_TYPE_NAME)}reset(){this.complexLookupComponentObj.resetLookUp()}}return o.\u0275fac=function(e){return new(e||o)(l.Rb(b.a),l.Rb(O.a),l.Rb(x.a))},o.\u0275cmp=l.Lb({type:o,selectors:[["ps-lookup-prepaid-cards"]],viewQuery:function(o,e){if(1&o&&l.Wc(N,1),2&o){let o;l.Bc(o=l.gc())&&(e.complexLookupComponentObj=o.first)}},inputs:{options:"options"},outputs:{onPrepaidCardChange:"onPrepaidCardChange"},features:[l.Cb],decls:3,vars:2,consts:[[1,"ps-lookup-prepaid-cards"],[3,"id","options","changeItem"],["complexLookupComponentObj",""]],template:function(o,e){1&o&&(l.Xb(0,"ps-container-complex",0),l.Xb(1,"ps-complex-lookup",1,2),l.fc("changeItem",function(o){return e.onChangeItem(o)}),l.Wb(),l.Wb()),2&o&&(l.Fb(1),l.pc("id",e.id)("options",e.complexLookupOptions))},directives:[P.a,_.a],styles:[""]}),o})();var D=t("/M2N");const E=["toCardRef"],I=["fromCardRef"];function w(o,e){if(1&o){const o=l.Yb();l.Xb(0,"ps-form-step",2),l.Xb(1,"ps-container-panel",3),l.Xb(2,"ps-lov-recharge-methods",4),l.fc("onPsChange",function(e){return l.Fc(o),l.ic().onRechargeMethodsChange(e)}),l.Wb(),l.Xb(3,"ps-lookup-own-accounts",5),l.fc("onAccountChange",function(e){return l.Fc(o),l.ic().onFromAccountChange(e)}),l.Wb(),l.Xb(4,"ps-lookup-debit-cards",6),l.fc("onDebitCardChange",function(e){return l.Fc(o),l.ic().onFromCardChange(e)}),l.Wb(),l.Xb(5,"ps-lookup-prepaid-cards",7),l.fc("onPrepaidCardChange",function(e){return l.Fc(o),l.ic().onToCardChange(e)}),l.Wb(),l.Sb(6,"ps-complex-exchange",8),l.Wb(),l.Wb()}if(2&o){const o=l.ic();l.pc("id",o.stepperOptions.namesofSteps[0]),l.Fb(1),l.pc("options",o.panelOptions1Step1),l.Fb(1),l.pc("options",o.rechargeMethodsOptions),l.Fb(1),l.pc("options",o.fromAccountOptions),l.Fb(1),l.pc("options",o.fromCardOptions),l.Fb(1),l.pc("options",o.toCardOptions),l.Fb(1),l.pc("options",o.complexExchangeOptions)}}let V=(()=>{class o extends a.OmniBasePage{constructor(o,e){super(),this.navService=o,this.omniPull=e,this.formGroup=new s.f({}),this.rechargeCardVO={},this.stepperOptions={stepperName:"prepaid_card_stepper",isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["prepaid_card_req_step1"],group:this.formGroup,submitOptions:{extraParams:{},submitServiceUrl:n.a.serviceUrl.creditCardRequest,group:this.formGroup},requestObject:this.rechargeCardVO},this.panelOptions1Step1={isExpandable:!0,labelKey:"prepaid_card_recharge_details_key",expanded:!0},this.fromCardOptions={labelKey:"from_card_key",placeHolder:"select_from_card_key",group:this.formGroup,fcName:"fromCard",requestObject:this.rechargeCardVO},this.toCardOptions={labelKey:"to_card_key",placeHolder:"select_to_card_key",group:this.formGroup,fcName:"toCard",requestObject:this.rechargeCardVO},this.complexExchangeOptions={editableMode:!1,showToCurrencyOptions:!0,fromAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromCurrency",group:this.formGroup},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"transactionAmount",group:this.formGroup,decimalPoints:2}},toAmountOptions:{currency:"",currenciesOptions:{placeHolder:"exchange_currency_key",labelKey:"exchange_currency_key",fcName:"currency",group:this.formGroup},amountOptions:{labelKey:"exchange_amount_key",placeHolder:"enter_amount_key",fcName:"toAmount",group:this.formGroup,decimalPoints:2}},requestObject:this.rechargeCardVO,group:this.formGroup},this.fromAccountOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:i.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:this.rechargeCardVO},this.rechargeMethodsOptions={group:this.formGroup,fcName:"rechargeMethods"}}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup,this.commonProv.copyObject(this.rechargeCardVO,this.navService.getAllParams()?this.navService.getAllParams().ScreenVO?this.navService.getAllParams().ScreenVO:this.navService.getAllParams():{})}ionViewDidEnter(){super.ionViewDidEnter(),this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName],1),this.rechargeCardVO&&this.rechargeCardVO[this.toCardOptions.fcName]&&this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_READONLY,[this.toCardOptions.fcName],1);const o=this.commonProv.getElementValidations(this.rechargeMethodsOptions.fcName);if(o.DEFAULT_VALUE&&0==o.IS_VISIBLE){const e={itemValue:JSON.parse(o.DEFAULT_VALUE).value};this.onRechargeMethodsChange(e)}}onFromAccountChange(o){this.complexExchangeOptions.fromAmountOptions.currency=o.currencyBriefNameEnglish,this.complexExchangeOptions.fromAmountOptions.currencyCode=o.currency,setTimeout(()=>{this.stepperOptions.requestObject[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=o.currency},1)}onFromCardChange(o){this.validateCurrencyCombination(o),this.complexExchangeOptions.fromAmountOptions.currency=o.currencyDesc,this.complexExchangeOptions.fromAmountOptions.currencyCode=o.currency,setTimeout(()=>{this.stepperOptions.requestObject[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=o.currency},1)}onToCardChange(o){this.validateCurrencyCombination(o),this.complexExchangeOptions.toAmountOptions.currency=o.currencyDesc,this.complexExchangeOptions.toAmountOptions.currencyCode=o.currency,setTimeout(()=>{this.stepperOptions.requestObject[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=o.currency},1)}onRechargeMethodsChange(o){"A"==o.itemValue?(this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_VISIBLE,[this.fromCardOptions.fcName],0),this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_VISIBLE,[this.fromAccountOptions.fcName],1)):(this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_VISIBLE,[this.fromAccountOptions.fcName],0),this.commonProv.applyDynScreenDisplay(c.a.ACTION_TYPE_VISIBLE,[this.fromCardOptions.fcName],1))}validateCurrencyCombination(o){o[c.a.VALIDATE_CURRENCY_COMBINATION]&&this.rechargeCardVO[this.fromCardOptions.fcName]&&this.rechargeCardVO[this.toCardOptions.fcName]&&this.omniPull.validateCurrencyCombination({fromCurrency:+this.rechargeCardVO[this.fromCardOptions.fcName].currency,toCurrency:+this.rechargeCardVO[this.toCardOptions.fcName].currency,listOfAccounts:[this.fromCardRef,this.toCardRef],listOfAffectedFields:[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName],screenVO:this.rechargeCardVO})}updateScreenVo(o){this.rechargeCardVO.submitType="-1"}}return o.\u0275fac=function(e){return new(e||o)(l.Rb(p.a),l.Rb(r.a))},o.\u0275cmp=l.Lb({type:o,selectors:[["app-prepaid-card-recharge"]],viewQuery:function(o,e){if(1&o&&(l.Wc(E,1),l.Wc(I,1)),2&o){let o;l.Bc(o=l.gc())&&(e.toCardRef=o.first),l.Bc(o=l.gc())&&(e.fromCardRef=o.first)}},features:[l.Cb],decls:2,vars:3,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","prepaid_card_req_panel",3,"options"],[3,"options","onPsChange"],["id","from-account",3,"options","onAccountChange"],[3,"options","onDebitCardChange"],[3,"options","onPrepaidCardChange"],["id","exchange",3,"options"]],template:function(o,e){1&o&&(l.Xb(0,"ps-template-stepper",0),l.Pc(1,w,7,7,"ps-form-step",1),l.Wb()),2&o&&(l.pc("options",e.stepperOptions)("id",e.stepperOptions.stepperName),l.Fb(1),l.pc("psStep","step1"))},directives:[u.a,h.a,m.a,d.a,g,C.a,v.a,T,D.a],styles:[""]}),o})()},"41l2":function(o,e,t){"use strict";t.d(e,"a",function(){return a});var s=t("mrSG"),i=t("ZyuK"),n=t("iOQE"),r=t("DFXC"),c=t("Q0Ba"),p=t("fXoL");let a=(()=>{class o extends n.a{constructor(o,e,t){super(o,e),this.omniPull=t,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(o=>{if(o){const e=o.get(this.options.fcName);e&&e.LOV_TYPE_ID&&e.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var o;return Object(s.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(o=this.defaultDropDownLovOptions.listOfOptions)||void 0===o?void 0:o.length)){const o=this.commonProv.getElementValidations(this.options.fcName);if(o&&o.LOV_TYPE_ID&&(this.options.lovTypeId=o.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const o=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);o&&(this.options.lovAdminFilterParamName=o[this.options.lovAdminFilterParamName])}const e={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},t=yield this.omniPull.returnLovTypesValues(e).catch(o=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",o)});if(this.defaultDropDownLovOptions.listOfOptions=[],t&&t.length>0){for(const o of t){const e={itemValue:o.itemValue,description:o.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(o.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:o};e.selectedObj[this.options.fcName]=o.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(e)}this.showLovDropdown=!0}}})}selectDropDownChange(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(e){return new(e||o)(p.Rb(c.a),p.Rb(r.a),p.Rb(i.a))},o.\u0275cmp=p.Lb({type:o,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[p.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,e){1&o&&(p.Xb(0,"ps-select-dropdown",0),p.fc("onPsChange",function(o){return e.selectDropDownChange(o)}),p.Wb()),2&o&&p.pc("id",e.id)("options",e.defaultDropDownLovOptions)},directives:[n.a],styles:[""]}),o})()},LpqL:function(o,e,t){"use strict";t.d(e,"a",function(){return f});var s=t("mrSG"),i=t("fXoL"),n=t("3Pt+"),r=t("GIS6"),c=t("ZF3V"),p=t("DFXC"),a=t("zngb"),l=t("Q0Ba"),u=t("vbr2"),h=t("Isd1"),m=t("L0og");const d=["complexLookupRef"];let f=(()=>{class o extends c.a{constructor(o,e,t){super(o,e),this.commonService=o,this.cardSrv=t,this.formGroup=new n.f({}),this.options={requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_debit_card_found_key"},this.onDebitCardChange=new i.o,this.labelValuesMap=new Map,this.debitCardRequestParam={}}ngOnInit(){super.init(),this.loadDebitCards(),this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.complexLookupOptions.type=r.a.DEBIT_CARD_TYPE_NAME,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject,this.complexLookupOptions.component=this.options&&this.options.component?this.options.component:u.a}loadDebitCards(){this.debitCardRequestParam={};const o=this.commonProv.session.getValueOf(a.a.USERINFO);this.debitCardRequestParam.vsBranchCode=o.cifBranch,this.debitCardRequestParam.cardType="Debit",this.options&&void 0!==this.options.submitType&&(this.debitCardRequestParam.submitType=this.options.submitType),this.returnDebitCards(this.debitCardRequestParam)}returnDebitCards(o){return Object(s.b)(this,void 0,void 0,function*(){const e=yield this.cardSrv.returnCardList(o).catch(o=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching debit cards in PsLookupDebitCardsComponent :",o)});this.complexLookupOptions.listOfOptions=e&&e.gridModel.length>0?this.populateDebitCards(e.gridModel):[]})}onChangeItem(o){this.onDebitCardChange.emit(o)}populateDebitCards(o){return this.cardSrv.populateCards(o,r.a.DEBIT_CARD_TYPE_NAME)}reset(){this.complexLookupRef.resetLookUp()}}return o.\u0275fac=function(e){return new(e||o)(i.Rb(l.a),i.Rb(p.a),i.Rb(r.a))},o.\u0275cmp=i.Lb({type:o,selectors:[["ps-lookup-debit-cards"]],viewQuery:function(o,e){if(1&o&&i.Wc(d,1),2&o){let o;i.Bc(o=i.gc())&&(e.complexLookupRef=o.first)}},inputs:{options:"options"},outputs:{onDebitCardChange:"onDebitCardChange"},features:[i.Cb],decls:3,vars:2,consts:[[1,"ps-lookup-debit-cards"],[3,"id","options","changeItem"],["complexLookupRef",""]],template:function(o,e){1&o&&(i.Xb(0,"ps-container-complex",0),i.Xb(1,"ps-complex-lookup",1,2),i.fc("changeItem",function(o){return e.onChangeItem(o)}),i.Wb(),i.Wb()),2&o&&(i.Fb(1),i.pc("id",e.id)("options",e.complexLookupOptions))},directives:[h.a,m.a],styles:[""]}),o})()},VEWP:function(o,e,t){"use strict";t.d(e,"a",function(){return O});var s=t("mrSG"),i=t("fXoL"),n=t("4lGw"),r=t("V0Fi"),c=t("ZyuK"),p=t("ZF3V"),a=t("EIUR"),l=t("DFXC"),u=t("zngb"),h=t("Q0Ba"),m=t("Isd1"),d=t("L0og");const f=["complexLookupComponentObj"];let O=(()=>{class o extends p.a{constructor(o,e,t,s){super(o,e),this.commonService=o,this.omniPull=t,this.accountsService=s,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new i.o,this.onAccountDeleted=new i.o,this.labelValuesMap=new Map,this.psCurrency=new a.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(o){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(o){return Object(s.b)(this,void 0,void 0,function*(){if(null!=o&&(this.options=o),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const e=this.commonService.session.getValueOf(u.a.USERINFO),t=this.prepareRequestData(e);this.returnAccountList(t)})}returnAccountList(o){return Object(s.b)(this,void 0,void 0,function*(){const e=this.commonProv.session.getValueOf(r.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const t=yield this.omniPull.returnAccounts(o).catch(o=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});if(t&&t.gridModel.length>0){if(this.allType){o.accountType="F",o.permittedGls="F";const e=yield this.omniPull.returnAccounts(o).catch(o=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});e&&e.gridModel.length>0&&(t.gridModel=[...t.gridModel,...e.gridModel])}if(this.options.listOfAccounts=t.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((o,e)=>o.rowIndex=e),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let o="QR"===this.options.purpose?null==e?void 0:e.defaultQrPaymentAccKey:null==e?void 0:e.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(e=>{e.personalizeKey&&e.personalizeKey===o&&(this.common.setValInsideNestedObj(this.options.fcName,e.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",e.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(o){const e=[];for(const t of o){const o={briefNameEnglish:t.briefNameEnglish,cifShortNameEnglish:t.cifShortNameEnglish,accountNumber:t.accountNumber,balance:this.psCurrency.transform(null==t.balance?"0.0":t.balance,t.currencyDecimalPoints)+" "+(t.currencyBriefName||t.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==t.availableBalance?"0.0":t.availableBalance,t.currencyDecimalPoints)+" "+(t.currencyBriefName||t.currencyBriefNameEnglish),currencyBriefName:t.currencyBriefName||t.currencyBriefNameEnglish,currencyBriefNameEnglish:t.currencyBriefNameEnglish,currency:t.currency,accountTypeDesc:t.accountTypeDesc,additionalRef:t.additionalRef,ibanAccNo:t.ibanAccNo,accGl:t.accGl,serialNo:t.serialNo,branch:t.branch,cif:t.cif,formattedAccount:this.accountsService.returnFormattedAccount(t).formattedAccount,personalizeKey:t.personalizeKey,nickName:t.nickName,briefName:t.briefName,lookupKey:t.additionalRef,branchDescription:t.branchDescription?t.branchDescription:"",generalLedgerBriefNameEng:t.generalLedgerBriefNameEng?t.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:t.statusDescription,statusCode:t.status,accountFormat:this.accountsService.returnFormattedAccount(t).accountFormat};this.options.multiple&&(o.excludeType=t.excludeType),e.push(o)}return e}prepareRequestData(o){let e={};if(o&&o.omniUserVO&&(e={userCifNo:o.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(e={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(e.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(e.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(e.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(e.endUserId=this.options.endUserId),null!=this.options.fromCurrency?e.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(e.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)e.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let o="";for(const e in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[e]+",";o=o.slice(0,o.lastIndexOf(",")),e.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)e.accountAllowedTypes=this.options.accountAllowedTypes;else{let o="";for(const e in this.options.accountAllowedTypes)o+=this.options.accountAllowedTypes[e]+",";o=o.slice(0,o.lastIndexOf(",")),e.accountAllowedTypes=o}return e}fetchAccountBasedOnCurrency(o){return this.options.listOfAccounts}onChange(o){this.logger.log(o)}populateOwnAccountMap(){let o={},e={},t={};o={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},e={key:"currentBalance",value:"0.0",isEdit:!1},t={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",o),this.labelValuesMap.set("balance_key",e),this.labelValuesMap.set("available_balance_key",t)}onChangeItem(o){this.onAccountChange.emit(o)}onDeleteItem(o){o&&this.onAccountDeleted.emit(o)}handleMultipleSelection(){const o=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(o=>this.options.requestObject[this.options.fcName].some(e=>e.accountNumber==o.accountNumber)):[];this.complexLookupOptions.selectedItems=o.filter(o=>this.options.setAllAccountsAsSelecetd&&(!o.excludeType||!(o.excludeType.includes(r.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||o.excludeType.includes(r.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(o=>Object.assign(Object.assign({item:o[o.previewProperty]},o),{itemLookup:o.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(o){o&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(e=>o.accountNumber!=e.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(o){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(o)}}return o.\u0275fac=function(e){return new(e||o)(i.Rb(h.a),i.Rb(l.a),i.Rb(c.a),i.Rb(n.a))},o.\u0275cmp=i.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(o,e){if(1&o&&i.Wc(f,1),2&o){let o;i.Bc(o=i.gc())&&(e.complexLookupComponentObj=o.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[i.Cb,i.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(o,e){1&o&&(i.Xb(0,"ps-container-complex",0),i.Xb(1,"ps-complex-lookup",1,2),i.fc("changeItem",function(o){return e.onChangeItem(o)})("onDeleteItem",function(o){return e.onDeleteItem(o)}),i.Wb(),i.Wb()),2&o&&(i.Fb(1),i.pc("id",e.id)("options",e.complexLookupOptions))},directives:[m.a,d.a],styles:[""]}),o})()}}]);