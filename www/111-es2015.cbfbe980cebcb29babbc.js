(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{OkPl:function(t,e,o){"use strict";o.r(e),o.d(e,"AccountStatementListPage",function(){return k});var n=o("mrSG"),a=o("3Pt+"),i=o("ZyuK"),s=o("nipE"),c=o("DFXC"),r=o("QZhd"),u=o("woXy"),l=o("Q0Ba"),p=o("gKqT"),m=o("fXoL"),h=o("RkAu"),d=o("RFuK"),f=o("ofXK"),A=o("iSZF"),b=o("LHh1"),g=o("zngb"),y=o("lE2x"),N=o("EZLY"),v=o("V0Fi"),D=o("BygU");function F(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div"),m.Xb(1,"ps-container-lookup-option",2),m.fc("logoClicked",function(e){return m.Fc(t),m.ic(2).onLogoClicked(e)}),m.Wb(),m.Wb()}if(2&t){const t=e.$implicit,o=m.ic(2);m.Fb(1),m.pc("options",o.prepareLookUp(t))("itemCard",t)}}function O(t,e){if(1&t&&(m.Xb(0,"div"),m.Pc(1,F,2,2,"div",1),m.Wb()),2&t){const t=m.ic();m.Fb(1),m.pc("ngForOf",t.options.itemList)}}let L=(()=>{class t extends N.a{constructor(t){super(),this.omniPull=t,this.reloadFct=new m.o,this.options={},this.labelValuesMap=new Map,this.headerMap=new Map,this.populateHeaderValueMap()}ngOnInit(){super.init(),this.options&&this.options.listOfOptions&&(this.options.listOfOptions.map((t,e)=>t.rowIndex=e),this.options.itemList=this.options.listOfOptions)}prepareLookUp(t){const e={};return e.labelsValueMap=this.labelValuesMap,e.headerMap=this.headerMap,e.formGroup=this.options.group,e.isEditable=this.options.isEditable,e.itemList=this.options.itemList,t.merchantName&&t.merchantLogo&&(e.logoOptions={imageOptions:{imageName:t.merchantLogo.toLowerCase()+".png",imageBase64Url:"",imagePath:y.a.CLIENT_ASSETS_CONFIG.IMGS_FOLDER_URL},label:t.merchantName},e.actionDetailsOptions=[{id:"merchant-details",label:"merchant_details_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"merchant-details",labelOptions:{labelKey:"merchant_details_key"}},route:"merchant-details",pageOptions:{operId:v.a.MERCHANT_DETAILS,iconName:"merchant-details",title:"merchant_details_key"},navigationOptions:{queryParams:{card:t}}}}]),e.reloadFunction={func(){return new Promise((t,e)=>{t(this.executionClass.reloadList())})},executionClass:this,params:[]},e}reloadList(){this.reloadFct.emit()}populateHeaderValueMap(){let t={},e={},o={},n={},a={},i={},s={},c={},r={},u={};t={key:"reference",value:"--- --- --- ---",isEdit:!1},e={key:"transactionAmount",value:"--- --- --- ---",isEdit:!1},o={key:"description",value:"--- --- --- ---",isEdit:!1,showMappingOnNoValue:!1},n={key:"fromAccount",value:"--- --- --- ---",isEdit:!1},a={key:"toAccount",value:"--- --- --- ---",isEdit:!1},c={key:"chequeNo",value:"--- --- --- ---",isEdit:!1},r={key:"chequeDate",value:"--- --- --- ---",isEdit:!1},u={key:"payeeName",value:"--- --- --- ---",isEdit:!1},i={key:"title",value:"transactionName",isEdit:!1},s={key:"subTitle",value:"transactionDate",isEdit:!1,formGroupMap:{placeHolder:"transaction_date",fcName:"transactionDate"}},this.labelValuesMap.set("value_date_key",{}),this.labelValuesMap.set("description_key",o),this.labelValuesMap.set("branch_key",{}),this.labelValuesMap.set("reference_no_key",t),this.labelValuesMap.set("amount_key",e),this.labelValuesMap.set("from_account_number_key",n),this.labelValuesMap.set("to_account_number_key",a),this.labelValuesMap.set("cheque_date_key",r),this.labelValuesMap.set("cheque_no_key",c),this.labelValuesMap.set("payee_name_date_key",u),this.headerMap.set("title",i),this.headerMap.set("subtitle",s)}onLogoClicked(t){this.gotoMerchantDetails(t)}gotoMerchantDetails(t){this.navService.openPage({operID:g.a.VIEW_STATEMENT_OF_TRANSACTIONS,title:"Merchant Details",icon:"report",component:"merchant-details",param:t})}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(i.a))},t.\u0275cmp=m.Lb({type:t,selectors:[["ps-account-statement-list"]],inputs:{options:"options"},outputs:{reloadFct:"reloadFct"},features:[m.Cb],decls:2,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"options","itemCard","logoClicked"]],template:function(t,e){1&t&&(m.Xb(0,"ps-template-list"),m.Pc(1,O,2,1,"div",0),m.Wb()),2&t&&(m.Fb(1),m.pc("ngIf",(null==e.options||null==e.options.itemList?null:e.options.itemList.length)>0))},directives:[N.a,f.o,f.n,D.a],styles:[""]}),t})();var _=o("KVmc");function S(t,e){if(1&t&&(m.Xb(0,"div",7),m.Sb(1,"ps-label",0),m.Wb()),2&t){const t=m.ic(2);m.Fb(1),m.pc("options",t.noTransactionsFound)}}function C(t,e){if(1&t){const t=m.Yb();m.Vb(0),m.Xb(1,"ps-account-statement-list",5),m.fc("reloadFct",function(){return m.Fc(t),m.ic().loadAccountStatement()}),m.Wb(),m.Pc(2,S,2,1,"div",6),m.Ub()}if(2&t){const t=m.ic();m.Fb(1),m.pc("options",t.accountStatementListOptions),m.Fb(1),m.pc("ngIf",t.noTransactionsFound)}}let k=(()=>{class t extends p.OmniBasePage{constructor(t,e,o,n){super(),this.commonService=t,this.logger=e,this.navService=o,this.omniPull=n,this.id="default_stepper_id",this.requestWasSent=!0,this.noTransactionsFound=!1,this.paramList={},this.formGroup=new a.f({}),this.templateViewOptions={group:this.formGroup},this.psDatePipe=new s.a,this.accountStatementListOptions={},this.reportFilterOptions={},this.noTransactionsOptions={labelKey:"no_transactions_available_key"},this.exportOptions={group:this.formGroup},this.sendOptions={group:this.formGroup}}ngOnInit(){super.init(),this.paramList=this.navService.getAllParams()?this.navService.getAllParams():null,this.exportOptions.reportParametersList=this.paramList,this.sendOptions.reportParametersList=this.paramList,this.accountStatementListOptions={isEditable:!0,group:this.formGroup},r.a.oper_ID=63,this.loadAccountStatement()}loadAccountStatement(t){this.returnAccountStatement({commonParametersList:{status:"A",accountNumber:this.paramList.accountNumber,additionalRef:this.paramList.additionalRef},accountCategory:this.paramList.accountTypeCategory,ibanAccNo:this.paramList.ibanAccNo,accGl:this.paramList.accGl,dateFrom:null==t?void 0:t.repFltfilterFromDate,dateTo:null==t?void 0:t.repFltfilterToDate,minAmount:null==t?void 0:t.repFltfromAmount,maxAmount:null==t?void 0:t.repFlttoAmount,referenceNo:null==t?void 0:t.repFltReferenceNumber,transactionTypeIndicator:null==t?void 0:t.repFlttrsTypeInd})}returnAccountStatement(t){return Object(n.b)(this,void 0,void 0,function*(){this.requestWasSent=!0;const t={gridModel:[{transactionNo:"2317524",toAccountAccGl:"47004000000004259078",fromAccountCif:"1000087",fromAccountAccGl:"272101",transactionTypeShortNameEnglish:"Purchase Jpay*Jumia",fromAccountCurrency:"788",cifShortName:"FARAJ",fromAccountAdditionalRef:"47004000000003180923",transactionCurrency:"788",amount:"10",startDate:"22/11/2022",transactionDate:16654356e5,currencyBriefNameEnglish:"TND",transactionType:"3",toAccountBranch:"1004",statusDescription:"Approved",toAccountCif:"1000087",cvAmount:"10",status:"P",description:"Purchase Jpay*Jumia",merchantLogo:"jumia",merchantName:"Jumia",branch:"Perth"},{transactionNo:"2317524",toAccountAccGl:"47004000000004259078",fromAccountCif:"1000087",fromAccountAccGl:"272101",transactionTypeShortNameEnglish:"Purchase google youtube music",fromAccountCurrency:"788",cifShortName:"FARAJ",fromAccountAdditionalRef:"47004000000003180923",transactionCurrency:"788",amount:"10",startDate:16654356e5,transactionDate:16654356e5,currencyBriefNameEnglish:"TND",transactionType:"2",toAccountBranch:"1004",statusDescription:"Approved",toAccountCif:"1000087",cvAmount:"10",status:"P",description:"Purchase google youtube music",merchantLogo:"youtube",merchantName:"youtube",branch:"Sydney"},{transactionNo:"2317524",toAccountAccGl:"47004000000004259078",fromAccountCif:"1000087",fromAccountAccGl:"272101",transactionTypeShortNameEnglish:"Purchase zara",fromAccountCurrency:"788",cifShortName:"FARAJ",fromAccountAdditionalRef:"47004000000003180923",transactionCurrency:"788",amount:"10",startDate:16654356e5,transactionDate:16654356e5,currencyBriefNameEnglish:"TND",transactionType:"1",toAccountBranch:"1004",statusDescription:"Approved",toAccountCif:"1000087",cvAmount:"10",status:"P",description:"Purchase zara",merchantLogo:"zara",merchantName:"zara",branch:"Gold Coast"},{transactionNo:"2317524",toAccountAccGl:"47004000000004259078",fromAccountCif:"1000087",fromAccountAccGl:"272101",transactionTypeShortNameEnglish:"Local transfer to Peter John",fromAccountCurrency:"788",cifShortName:"FARAJ",fromAccountAdditionalRef:"47004000000003180923",transactionCurrency:"788",amount:"10",valueDate:16654356e5,transactionDate:16654356e5,currencyBriefNameEnglish:"TND",transactionType:"4",toAccountBranch:"1004",statusDescription:"Approved",toAccountCif:"1000087",cvAmount:"10",status:"P",description:"Local transfer to Peter John",chequeNo:"123456",payeeName:"Peter John",chequeDate:16654356e5},{transactionNo:"2317524",toAccountAccGl:"47004000000004259078",fromAccountCif:"1000087",fromAccountAccGl:"272101",transactionTypeShortNameEnglish:"Purches from TND",fromAccountCurrency:"788",cifShortName:"FARAJ",fromAccountAdditionalRef:"47004000000003180923",transactionCurrency:"788",amount:"10",valueDate:16654356e5,transactionDate:16654356e5,currencyBriefNameEnglish:"TND",transactionType:"6",toAccountBranch:"1004",statusDescription:"Approved",toAccountCif:"1000087",cvAmount:"10",status:"P",description:"Purches from TND",chequeNo:"123456",payeeName:"TND",chequeDate:16654356e5}]};this.accountStatementListOptions.listOfOptions=t&&t.gridModel.length>0?this.populateAccountTransactions(t.gridModel):[],this.requestWasSent=!1})}populateAccountTransactions(t){const e=[];for(const o of t){const t={transactionDate:this.psDatePipe.transform(o.transactionDate,"DD/MM/YYYY").toString(),transactionName:o.transactionTypeShortNameEnglish,reference:o.soReference,transactionAmount:o.amount+" "+o.currencyBriefNameEnglish,valueDate:this.psDatePipe.transform(o.valueDate,"DD/MM/YYYY").toString(),branch:o.bankCifShortNameEng,fromAccount:o.fromAccountAdditionalRef?o.fromAccountAdditionalRef:o.fromAccountAccGl,fromAccount_lookupKey:o.fromAccountAdditionalRef?o.fromAccountAdditionalRef:o.fromAccountAccGl,toAccount:o.toAccountAdditionalRef?o.toAccountAdditionalRef:o.toAccountAccGl,toAccount_lookupKey:o.toAccountAdditionalRef?o.toAccountAdditionalRef:o.toAccountAccGl,chequeNo:o.chequeNo,chequeDate:o.chequeDate,payeeName:o.payeeName,description:o.description,merchantName:o.merchantName,merchantLogo:o.merchantLogo};o.merchantName&&(o.merchantLogo||this.omniPull.getParamValOf("DefaultLogo").then(e=>{t.merchantLogo=e.gridModel.defaultLogo}).catch(t=>this.logger.log(t))),"1"==o.transactionType?(delete t.toAccount,delete t.toAccount_lookupKey,delete t.chequeNo,delete t.chequeDate,delete t.payeeName):"2"==o.transactionType?(delete t.fromAccount,delete t.fromAccount_lookupKey,delete t.chequeNo,delete t.chequeDate,delete t.payeeName):"3"==o.transactionType?(delete t.chequeNo,delete t.chequeDate,delete t.payeeName):"4"==o.transactionType?(delete t.toAccount,delete t.toAccount_lookupKey):"5"==o.transactionType&&(delete t.fromAccount,delete t.fromAccount_lookupKey),e.push(t)}return e}filterCriteria(t){this.sendOptions.fromDate=t.repFltfilterFromDate,this.sendOptions.todate=t.repFltfilterToDate,this.loadAccountStatement(t)}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(l.a),m.Rb(c.a),m.Rb(u.a),m.Rb(i.a))},t.\u0275cmp=m.Lb({type:t,selectors:[["app-account-statement-list"]],inputs:{id:"id"},features:[m.Cb],decls:6,vars:8,consts:[[3,"options"],[3,"options","id","onPsChange"],[4,"ngIf"],["footer",""],[1,"footer-buttons",3,"options","id"],[3,"options","reloadFct"],["class","no-transfers-text",4,"ngIf"],[1,"no-transfers-text"]],template:function(t,e){1&t&&(m.Xb(0,"ps-template-view",0),m.Xb(1,"ps-complex-report-filter-criteria",1),m.fc("onPsChange",function(t){return e.filterCriteria(t)}),m.Wb(),m.Pc(2,C,3,2,"ng-container",2),m.Vb(3,3),m.Sb(4,"ps-button-send-email",4),m.Sb(5,"ps-button-export",4),m.Ub(),m.Wb()),2&t&&(m.pc("options",e.templateViewOptions),m.Fb(1),m.pc("options",e.reportFilterOptions)("id","filter_criteria"),m.Fb(1),m.pc("ngIf",!e.requestWasSent),m.Fb(2),m.pc("options",e.sendOptions)("id","rep_send_"+e.id),m.Fb(1),m.pc("options",e.exportOptions)("id","rep_export_"+e.id))},directives:[h.a,d.a,f.o,A.a,b.a,L,_.a],styles:[""]}),t})()},RkAu:function(t,e,o){"use strict";o.d(e,"a",function(){return d});var n=o("r40+"),a=o("qEF5"),i=o("uqA0"),s=o("fXoL"),c=o("HAMJ"),r=o("ofXK"),u=o("TsIt"),l=o("5YYs");function p(t,e){if(1&t&&s.Sb(0,"ps-action-image",3),2&t){const t=s.ic();s.pc("options",t.actionImageOptions)}}const m=["*",[["","footer",""]]],h=["*","[footer]"];let d=(()=>{class t extends i.a{constructor(t){super(),this.events=t,this.cancelOptions={labelKey:"cancel_key",group:this.options.group},this.spinner=!1,this.actionImageOptions={imageName:a.a.getCssVariableValue("--ps-loader-image-name")},this.reqStartEvent=t.subscribe("network:request:started",t=>{this.spinner=!0}),this.reqCompletEvent=t.subscribe("network:request:completed",t=>{this.spinner=!1})}ngOnInit(){this.options.requestObject=this.options.requestObject?this.options.requestObject:{},this.options.group&&this.commonProv.setFormData(this.options.group,this.options.requestObject)}onFooterClick(){void 0!==document.getElementsByTagName("ion-modal")[0]&&document.getElementsByTagName("ion-modal")[0].dismiss()}ngOnDestroy(){super.ngOnDestroy(),this.reqStartEvent&&this.reqStartEvent.unsubscribe(),this.reqCompletEvent&&this.reqCompletEvent.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(n.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["ps-template-view"]],inputs:{options:"options"},features:[s.Cb],ngContentSelectors:h,decls:6,vars:3,consts:[["class","inline-loading-image",3,"options",4,"ngIf"],["psFooter",""],[3,"id","options","click"],[1,"inline-loading-image",3,"options"]],template:function(t,e){1&t&&(s.oc(m),s.Xb(0,"ps-template-screen"),s.Pc(1,p,1,1,"ps-action-image",0),s.nc(2),s.Vb(3,1),s.nc(4,1),s.Xb(5,"ps-button-cancel",2),s.fc("click",function(){return e.onFooterClick()}),s.Wb(),s.Ub(),s.Wb()),2&t&&(s.Fb(1),s.pc("ngIf",!e.options.disableLoading&&e.spinner),s.Fb(4),s.pc("id",e.id+"temp_btn_cancel")("options",e.cancelOptions))},directives:[c.a,r.o,u.a,l.a],styles:[""]}),t})()}}]);