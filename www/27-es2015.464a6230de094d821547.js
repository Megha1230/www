(window.webpackJsonp=window.webpackJsonp||[]).push([[27,268,269,270,271,272,273,274,339,340,341,342,343,344,345,346,347,348,349],{"4lGw":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("DFXC"),s=n("ZyuK"),o=n("fXoL");let a=(()=>{class e{constructor(e,t){this.omniPull=e,this.logger=t,this.getAccountAsIBAN()}getAccountAsIBAN(){void 0===this.accountAsIBAN&&this.omniPull.getParamValOf("AccountsAsIBAN").then(e=>{this.accountAsIBAN=e.AccountsAsIBAN}).catch(e=>this.logger.log(e))}returnFormattedAccount(e){let t,n;return null!=this.accountAsIBAN&&1===this.accountAsIBAN?(t=null==e.ibanAccNo?"":e.ibanAccNo,n="IBAN"):null!=this.accountAsIBAN&&2===this.accountAsIBAN?(t=null==e.additionalRef?"":e.additionalRef,n="AddRef"):null!=this.accountAsIBAN&&3===this.accountAsIBAN?(t=e.branch+"-"+e.currency+"-"+e.accGl+"-"+e.cif+"-"+e.serialNo,n="iMAL"):(t=null==e.additionalRef?"":e.accountNumber,n="ACCNO"),{formattedAccount:t,accountFormat:n}}}return e.\u0275fac=function(t){return new(t||e)(o.bc(s.a),o.bc(i.a))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},EZLY:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),s=n("uqA0"),o=n("xV2m"),a=n("KVmc");const r=["templateList"],c=function(){return{labelKey:"no_matching_found_key",translate:!0}},p=["*"];let l=(()=>{class e extends s.a{constructor(){super(),this.searchOptions={contentReference:"container-lookup-option",selectors:"ion-label,span:not(:has(ps-label,ion-label),.highlight)",actionType:"filter"}}ngOnInit(){this.init()}init(){super.init()}ngAfterViewInit(){this.searchOptions.templateRef=this.templateList}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Lb({type:e,selectors:[["ps-template-list"]],viewQuery:function(e,t){if(1&e&&i.Wc(r,1,i.m),2&e){let e;i.Bc(e=i.gc())&&(t.templateList=e.first)}},features:[i.Cb],ngContentSelectors:p,decls:7,vars:3,consts:[[1,"ps-template-list-searchbar-wrapper"],["id","search_in_template_list",3,"options"],[1,"ps-template-list-container"],["templateList",""],[1,"no-matching-found",3,"options"],["id","ps-template-list-main-content"]],template:function(e,t){1&e&&(i.oc(),i.Xb(0,"div",0),i.Sb(1,"ps-input-search-html",1),i.Wb(),i.Xb(2,"div",2,3),i.Sb(4,"ps-label",4),i.Xb(5,"div",5),i.nc(6),i.Wb(),i.Wb()),2&e&&(i.Fb(1),i.pc("options",t.searchOptions),i.Fb(3),i.pc("options",i.rc(2,c)))},directives:[o.a,a.a],encapsulation:2}),e})()},HAMJ:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("zngb"),s=n("qEF5"),o=n("lE2x"),a=n("QZhd"),r=n("uqA0"),c=n("fXoL"),p=n("ofXK"),l=n("GmoW"),u=n("ilDp"),d=n("+U2o"),h=n("Mapq");function m(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",5),c.Xb(1,"ps-action-icon",6),c.fc("onClick",function(){return c.Fc(e),c.ic().onBackIconClicked()}),c.Wb(),c.Xb(2,"ps-action-icon",7),c.fc("onClick",function(){return c.Fc(e),c.ic().openPage()}),c.Wb(),c.Wb()}if(2&e){const e=c.ic();c.Fb(1),c.pc("options",e.arrowIconOptios),c.Fb(1),c.pc("options",e.homeOptions)}}function _(e,t){if(1&e&&c.Sb(0,"ps-action-icon",11),2&e){const e=c.ic(2);c.pc("options",e.headerIconOptions)}}function f(e,t){if(1&e&&(c.Xb(0,"div",8),c.Pc(1,_,1,1,"ps-action-icon",9),c.Sb(2,"ps-label-header",10),c.Wb()),2&e){const e=c.ic();c.Fb(1),c.pc("ngIf",e.headerIconOptions.iconName),c.Fb(1),c.pc("options",e.optionsHeader)}}function I(e,t){if(1&e){const e=c.Yb();c.Xb(0,"ps-action-icon",16),c.fc("click",function(){return c.Fc(e),c.ic(2).showLess()}),c.Wb()}if(2&e){const e=c.ic(2);c.pc("options",e.collapseOptions)}}function E(e,t){if(1&e&&(c.Xb(0,"div",17),c.Sb(1,"ps-complex-menu",10),c.Wb()),2&e){const e=c.ic(2);c.Fb(1),c.pc("options",e.quickMenuHeader)}}function A(e,t){if(1&e){const e=c.Yb();c.Xb(0,"ps-action-icon",18),c.fc("click",function(){return c.Fc(e),c.ic(2).showMore()}),c.Wb()}if(2&e){const e=c.ic(2);c.pc("options",e.expandOptions)}}const N=function(e){return{collapsed:e}};function O(e,t){if(1&e&&(c.Xb(0,"div",12),c.Pc(1,I,1,1,"ps-action-icon",13),c.Pc(2,E,2,1,"div",14),c.Pc(3,A,1,1,"ps-action-icon",15),c.Wb()),2&e){const e=c.ic();c.pc("ngClass",c.sc(4,N,e.collapsed)),c.Fb(1),c.pc("ngIf",!e.collapsed),c.Fb(1),c.pc("ngIf",!e.collapsed),c.Fb(1),c.pc("ngIf",e.collapsed)}}const b=[[["","saveAsDraftButton",""]],[["","extraHeader",""]],"*",[["","psFooter",""]]],R=function(e){return{"center-header":e}},T=["[saveAsDraftButton]","[extraHeader]","*","[psFooter]"];let y=(()=>{class e extends r.a{constructor(){super(),this.collapseOptions={iconName:"arrow-down",labelOptions:{labelKey:"show_more_key"}},this.expandOptions={iconName:"arrow-up",labelOptions:{labelKey:"show_less_key"}},this.helpLabelOptions={labelKey:"help_key"},this.menuIcon={iconName:"menu"},this.closeIcon={iconName:"close"},this.arrowIconOptios={iconName:"arrow-back",allowCust:!0},this.homeOptions={iconName:"lock"},this.optionsHeader={},this.headerIconOptions={},this.quickMenuHeader={quicklinkMenu:!0},this.collapsed=!1,this.operId="operId_"+a.a.oper_ID,this.iconShouldBePresent=!1,this.iconShouldBeChecked=!1,this.hasSubscribed=!1}ngOnInit(){var e;this.landingType=o.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_UI_TYPE,(null===(e=this.screenOptions)||void 0===e?void 0:e.quickMenuCollapsed)&&(this.collapsed=!0),this.isMobile=this.commonProv.isMobileLayout(),super.init(),this.navService.isUserLoggedIn&&(this.homeOptions.iconName="menu"),this.checkViewSubscriptionC=this.commonProv.getCheckViewByOper(a.a.oper_ID>0?a.a.oper_ID:i.a.DEFAULT_FALLBACK_OPER).subscribe(e=>{if(e){if(this.activePageSubscription&&this.activePageSubscription.unsubscribe(),e&&e.didEnter){this.hasSubscribed=!0;const e=this.navService.activePage;e&&this.updateHeader(e)}e&&e.willLeave&&this.hasSubscribed&&this.checkViewSubscriptionC&&this.checkViewSubscriptionC.unsubscribe()}else this.activePageSubscription=this.commonProv.activePage.subscribe(e=>{e?setTimeout(()=>{this.updateHeader(e)},500):this.activePageSubscription&&this.activePageSubscription.unsubscribe()})}),(this.commonProv.isWebLayout()||4==this.landingType)&&this.navService.isUserLoggedIn?this.iconShouldBeChecked=!0:this.iconShouldBePresent=!0}updateHeader(e){this.optionsHeader.labelKey="",this.headerIconOptions.iconName=null,this.optionsHeader.labelKey=e.title,this.headerIconOptions.iconName=e.icon}openPage(){this.navService.navigateToMain()}onBackIconClicked(){this.navService.onCancelClicked().then(e=>{e&&this.screenOptions.nextPageOptions&&this.navService.openPage(this.screenOptions.nextPageOptions)})}ngOnDestroy(){this.checkViewSubscriptionC&&this.checkViewSubscriptionC.unsubscribe()}get ifHomePage(){const e=o.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_PAGE_OPER;return this.iconShouldBeChecked=!1,this.iconShouldBePresent=!s.a.isNotNull(e)||e!==a.a.oper_ID,this.iconShouldBePresent}showMore(){this.collapsed=!1}showLess(){this.collapsed=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["ps-template-screen"]],hostVars:2,hostBindings:function(e,t){2&e&&c.Hb(t.operId)},inputs:{screenOptions:"screenOptions"},features:[c.Cb],ngContentSelectors:T,decls:11,vars:6,consts:[["psHeader",""],[1,"widget-style",3,"ngClass"],["class","widget-menu-icon widget-menu-icon-back",4,"ngIf"],["class","widget-header-title",4,"ngIf"],["class","common-quick-menu",3,"ngClass",4,"ngIf"],[1,"widget-menu-icon","widget-menu-icon-back"],["id","back_icon",1,"menu-icon","arrow_icon",3,"options","onClick"],[1,"menu-icon","home_icon",3,"options","onClick"],[1,"widget-header-title"],["class","menu-icon widget-header-icon",3,"options",4,"ngIf"],[3,"options"],[1,"menu-icon","widget-header-icon",3,"options"],[1,"common-quick-menu",3,"ngClass"],["class","material-icons show-more-less-icon expanded home-quick-links-expanded",3,"options","click",4,"ngIf"],["class","home-quick-links",4,"ngIf"],["class","material-icons show-more-less-icon collapsed home-quick-links-collapsed",3,"options","click",4,"ngIf"],[1,"material-icons","show-more-less-icon","expanded","home-quick-links-expanded",3,"options","click"],[1,"home-quick-links"],[1,"material-icons","show-more-less-icon","collapsed","home-quick-links-collapsed",3,"options","click"]],template:function(e,t){1&e&&(c.oc(b),c.Xb(0,"ps-template-base"),c.Vb(1,0),c.Xb(2,"div",1),c.Pc(3,m,3,2,"div",2),c.Pc(4,f,3,2,"div",3),c.nc(5),c.Wb(),c.nc(6,1),c.Ub(),c.Xb(7,"ps-container-form"),c.nc(8,2),c.Wb(),c.nc(9,3,["psFooter",""]),c.Pc(10,O,4,6,"div",4),c.Wb()),2&e&&(c.Fb(2),c.pc("ngClass",c.sc(4,R,!t.iconShouldBePresent)),c.Fb(1),c.pc("ngIf",t.iconShouldBeChecked&&!t.ifHomePage||t.iconShouldBePresent),c.Fb(1),c.pc("ngIf",t.optionsHeader.labelKey),c.Fb(6),c.pc("ngIf",t.navService.isUserLoggedIn&&t.showQuickMenu))},directives:[r.a,p.m,p.o,l.a,u.a,d.a,h.a],styles:[""]}),e})()},RkAu:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("r40+"),s=n("qEF5"),o=n("uqA0"),a=n("fXoL"),r=n("HAMJ"),c=n("ofXK"),p=n("TsIt"),l=n("5YYs");function u(e,t){if(1&e&&a.Sb(0,"ps-action-image",3),2&e){const e=a.ic();a.pc("options",e.actionImageOptions)}}const d=["*",[["","footer",""]]],h=["*","[footer]"];let m=(()=>{class e extends o.a{constructor(e){super(),this.events=e,this.cancelOptions={labelKey:"cancel_key",group:this.options.group},this.spinner=!1,this.actionImageOptions={imageName:s.a.getCssVariableValue("--ps-loader-image-name")},this.reqStartEvent=e.subscribe("network:request:started",e=>{this.spinner=!0}),this.reqCompletEvent=e.subscribe("network:request:completed",e=>{this.spinner=!1})}ngOnInit(){this.options.requestObject=this.options.requestObject?this.options.requestObject:{},this.options.group&&this.commonProv.setFormData(this.options.group,this.options.requestObject)}onFooterClick(){void 0!==document.getElementsByTagName("ion-modal")[0]&&document.getElementsByTagName("ion-modal")[0].dismiss()}ngOnDestroy(){super.ngOnDestroy(),this.reqStartEvent&&this.reqStartEvent.unsubscribe(),this.reqCompletEvent&&this.reqCompletEvent.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(i.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["ps-template-view"]],inputs:{options:"options"},features:[a.Cb],ngContentSelectors:h,decls:6,vars:3,consts:[["class","inline-loading-image",3,"options",4,"ngIf"],["psFooter",""],[3,"id","options","click"],[1,"inline-loading-image",3,"options"]],template:function(e,t){1&e&&(a.oc(d),a.Xb(0,"ps-template-screen"),a.Pc(1,u,1,1,"ps-action-image",0),a.nc(2),a.Vb(3,1),a.nc(4,1),a.Xb(5,"ps-button-cancel",2),a.fc("click",function(){return t.onFooterClick()}),a.Wb(),a.Ub(),a.Wb()),2&e&&(a.Fb(1),a.pc("ngIf",!t.options.disableLoading&&t.spinner),a.Fb(4),a.pc("id",t.id+"temp_btn_cancel")("options",t.cancelOptions))},directives:[r.a,c.o,p.a,l.a],styles:[""]}),e})()},gKqT:function(e,t,n){"use strict";n.r(t),n.d(t,"OmniBasePage",function(){return u});var i=n("oS+F"),s=n("zngb"),o=n("QZhd"),a=n("woXy"),r=n("qEF5"),c=n("Q0Ba"),p=n("lE2x"),l=n("fXoL");let u=(()=>{class e{constructor(){this.isPageDisabled=!1,this.commonProv=r.a.injectionHandler(c.a),this.navigationServices=r.a.injectionHandler(a.a)}init(){this.currentOperID=o.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();const e=this.navigationServices.getAllParams(),t={};e&&!0===e.readOnlypage?(t.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(s.a.FORM_READONLY,t)):this.customizationMap&&(t.IS_READONLY=0,this.customizationMap.set(s.a.FORM_READONLY,t)),this.screenTranslationOperIds=p.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?p.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}ngOnInit(){this.init()}ionViewDidEnter(){this.viewDidEnter()}ionViewWillLeave(){this.viewWillLeave()}ionViewWillEnter(){this.viewWillEnter()}viewWillEnter(){}disableForm(e){if(void 0!==e&&this.customizationMap){const t=this.customizationMap.get(s.a.FORM_READONLY);t&&1===t.IS_READONLY&&"DISABLED"!=e.status&&(e.disable(),Object.keys(e.controls).forEach(e=>{this.commonProv.applyDynScreenDisplay(s.a.ACTION_TYPE_READONLY,[e],1)}))}}viewDidEnter(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:o.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:o.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),i.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}viewWillLeave(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:o.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:o.a.oper_ID,{value:!0,page:this,willLeave:!0})}ngAfterViewChecked(){this.isPageDisabled||setTimeout(()=>{this.disableForm(this.baseFormGroup),this.isPageDisabled=!0},300)}getScreenTranslations(e){const t=e||2222,n=o.a.activeLanguge?o.a.activeLanguge:"EN";t&&n&&this.commonProv.language.getOperTranslation(n,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Lb({type:e,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Hb(t.psClass)},decls:0,vars:0,template:function(e,t){},styles:[""]}),e})()},kFG2:function(e,t,n){"use strict";n.r(t),n.d(t,"ScheduledTransfersListPage",function(){return y});var i=n("mrSG"),s=n("3Pt+"),o=n("4lGw"),a=n("V0Fi"),r=n("ZyuK"),c=n("nipE"),p=n("DFXC"),l=n("QZhd"),u=n("gKqT"),d=n("fXoL"),h=n("RkAu"),m=n("ofXK"),_=n("zngb"),f=n("EZLY"),I=n("fOh1"),E=n("BygU");function A(e,t){if(1&e&&(d.Xb(0,"div"),d.Sb(1,"ps-container-lookup-option",2),d.Wb()),2&e){const e=t.$implicit,n=d.ic(2);d.Fb(1),d.pc("options",n.prepareLookUp(e))("itemCard",e)}}function N(e,t){if(1&e&&(d.Xb(0,"div"),d.Pc(1,A,2,2,"div",1),d.Wb()),2&e){const e=d.ic();d.Fb(1),d.pc("ngForOf",e.options.itemList)}}let O=(()=>{class e extends f.a{constructor(e){super(),this.omniPull=e,this.bRefresh=!1,this.lookUpOptions=[],this.labelValuesMap=new Map,this.headerMap=new Map,this.allowEdit=!1,this.allowDelete=!1,this.showDetails=!1,this.reloadFct=new d.o,this.populateHeaderValueMap()}ngOnInit(){super.init(),this.options&&this.options.listOfOptions&&(this.options.listOfOptions.map((e,t)=>e.rowIndex=t),this.options.itemList=this.options.listOfOptions),this.allowEdit=this.allowDelete=l.a.oper_ID===a.a.SCHEDULED_TRANSFERS_OPER_ID||l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID,this.showDetails=l.a.oper_ID===a.a.SCHEDULED_TRANSFERS_OPER_ID}prepareLookUp(e){const t={};return t.labelsValueMap=this.labelValuesMap,t.headerMap=this.headerMap,t.formGroup=this.options.group,t.isEditable=this.options.isEditable,t.itemList=this.options.itemList,t.showInitialCardValues=5,l.a.oper_ID==a.a.PENDING_TRANSFERS_OPER_ID||(t.statementOptions={buttonIcon:"list-box",redirectUrl:"scheduled-transfer-statement-report"}),t.actionDetailsOptions=[this.allowEdit?{id:"edit",label:"edit_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"edit1",labelOptions:{labelKey:"edit_key"}},route:"payment",pageOptions:{operId:e.transferTypeOperId,iconName:"edit1",title:e.operName||"pending_transfers_key"},preCallFunction:{func(){return new Promise((e,n)=>{e(this.executionClass.prepareTransaction(t.actionDetailsOptions[0].actionHyperlink))})},executionClass:this,params:[]},navigationOptions:{queryParams:{transferScheduledList:!0}},psClass:"pending-transfer-actions edit-pending"}}:{},this.showDetails?{id:"details",label:"details_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"document",labelOptions:{labelKey:"details_key"}},route:"payment",pageOptions:{operId:e.transferTypeOperId,iconName:"document",title:"pending_transfers_key"},navigationOptions:{queryParams:{transferScheduledList:!0,readOnlypage:!0}},preCallFunction:{func(){return new Promise((e,n)=>{e(this.executionClass.prepareTransaction(t.actionDetailsOptions[1].actionHyperlink))})},executionClass:this,params:[]},psClass:"pending-transfer-actions details-pending"}}:{},"A"===e.transactionStatus&&this.allowDelete?{id:"delete",labelOptions:{labelKey:"delete_key"},buttonIcon:"delete",actionUrl:l.a.serviceUrl.commonSubmitAction,cssClass:"pending-transfer-actions delete-pending fab-edit-button",label:"delete_key",iconName:"trash",actionType:"delete",operId:l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?a.a.DELETE_IMMEDIATE_TRANSFER:a.a.DELETE_STANDING_ORDER,postCallFunction:{func(){return new Promise((e,t)=>{e(this.executionClass.reloadList())})},executionClass:this,params:[]},detailServiceUrl:"rest/omniCorePull/returnTransactionDetails",detailServiceCallOnAction:!!I.a.isCorporate}:{},this.allowStop(e.transactionStatus)?{id:"stop",labelOptions:{labelKey:"stop_key"},buttonIcon:"delete",actionUrl:l.a.serviceUrl.commonSubmitAction,cssClass:"pending-transfer-actions details-pending fab-edit-button",label:"stop_key",iconName:"square-outline",actionType:"Submit",operId:l.a.oper_ID===a.a.CASH_TRANSFER_REP_OPER_ID?a.a.STOP_CASH_TRANSFER_OPER_ID:a.a.STOP_STANDING_ORDER,filterParamValues:["transactionNumber"],alertLabel:"are_you_sure_you_want_to_stop_key",alertType:"prompt",postCallFunction:{func(){return new Promise((e,t)=>{e(this.executionClass.reloadList())})},executionClass:this,params:[]}}:{}],l.a.oper_ID==a.a.PENDING_TRANSFERS_OPER_ID||l.a.oper_ID==a.a.CASH_TRANSFER_REP_OPER_ID||(t.pageData={operID:_.a.VIEW_SCHEDULED_TRANSFERS_STATEMENT,title:"scheduled_transfers_report_key"}),t.reloadFunction={func(){return new Promise((e,t)=>{e(this.executionClass.reloadList())})},executionClass:this,params:[]},t}reloadList(){this.reloadFct.emit()}populateHeaderValueMap(){let e={},t={},n={},i={},s={},o={},r={},c={},p={},u={},d={},h={},m={},_={};h={key:"transactionDate",value:"--- --- --- ---",isEdit:!1},d={key:"bankCifShortNameEng",value:"--- --- --- ---",isEdit:!1,showMappingOnNoValue:!0},u={key:"transactionNumber",value:"--- --- --- ---",isEdit:!1},e={key:"transferType",value:"--- --- --- ---",isEdit:!1},o={key:"reference",value:"--- --- --- ---",isEdit:!1},t={key:"formattedFromAccount",value:"--- --- --- ---",isEdit:!1},n={key:"formattedToAccount",value:"--- --- --- ---",isEdit:!1,showMappingOnNoValue:!0},r={key:"statusDescription",value:"--- --- --- ---",isEdit:!1},i={key:"transactionAmountNCurrency",value:"--- --- --- ---",isEdit:!1},s={key:"date",value:"--- --- --- ---",isEdit:!1},m={key:"idTypeNumber",value:"---/---",isEdit:!1},_={key:"purpose",value:"------",isEdit:!1},c={key:"title",value:"title",isEdit:!1,formGroupMap:{placeHolder:"enter_transfer_type",fcName:"transferTypeTitle"}},p={key:"subTitle",value:"subTitle",isEdit:!1,formGroupMap:{placeHolder:"transfer_type",fcName:"transferTypeSubtTitle"}},this.labelValuesMap.set("transaction_number_key",u),this.labelValuesMap.set("from_account_key",t),this.labelValuesMap.set("amount_key",i),this.labelValuesMap.set("trade_date_key",h),this.labelValuesMap.set("value_date_key",s),l.a.oper_ID!==a.a.CASH_TRANSFER_REP_OPER_ID?(this.labelValuesMap.set("to_account_key",n),this.labelValuesMap.set("type_key",e),this.labelValuesMap.set("reference_key",o),this.labelValuesMap.set("bank_key",d)):(this.labelValuesMap.set("id_type_number_key",m),this.labelValuesMap.set("purpose_key",_)),this.labelValuesMap.set("status_key",r),this.headerMap.set("title",c),this.headerMap.set("subTitle",p)}prepareTransaction(e){return new Promise((t,n)=>{this.omniPull.returnTransactionDetails({commonParametersList:{transactionNumber:e.navigationOptions.queryParams.transactionNumber,transferTypeOperId:e.navigationOptions.queryParams.transferTypeOperId,transactionBranch:e.navigationOptions.queryParams.transactionBranch||null}}).then(n=>{n.data.operId=e.navigationOptions.queryParams.transferTypeOperId;const i=this.commonProv.prepareResult(n.data);i.toBeneficiary&&!i.toBeneficiary_lookupKey&&(i.toBeneficiary_lookupKey=i.toBeneficiary),i.toAccount&&!i.toAccount_lookupKey&&(i.toAccount_lookupKey=i.toAccount),this.commonProv.copyObject(e.navigationOptions.queryParams,i,!1),this.commonProv.copyObject(e.navigationOptions.queryParams.ScreenVO,i,!1),void 0!==i.commonResponseList&&(this.commonProv.copyObject(e.navigationOptions.queryParams,i.commonResponseList,!1),this.commonProv.copyObject(e.navigationOptions.queryParams.ScreenVO,i.commonResponseList,!1)),e.navigationOptions.queryParams=Object.assign({ScreenVO:Object.assign({},e.navigationOptions.queryParams)},e.navigationOptions.queryParams),t(null)})})}allowStop(e){return e===a.a.TRANSFER_STATUS_CREATED&&l.a.oper_ID===a.a.SCHEDULED_TRANSFERS_OPER_ID||e===a.a.TRANSFER_STATUS_APPROVED&&l.a.oper_ID===a.a.CASH_TRANSFER_REP_OPER_ID}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(r.a))},e.\u0275cmp=d.Lb({type:e,selectors:[["ps-scheduled-transfers-list"]],inputs:{options:"options"},outputs:{reloadFct:"reloadFct"},features:[d.Cb],decls:2,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"options","itemCard"]],template:function(e,t){1&e&&(d.Xb(0,"ps-template-list"),d.Pc(1,N,2,1,"div",0),d.Wb()),2&e&&(d.Fb(1),d.pc("ngIf",(null==t.options||null==t.options.itemList?null:t.options.itemList.length)>0))},directives:[f.a,m.o,m.n,E.a],styles:[""]}),e})();var b=n("KVmc");function R(e,t){if(1&e&&(d.Xb(0,"div",4),d.Sb(1,"ps-label",0),d.Wb()),2&e){const e=d.ic(2);d.Fb(1),d.pc("options",e.noTransfersOptions)}}function T(e,t){if(1&e){const e=d.Yb();d.Vb(0),d.Xb(1,"ps-scheduled-transfers-list",2),d.fc("reloadFct",function(){return d.Fc(e),d.ic().loadScheduledTransfers()}),d.Wb(),d.Pc(2,R,2,1,"div",3),d.Ub()}if(2&e){const e=d.ic();d.Fb(1),d.pc("options",e.sheduledTransferListOptions),d.Fb(1),d.pc("ngIf",e.noTransfersFound)}}let y=(()=>{class e extends u.OmniBasePage{constructor(e,t,n){super(),this.logger=e,this.omniPull=t,this.accountsService=n,this.requestWasSent=!0,this.showTransaction=!0,this.psDatePipe=new c.a,this.noTransfersFound=!1,this.formGroup=new s.f({}),this.templateViewOptions={group:this.formGroup},this.noTransfersOptions={labelKey:"no_transfers_available_key"}}ngOnInit(){super.init()}ionViewWillEnter(){super.viewWillEnter(),this.sheduledTransferListOptions={isEditable:!0,group:this.formGroup},this.loadScheduledTransfers()}loadScheduledTransfers(){let e="";switch(l.a.oper_ID){case a.a.CASH_TRANSFER_REP_OPER_ID:e="P,R,F";break;case a.a.PENDING_TRANSFERS_OPER_ID:e="A";break;case a.a.SCHEDULED_TRANSFERS_OPER_ID:e="P,T,A"}this.returnScheduledTransfers({commonParametersList:{status:e}})}returnScheduledTransfers(e){return Object(i.b)(this,void 0,void 0,function*(){this.requestWasSent=!0;const t=yield this.omniPull.returnTransactionsList(e).catch(e=>{this.logger.error("Error: While fetching scheduled transfers  :",e)});t&&t.gridModel.length>0?this.sheduledTransferListOptions.listOfOptions=this.populateScheduledTransfers(t.gridModel):(this.noTransfersFound=!0,this.sheduledTransferListOptions.listOfOptions=[]),this.requestWasSent=!1})}populateScheduledTransfers(e){var t,n,i,s;const o=[];new c.a;for(const r of e){const e={transferType:r.transferTypeOperId?(null===(t=this.commonProv.getPageByOperId(r.transferTypeOperId))||void 0===t?void 0:t.OPER_NAME)?this.commonProv.translate(null===(n=this.commonProv.getPageByOperId(r.transferTypeOperId))||void 0===n?void 0:n.OPER_NAME):r.transferType?this.getTransferTypeInfo(r.transferType,2):"-----":"---",transactionAmount:r.amount,transactionAmountNCurrency:this.commonProv.amountFormat(r.amount,r.currencyDecimalPoints||a.a.DEFAULT_DECIMAL_POINTS)+" ("+r.currencyBriefNameEnglish+")",transactionStatus:r.status,statusCode:r.status,status:r.statusDescription,statusDescription:r.statusDescription,fromCurrency:r.fromAccountCurrency,transactionNumber:r.transactionNo,fromAccount:r.fromAccountAdditionalRef,fromAccount_lookupKey:r.fromAccountAdditionalRef,toAccount:r.toAccountNumber?r.toAccountNumber:r.toAccountAdditionalRef?r.toAccountAdditionalRef:r.toAccountAccGl,toAccount_lookupKey:r.toAccountNumber?r.toAccountNumber:r.toAccountAdditionalRef?r.toAccountAdditionalRef:r.toAccountAccGl,reference:r.soReference||"-----",title:l.a.oper_ID===a.a.CASH_TRANSFER_REP_OPER_ID?r.benefName:r.fromAccountAdditionalRef,subTtile:r.amount,accGl:r.fromAccountAccGl,currency:r.fromAccountCurrency,workingCif:r.fromAccountCif,serialNo:r.fromAccountSerialNo,formattedToAccount:this.accountsService.returnFormattedAccount({additionalRef:r.toAccountAdditionalRef||r.toAccountNumber,ibanAccNo:r.toAccountIbanAccNo}).formattedAccount,formattedFromAccount:this.accountsService.returnFormattedAccount({additionalRef:r.fromAccountAdditionalRef,ibanAccNo:r.fromAccountIbanAccNo,currency:r.fromAccountCurrency}).formattedAccount,toBeneficiary:r.toAccountAdditionalRef,toBeneficiary_lookupKey:r.toAccountAdditionalRef,toAccountType:this.getTransferAccountType(r),scheduler:l.a.oper_ID!==a.a.PENDING_TRANSFERS_OPER_ID&&l.a.oper_ID!==a.a.CASH_TRANSFER_REP_OPER_ID,operName:r.transferTypeOperId&&(null===(i=this.commonProv.getPageByOperId(r.transferTypeOperId))||void 0===i?void 0:i.OPER_NAME)?null===(s=this.commonProv.getPageByOperId(r.transferTypeOperId))||void 0===s?void 0:s.OPER_NAME:"",transferTypeOperId:r.transferTypeOperId?parseInt(r.transferTypeOperId):r.transferType?this.getTransferTypeInfo(r.transferType,1):"",date:r.valueDateStr,bankCifShortNameEng:r.bankCifShortNameEng||"--------",transactionDate:r.transactionDateStr,branch:r.fromAccountBranch,benefName:r.benefName,idTypeNumber:r.idTypeNumber,purpose:r.purpose,idNumber:r.idNumber,idType:r.idType,idExpiryDate:r.idExpiryDate,idIssueDate:r.idIssueDate,idCountry:r.idCountry,benefPhone:r.benefPhone,purposeTxtDesc:r.purpose,toBranch:r.toAccountBranch,transactionBranch:r.transactionBranch};r.transferType!=a.a.OWN_ACCOUNT_TRANSFER_TYPE&&r.transferType!=a.a.INTERNAL_TRANSFER_TYPE||delete e.bankCifShortNameEng,o.push(e)}if(l.a.custMode){const e=o.filter(e=>e.transferTypeOperId==a.a.OWN_ACCOUNT_STANDING_ORDER_OPER_ID||e.transferTypeOperId==a.a.INTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID||e.transferTypeOperId==a.a.LOCAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID||e.transferTypeOperId==a.a.EXTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID),t=o.filter(e=>e.transferTypeOperId==a.a.OWN_ACCOUNT_TRANSFER||e.transferTypeOperId==a.a.INTERNAL_BENEFICIARY_TRANSFER||e.transferTypeOperId==a.a.LOCAL_BENEFICIARY_TRANSFER||e.transferTypeOperId==a.a.INTERNATIONAL_BENEFICIARY_TRANSFER);return l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?t:e}return o}getTransferTypeInfo(e,t){var n,i;let s;return e===a.a.LOCAL_TRANSFER_TYPE?s=l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?a.a.LOCAL_BENEFICIARY_TRANSFER:a.a.LOCAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID:e===a.a.INTERNATIONAL_TRANSFER_TYPE?s=l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?a.a.INTERNATIONAL_BENEFICIARY_TRANSFER:a.a.EXTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID:e===a.a.OWN_ACCOUNT_TRANSFER_TYPE?s=l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?a.a.OWN_ACCOUNT_TRANSFER:a.a.OWN_ACCOUNT_STANDING_ORDER_OPER_ID:e===a.a.INTERNAL_TRANSFER_TYPE&&(s=l.a.oper_ID===a.a.PENDING_TRANSFERS_OPER_ID?a.a.INTERNAL_BENEFICIARY_TRANSFER:a.a.INTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID),1===t?s:(null===(n=this.commonProv.getPageByOperId(s))||void 0===n?void 0:n.OPER_NAME)?this.commonProv.translate(null===(i=this.commonProv.getPageByOperId(s))||void 0===i?void 0:i.OPER_NAME):""}getTransferAccountType(e){let t="";return e.transferTypeOperId&&(t=e.transferTypeOperId!=a.a.OWN_ACCOUNT_TRANSFER&&e.transferTypeOperId!=a.a.OWN_ACCOUNT_STANDING_ORDER_OPER_ID||e.toAccountCif!=e.fromAccountCif?e.transferTypeOperId==a.a.INTERNAL_BENEFICIARY_TRANSFER||e.transferTypeOperId==a.a.INTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID?e.transferTypeOperId==a.a.INTERNAL_BENEFICIARY_TRANSFER?"companyAccountTransfer":"companyAccountStandingOrder":e.transferTypeOperId==a.a.LOCAL_BENEFICIARY_TRANSFER||e.transferTypeOperId==a.a.LOCAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID?e.transferTypeOperId==a.a.LOCAL_BENEFICIARY_TRANSFER?"bankLocalTransfer":"bankLocalStandingOrder":e.transferTypeOperId==a.a.INTERNATIONAL_BENEFICIARY_TRANSFER||e.transferTypeOperId==a.a.EXTERNAL_BENEFICIARY_TRANSFER_STANDING_ORDER_OPER_ID?e.transferTypeOperId==a.a.INTERNATIONAL_BENEFICIARY_TRANSFER?"internationalAccountTransfer":"internationalAccountStandingOrder":e.transferTypeOperId==a.a.CASH_BENEFICIARY_OPER_ID?"cashTransfer":"":e.transferTypeOperId==a.a.OWN_ACCOUNT_TRANSFER?"ownAccountTransfer":"ownAccountStandingOrder"),t}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(p.a),d.Rb(r.a),d.Rb(o.a))},e.\u0275cmp=d.Lb({type:e,selectors:[["app-scheduled-transfers-list"]],features:[d.Cb],decls:2,vars:2,consts:[[3,"options"],[4,"ngIf"],[3,"options","reloadFct"],["class","no-transfers-text",4,"ngIf"],[1,"no-transfers-text"]],template:function(e,t){1&e&&(d.Xb(0,"ps-template-view",0),d.Pc(1,T,3,2,"ng-container",1),d.Wb()),2&e&&(d.pc("options",t.templateViewOptions),d.Fb(1),d.pc("ngIf",!t.requestWasSent))},directives:[h.a,m.o,O,b.a],styles:[""]}),e})()}}]);