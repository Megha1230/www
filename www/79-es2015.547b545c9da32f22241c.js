(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{BcCD:function(t,e,o){"use strict";o.d(e,"a",function(){return l});var n=o("zngb"),i=o("JpVU"),s=o("DFXC"),c=o("qEF5"),r=o("Q0Ba"),p=o("ZyuK"),a=o("r40+"),u=o("fXoL");let l=(()=>{class t extends i.a{constructor(t,e,o){super(t,e,o),this.commonProv=t,this.dateOptions={},this.omniPull=c.a.injectionHandler(p.a)}ngOnInit(){this.commonProv.copyObject(this.dateOptions,this.options,!1);const t=this.omniPull.omniCommon.session.getValueOf(n.a.preLoginResponse).parameters;this.dateOptions.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat.parameterVal:"DD/MM/YYYY",this.dateOptions.pickerFormat=this.dateOptions.displayFormat}ngOnChanges(){this.options&&this.options.min&&(this.dateOptions.min=this.options.min),this.options&&this.options.max&&(this.dateOptions.max=this.options.max)}dateChanged(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(r.a),u.Rb(s.a),u.Rb(a.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["ps-date-day-month-year"]],inputs:{options:"options"},features:[u.Cb,u.Db],decls:1,vars:2,consts:[[1,"ps-day-month-year",3,"options","id","onPsChange","onPsInit"]],template:function(t,e){1&t&&(u.Xb(0,"ps-keyin-date",0),u.fc("onPsChange",function(t){return e.dateChanged(t)})("onPsInit",function(t){return e.onInit(t)}),u.Wb()),2&t&&u.pc("options",e.dateOptions)("id",e.id)},directives:[i.a],styles:[""]}),t})()},Kk3n:function(t,e,o){"use strict";o.d(e,"a",function(){return h});var n=o("mrSG"),i=o("ZyuK"),s=o("JpVU"),c=o("DFXC"),r=o("zngb"),p=o("Q0Ba"),a=o("r40+"),u=o("fXoL"),l=o("BcCD");let h=(()=>{class t extends s.a{constructor(t,e,o,n){super(t,e,n),this.commonC=t,this.loggerC=e,this.omniPull=o,this.filterFromDate={},this.filterToDate={}}ngOnInit(){return Object(n.b)(this,void 0,void 0,function*(){this.filterFromDate={labelKey:"from_date_key",fcName:this.options.fromDate.fcName,group:this.options.fromDate.group,placeHolder:this.options.fromDate.placeHolder,overrideDefaultCust:this.options.fromDate.overrideDefaultCust},this.filterToDate={labelKey:"to_date_key",fcName:this.options.toDate.fcName,group:this.options.toDate.group,placeHolder:this.options.toDate.placeHolder,overrideDefaultCust:this.options.toDate.overrideDefaultCust};const t=yield this.omniPull.getParamValOf("DefaultDateFormat").catch(t=>this.logger.log(t));t&&(this.filterFromDate.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat:r.a.PREV_DATE_FORMAT,this.filterToDate.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat:r.a.PREV_DATE_FORMAT)})}fromDateChange(t){this.filterToDate.min=t.newValue,this.filterToDate=Object.assign({},this.filterToDate)}toDateChange(t){this.filterFromDate.max=t.newValue,this.filterFromDate=Object.assign({},this.filterFromDate)}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(p.a),u.Rb(c.a),u.Rb(i.a),u.Rb(a.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["ps-complex-date-filter"]],inputs:{options:"options"},features:[u.Cb],decls:2,vars:4,consts:[[3,"options","id","onPsChange"]],template:function(t,e){1&t&&(u.Xb(0,"ps-date-day-month-year",0),u.fc("onPsChange",function(t){return e.fromDateChange(t)}),u.Wb(),u.Xb(1,"ps-date-day-month-year",0),u.fc("onPsChange",function(t){return e.toDateChange(t)}),u.Wb()),2&t&&(u.pc("options",e.filterFromDate)("id",e.id+"_from_date"),u.Fb(1),u.pc("options",e.filterToDate)("id",e.id+"_to_date"))},directives:[l.a],styles:[""]}),t})()},VEWP:function(t,e,o){"use strict";o.d(e,"a",function(){return O});var n=o("mrSG"),i=o("fXoL"),s=o("4lGw"),c=o("V0Fi"),r=o("ZyuK"),p=o("ZF3V"),a=o("EIUR"),u=o("DFXC"),l=o("zngb"),h=o("Q0Ba"),m=o("Isd1"),f=o("L0og");const d=["complexLookupComponentObj"];let O=(()=>{class t extends p.a{constructor(t,e,o,n){super(t,e),this.commonService=t,this.omniPull=o,this.accountsService=n,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new i.o,this.onAccountDeleted=new i.o,this.labelValuesMap=new Map,this.psCurrency=new a.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(t){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(t){return Object(n.b)(this,void 0,void 0,function*(){if(null!=t&&(this.options=t),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const e=this.commonService.session.getValueOf(l.a.USERINFO),o=this.prepareRequestData(e);this.returnAccountList(o)})}returnAccountList(t){return Object(n.b)(this,void 0,void 0,function*(){const e=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const o=yield this.omniPull.returnAccounts(t).catch(t=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});if(o&&o.gridModel.length>0){if(this.allType){t.accountType="F",t.permittedGls="F";const e=yield this.omniPull.returnAccounts(t).catch(t=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});e&&e.gridModel.length>0&&(o.gridModel=[...o.gridModel,...e.gridModel])}if(this.options.listOfAccounts=o.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(t=>t.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(t=>t.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((t,e)=>t.rowIndex=e),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let t="QR"===this.options.purpose?null==e?void 0:e.defaultQrPaymentAccKey:null==e?void 0:e.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(e=>{e.personalizeKey&&e.personalizeKey===t&&(this.common.setValInsideNestedObj(this.options.fcName,e.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",e.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(t){const e=[];for(const o of t){const t={briefNameEnglish:o.briefNameEnglish,cifShortNameEnglish:o.cifShortNameEnglish,accountNumber:o.accountNumber,balance:this.psCurrency.transform(null==o.balance?"0.0":o.balance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==o.availableBalance?"0.0":o.availableBalance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),currencyBriefName:o.currencyBriefName||o.currencyBriefNameEnglish,currencyBriefNameEnglish:o.currencyBriefNameEnglish,currency:o.currency,accountTypeDesc:o.accountTypeDesc,additionalRef:o.additionalRef,ibanAccNo:o.ibanAccNo,accGl:o.accGl,serialNo:o.serialNo,branch:o.branch,cif:o.cif,formattedAccount:this.accountsService.returnFormattedAccount(o).formattedAccount,personalizeKey:o.personalizeKey,nickName:o.nickName,briefName:o.briefName,lookupKey:o.additionalRef,branchDescription:o.branchDescription?o.branchDescription:"",generalLedgerBriefNameEng:o.generalLedgerBriefNameEng?o.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:o.statusDescription,statusCode:o.status,accountFormat:this.accountsService.returnFormattedAccount(o).accountFormat};this.options.multiple&&(t.excludeType=o.excludeType),e.push(t)}return e}prepareRequestData(t){let e={};if(t&&t.omniUserVO&&(e={userCifNo:t.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(e={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(e.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(e.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(e.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(e.endUserId=this.options.endUserId),null!=this.options.fromCurrency?e.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(e.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)e.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let t="";for(const e in this.options.accountAllowedCurrencies)t+=this.options.accountAllowedCurrencies[e]+",";t=t.slice(0,t.lastIndexOf(",")),e.accountAllowedCurrencies=t}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)e.accountAllowedTypes=this.options.accountAllowedTypes;else{let t="";for(const e in this.options.accountAllowedTypes)t+=this.options.accountAllowedTypes[e]+",";t=t.slice(0,t.lastIndexOf(",")),e.accountAllowedTypes=t}return e}fetchAccountBasedOnCurrency(t){return this.options.listOfAccounts}onChange(t){this.logger.log(t)}populateOwnAccountMap(){let t={},e={},o={};t={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},e={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",t),this.labelValuesMap.set("balance_key",e),this.labelValuesMap.set("available_balance_key",o)}onChangeItem(t){this.onAccountChange.emit(t)}onDeleteItem(t){t&&this.onAccountDeleted.emit(t)}handleMultipleSelection(){const t=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(t=>this.options.requestObject[this.options.fcName].some(e=>e.accountNumber==t.accountNumber)):[];this.complexLookupOptions.selectedItems=t.filter(t=>this.options.setAllAccountsAsSelecetd&&(!t.excludeType||!(t.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||t.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(t=>Object.assign(Object.assign({item:t[t.previewProperty]},t),{itemLookup:t.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(t){t&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(e=>t.accountNumber!=e.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(t){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(h.a),i.Rb(u.a),i.Rb(r.a),i.Rb(s.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(t,e){if(1&t&&i.Wc(d,1),2&t){let t;i.Bc(t=i.gc())&&(e.complexLookupComponentObj=t.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[i.Cb,i.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(t,e){1&t&&(i.Xb(0,"ps-container-complex",0),i.Xb(1,"ps-complex-lookup",1,2),i.fc("changeItem",function(t){return e.onChangeItem(t)})("onDeleteItem",function(t){return e.onDeleteItem(t)}),i.Wb(),i.Wb()),2&t&&(i.Fb(1),i.pc("id",e.id)("options",e.complexLookupOptions))},directives:[m.a,f.a],styles:[""]}),t})()},vWqj:function(t,e,o){"use strict";o.r(e),o.d(e,"SweepingAndPoolingPage",function(){return F});var n=o("3Pt+"),i=o("OVQh"),s=o("/M2N"),c=o("V0Fi"),r=o("fOh1"),p=o("ZyuK"),a=o("DFXC"),u=o("zngb"),l=o("woXy"),h=o("Q0Ba"),m=o("gKqT"),f=o("fXoL"),d=o("kRg/"),O=o("uKCV"),g=o("sAFK"),A=o("+f2X"),y=o("41l2");let b=(()=>{class t extends y.a{constructor(t,e){super(t,e),this.defaultSelectOptions={lovTypeId:c.a.INSUTRUCTION_METHOD_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("instruction_method_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate("select_instruction_method_key")}onChangeLov(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(f.Rb(h.a),f.Rb(a.a))},t.\u0275cmp=f.Lb({type:t,selectors:[["ps-lov-instruction-method"]],inputs:{options:"options"},features:[f.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(f.Xb(0,"ps-dropdown-lov",0),f.fc("onPsChange",function(t){return e.onChangeLov(t)}),f.Wb()),2&t&&f.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[y.a],styles:[""]}),t})(),N=(()=>{class t extends y.a{constructor(t,e){super(t,e),this.defaultSelectOptions={lovTypeId:c.a.INSUTRUCTION_TYPE_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("instruction_type_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate("select_instruction_type_key")}onChangeLov(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(f.Rb(h.a),f.Rb(a.a))},t.\u0275cmp=f.Lb({type:t,selectors:[["ps-lov-instruction-type"]],inputs:{options:"options"},features:[f.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(f.Xb(0,"ps-dropdown-lov",0),f.fc("onPsChange",function(t){return e.onChangeLov(t)}),f.Wb()),2&t&&f.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[y.a],styles:[""]}),t})();var v=o("ofXK"),C=o("VEWP"),P=o("Kk3n"),T=o("GLCq");const D=["toAccountRef"],_=["fromAccountRef"],w=["targetAccountRef"],L=["exchangeRateRef"];function I(t,e){if(1&t){const t=f.Yb();f.Vb(0),f.Xb(1,"ps-lookup-own-accounts",9,10),f.fc("onAccountChange",function(e){return f.Fc(t),f.ic(2).onFromAccountChange(e)}),f.Wb(),f.Xb(3,"ps-lookup-own-accounts",11,12),f.fc("onAccountChange",function(e){return f.Fc(t),f.ic(2).onToAccountChange(e)}),f.Wb(),f.Ub()}if(2&t){const t=f.ic(2);f.Fb(1),f.pc("options",t.targetAccountListOptions),f.Fb(2),f.pc("options",t.coveringAccountListOptions)}}function x(t,e){if(1&t){const t=f.Yb();f.Vb(0),f.Xb(1,"ps-lookup-own-accounts",9,10),f.fc("onAccountChange",function(e){return f.Fc(t),f.ic(2).onFromAccountChange(e)}),f.Wb(),f.Xb(3,"ps-lookup-own-accounts",11,13),f.fc("onAccountChange",function(e){return f.Fc(t),f.ic(2).onToAccountChange(e)}),f.Wb(),f.Ub()}if(2&t){const t=f.ic(2);f.Fb(1),f.pc("options",t.targetAccountListOptions),f.Fb(2),f.pc("options",t.receivingAccountListOptions)}}function R(t,e){if(1&t&&f.Sb(0,"ps-complex-exchange",14,15),2&t){const t=f.ic(2);f.pc("options",t.complexExchangeOptions)}}function k(t,e){if(1&t&&f.Sb(0,"ps-complex-date-filter",16),2&t){const t=f.ic(2);f.pc("options",t.filterDate)}}function V(t,e){if(1&t){const t=f.Yb();f.Xb(0,"ps-form-step",3),f.Xb(1,"ps-container-panel",4),f.Xb(2,"ps-lov-instruction-method",5),f.fc("onPsChange",function(e){return f.Fc(t),f.ic().onInstructionMethodChange(e)}),f.Wb(),f.Xb(3,"ps-lov-instruction-type",5),f.fc("onPsChange",function(e){return f.Fc(t),f.ic().onInstructionChange(e)}),f.Wb(),f.Pc(4,I,5,2,"ng-container",6),f.Pc(5,x,5,2,"ng-container",6),f.Pc(6,R,2,1,"ps-complex-exchange",7),f.Pc(7,k,1,1,"ps-complex-date-filter",8),f.Wb(),f.Wb()}if(2&t){const t=f.ic();f.pc("id",t.stepperOptions.namesofSteps[0]),f.Fb(1),f.pc("options",t.panelSweepingOptions),f.Fb(1),f.pc("options",t.instructionMethodOptions),f.Fb(1),f.pc("options",t.instructionTypeOptions),f.Fb(1),f.pc("ngIf",t.showCoveringAccount),f.Fb(1),f.pc("ngIf",t.showReceivingAccount),f.Fb(1),f.pc("ngIf",t.showIsMinimumOrMax),f.Fb(1),f.pc("ngIf",t.showDate)}}function E(t,e){if(1&t){const t=f.Yb();f.Xb(0,"ps-complex-recurring-scheduler",5),f.fc("onPsChange",function(e){return f.Fc(t),f.ic(2).onChangeSchedule(e)}),f.Wb()}if(2&t){const t=f.ic(2);f.pc("options",t.schedulerOptions)}}function S(t,e){if(1&t&&(f.Xb(0,"ps-form-step",17),f.Xb(1,"ps-container-panel",18),f.Pc(2,E,1,1,"ps-complex-recurring-scheduler",19),f.Wb(),f.Wb()),2&t){const t=f.ic();f.pc("id",t.stepperOptions.namesofSteps[1]),f.Fb(1),f.pc("options",t.panelPeriodicityOptions),f.Fb(1),f.pc("ngIf",t.showsheduler)}}let F=(()=>{class t extends m.OmniBasePage{constructor(t,e,o,s){super(),this.commonService=t,this.logger=e,this.omniPull=o,this.navService=s,this.formGroup=new n.f({}),this.sweepingAndPoolingVO={},this.exchangeRate="0.00",this.amountInToAccountAmount="0.00",this.stepperOptions={stepperName:"sweeping_and_pooling_key",isHorizontalStepper:!0,numberOfSteps:2,namesofSteps:["sweeping_and_pooling_step1_key","periodicity_step2_key"],group:this.formGroup,submitOptions:{submitServiceUrl:r.a.serviceUrl.sweepingAndPoolingRequestEndPoint,group:this.formGroup},requestObject:this.sweepingAndPoolingVO},this.panelSweepingOptions={isExpandable:!0,labelKey:"sweeping_and_pooling_main_details_key",expanded:!0},this.panelPeriodicityOptions={isExpandable:!0,labelKey:"periodicity_details_key",expanded:!0},this.instructionMethodOptions={group:this.formGroup,fcName:"instructionMethod"},this.instructionTypeOptions={group:this.formGroup,fcName:"instructionType"},this.targetAccountListOptions={labelKey:"target_account_key",placeHolder:"target_account_key",component:i.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:this.sweepingAndPoolingVO},this.coveringAccountListOptions={labelKey:"covering_account_key",placeHolder:"covering_account_key",component:i.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"toAccount",accountType:"G",fromTo:"from",requestObject:this.sweepingAndPoolingVO},this.receivingAccountListOptions={labelKey:"receiving_account_key",placeHolder:"receiving_account_key",component:i.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"toAccount",accountType:"G",fromTo:"to",requestObject:this.sweepingAndPoolingVO},this.schedulerOptions={fcName:"psScheduler",group:this.formGroup,periodaicityInputCountOptions:{fcName:"noOfPayments"},requestObject:this.sweepingAndPoolingVO},this.complexExchangeOptions={editableMode:!1,showToCurrencyOptions:!0,fromAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromCurrency",group:this.formGroup},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"transactionAmount",group:this.formGroup,decimalPoints:2}},toAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"currency",group:this.formGroup},amountOptions:{labelKey:"exchange_amount_key",placeHolder:"enter_amount_key",fcName:"toAmount",group:this.formGroup,decimalPoints:2}},requestObject:this.sweepingAndPoolingVO,group:this.formGroup},this.showIsMinimumOrMax=!1,this.hideDates=!0,this.defaultFormat="MM/DD/YYYY",this.filterDate={fromDate:{group:this.formGroup,fcName:"filterFromDate",displayFormat:this.defaultFormat,placeHolder:"from_date_key"},toDate:{group:this.formGroup,fcName:"filterToDate",displayFormat:this.defaultFormat,placeHolder:"to_date_key"}},this.toAccountComponent={},this.showDate=!1,this.showMinimumtoAccount=!1,this.showReceivingAccount=!1,this.showCoveringAccount=!1,this.showsheduler=!1}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup;const t=this.navService.getAllParams();this.commonProv.copyObject(this.sweepingAndPoolingVO,(null==t?void 0:t.ScreenVO)?t.ScreenVO:t),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_VISIBLE,[this.stepperOptions.namesofSteps[1]],0,!0)}ngAfterViewInit(){var t,e,o;this.stepperOptions.requestObject&&!0===this.stepperOptions.requestObject.isEditScreen&&(this.commonProv.setValInsideNestedObj(this.instructionMethodOptions.fcName,this.sweepingAndPoolingVO.instructionMethodCode,this.stepperOptions.requestObject),this.commonProv.setValInsideNestedObj(this.instructionTypeOptions.fcName,this.sweepingAndPoolingVO.instructionTypeCode,this.stepperOptions.requestObject),this.sweepingAndPoolingVO.instructionTypeCode===c.a.INSTRUCTION_TYPE_MIN||this.sweepingAndPoolingVO.instructionTypeCode===c.a.INSTRUCTION_TYPE_AUTO?this.commonProv.setValInsideNestedObj(this.coveringAccountListOptions.fcName,null===(t=this.sweepingAndPoolingVO)||void 0===t?void 0:t.toAccount,this.stepperOptions.requestObject):this.commonProv.setValInsideNestedObj(this.receivingAccountListOptions.fcName,null===(e=this.sweepingAndPoolingVO)||void 0===e?void 0:e.toAccount,this.stepperOptions.requestObject),this.commonProv.setValInsideNestedObj("toAccount_lookupKey",this.sweepingAndPoolingVO.toAccount,this.stepperOptions.requestObject),this.commonProv.setValInsideNestedObj(this.targetAccountListOptions.fcName,null===(o=this.sweepingAndPoolingVO)||void 0===o?void 0:o.targetAccAdditonalRef,this.stepperOptions.requestObject),this.commonProv.setValInsideNestedObj("fromAccount_lookupKey",this.sweepingAndPoolingVO.targetAccAdditonalRef,this.stepperOptions.requestObject))}onFromAccountChange(t){this.complexExchangeOptions.fromAmountOptions.currencyCode=t.currency,setTimeout(()=>{this.stepperOptions.requestObject[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=t.currency},1),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName],1),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.amountOptions.fcName],1),this.showReceivingAccount?(this.receivingAccountListOptions.accountNumber=t.accountNumber,this.toAccountRef.refreshAcounts(this.receivingAccountListOptions)):this.showCoveringAccount&&(this.coveringAccountListOptions.accountNumber=t.accountNumber,this.fromAccountRef.refreshAcounts(this.coveringAccountListOptions)),this.callCurrencyCombinationValidateService(t)}onToAccountChange(t){this.complexExchangeOptions.toAmountOptions.currencyCode=t.currency,setTimeout(()=>{this.stepperOptions.requestObject[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=t.currency},1),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName],1),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.amountOptions.fcName],1),null!=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&null!=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]||(this.targetAccountListOptions.accountNumber=t.accountNumber),this.targetAccountRef.refreshAcounts(this.targetAccountListOptions),this.callCurrencyCombinationValidateService(t)}onChangeSchedule(t){let e;void 0===this.navService.getAllParams().ScreenVO&&(void 0!==t&&(t.priodicityBy!==c.a.SINGLE_FUTURE_DATE&&t.priodicityBy!==c.a.RECURRING_MONTHLY||(e=t.startDate.getDay()+1,t.priodicityBy===c.a.SINGLE_FUTURE_DATE?this.sweepingAndPoolingVO.submitType="4":(e=t.startDate.getDate(),this.sweepingAndPoolingVO.submitType="5")),t.priodicityBy===c.a.RECURRING_WEEKLY&&(e=t.startDate.getDay()+1,this.sweepingAndPoolingVO.submitType="5")),this.sweepingAndPoolingVO.day=e)}onInstructionChange(t){var e,o,n,i;null!=t&&void 0!==t&&((this.sweepingAndPoolingVO[this.coveringAccountListOptions.fcName]||this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName])&&(null===(e=this.targetAccountRef)||void 0===e||e.reset(),null===(o=this.toAccountRef)||void 0===o||o.reset(),null===(n=this.fromAccountRef)||void 0===n||n.reset(),null===(i=this.exchangeRateRef)||void 0===i||i.reset(),this.targetAccountListOptions.accountNumber=null,this.coveringAccountListOptions.accountNumber=null,this.receivingAccountListOptions.accountNumber=null),t.itemValue===c.a.INSTRUCTION_TYPE_MIN||t.itemValue===c.a.INSTRUCTION_TYPE_AUTO?(this.commonProv.copyObject(this.targetAccountListOptions,{fromTo:"to"},!1),void 0!==this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&null!=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&(this.coveringAccountListOptions.accountNumber=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName].accountNumber),this.showCoveringAccount=!0,this.showReceivingAccount=!1,this.showIsMinimumOrMax=t.itemValue===c.a.INSTRUCTION_TYPE_MIN):(this.commonProv.copyObject(this.targetAccountListOptions,{fromTo:"from"},!1),void 0!==this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&null!=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&(this.receivingAccountListOptions.accountNumber=this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName].accountNumber),this.showReceivingAccount=!0,this.showCoveringAccount=!1,this.showIsMinimumOrMax=!0))}onInstructionMethodChange(t){t.itemValue===c.a.INSTRUCTION_METHOD_OFFLINE_CODE?(this.stepperOptions.numberOfSteps=2,this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_VISIBLE,[this.stepperOptions.namesofSteps[1]],1,!0),this.showDate=!1,this.showsheduler=!0,this.schedulerOptions.requestObject=this.sweepingAndPoolingVO):(this.showDate=!0,this.stepperOptions.numberOfSteps=1,this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_VISIBLE,[this.stepperOptions.namesofSteps[1]],0,!0),this.showsheduler=!1)}callCurrencyCombinationValidateService(t){if(t[u.a.VALIDATE_COMBINATION]){if(this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName]&&(this.sweepingAndPoolingVO[this.receivingAccountListOptions.fcName]||this.sweepingAndPoolingVO[this.coveringAccountListOptions.fcName])){let t={fromCurrency:this.sweepingAndPoolingVO[this.targetAccountListOptions.fcName].currency,listOfAffectedFields:[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName],screenVO:this.sweepingAndPoolingVO,listOfAccounts:[this.targetAccountRef]};this.showReceivingAccount?(t.toCurrency=this.sweepingAndPoolingVO[this.receivingAccountListOptions.fcName].currency,t.listOfAffectedFields.push(this.receivingAccountListOptions.fcName),t.listOfAccounts.push(this.toAccountRef)):(t.toCurrency=this.sweepingAndPoolingVO[this.coveringAccountListOptions.fcName].currency,t.listOfAffectedFields.push(this.coveringAccountListOptions.fcName),t.listOfAccounts.push(this.fromAccountRef)),t.fromCurrency&&t.toCurrency&&(this.exchangeRateRef&&t.listOfAccounts.push(this.exchangeRateRef),this.omniPull.validateCurrencyCombination(t))}const t=this.commonProv.getElementValidations(this.filterDate.fromDate.fcName),e=this.commonProv.getElementValidations(this.filterDate.toDate.fcName);this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_MANDATORY,[this.filterDate.fromDate.fcName],this.showDate&&t.IS_MANDATORY),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_MANDATORY,[this.filterDate.toDate.fcName],this.showDate&&e.IS_MANDATORY)}}}return t.\u0275fac=function(e){return new(e||t)(f.Rb(h.a),f.Rb(a.a),f.Rb(p.a),f.Rb(l.a))},t.\u0275cmp=f.Lb({type:t,selectors:[["app-sweeping-and-pooling"]],viewQuery:function(t,e){if(1&t&&(f.Wc(s.a,1),f.Wc(D,1),f.Wc(_,1),f.Wc(w,1),f.Wc(L,1)),2&t){let t;f.Bc(t=f.gc())&&(e.exchangeChild=t.first),f.Bc(t=f.gc())&&(e.toAccountRef=t.first),f.Bc(t=f.gc())&&(e.fromAccountRef=t.first),f.Bc(t=f.gc())&&(e.targetAccountRef=t.first),f.Bc(t=f.gc())&&(e.exchangeRateRef=t.first)}},features:[f.Cb],decls:3,vars:4,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step2","",3,"id",4,"psStep"],["step1","",3,"id"],["id","sweeping_panel",3,"options"],[3,"options","onPsChange"],[4,"ngIf"],[3,"options",4,"ngIf"],["id","filterDate",3,"options",4,"ngIf"],["id","'transferFrom'+ id",3,"options","onAccountChange"],["targetAccountRef",""],["id","'transferTo'+ id",3,"options","onAccountChange"],["fromAccountRef",""],["toAccountRef",""],[3,"options"],["exchangeRateRef",""],["id","filterDate",3,"options"],["step2","",3,"id"],["id","periodicity_panel",3,"options"],[3,"options","onPsChange",4,"ngIf"]],template:function(t,e){1&t&&(f.Xb(0,"ps-template-stepper",0),f.Pc(1,V,8,8,"ps-form-step",1),f.Pc(2,S,3,3,"ps-form-step",2),f.Wb()),2&t&&(f.pc("options",e.stepperOptions)("id",e.stepperOptions.stepperName),f.Fb(1),f.pc("psStep","step1"),f.Fb(1),f.pc("psStep","step2"))},directives:[d.a,O.a,g.a,A.a,b,N,v.o,C.a,s.a,P.a,T.a],styles:[""]}),t})()}}]);