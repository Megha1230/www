(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"41l2":function(o,t,e){"use strict";e.d(t,"a",function(){return r});var s=e("mrSG"),i=e("ZyuK"),n=e("iOQE"),c=e("DFXC"),l=e("Q0Ba"),p=e("fXoL");let r=(()=>{class o extends n.a{constructor(o,t,e){super(o,t),this.omniPull=e,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(o=>{if(o){const t=o.get(this.options.fcName);t&&t.LOV_TYPE_ID&&t.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var o;return Object(s.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(o=this.defaultDropDownLovOptions.listOfOptions)||void 0===o?void 0:o.length)){const o=this.commonProv.getElementValidations(this.options.fcName);if(o&&o.LOV_TYPE_ID&&(this.options.lovTypeId=o.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const o=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);o&&(this.options.lovAdminFilterParamName=o[this.options.lovAdminFilterParamName])}const t={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},e=yield this.omniPull.returnLovTypesValues(t).catch(o=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",o)});if(this.defaultDropDownLovOptions.listOfOptions=[],e&&e.length>0){for(const o of e){const t={itemValue:o.itemValue,description:o.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(o.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:o};t.selectedObj[this.options.fcName]=o.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(t)}this.showLovDropdown=!0}}})}selectDropDownChange(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(p.Rb(l.a),p.Rb(c.a),p.Rb(i.a))},o.\u0275cmp=p.Lb({type:o,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[p.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,t){1&o&&(p.Xb(0,"ps-select-dropdown",0),p.fc("onPsChange",function(o){return t.selectDropDownChange(o)}),p.Wb()),2&o&&p.pc("id",t.id)("options",t.defaultDropDownLovOptions)},directives:[n.a],styles:[""]}),o})()},AfS9:function(o,t,e){"use strict";e.d(t,"a",function(){return p});var s=e("41l2"),i=e("V0Fi"),n=e("DFXC"),c=e("Q0Ba"),l=e("fXoL");let p=(()=>{class o extends s.a{constructor(o,t){super(o,t),this.defaultSelectOptions={lovTypeId:i.a.COLLECTION_LOCATION_LOV_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate(this.options.labelKey?this.options.labelKey:"address_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate(this.options.placeHolder?this.options.placeHolder:"select_address_key")}onChangeLov(o){this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(l.Rb(c.a),l.Rb(n.a))},o.\u0275cmp=l.Lb({type:o,selectors:[["ps-lov-address"]],inputs:{options:"options"},features:[l.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(o,t){1&o&&(l.Xb(0,"ps-dropdown-lov",0),l.fc("onPsChange",function(o){return t.onChangeLov(o)}),l.Wb()),2&o&&l.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[s.a],styles:[""]}),o})()},VEWP:function(o,t,e){"use strict";e.d(t,"a",function(){return O});var s=e("mrSG"),i=e("fXoL"),n=e("4lGw"),c=e("V0Fi"),l=e("ZyuK"),p=e("ZF3V"),r=e("EIUR"),a=e("DFXC"),u=e("zngb"),h=e("Q0Ba"),m=e("Isd1"),d=e("L0og");const f=["complexLookupComponentObj"];let O=(()=>{class o extends p.a{constructor(o,t,e,s){super(o,t),this.commonService=o,this.omniPull=e,this.accountsService=s,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new i.o,this.onAccountDeleted=new i.o,this.labelValuesMap=new Map,this.psCurrency=new r.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(o){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(o){return Object(s.b)(this,void 0,void 0,function*(){if(null!=o&&(this.options=o),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const t=this.commonService.session.getValueOf(u.a.USERINFO),e=this.prepareRequestData(t);this.returnAccountList(e)})}returnAccountList(o){return Object(s.b)(this,void 0,void 0,function*(){const t=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const e=yield this.omniPull.returnAccounts(o).catch(o=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});if(e&&e.gridModel.length>0){if(this.allType){o.accountType="F",o.permittedGls="F";const t=yield this.omniPull.returnAccounts(o).catch(o=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",o)});t&&t.gridModel.length>0&&(e.gridModel=[...e.gridModel,...t.gridModel])}if(this.options.listOfAccounts=e.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(o=>o.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((o,t)=>o.rowIndex=t),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let o="QR"===this.options.purpose?null==t?void 0:t.defaultQrPaymentAccKey:null==t?void 0:t.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(t=>{t.personalizeKey&&t.personalizeKey===o&&(this.common.setValInsideNestedObj(this.options.fcName,t.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",t.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(o){const t=[];for(const e of o){const o={briefNameEnglish:e.briefNameEnglish,cifShortNameEnglish:e.cifShortNameEnglish,accountNumber:e.accountNumber,balance:this.psCurrency.transform(null==e.balance?"0.0":e.balance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==e.availableBalance?"0.0":e.availableBalance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),currencyBriefName:e.currencyBriefName||e.currencyBriefNameEnglish,currencyBriefNameEnglish:e.currencyBriefNameEnglish,currency:e.currency,accountTypeDesc:e.accountTypeDesc,additionalRef:e.additionalRef,ibanAccNo:e.ibanAccNo,accGl:e.accGl,serialNo:e.serialNo,branch:e.branch,cif:e.cif,formattedAccount:this.accountsService.returnFormattedAccount(e).formattedAccount,personalizeKey:e.personalizeKey,nickName:e.nickName,briefName:e.briefName,lookupKey:e.additionalRef,branchDescription:e.branchDescription?e.branchDescription:"",generalLedgerBriefNameEng:e.generalLedgerBriefNameEng?e.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:e.statusDescription,statusCode:e.status,accountFormat:this.accountsService.returnFormattedAccount(e).accountFormat};this.options.multiple&&(o.excludeType=e.excludeType),t.push(o)}return t}prepareRequestData(o){let t={};if(o&&o.omniUserVO&&(t={userCifNo:o.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let o="";for(const t in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[t]+",";o=o.slice(0,o.lastIndexOf(",")),t.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{let o="";for(const t in this.options.accountAllowedTypes)o+=this.options.accountAllowedTypes[t]+",";o=o.slice(0,o.lastIndexOf(",")),t.accountAllowedTypes=o}return t}fetchAccountBasedOnCurrency(o){return this.options.listOfAccounts}onChange(o){this.logger.log(o)}populateOwnAccountMap(){let o={},t={},e={};o={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},e={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",o),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",e)}onChangeItem(o){this.onAccountChange.emit(o)}onDeleteItem(o){o&&this.onAccountDeleted.emit(o)}handleMultipleSelection(){const o=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(o=>this.options.requestObject[this.options.fcName].some(t=>t.accountNumber==o.accountNumber)):[];this.complexLookupOptions.selectedItems=o.filter(o=>this.options.setAllAccountsAsSelecetd&&(!o.excludeType||!(o.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||o.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(o=>Object.assign(Object.assign({item:o[o.previewProperty]},o),{itemLookup:o.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(o){o&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(t=>o.accountNumber!=t.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(o){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(o)}}return o.\u0275fac=function(t){return new(t||o)(i.Rb(h.a),i.Rb(a.a),i.Rb(l.a),i.Rb(n.a))},o.\u0275cmp=i.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(o,t){if(1&o&&i.Wc(f,1),2&o){let o;i.Bc(o=i.gc())&&(t.complexLookupComponentObj=o.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[i.Cb,i.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(o,t){1&o&&(i.Xb(0,"ps-container-complex",0),i.Xb(1,"ps-complex-lookup",1,2),i.fc("changeItem",function(o){return t.onChangeItem(o)})("onDeleteItem",function(o){return t.onDeleteItem(o)}),i.Wb(),i.Wb()),2&o&&(i.Fb(1),i.pc("id",t.id)("options",t.complexLookupOptions))},directives:[m.a,d.a],styles:[""]}),o})()},Z6pj:function(o,t,e){"use strict";e.d(t,"a",function(){return p});var s=e("ZyuK"),i=e("iOQE"),n=e("DFXC"),c=e("Q0Ba"),l=e("fXoL");let p=(()=>{class o extends i.a{constructor(o,t,e){super(o,t),this.omniPull=e,this.defaultSelectOptions={labelKey:"",placeHolder:"select_denomination_key"}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.getDenomination()}getDenomination(){this.omniPull.returnDenominationList({}).then(o=>{if(this.defaultSelectOptions.listOfOptions=[],o&&null!=o.gridModel&&o.gridModel.length>0)for(const t of o.gridModel)this.defaultSelectOptions.listOfOptions.push({itemValue:t.value,description:t.description,selectedObj:t});else this.logger.warn(o,"empty response")}).catch(o=>{})}onChange(o){this.loggerP.log("onCategory"+o),this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(l.Rb(c.a),l.Rb(n.a),l.Rb(s.a))},o.\u0275cmp=l.Lb({type:o,selectors:[["ps-dropdown-denomination"]],inputs:{options:"options"},features:[l.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange","onPsInit"]],template:function(o,t){1&o&&(l.Xb(0,"ps-select-dropdown",0),l.fc("onPsChange",function(o){return t.onChange(o)})("onPsInit",function(o){return t.onInit(o)}),l.Wb()),2&o&&l.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[i.a],styles:[""]}),o})()},mn4d:function(o,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("ZF3V"),i=e("DFXC"),n=e("zngb"),c=e("qEF5"),l=e("Q0Ba"),p=e("QZhd"),r=e("fXoL"),a=e("ofXK"),u=e("D2x8"),h=e("38QA"),m=e("KVmc");const d=function(o){return{labelKey:o}};function f(o,t){if(1&o&&(r.Xb(0,"p",4),r.Sb(1,"ps-label",5),r.Wb()),2&o){const o=r.ic(2);r.Fb(1),r.pc("options",r.sc(1,d,o.errorMsg))}}function O(o,t){if(1&o){const o=r.Yb();r.Xb(0,"ps-container-item",1),r.Xb(1,"ps-date-time-only",2),r.fc("onPsChange",function(t){return r.Fc(o),r.ic().fromTimeChanged(t)}),r.Wb(),r.Xb(2,"ps-date-time-only",2),r.fc("onPsChange",function(t){return r.Fc(o),r.ic().toTimedChanged(t)}),r.Wb(),r.Vb(3),r.Pc(4,f,2,3,"p",3),r.Ub(),r.Wb()}if(2&o){const o=r.ic();r.pc("id","time_range"+o.id),r.Fb(1),r.pc("options",o.options.fromTime),r.Fb(1),r.pc("options",o.options.toTime),r.Fb(2),r.pc("ngIf",o.errorMsg)}}let b=(()=>{class o extends s.a{constructor(o,t){super(o,t),this.commonProv=o,this.showContainer=!1}ngOnInit(){var o,t;super.ngOnInit();const e=this.common.initialScreenDisplayParams.get(p.a.oper_ID)?this.common.initialScreenDisplayParams.get(p.a.oper_ID):new Map;this.showContainer=1==(null===(o=e.get(this.options.fromTime.fcName))||void 0===o?void 0:o.IS_VISIBLE)||1==(null===(t=e.get(this.options.toTime.fcName))||void 0===t?void 0:t.IS_VISIBLE),this.options.fromTime.labelKey=this.options.fromTime.labelKey?this.options.fromTime.labelKey:"time_key",this.options.toTime.labelKey=this.options.toTime.labelKey?this.options.toTime.labelKey:"time_key"}fromTimeChanged(o){this.errorMsg="",this.startdate=o.newValue,this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.toTime.fcName]&&(this.enddate=this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.toTime.fcName],-1!=c.a.compareTime(this.startdate,this.enddate)&&(this.errorMsg=this.commonProv.translate("invalid_time_range_key"),this.options.group.controls[this.options.fromTime.fcName].setValue(""),this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.fromTime.fcName]=null)),this.onPsChange.emit(o)}toTimedChanged(o){this.errorMsg="",this.enddate=o.newValue,this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.fromTime.fcName]&&(this.startdate=this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.fromTime.fcName],-1!=c.a.compareTime(this.startdate,this.enddate)&&(this.errorMsg=this.commonProv.translate("invalid_time_range_key"),this.options.group.controls[this.options.toTime.fcName].setValue(""),this.options.group.controls[n.a.CONTROLLER_FORM_DATA].value[this.options.toTime.fcName]=null)),this.onPsChange.emit(o)}}return o.\u0275fac=function(t){return new(t||o)(r.Rb(l.a),r.Rb(i.a))},o.\u0275cmp=r.Lb({type:o,selectors:[["ps-complex-time-range"]],inputs:{options:"options"},features:[r.Cb],decls:1,vars:1,consts:[["class","ps-field-item-wrapper ps-complex-time-range",3,"id",4,"ngIf"],[1,"ps-field-item-wrapper","ps-complex-time-range",3,"id"],[1,"ps-date-time-only-wrapper",3,"options","onPsChange"],["class","validation-message",4,"ngIf"],[1,"validation-message"],[1,"label-timerange-validation",3,"options"]],template:function(o,t){1&o&&r.Pc(0,O,5,4,"ps-container-item",0),2&o&&r.pc("ngIf",t.options.fromTime&&t.options.toTime&&t.showContainer||t.custMode)},directives:[a.o,u.a,h.a,m.a],styles:[""]}),o})()}}]);