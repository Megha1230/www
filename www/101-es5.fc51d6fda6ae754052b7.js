!function(){function t(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function s(o,n,r,c){var s=n&&n.prototype instanceof a?n:a,p=Object.create(s.prototype);return i(p,"_invoke",function(o,n,i){var r,c,s,a=0,p=i||[],l=!1,f={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,o){return r=e,c=0,s=t,f.n=o,u}};function m(o,n){for(c=o,s=n,e=0;!l&&a&&!i&&e<p.length;e++){var i,r=p[e],m=f.p,d=r[2];o>3?(i=d===n)&&(s=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=t):r[0]<=m&&((i=o<2&&m<r[1])?(c=0,f.v=n,f.n=r[1]):m<d&&(i=o<3||r[0]>n||n>d)&&(r[4]=o,r[5]=n,f.n=d,c=0))}if(i||o>1)return u;throw l=!0,n}return function(i,p,d){if(a>1)throw TypeError("Generator is already running");for(l&&1===p&&m(p,d),c=p,s=d;(e=c<2?t:s)||!l;){r||(c?c<3?(c>1&&(f.n=-1),m(c,s)):f.n=s:f.v=s);try{if(a=2,r){if(c||(i="next"),e=r[i]){if(!(e=e.call(r,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=r.return)&&e.call(r),c<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),c=1);r=t}else if((e=(l=f.n<0)?s:o.call(n,f))!==u)break}catch(e){r=t,c=1,s=e}finally{a=1}}return{value:e,done:l}}}(o,r,c),!0),p}var u={};function a(){}function p(){}function l(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),m=l.prototype=a.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t}return p.prototype=l,i(m,"constructor",l),i(l,"constructor",p),p.displayName="GeneratorFunction",i(l,c,"GeneratorFunction"),i(m),i(m,c,"Generator"),i(m,r,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:d}})()}function i(t,e,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(i=function(t,e,o,n){function c(e,o){i(t,e,function(t){return this._invoke(e,o,t)})}e?r?r(t,e,{value:o,enumerable:!n,configurable:!n,writable:!n}):t[e]=o:(c("next",0),c("throw",1),c("return",2))})(t,e,o,n)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function s(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function a(t,e,o){return e=d(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p()?Reflect.construct(e,o||[],d(t).constructor):e.apply(t,o))}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(p=function(){return!!t})()}function l(t,e,o,n){var i=f(d(1&n?t.prototype:t),e,o);return 2&n&&"function"==typeof i?function(t){return i.apply(o,t)}:i}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=m(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:o):i.value}}).apply(null,arguments)}function m(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{"1Dkv":function(t,e,o){"use strict";o.r(e),o.d(e,"CreditCardSettlementPage",function(){return E});var n=o("3Pt+"),i=o("OVQh"),c=o("/M2N"),u=o("vbr2"),p=o("fOh1"),f=o("0CJq"),m=o("ZyuK"),d=o("f42Q"),y=o("DFXC"),O=o("woXy"),b=o("Q0Ba"),v=o("gKqT"),C=o("zngb"),g=o("fXoL"),A=o("kRg/"),k=o("uKCV"),x=o("sAFK"),L=o("+f2X"),N=o("8I2j"),_=o("VEWP"),w=["toAccountRef"],T=["fromAccountRef"],S=["exchangeRef"];function P(t,e){if(1&t){var o=g.Yb();g.Xb(0,"ps-form-step",2),g.Xb(1,"ps-container-panel",3),g.Xb(2,"ps-lookup-credit-cards",4,5),g.fc("onCreditCardChange",function(t){return g.Fc(o),g.ic().creditCardListChange(t)}),g.Wb(),g.Xb(4,"ps-lookup-own-accounts",6,7),g.fc("onAccountChange",function(t){return g.Fc(o),g.ic().settlementAccountChange(t)}),g.Wb(),g.Sb(6,"ps-complex-exchange",8,9),g.Wb(),g.Wb()}if(2&t){var n=g.ic();g.pc("id",n.stepperOptions.namesofSteps[0]),g.Fb(1),g.pc("options",n.panelOptions1Step1),g.Fb(1),g.pc("options",n.creditCardsLookupOptiops),g.Fb(2),g.pc("options",n.settlementAccountListOptions),g.Fb(2),g.pc("options",n.complexExchangeOptions)}}var E=function(){var t=function(t){function e(t,o,c,s,l,f,m){var d;return r(this,e),(d=a(this,e)).omniPull=t,d.logger=o,d.nav=c,d.loggerP=s,d.commonService=l,d.omniCommon=f,d.eventEmitterService=m,d.formGroup=new n.f({}),d.creditCardSettlementVO={},d.defaultVO={},d.ownAccountVO={},d.stepperOptions={stepperName:"credit_card_settlement",isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["credit_card_settlement_step1"],group:d.formGroup,submitOptions:{extraParams:{},submitServiceUrl:p.a.serviceUrl.creditCardSettlementRequestEndPoint,group:d.formGroup},requestObject:d.creditCardSettlementVO},d.panelOptions1Step1={isExpandable:!0,labelKey:"credit_card_settlement_key",iconName:"document",expanded:!0},d.creditCardsLookupOptiops={labelKey:"credit_card_key",placeHolder:"select_credit_card_key",group:d.formGroup,fcName:"creditCard",requestObject:d.creditCardSettlementVO,component:u.a},d.settlementAccountListOptions={labelKey:"settlement_account_key",placeHolder:"settlement_account_key",component:i.a,group:d.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"toAccount",accountType:"G",fromTo:"from",defaultByPersonalizedAcc:!1,requestObject:d.creditCardSettlementVO},d.complexExchangeOptions={editableMode:!1,fromAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromCurrency",group:d.formGroup},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"transactionAmount",group:d.formGroup,decimalPoints:2}},toAmountOptions:{currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"currency",group:d.formGroup},amountOptions:{labelKey:"exchange_amount_key",placeHolder:"enter_amount_key",fcName:"toAmount",group:d.formGroup,decimalPoints:2}},requestObject:d.creditCardSettlementVO,group:d.formGroup},d.toAccountComponent={},d}return h(e,t),s(e,[{key:"ngOnInit",value:function(){l(e,"init",this,3)([]),this.commonProv.copyObject(this.creditCardSettlementVO,this.nav.getAllParams()?this.nav.getAllParams().ScreenVO?this.nav.getAllParams().ScreenVO:this.nav.getAllParams():{}),this.baseFormGroup=this.formGroup}},{key:"settlementAccountChange",value:function(t){var e=this;t&&(this.validateCurrencyCombination(t),this.complexExchangeOptions.toAmountOptions.currency=t.currencyCode,this.complexExchangeOptions.toAmountOptions.currencyCode=t.currency,setTimeout(function(){e.stepperOptions.requestObject[e.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=t.currency},1),this.showExchangeRate())}},{key:"creditCardListChange",value:function(t){var e=this;t&&(this.validateCurrencyCombination(t),this.complexExchangeOptions.fromAmountOptions.currency=t.currencyCode,this.complexExchangeOptions.fromAmountOptions.currencyCode=t.currency,setTimeout(function(){e.stepperOptions.requestObject[e.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=t.currency},1),this.creditCardSettlementVO.defaultSettlementAccount=null==this.creditCardSettlementVO.defaultSettlementAccount||this.creditCardSettlementVO.defaultSettlementAccount,this.creditCardSettlementVO.defaultSettlementAccount&&(this.commonProv.setValInsideNestedObj(this.settlementAccountListOptions.fcName,t.additionalRef,this.creditCardSettlementVO),this.commonProv.setValInsideNestedObj(this.settlementAccountListOptions.fcName+"_lookupKey",t.additionalRef,this.creditCardSettlementVO)))}},{key:"showExchangeRate",value:function(){this.exchangeChild.showToCurrency()}},{key:"validateCurrencyCombination",value:function(t){t[C.a.VALIDATE_COMBINATION]&&this.creditCardSettlementVO[this.settlementAccountListOptions.fcName]&&this.creditCardSettlementVO[this.creditCardsLookupOptiops.fcName]&&this.creditCardSettlementVO[this.settlementAccountListOptions.fcName].currency!=this.creditCardSettlementVO[this.creditCardsLookupOptiops.fcName].currency&&this.omniPull.validateCurrencyCombination({fromCurrency:+this.creditCardSettlementVO[this.settlementAccountListOptions.fcName].currency,toCurrency:+this.creditCardSettlementVO[this.creditCardsLookupOptiops.fcName].currency,listOfAccounts:[this.fromAccountRef,this.toAccountRef,this.exchangeRef],listOfAffectedFields:[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName,this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName],screenVO:this.creditCardSettlementVO})}}])}(v.OmniBasePage);return t.\u0275fac=function(e){return new(e||t)(g.Rb(m.a),g.Rb(y.a),g.Rb(O.a),g.Rb(y.a),g.Rb(b.a),g.Rb(f.a),g.Rb(d.a))},t.\u0275cmp=g.Lb({type:t,selectors:[["credit-card-settlement"]],viewQuery:function(t,e){var o;(1&t&&(g.Wc(c.a,1),g.Wc(w,1),g.Wc(T,1),g.Wc(S,1)),2&t)&&(g.Bc(o=g.gc())&&(e.exchangeChild=o.first),g.Bc(o=g.gc())&&(e.toAccountRef=o.first),g.Bc(o=g.gc())&&(e.fromAccountRef=o.first),g.Bc(o=g.gc())&&(e.exchangeRef=o.first))},features:[g.Cb],decls:2,vars:3,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","credit_card_req_panel",3,"options"],[3,"options","onCreditCardChange"],["fromAccountRef",""],["id","'transferFrom'+ id",3,"options","onAccountChange"],["toAccountRef",""],[3,"options"],["exchangeRef",""]],template:function(t,e){1&t&&(g.Xb(0,"ps-template-stepper",0),g.Pc(1,P,8,5,"ps-form-step",1),g.Wb()),2&t&&(g.pc("options",e.stepperOptions)("id",e.stepperOptions.stepperName),g.Fb(1),g.pc("psStep","step1"))},directives:[A.a,k.a,x.a,L.a,N.a,_.a,c.a],styles:[""]}),t}()},"8I2j":function(t,e,o){"use strict";o.d(e,"a",function(){return A});var i=o("mrSG"),c=o("fXoL"),u=o("3Pt+"),p=o("GIS6"),f=o("V0Fi"),m=o("ZF3V"),d=o("DFXC"),y=o("zngb"),O=o("Q0Ba"),b=o("vbr2"),v=o("Isd1"),C=o("L0og"),g=["complexLookupComponentObj"],A=function(){var t=function(t){function e(t,o,n){var i;return r(this,e),(i=a(this,e,[t,o])).commonService=t,i.crdsSrvce=n,i.formGroup=new u.f({}),i.options={requestObject:null},i.complexLookupOptions={requestObject:null,notFoundMessage:"no_credit_card_found_key"},i.onCreditCardChange=new c.o,i.labelValuesMap=new Map,i.creditCardRequestParam={},i}return h(e,t),s(e,[{key:"ngOnInit",value:function(){l(e,"init",this,3)([]),this.loadCreditCards(),this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.complexLookupOptions.type=p.a.CREDIT_CARD_TYPE_NAME,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject,this.complexLookupOptions.component=this.options&&this.options.component?this.options.component:b.a}},{key:"loadCreditCards",value:function(){this.creditCardRequestParam={};var t=this.commonProv.session.getValueOf(y.a.USERINFO);this.creditCardRequestParam.vsBranchCode=t.cifBranch,this.creditCardRequestParam.cardType=f.a.CARD_SEGMENT_NAME_CREDIT,this.options&&void 0!==this.options.submitType&&(this.creditCardRequestParam.submitType=this.options.submitType),this.returnCreditCards(this.creditCardRequestParam)}},{key:"returnCreditCards",value:function(t){return Object(i.b)(this,void 0,void 0,n().m(function e(){var o,i=this;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.crdsSrvce.returnCardList(t).catch(function(t){i.complexLookupOptions.listOfOptions=[],i.logger.error("Error: While fetching credits cards in PsLookupCreditCardsComponent :",t)});case 1:o=e.v,this.complexLookupOptions.listOfOptions=o&&o.gridModel.length>0?this.populateCreditCards(o.gridModel):[];case 2:return e.a(2)}},e,this)}))}},{key:"onChangeItem",value:function(t){this.onCreditCardChange.emit(t)}},{key:"populateCreditCards",value:function(t){var e=t.filter(function(t){return t.statusCode==f.a.CARD_STATUS_ACTIVE_CODE});return this.crdsSrvce.populateCards(e,p.a.CREDIT_CARD_TYPE_NAME)}},{key:"reset",value:function(){this.complexLookupComponentObj.resetLookUp()}}])}(m.a);return t.\u0275fac=function(e){return new(e||t)(c.Rb(O.a),c.Rb(d.a),c.Rb(p.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["ps-lookup-credit-cards"]],viewQuery:function(t,e){var o;(1&t&&c.Wc(g,1),2&t)&&(c.Bc(o=c.gc())&&(e.complexLookupComponentObj=o.first))},inputs:{options:"options"},outputs:{onCreditCardChange:"onCreditCardChange"},features:[c.Cb],decls:3,vars:2,consts:[[1,"ps-lookup-credit-cards"],[3,"id","options","changeItem"],["complexLookupComponentObj",""]],template:function(t,e){1&t&&(c.Xb(0,"ps-container-complex",0),c.Xb(1,"ps-complex-lookup",1,2),c.fc("changeItem",function(t){return e.onChangeItem(t)}),c.Wb(),c.Wb()),2&t&&(c.Fb(1),c.pc("id",e.id)("options",e.complexLookupOptions))},directives:[v.a,C.a],styles:[""]}),t}()},VEWP:function(o,i,c){"use strict";c.d(i,"a",function(){return k});var u=c("mrSG"),p=c("fXoL"),l=c("4lGw"),f=c("V0Fi"),m=c("ZyuK"),d=c("ZF3V"),y=c("EIUR"),O=c("DFXC"),b=c("zngb"),v=c("Q0Ba"),C=c("Isd1"),g=c("L0og"),A=["complexLookupComponentObj"],k=function(){var o=function(o){function i(t,e,o,n){var c;return r(this,i),(c=a(this,i,[t,e])).commonService=t,c.omniPull=o,c.accountsService=n,c.options={fromTo:"",requestObject:null},c.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!c.options.multiple&&c.options.multiple},c.onAccountChange=new p.o,c.onAccountDeleted=new p.o,c.labelValuesMap=new Map,c.psCurrency=new y.a,c.labelOptions={},c.allType=!1,c}return h(i,o),s(i,[{key:"ngOnInit",value:function(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}},{key:"ngOnChanges",value:function(t){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}},{key:"loadAccounts",value:function(t){return Object(u.b)(this,void 0,void 0,n().m(function e(){var o,i;return n().w(function(e){for(;;)switch(e.n){case 0:if(null!=t&&(this.options=t),this.options.listOfAccounts=[],void 0!==this.options.fromTo&&""!==this.options.fromTo){e.n=1;break}return e.a(2,void this.logger.error("lookup_from_to_missing_key"));case 1:o=this.commonService.session.getValueOf(b.a.USERINFO),i=this.prepareRequestData(o),this.returnAccountList(i);case 2:return e.a(2)}},e,this)}))}},{key:"returnAccountList",value:function(e){return Object(u.b)(this,void 0,void 0,n().m(function o(){var i,r,c,s,u=this;return n().w(function(o){for(;;)switch(o.n){case 0:return i=this.commonProv.session.getValueOf(f.a.PERSONALIZATION_CO),this.complexLookupOptions.listOfOptions=void 0,o.n=1,this.omniPull.returnAccounts(e).catch(function(t){u.complexLookupOptions.listOfOptions=[],u.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});case 1:if(!((r=o.v)&&r.gridModel.length>0)){o.n=4;break}if(!this.allType){o.n=3;break}return e.accountType="F",e.permittedGls="F",o.n=2,this.omniPull.returnAccounts(e).catch(function(t){u.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});case 2:(c=o.v)&&c.gridModel.length>0&&(r.gridModel=[].concat(t(r.gridModel),t(c.gridModel)));case 3:this.options.listOfAccounts=r.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(t){return t.accountNumber!==u.options.accountNumber})),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(t){return t.accountNumber!==u.options.accountNumber}))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map(function(t,e){return t.rowIndex=e}),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)&&(s="QR"===this.options.purpose?null==i?void 0:i.defaultQrPaymentAccKey:null==i?void 0:i.defaultTransferAccKey,this.complexLookupOptions.listOfOptions.map(function(t){t.personalizeKey&&t.personalizeKey===s&&(u.common.setValInsideNestedObj(u.options.fcName,t.lookupKey,u.options.requestObject),u.common.setValInsideNestedObj(u.options.fcName+"_lookupKey",t.lookupKey,u.options.requestObject))})),o.n=5;break;case 4:this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[];case 5:return o.a(2)}},o,this)}))}},{key:"populateCustomAccounts",value:function(t){var o,n=[],i=function(t,o){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e(t))||o&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,c=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw c}}}}(t);try{for(i.s();!(o=i.n()).done;){var r=o.value,c={briefNameEnglish:r.briefNameEnglish,cifShortNameEnglish:r.cifShortNameEnglish,accountNumber:r.accountNumber,balance:this.psCurrency.transform(null==r.balance?"0.0":r.balance,r.currencyDecimalPoints)+" "+(r.currencyBriefName||r.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==r.availableBalance?"0.0":r.availableBalance,r.currencyDecimalPoints)+" "+(r.currencyBriefName||r.currencyBriefNameEnglish),currencyBriefName:r.currencyBriefName||r.currencyBriefNameEnglish,currencyBriefNameEnglish:r.currencyBriefNameEnglish,currency:r.currency,accountTypeDesc:r.accountTypeDesc,additionalRef:r.additionalRef,ibanAccNo:r.ibanAccNo,accGl:r.accGl,serialNo:r.serialNo,branch:r.branch,cif:r.cif,formattedAccount:this.accountsService.returnFormattedAccount(r).formattedAccount,personalizeKey:r.personalizeKey,nickName:r.nickName,briefName:r.briefName,lookupKey:r.additionalRef,branchDescription:r.branchDescription?r.branchDescription:"",generalLedgerBriefNameEng:r.generalLedgerBriefNameEng?r.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:r.statusDescription,statusCode:r.status,accountFormat:this.accountsService.returnFormattedAccount(r).accountFormat};this.options.multiple&&(c.excludeType=r.excludeType),n.push(c)}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"prepareRequestData",value:function(t){var e={};if(t&&t.omniUserVO&&(e={userCifNo:t.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(e={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(e.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(e.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(e.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(e.endUserId=this.options.endUserId),null!=this.options.fromCurrency?e.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(e.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)e.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{var o="";for(var n in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[n]+",";o=o.slice(0,o.lastIndexOf(",")),e.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)e.accountAllowedTypes=this.options.accountAllowedTypes;else{var i="";for(var r in this.options.accountAllowedTypes)i+=this.options.accountAllowedTypes[r]+",";i=i.slice(0,i.lastIndexOf(",")),e.accountAllowedTypes=i}return e}},{key:"fetchAccountBasedOnCurrency",value:function(t){return this.options.listOfAccounts}},{key:"onChange",value:function(t){this.logger.log(t)}},{key:"populateOwnAccountMap",value:function(){var t,e,o;t={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},e={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",t),this.labelValuesMap.set("balance_key",e),this.labelValuesMap.set("available_balance_key",o)}},{key:"onChangeItem",value:function(t){this.onAccountChange.emit(t)}},{key:"onDeleteItem",value:function(t){t&&this.onAccountDeleted.emit(t)}},{key:"handleMultipleSelection",value:function(){var t=this,e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(function(e){return t.options.requestObject[t.options.fcName].some(function(t){return t.accountNumber==e.accountNumber})}):[];this.complexLookupOptions.selectedItems=e.filter(function(e){return t.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(f.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(f.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!t.options.setAllAccountsAsSelecetd}).map(function(t){return Object.assign(Object.assign({item:t[t.previewProperty]},t),{itemLookup:t.lookupKey})}),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}},{key:"removeAccount",value:function(t){t&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(function(e){return t.accountNumber!=e.accountNumber}):[])}},{key:"reset",value:function(){this.complexLookupComponentObj.resetLookUp()}},{key:"refreshAcounts",value:function(t){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(t)}}])}(d.a);return o.\u0275fac=function(t){return new(t||o)(p.Rb(v.a),p.Rb(O.a),p.Rb(m.a),p.Rb(l.a))},o.\u0275cmp=p.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(t,e){var o;(1&t&&p.Wc(A,1),2&t)&&(p.Bc(o=p.gc())&&(e.complexLookupComponentObj=o.first))},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[p.Cb,p.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(t,e){1&t&&(p.Xb(0,"ps-container-complex",0),p.Xb(1,"ps-complex-lookup",1,2),p.fc("changeItem",function(t){return e.onChangeItem(t)})("onDeleteItem",function(t){return e.onDeleteItem(t)}),p.Wb(),p.Wb()),2&t&&(p.Fb(1),p.pc("id",e.id)("options",e.complexLookupOptions))},directives:[C.a,g.a],styles:[""]}),o}()}}])}();