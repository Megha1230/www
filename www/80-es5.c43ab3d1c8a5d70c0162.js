!function(){function e(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function a(o,n,s,c){var a=n&&n.prototype instanceof p?n:p,l=Object.create(a.prototype);return i(l,"_invoke",function(o,n,i){var s,c,a,p=0,l=i||[],u=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,o){return s=t,c=0,a=e,f.n=o,r}};function m(o,n){for(c=o,a=n,t=0;!u&&p&&!i&&t<l.length;t++){var i,s=l[t],m=f.p,h=s[2];o>3?(i=h===n)&&(a=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=m&&((i=o<2&&m<s[1])?(c=0,f.v=n,f.n=s[1]):m<h&&(i=o<3||s[0]>n||n>h)&&(s[4]=o,s[5]=n,f.n=h,c=0))}if(i||o>1)return r;throw u=!0,n}return function(i,l,h){if(p>1)throw TypeError("Generator is already running");for(u&&1===l&&m(l,h),c=l,a=h;(t=c<2?e:a)||!u;){s||(c?c<3?(c>1&&(f.n=-1),m(c,a)):f.n=a:f.v=a);try{if(p=2,s){if(c||(i="next"),t=s[i]){if(!(t=t.call(s,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(a=TypeError("The iterator does not provide a '"+i+"' method"),c=1);s=e}else if((t=(u=f.n<0)?a:o.call(n,f))!==r)break}catch(t){s=e,c=1,a=t}finally{p=1}}return{value:t,done:u}}}(o,s,c),!0),l}var r={};function p(){}function l(){}function u(){}t=Object.getPrototypeOf;var f=[][s]?t(t([][s]())):(i(t={},s,function(){return this}),t),m=u.prototype=p.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,i(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=u,i(m,"constructor",u),i(u,"constructor",l),l.displayName="GeneratorFunction",i(u,c,"GeneratorFunction"),i(m),i(m,c,"Generator"),i(m,s,function(){return this}),i(m,"toString",function(){return"[object Generator]"}),(n=function(){return{w:a,m:h}})()}function i(e,t,o,n){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}(i=function(e,t,o,n){function c(t,o){i(e,t,function(e){return this._invoke(t,o,e)})}t?s?s(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(c("next",0),c("throw",1),c("return",2))})(e,t,o,n)}function s(e,t,o,n){var i=c(h(1&n?e.prototype:e),t,o);return 2&n&&"function"==typeof i?function(e){return i.apply(o,e)}:i}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=a(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:o):i.value}}).apply(null,arguments)}function a(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function l(e,t,o){return t&&p(e.prototype,t),o&&p(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function f(e,t,o){return t=h(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,o||[],h(e).constructor):t.apply(e,o))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"2Ihw":function(e,t,o){"use strict";o.d(t,"a",function(){return p});var n=o("ZyuK"),i=o("iOQE"),s=o("DFXC"),c=o("Q0Ba"),a=o("fXoL"),p=function(){var e=function(e){function t(e,o,n){var i;return r(this,t),(i=f(this,t,[e,o])).omniPull=n,i.defaultSelectOptions={labelKey:"account_type_key",placeHolder:"select_req_account_type_key"},i.accountType=[],i}return d(t,e),l(t,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.getAccountTypes()}},{key:"getAccountTypes",value:function(){var e=this;this.omniPull.returnAccountTypes({accountCategory:this.options.accountCategory}).then(function(t){if(e.defaultSelectOptions.listOfOptions=[],t&&null!=t.gridModel&&t.gridModel.length>0){for(var o=0;o<t.gridModel.length;o++)e.accountType.push({itemValue:t.gridModel[o].typeCode,description:t.gridModel[o].briefDesc,selectedObj:t.gridModel[o]});e.defaultSelectOptions.listOfOptions=e.accountType}else e.logger.warn(t,"empty response")}).catch(function(e){})}},{key:"onAccountTypeChange",value:function(e){this.loggerP.log("onAccountTypeChange"+e),this.onPsChange.emit(e.selectedObj)}}])}(i.a);return e.\u0275fac=function(t){return new(t||e)(a.Rb(c.a),a.Rb(s.a),a.Rb(n.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["ps-dropdown-account-types"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(a.Xb(0,"ps-select-dropdown",0),a.fc("onPsChange",function(e){return t.onAccountTypeChange(e)}),a.Wb()),2&e&&a.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[i.a],styles:[""]}),e}()},"5zfx":function(e,t,o){"use strict";o.r(t),o.d(t,"AccountOpeningFixedMaturityAccountPage",function(){return ie});var i=o("mrSG"),c=o("3Pt+"),a=o("PqYM"),p=o("OVQh"),u=o("V0Fi"),m=o("fOh1"),h=o("0CJq"),y=o("ZyuK"),O=o("f42Q"),b=o("DFXC"),g=o("zngb"),v=o("qEF5"),_=o("QZhd"),A=o("woXy"),C=o("Q0Ba"),N=o("gKqT"),T=o("fXoL"),P=o("ofXK"),w=o("kRg/"),k=o("uKCV"),I=o("sAFK"),S=o("+f2X"),B=o("I9E9"),V=o.n(B),E=o("ZF3V"),R=o("Isd1"),D=o("2Ihw"),L=o("ggmK");function x(e,t){if(1&e&&T.Sb(0,"ps-input-display-only",4),2&e){var o=T.ic();T.pc("options",o.defaultOptions.periodicity)}}function j(e,t){if(1&e&&T.Sb(0,"ps-input-display-only",5),2&e){var o=T.ic();T.pc("options",o.defaultOptions.minimumBalance)}}var M,F=((M=function(e){function t(e,o){var n;return r(this,t),(n=f(this,t,[e,o])).oldAccountTypes="",n.enablePeriodicity=!1,n.enableMinBal=!1,n.mask={groupSeparator:_.a.THOUSANDS_SEPARATOR,alias:"currency",autoGroup:!0,placeholder:"0",greedy:!1,digits:2,radixPoint:_.a.DECIMAL_SEPARATOR},n}return d(t,e),l(t,[{key:"defaultOptions",get:function(){return this.options.requestObject&&this.options.requestObject[this.options.accountTypesOptions.fcName]&&this.options&&this.oldAccountTypes!==this.options.requestObject[this.options.accountTypesOptions.fcName].itemValue&&(this.onChangeEvent(this.options.requestObject[this.options.accountTypesOptions.fcName].selectedObj),this.oldAccountTypes=this.options.requestObject[this.options.accountTypesOptions.fcName].itemValue),{accountTypesOptions:{allowedAccountType:this.options.accountTypesOptions.allowedAccountType,accountCategory:this.options.accountTypesOptions.accountCategory,group:this.options.accountTypesOptions.group,fcName:this.options.accountTypesOptions.fcName},periodicity:{group:this.options.periodicity.group,fcName:this.options.periodicity.fcName,placeHolder:"periodicity_key",labelKey:"account_type_periodicity_key"},minimumBalance:{group:this.options.minimumBalance.group,fcName:this.options.minimumBalance.fcName,placeHolder:"minimum_opening_balance_key",labelKey:"minimum_opening_balance_key"},group:this.options.group,requestObject:this.options.requestObject}}},{key:"ngOnInit",value:function(){s(t,"init",this,3)([])}},{key:"onChangeEvent",value:function(e){var t=this;if(e){if("0"===e.allowBelowMinOpenBal&&e.minOpenBal?(this.logger.log("values :"+e),this.enableMinBal=!0,setTimeout(function(){t.options.group.controls[t.options.minimumBalance.fcName].setValue(e.minOpenBal.toString()),t.commonProv.setValInsideNestedObj(t.options.minimumBalance.fcName,V.a.format(e.minOpenBal,t.mask).toString(),t.options.requestObject)},300)):this.options.group.get(this.options.minimumBalance.fcName)&&(this.options.group.controls[this.options.minimumBalance.fcName].setValue(null),this.commonProv.setValInsideNestedObj(this.options.minimumBalance.fcName,null,this.options.requestObject),this.enableMinBal=!1),e.termInd&&e.termDays){this.enablePeriodicity=!0;var o=e.termInd!==u.a.YEAR?e.termInd===u.a.DAYS?1===e.termDays?u.a.DY:u.a.DAY_S:1===e.termDays?u.a.MNTH:u.a.MONTH_S:1===e.termDays?u.a.YR:u.a.YEAR_S;setTimeout(function(){t.options.group.controls[t.options.periodicity.fcName].setValue(e.termDays+" "+o),t.options.group.controls[t.options.periodicity.fcName].disable(),t.commonProv.setValInsideNestedObj(t.options.periodicity.fcName,e.termDays+" "+o,t.options.requestObject)},300)}else this.options.group.get(this.options.periodicity.fcName)&&(this.options.group.controls[this.options.periodicity.fcName].setValue(null),this.commonProv.setValInsideNestedObj(this.options.periodicity.fcName,null,this.options.requestObject),this.enablePeriodicity=!1);this.onPsChange.emit(e)}else this.enableMinBal=!1,this.enablePeriodicity=!1}}])}(E.a)).\u0275fac=function(e){return new(e||M)(T.Rb(C.a),T.Rb(b.a))},M.\u0275cmp=T.Lb({type:M,selectors:[["ps-complex-account-types"]],inputs:{options:"options"},features:[T.Cb],decls:4,vars:4,consts:[[3,"options"],["id","'accountType' + id",3,"options","onPsChange"],["id","'accountTypePeriodiCity' + id",3,"options",4,"ngIf"],["id","'accountTypeMinimumBal' + id",3,"options",4,"ngIf"],["id","'accountTypePeriodiCity' + id",3,"options"],["id","'accountTypeMinimumBal' + id",3,"options"]],template:function(e,t){1&e&&(T.Xb(0,"ps-container-complex",0),T.Xb(1,"ps-dropdown-account-types",1),T.fc("onPsChange",function(e){return t.onChangeEvent(e)}),T.Wb(),T.Pc(2,x,1,1,"ps-input-display-only",2),T.Pc(3,j,1,1,"ps-input-display-only",3),T.Wb()),2&e&&(T.pc("options",t.defaultOptions),T.Fb(1),T.pc("options",t.defaultOptions.accountTypesOptions),T.Fb(1),T.pc("ngIf",t.enablePeriodicity),T.Fb(1),T.pc("ngIf",t.enableMinBal))},directives:[R.a,D.a,P.o,L.a],styles:[""]}),M),K=o("G/Qj"),G=o("VEWP"),q=o("KuXP"),Y=o("ULj9"),W=o("5oTP"),X=o("KVmc"),H=o("iTqn"),U=["fromAccountRef"],z=["amountRef"];function Q(e,t){if(1&e&&T.Sb(0,"ps-input-display-only",20),2&e){var o=T.ic(2);T.pc("options",o.branchOptions)}}function Z(e,t){if(1&e&&T.Sb(0,"ps-label-input",21),2&e){var o=T.ic(2);T.pc("options",o.lblPeriodicityOptions)}}function J(e,t){if(1&e&&T.Sb(0,"ps-label",22),2&e){var o=T.ic(2);T.pc("options",o.minimumBalErr)}}function $(e,t){if(1&e&&T.Sb(0,"ps-input-display-only",23),2&e){var o=T.ic(2);T.pc("options",o.profitRateOptions)}}function ee(e,t){if(1&e&&T.Sb(0,"ps-label",24),2&e){var o=T.ic(2);T.pc("options",o.instructMsgLabelOptions)}}function te(e,t){if(1&e){var o=T.Yb();T.Xb(0,"ps-form-step",3),T.Xb(1,"ps-container-panel",4),T.Pc(2,Q,1,1,"ps-input-display-only",5),T.Xb(3,"ps-complex-account-types",6),T.fc("onPsChange",function(e){return T.Fc(o),T.ic().onChangeItem(e)}),T.Wb(),T.Pc(4,Z,1,1,"ps-label-input",7),T.Xb(5,"ps-complex-amount",8,9),T.fc("onAmountChanged",function(e){return T.Fc(o),T.ic().onBalancAmountChange(e)})("onCurrencyChange",function(e){return T.Fc(o),T.ic().onCurrencyChange(e)}),T.Wb(),T.Pc(7,J,1,1,"ps-label",10),T.Pc(8,$,1,1,"ps-input-display-only",11),T.Xb(9,"ps-lookup-own-accounts",12,13),T.fc("onAccountChange",function(e){return T.Fc(o),T.ic().onFromAccountChange(e)}),T.Wb(),T.Xb(11,"ps-select-toggle",14),T.fc("onPsChange",function(e){return T.Fc(o),T.ic().onRenewContractToggleChange(e)}),T.Wb(),T.Sb(12,"ps-lookup-own-accounts",15),T.Xb(13,"ps-select-toggle",16),T.fc("onPsChange",function(e){return T.Fc(o),T.ic().onProfitChange(e)}),T.Wb(),T.Sb(14,"ps-lookup-own-accounts",17),T.Pc(15,ee,1,1,"ps-label",18),T.Wb(),T.Xb(16,"ps-container-panel",19),T.Xb(17,"ps-complex-select-branch",6),T.fc("onPsChange",function(e){return T.Fc(o),T.ic().onSelectBranch(e)}),T.Wb(),T.Wb(),T.Wb()}if(2&e){var n=T.ic();T.pc("id",n.stepperOptions.namesofSteps[0]),T.Fb(1),T.pc("options",n.panelOptions1Step1),T.Fb(1),T.pc("ngIf",n.enableCifBranch),T.Fb(1),T.pc("options",n.accountTypesOptions),T.Fb(1),T.pc("ngIf",n.enablePeriodicity),T.Fb(1),T.pc("options",n.psComplexAmountOptions),T.Fb(2),T.pc("ngIf",n.showBalErr),T.Fb(1),T.pc("ngIf",n.profitRate),T.Fb(1),T.pc("options",n.accountListOptions),T.Fb(2),T.pc("id","accOpenFMid")("options",n.mainOptions.toggleOptions),T.Fb(1),T.pc("options",n.maturityTransferOptions),T.Fb(1),T.pc("id","accprofitFMid")("options",n.mainOptions.toggleProfitOptions),T.Fb(1),T.pc("options",n.profitAccOptions),T.Fb(1),T.pc("ngIf",n.showAccTypeInformativeLabel),T.Fb(1),T.pc("options",n.panelOptions2Step1),T.Fb(1),T.pc("options",n.selectBranchOptions)}}function oe(e,t){if(1&e&&(T.Xb(0,"ps-form-step",25),T.Sb(1,"ps-map-atm-branches",26),T.Wb()),2&e){var o=T.ic();T.pc("id",o.stepperOptions.namesofSteps[1]),T.Fb(1),T.pc("options",o.mapAtmBranchesOptions)}}var ne,ie=((ne=function(e){function t(e,o,n,i,s,a,l){var u;return r(this,t),(u=f(this,t)).commonProv=e,u.loggerP=o,u.omniPull=n,u.datePipe=i,u.eventEmitterService=s,u.commonService=a,u.navService=l,u.formGroup=new c.f({}),u.defaultVO={},u.showstepper=!1,u.stepperOptions={stepperName:"fixed_mat_stepper",isHorizontalStepper:!0,numberOfSteps:2,namesofSteps:["acc_open_fixed_step1","acc_open_fixed_step2"],group:u.formGroup,submitOptions:{extraParams:{},submitServiceUrl:m.a.serviceUrl.accountOpeningEndPoint,group:u.formGroup},requestObject:u.defaultVO},u.mainOptions={toggleOptions:{labelKey:"renew_key",placeHolder:"renew_key",group:u.formGroup,fcName:"renew",psClass:"toggleColor"},toggleProfitOptions:{labelKey:"post_profit_to_same_account_key",placeHolder:"post_profit_to_same_account_key",group:u.formGroup,fcName:"renewWithSame",psClass:"toggleColor"}},u.lblOptions={labelKey:"branch_key"},u.lblPeriodicityOptions={labelKey:"Term: 5 Years"},u.cifBranchOtpions={},u.accountTypeOptions={allowedAccountType:g.a.AllowedFixedMaturityAccountsTypes,accountCategory:g.a.ACC_TYPE_T,group:u.formGroup,fcName:"accountTypes"},u.amountOptions={labelKey:"amount_key",placeHolder:"0",group:u.formGroup,fcName:"amount"},u.accountNameOptions={labelKey:"name_key",placeHolder:"name_key",group:u.formGroup,fcName:"accountName"},u.currencyOptions={labelKey:"currency_key",placeHolder:"currency",group:u.formGroup,fcName:"currency"},u.lbMaturityDateOptions={labelKey:"maturity_date_key",placeHolder:"maturity_date_key"},u.lbMaturityTransferOptions={labelKey:"maturity_transfer_key"},u.lblProfitOptions={labelKey:"profit_account_key"},u.panelOptions1Step1={isExpandable:!0,labelKey:"account_details_key",iconName:"document",expanded:!0},u.panelOptions2Step1={isExpandable:!0,labelKey:"select_branch_key",iconName:"document",expanded:!0},u.panelOptions1Step2={isExpandable:!0,labelKey:"maturity_instructions_key",iconName:"document"},u.branchOptions={placeHolder:"get cif branch from session",labelKey:"branch_key",group:u.formGroup,fcName:"branch"},u.profitRateOptions={placeHolder:"profit_rate_key",labelKey:"profit_rate_key",group:u.formGroup,fcName:"profitRate"},u.containerItemOptions1={hideImageAndIconIfNotPresent:!0},u.containerItemOptions={hideImageAndIconIfNotPresent:!0},u.labelValuesMap=new Map,u.headerMap=new Map,u.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:p.a,currency:"USD",group:u.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:u.defaultVO},u.maturityTransferOptions={labelKey:"on_maturity_transfer_balance_to_key",placeHolder:"select_maturity_account_key",component:p.a,group:u.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"maturityAccount",accountType:"G",fromTo:"to",requestObject:u.defaultVO},u.profitAccOptions={labelKey:"post_profit_to_key",placeHolder:"select_post_profit_to_key",component:p.a,group:u.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"profitAccount",accountType:"G",fromTo:"to",requestObject:u.defaultVO},u.lblAmountOptions={labelKey:"Renewal Instructions: New Balance Renewed in same Account"},u.termsAndConditionsOptions={checkBoxOptions:{group:u.formGroup,fcName:"checkboxConfirm",labelKey:"i_agree_key"},htmlViewerOptions:{fileName:m.a.accountOpeningTermsAndConditionsFileName}},u.inputAmountOptions={labelKey:"Amount",placeHolder:"enter_your_amount_key",fcName:"inputAmount",group:u.formGroup,type:"amount",decimalPoints:3},u.lbMaturityTransferToggleOptions={labelKey:"renew_account_on_maturity_key"},u.maturityDateOptions={labelKey:u.datePipe.transform(new Date,"dd-MM-yyyy")},u.lblAccountListOptions={labelKey:"account_list_key"},u.psComplexAmountOptions={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:u.formGroup,fcName:"currency"},amountOptions:{labelKey:"opening_balance_key",placeHolder:"enter_opening_balance_key",fcName:"inputAmount",group:u.formGroup,type:"amount",decimalPoints:3},requestObject:u.defaultVO,showLimitLabel:!1},u.accountTypesOptions={accountTypesOptions:{allowedAccountType:g.a.AllowedFixedMaturityAccountsTypes,accountCategory:g.a.ACC_TYPE_T,group:u.formGroup,fcName:"accountTypes"},periodicity:{group:u.formGroup,fcName:"periodiCity"},minimumBalance:{group:u.formGroup,fcName:"minBalance"},group:u.formGroup,requestObject:u.defaultVO},u.instructMsgLabelOptions={labelKey:"account_type_informative_msg_key",fcName:"instrcutions"},u.minimumBalErr={labelKey:"the_entered_amount_is_below_minimum_range_key",fcName:"minimumBalErrLbl"},u.actionImageOptions={imageName:"account_Deactivation_Remark_icon.png"},u.selectBranchOptions={fcName:"mapAtmBranchesDropdown",group:u.formGroup,branchesOptions:{placeHolder:"term_opening_branch_key",labelKey:"label_term_opening_branch_key",group:u.formGroup,fcName:"default_branch"}},u.enablePeriodicity=!1,u.enableCss=!1,u.showAccTypeInformativeLabel=!1,u.showFromAccount=!1,u.balanceAmount="",u.showBalErr=!1,u.fetchParameter(),u}return d(t,e),l(t,[{key:"ngOnInit",value:function(){s(t,"ngOnInit",this,3)([]),this.baseFormGroup=this.formGroup,this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_MANDATORY,[this.maturityTransferOptions.fcName,this.profitAccOptions.fcName],0),this.cifInfo=this.commonProv.session.getValueOf(g.a.USERINFO),this.mapAtmBranchesOptions={group:this.formGroup,fcName:"mapAtmBranches",labelKey:"map_atm_branch_key",mapOptions:{labelKey:"map"},showSegments:!1,mapTypesInclude:"'B'",branchIds:"1,3,5",parameterToCheck:u.a.AcntOpenBranchesMatAcc,requestVO:this.defaultVO}}},{key:"ionViewDidEnter",value:function(){s(t,"ionViewDidEnter",this,3)([]),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_MANDATORY,[this.psComplexAmountOptions.currenciesOptions.fcName,this.psComplexAmountOptions.amountOptions.fcName],1)}},{key:"onSelectBranch",value:function(e){void 0!==e.itemValue&&(this.formGroup.controls[this.selectBranchOptions.fcName].setValue(e),this.commonProv.setValInsideNestedObj(this.selectBranchOptions.fcName,e.selectedObj,this.defaultVO))}},{key:"onRenewContractToggleChange",value:function(e){e.newValue="string"==typeof e.newValue?"true"===e.newValue:e.newValue,this.commonProv.getElementValidations(this.mainOptions.toggleOptions.fcName).IS_VISIBLE&&(0==e.newValue?(this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.maturityTransferOptions.fcName],1),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.mainOptions.toggleProfitOptions.fcName,this.profitAccOptions.fcName],0),this.mainOptions.toggleProfitOptions.disablePreview=!0):(this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.maturityTransferOptions.fcName],0),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.mainOptions.toggleProfitOptions.fcName],1),this.onProfitChange({newValue:this.defaultVO.renewWithSame}),this.mainOptions.toggleProfitOptions.disablePreview=!1,this.formGroup.controls[this.maturityTransferOptions.fcName].reset()))}},{key:"onProfitChange",value:function(e){e.newValue="string"==typeof e.newValue?"true"===e.newValue:e.newValue,this.commonProv.getElementValidations(this.mainOptions.toggleProfitOptions.fcName).IS_VISIBLE&&(0==e.newValue?this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.profitAccOptions.fcName],1):(this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.profitAccOptions.fcName],0),this.formGroup.controls[this.profitAccOptions.fcName].reset()))}},{key:"onChangeEvent",value:function(e){this.enablePeriodicity=!1===e.newValue}},{key:"onChangeFromAccount",value:function(e){this.enableCss=!1===e.newValue}},{key:"ngAfterViewInit",value:function(){var e,t,o=this.commonProv.initialScreenDisplayParams.get(_.a.oper_ID)?this.commonProv.initialScreenDisplayParams.get(_.a.oper_ID):new Map;null!==(null===(e=o.get(this.mainOptions.toggleOptions.fcName))||void 0===e?void 0:e.DEFAULT_VALUE)&&void 0!==(null===(t=o.get(this.mainOptions.toggleOptions.fcName))||void 0===t?void 0:t.DEFAULT_VALUE)||(this.defaultVO[this.mainOptions.toggleOptions.fcName]=!0)}},{key:"loadBranch",value:function(){var e=this;try{this.omniPull.returnBranchesList({branchesIdList:this.cifInfo.cifBranch?this.cifInfo.cifBranch:""}).then(function(t){t&&null!=t.gridModel&&t.gridModel.length>0?e.formGroup.controls[e.branchOptions.fcName].setValue(e.cifInfo.cifBranch?t.gridModel[0].longDesc:""):e.loggerP.warn(t,"empty response")}).catch(function(e){})}catch(t){}}},{key:"onChangeItem",value:function(e){var t=this;e?(this.showAccTypeInformativeLabel=!0,this.defaultVO[this.profitRateOptions.fcName]="",e.briefDesc?this.loadProfitRate():this.profitRate="",e.genLedgerId&&(this.psComplexAmountOptions.currenciesOptions.accountTypesGLIds=e.genLedgerId,this.amountRef.reloadCurrencies().then(function(e){t.ValidateMinimumBal()}).catch(function(e){}))):this.showAccTypeInformativeLabel=!1}},{key:"fetchParameter",value:function(){return Object(i.b)(this,void 0,void 0,n().m(function e(){var t,o,i=this;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.omniPull.getParamValOf(u.a.AcntOpenBranchesMatAcc,u.a.AllowedBranches,g.a.AllowedFixedMaturityAccountsTypes,u.a.AllowedCurrencies,u.a.AllAllowedBranches).catch(function(e){i.showstepper=!0,i.showFromAccount=!0});case 1:t=e.v,this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_MANDATORY,[this.selectBranchOptions.branchesOptions.fcName],0),-1!==t&&t.AcntOpenBranchesMatAcc===g.a.cifBranch?(this.enableCifBranch=!0,this.commonService.branchSelectionAndMapControl(0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:this.mapAtmBranchesOptions.fcName},{fcName:"acc_open_fix_mat_acc_panel2"}],!0),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.branchOptions.fcName],1),this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{branch:this.cifInfo.customerInfoCO?this.cifInfo.customerInfoCO.branchCode:""},!1,!0),this.showstepper=!0,o=t.allowedBranches?t.allowedBranches.toString().split(","):t.AllAllowedBranches.split(","),t.AcntOpenBranchesMatAcc===g.a.cifBranch&&-1===o.toString().indexOf(this.cifInfo.cifBranch.toString())?(v.a.presentFatalAlert("Cannot_open_Term_Account_in_your_CIF_Branch._Please_contact_our_call_center_key"),this.navService.navigateBackward()):setTimeout(function(){i.defaultVO[i.branchOptions.fcName]=i.cifInfo.cifBranch?i.cifInfo.customerInfoCO.branchBriefDesc:""},300)):(this.enableCifBranch=!1,this.commonService.branchSelectionAndMapControl(1,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:this.mapAtmBranchesOptions.fcName,mandatory:1},{fcName:"acc_open_fix_mat_acc_panel2"}]),this.commonProv.applyDynScreenDisplay(g.a.ACTION_TYPE_VISIBLE,[this.branchOptions.fcName],0)),-1!==t&&t.AllowedAccountType&&this.commonProv.copyObject(this.accountListOptions.accountAllowedTypes,t.AllowedAccountType.split(","),!1,!0),-1!==t&&t.AllowedCurrencies&&this.commonProv.copyObject(this.accountListOptions.accountAllowedCurrencies,t.AllowedCurrencies.split(","),!1,!0),setTimeout(function(){i.showFromAccount=!0},300);case 2:return e.a(2)}},e,this)}))}},{key:"loadProfitRate",value:function(){return Object(i.b)(this,void 0,void 0,n().m(function e(){var t,o,i=this;return n().w(function(e){for(;;)switch(e.n){case 0:if(!(this.defaultVO.currency&&"object"==typeof this.defaultVO.currency&&this.defaultVO.inputAmount&&this.defaultVO.accountTypes&&"object"==typeof this.defaultVO.accountTypes)){e.n=2;break}return t={currency:this.defaultVO.currency,amount:this.defaultVO.inputAmount,accountType:this.defaultVO.accountTypes},e.n=1,this.omniPull.returnProfitRate(t).catch(function(e){i.commonProv.logger.error("Error: while fetcing data from returnProfitRate  :",e)});case 1:(o=e.v)&&o.gridModel&&o.gridModel.length>0?(this.profitRate=o.gridModel[0].profitRate,setTimeout(function(){i.defaultVO[i.profitRateOptions.fcName]=i.profitRate.toString()},1)):(this.defaultVO[this.profitRateOptions.fcName]="",this.profitRate="");case 2:return e.a(2)}},e,this)}))}},{key:"onBalancAmountChange",value:function(e){e.amount<0&&this.commonProv.setValInsideNestedObj(this.psComplexAmountOptions.amountOptions.fcName,null,this.defaultVO),this.defaultVO[this.profitRateOptions.fcName]="",this.loadProfitRate(),this.ValidateMinimumBal(e.amount)}},{key:"onCurrencyChange",value:function(e){this.callCurrencyCombinationValidateService(),this.loadProfitRate(),this.ValidateMinimumBal()}},{key:"onFromAccountChange",value:function(e){e&&e[g.a.VALIDATE_COMBINATION]&&this.callCurrencyCombinationValidateService()}},{key:"ValidateMinimumBal",value:function(e){var t,o,n,i;if(1!==(null===(t=this.commonProv.returnOperCustomization().get(g.a.FORM_READONLY))||void 0===t?void 0:t.IS_READONLY)){var s=null===(o=this.defaultVO[this.psComplexAmountOptions.currenciesOptions.fcName])||void 0===o?void 0:o.itemValue,c=null===(n=this.defaultVO[this.accountTypesOptions.accountTypesOptions.fcName])||void 0===n?void 0:n.selectedObj;if(c)if(null===(i=c.allowedCurrency)||void 0===i?void 0:i.some(function(e){return e.currencyCode==s})){var a=c.allowedCurrency.find(function(e){return e.currencyCode==s});this.setMinmumAmount(e,a.minimumBalance)}else this.setMinmumAmount(e,c.minimumOpeningBalance)}}},{key:"setMinmumAmount",value:function(e,t){if(t){if(!e||e&&e<t){this.commonProv.setValInsideNestedObj(this.psComplexAmountOptions.amountOptions.fcName,t,this.stepperOptions.requestObject);var o=document.querySelector('[psfcname="'.concat(this.psComplexAmountOptions.amountOptions.fcName,'"]'));o&&Object(a.a)(500).subscribe(function(){var e=new FocusEvent("focusout",{bubbles:!0,relatedTarget:o});o.dispatchEvent(e)})}this.showBalErr=e<t}}},{key:"callCurrencyCombinationValidateService",value:function(){var e;(null===(e=this.defaultVO[this.accountListOptions.fcName])||void 0===e?void 0:e.currency)&&this.defaultVO[this.psComplexAmountOptions.currenciesOptions.fcName]&&this.omniPull.validateCurrencyCombination({fromCurrency:+this.defaultVO[this.accountListOptions.fcName].currency,listOfAffectedFields:[this.psComplexAmountOptions.currenciesOptions.fcName],screenVO:this.defaultVO,listOfAccounts:[this.fromAccountRef],toCurrency:+this.defaultVO[this.psComplexAmountOptions.currenciesOptions.fcName].itemValue||this.defaultVO[this.psComplexAmountOptions.currenciesOptions.fcName]})}}])}(N.OmniBasePage)).\u0275fac=function(e){return new(e||ne)(T.Rb(C.a),T.Rb(b.a),T.Rb(y.a),T.Rb(P.e),T.Rb(O.a),T.Rb(h.a),T.Rb(A.a))},ne.\u0275cmp=T.Lb({type:ne,selectors:[["account-opening-fixed-maturity-account"]],viewQuery:function(e,t){var o;1&e&&(T.Wc(U,1),T.Wc(z,1)),2&e&&(T.Bc(o=T.gc())&&(t.fromAccountRef=o.first),T.Bc(o=T.gc())&&(t.amountRef=o.first))},features:[T.Cb],decls:3,vars:4,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step2","",3,"id",4,"psStep"],["step1","",3,"id"],["id","acc_open_fix_mat_acc_panel1",3,"options"],["id","'accountCifBranch' + id",3,"options",4,"ngIf"],[3,"options","onPsChange"],[3,"options",4,"ngIf"],[3,"options","onAmountChanged","onCurrencyChange"],["amountRef",""],["class","validation-message",3,"options",4,"ngIf"],["id","'profitRate' + id",3,"options",4,"ngIf"],["id","'transferFrom'+ id",3,"options","onAccountChange"],["fromAccountRef",""],[1,"ps-toggle-acc-open","fixed-maturity-account-toggle",3,"id","options","onPsChange"],["id","'maturitrytransfer'+ id",3,"options"],[1,"ps-toggle-acc-open-2",3,"id","options","onPsChange"],["id","'profitAccount'+ id",3,"options"],["class","text-warinsg-account-dactivation",3,"options",4,"ngIf"],["id","acc_open_fix_mat_acc_panel2",3,"options"],["id","'accountCifBranch' + id",3,"options"],[3,"options"],[1,"validation-message",3,"options"],["id","'profitRate' + id",3,"options"],[1,"text-warinsg-account-dactivation",3,"options"],["step2","",3,"id"],[1,"component-map-container",3,"options"]],template:function(e,t){1&e&&(T.Xb(0,"ps-template-stepper",0),T.Pc(1,te,18,18,"ps-form-step",1),T.Pc(2,oe,2,2,"ps-form-step",2),T.Wb()),2&e&&(T.pc("options",t.stepperOptions)("id",t.stepperOptions.stepperName),T.Fb(1),T.pc("psStep","step1"),T.Fb(1),T.pc("psStep","step2"))},directives:[w.a,k.a,I.a,S.a,P.o,F,K.a,G.a,q.a,Y.a,L.a,W.a,X.a,H.a],styles:[""]}),ne)},ULj9:function(e,t,o){"use strict";o.d(t,"a",function(){return A});var i,s,c=o("mrSG"),a=o("ZyuK"),p=o("zngb"),u=o("ZF3V"),m=o("DFXC"),h=o("Q0Ba"),y=o("V0Fi"),O=o("fXoL"),b=o("Isd1"),g=o("+n0y"),v=o("iOQE"),_=((s=function(e){function t(e,o,n){var i;return r(this,t),(i=f(this,t,[e,o])).omniPull=n,i.defaultSelectOptions={labelKey:"label_branch_key",placeHolder:"branch_key"},i.branches=[],i}return d(t,e),l(t,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultSelectOptions,this.options)}},{key:"ngOnChanges",value:function(){this.getBranches()}},{key:"getBranches",value:function(){var e=this,t={countryId:this.options.selectedCountryCode?parseInt(this.options.selectedCountryCode):null,regionId:this.options.selectedRegionCode?parseInt(this.options.selectedRegionCode):null,cityId:this.options.selectedCityCode?parseInt(this.options.selectedCityCode):null,mapTypesInclude:"'B'"};this.branches=[],this.omniPull.returnMapAtmBranches(t).then(function(t){if(e.defaultSelectOptions.listOfOptions=[],t&&null!=t.gridModel&&t.gridModel.length>0){for(var o=0;o<t.gridModel.length;o++)e.branches.push({itemValue:t.gridModel[o].vsBranchCode,description:t.gridModel[o].briefDesc,selectedObj:t.gridModel[o]});e.defaultSelectOptions.listOfOptions=e.branches;var n=e.defaultSelectOptions.group.controls[e.defaultSelectOptions.fcName].value;n&&!e.defaultSelectOptions.listOfOptions.some(function(e){return e.itemValue===n})&&e.defaultSelectOptions.group.controls[e.defaultSelectOptions.fcName].setValue(null)}else e.defaultSelectOptions.listOfOptions=[],e.defaultSelectOptions.group.controls[e.defaultSelectOptions.fcName].setValue(null),e.logger.warn(t,"empty response")}).catch(function(e){})}},{key:"onBranchChange",value:function(e){this.loggerP.log("onBranchChange"+e),this.onPsChange.emit(e)}}])}(v.a)).\u0275fac=function(e){return new(e||s)(O.Rb(h.a),O.Rb(m.a),O.Rb(a.a))},s.\u0275cmp=O.Lb({type:s,selectors:[["ps-dropdown-branches"]],inputs:{options:"options"},features:[O.Cb,O.Db],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(O.Xb(0,"ps-select-dropdown",0),O.fc("onPsChange",function(e){return t.onBranchChange(e)}),O.Wb()),2&e&&O.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[v.a],styles:[""]}),s),A=((i=function(e){function t(e,o,n){var i;return r(this,t),(i=f(this,t,[e,o])).omniPull=n,i.defaultOptions={},i}return d(t,e),l(t,[{key:"ngOnInit",value:function(){var e,t;return Object(c.b)(this,void 0,void 0,n().m(function o(){var i,s;return n().w(function(o){for(;;)switch(o.n){case 0:if(this.defaultOptions={countryRegionCityOptions:{countriesOptions:{labelKey:"country__key",placeHolder:"select_country_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.countriesOptions.fcName:"branch_country",group:this.options.group,iconOptions:{iconName:"clipboard"}},regionOptions:{labelKey:"region_key",placeHolder:"region_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.regionOptions.fcName:"branch_region",group:this.options.group},cityOptions:{labelKey:"city_key",placeHolder:"select_city_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.cityOptions.fcName:"branch_city",group:this.options.group}}},this.defaultOptions.branchesOptions={group:this.options.group,fcName:this.options.branchesOptions?this.options.branchesOptions.fcName:"default_branch",placeHolder:(null===(e=this.options.branchesOptions)||void 0===e?void 0:e.placeHolder)?this.options.branchesOptions.placeHolder:"branch_key",labelKey:(null===(t=this.options.branchesOptions)||void 0===t?void 0:t.labelKey)?this.options.branchesOptions.labelKey:"label_branch_key"},this.commonProv.copyObject(this.defaultOptions,this.options),i=this.commonProv.getElementValidations(this.defaultOptions.branchesOptions.fcName),!this.options.parameterToCheck){o.n=2;break}return o.n=1,this.omniPull.checkBranch(this.options.parameterToCheck);case 1:s=o.v,i=this.commonProv.getElementValidations(this.defaultOptions.branchesOptions.fcName),this.commonProv.applyDynScreenDisplay(p.a.ACTION_TYPE_MANDATORY,[this.defaultOptions.branchesOptions.fcName],s.enableCifBranch||this.defaultOptions.branchesOptions.fcName&&!i.IS_VISIBLE?0:i.IS_MANDATORY),o.n=3;break;case 2:this.commonProv.applyDynScreenDisplay(p.a.ACTION_TYPE_MANDATORY,[this.defaultOptions.branchesOptions.fcName],i.IS_MANDATORY);case 3:return o.a(2)}},o,this)}))}},{key:"onSelectBranch",value:function(e){this.onPsChange.emit(e)}},{key:"onChildDropdownSelected",value:function(e){if(e[y.a.SELECTED_DROPDOWN]){var t=e[y.a.SELECTED_DROPDOWN];t===y.a.COUNTRY_DROPDOWN?(this.defaultOptions.branchesOptions.selectedCountryCode=void 0!==e.selectedObj?e.selectedObj.countriesID:null!=e.newValue?e.newValue:null,this.defaultOptions.branchesOptions.selectedRegionCode=null,this.defaultOptions.branchesOptions.selectedCityCode=null):t===y.a.REGION_DROPDOWN?(this.defaultOptions.branchesOptions.selectedRegionCode=void 0!==e.selectedObj?e.selectedObj.countriesRegionID:null!=e.newValue?e.newValue:null,this.defaultOptions.branchesOptions.selectedCityCode=null):t===y.a.CITY_DROPDOWN&&(this.defaultOptions.branchesOptions.selectedCityCode=void 0!==e.selectedObj?e.selectedObj.citiesId:null!=e.newValue?e.newValue:null)}this.defaultOptions.branchesOptions=Object.assign({},this.defaultOptions.branchesOptions)}}])}(u.a)).\u0275fac=function(e){return new(e||i)(O.Rb(h.a),O.Rb(m.a),O.Rb(a.a))},i.\u0275cmp=O.Lb({type:i,selectors:[["ps-complex-select-branch"]],inputs:{options:"options"},features:[O.Cb],decls:3,vars:4,consts:[[1,"ps-complex-swift-benef-creation"],[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(O.Xb(0,"ps-container-complex",0),O.Xb(1,"ps-complex-country-regions-cities",1),O.fc("onPsChange",function(e){return t.onChildDropdownSelected(e)}),O.Wb(),O.Xb(2,"ps-dropdown-branches",1),O.fc("onPsChange",function(e){return t.onSelectBranch(e)}),O.Wb(),O.Wb()),2&e&&(O.Fb(1),O.pc("id",t.id)("options",t.defaultOptions.countryRegionCityOptions),O.Fb(1),O.pc("id",t.id)("options",t.defaultOptions.branchesOptions))},directives:[b.a,g.a,_],styles:[""]}),i)},VEWP:function(o,i,s){"use strict";s.d(i,"a",function(){return C});var c=s("mrSG"),a=s("fXoL"),p=s("4lGw"),u=s("V0Fi"),m=s("ZyuK"),h=s("ZF3V"),y=s("EIUR"),O=s("DFXC"),b=s("zngb"),g=s("Q0Ba"),v=s("Isd1"),_=s("L0og"),A=["complexLookupComponentObj"],C=function(){var o=function(o){function i(e,t,o,n){var s;return r(this,i),(s=f(this,i,[e,t])).commonService=e,s.omniPull=o,s.accountsService=n,s.options={fromTo:"",requestObject:null},s.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!s.options.multiple&&s.options.multiple},s.onAccountChange=new a.o,s.onAccountDeleted=new a.o,s.labelValuesMap=new Map,s.psCurrency=new y.a,s.labelOptions={},s.allType=!1,s}return d(i,o),l(i,[{key:"ngOnInit",value:function(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}},{key:"ngOnChanges",value:function(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}},{key:"loadAccounts",value:function(e){return Object(c.b)(this,void 0,void 0,n().m(function t(){var o,i;return n().w(function(t){for(;;)switch(t.n){case 0:if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0!==this.options.fromTo&&""!==this.options.fromTo){t.n=1;break}return t.a(2,void this.logger.error("lookup_from_to_missing_key"));case 1:o=this.commonService.session.getValueOf(b.a.USERINFO),i=this.prepareRequestData(o),this.returnAccountList(i);case 2:return t.a(2)}},t,this)}))}},{key:"returnAccountList",value:function(t){return Object(c.b)(this,void 0,void 0,n().m(function o(){var i,s,c,a,r=this;return n().w(function(o){for(;;)switch(o.n){case 0:return i=this.commonProv.session.getValueOf(u.a.PERSONALIZATION_CO),this.complexLookupOptions.listOfOptions=void 0,o.n=1,this.omniPull.returnAccounts(t).catch(function(e){r.complexLookupOptions.listOfOptions=[],r.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});case 1:if(!((s=o.v)&&s.gridModel.length>0)){o.n=4;break}if(!this.allType){o.n=3;break}return t.accountType="F",t.permittedGls="F",o.n=2,this.omniPull.returnAccounts(t).catch(function(e){r.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});case 2:(c=o.v)&&c.gridModel.length>0&&(s.gridModel=[].concat(e(s.gridModel),e(c.gridModel)));case 3:this.options.listOfAccounts=s.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(e){return e.accountNumber!==r.options.accountNumber})),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(function(e){return e.accountNumber!==r.options.accountNumber}))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map(function(e,t){return e.rowIndex=t}),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)&&(a="QR"===this.options.purpose?null==i?void 0:i.defaultQrPaymentAccKey:null==i?void 0:i.defaultTransferAccKey,this.complexLookupOptions.listOfOptions.map(function(e){e.personalizeKey&&e.personalizeKey===a&&(r.common.setValInsideNestedObj(r.options.fcName,e.lookupKey,r.options.requestObject),r.common.setValInsideNestedObj(r.options.fcName+"_lookupKey",e.lookupKey,r.options.requestObject))})),o.n=5;break;case 4:this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[];case 5:return o.a(2)}},o,this)}))}},{key:"populateCustomAccounts",value:function(e){var o,n=[],i=function(e,o){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=t(e))||o&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw c}}}}(e);try{for(i.s();!(o=i.n()).done;){var s=o.value,c={briefNameEnglish:s.briefNameEnglish,cifShortNameEnglish:s.cifShortNameEnglish,accountNumber:s.accountNumber,balance:this.psCurrency.transform(null==s.balance?"0.0":s.balance,s.currencyDecimalPoints)+" "+(s.currencyBriefName||s.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==s.availableBalance?"0.0":s.availableBalance,s.currencyDecimalPoints)+" "+(s.currencyBriefName||s.currencyBriefNameEnglish),currencyBriefName:s.currencyBriefName||s.currencyBriefNameEnglish,currencyBriefNameEnglish:s.currencyBriefNameEnglish,currency:s.currency,accountTypeDesc:s.accountTypeDesc,additionalRef:s.additionalRef,ibanAccNo:s.ibanAccNo,accGl:s.accGl,serialNo:s.serialNo,branch:s.branch,cif:s.cif,formattedAccount:this.accountsService.returnFormattedAccount(s).formattedAccount,personalizeKey:s.personalizeKey,nickName:s.nickName,briefName:s.briefName,lookupKey:s.additionalRef,branchDescription:s.branchDescription?s.branchDescription:"",generalLedgerBriefNameEng:s.generalLedgerBriefNameEng?s.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:s.statusDescription,statusCode:s.status,accountFormat:this.accountsService.returnFormattedAccount(s).accountFormat};this.options.multiple&&(c.excludeType=s.excludeType),n.push(c)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"prepareRequestData",value:function(e){var t={};if(e&&e.omniUserVO&&(t={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{var o="";for(var n in this.options.accountAllowedCurrencies)o+=this.options.accountAllowedCurrencies[n]+",";o=o.slice(0,o.lastIndexOf(",")),t.accountAllowedCurrencies=o}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{var i="";for(var s in this.options.accountAllowedTypes)i+=this.options.accountAllowedTypes[s]+",";i=i.slice(0,i.lastIndexOf(",")),t.accountAllowedTypes=i}return t}},{key:"fetchAccountBasedOnCurrency",value:function(e){return this.options.listOfAccounts}},{key:"onChange",value:function(e){this.logger.log(e)}},{key:"populateOwnAccountMap",value:function(){var e,t,o;e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",o)}},{key:"onChangeItem",value:function(e){this.onAccountChange.emit(e)}},{key:"onDeleteItem",value:function(e){e&&this.onAccountDeleted.emit(e)}},{key:"handleMultipleSelection",value:function(){var e=this,t=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(function(t){return e.options.requestObject[e.options.fcName].some(function(e){return e.accountNumber==t.accountNumber})}):[];this.complexLookupOptions.selectedItems=t.filter(function(t){return e.options.setAllAccountsAsSelecetd&&(!t.excludeType||!(t.excludeType.includes(u.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||t.excludeType.includes(u.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!e.options.setAllAccountsAsSelecetd}).map(function(e){return Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})}),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}},{key:"removeAccount",value:function(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(function(t){return e.accountNumber!=t.accountNumber}):[])}},{key:"reset",value:function(){this.complexLookupComponentObj.resetLookUp()}},{key:"refreshAcounts",value:function(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}])}(h.a);return o.\u0275fac=function(e){return new(e||o)(a.Rb(g.a),a.Rb(O.a),a.Rb(m.a),a.Rb(p.a))},o.\u0275cmp=a.Lb({type:o,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,t){var o;(1&e&&a.Wc(A,1),2&e)&&(a.Bc(o=a.gc())&&(t.complexLookupComponentObj=o.first))},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[a.Cb,a.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,t){1&e&&(a.Xb(0,"ps-container-complex",0),a.Xb(1,"ps-complex-lookup",1,2),a.fc("changeItem",function(e){return t.onChangeItem(e)})("onDeleteItem",function(e){return t.onDeleteItem(e)}),a.Wb(),a.Wb()),2&e&&(a.Fb(1),a.pc("id",t.id)("options",t.complexLookupOptions))},directives:[v.a,_.a],styles:[""]}),o}()}}])}();