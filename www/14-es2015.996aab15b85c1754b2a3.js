(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{GIS6:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var i=t("V0Fi"),n=t("ZyuK"),o=t("fXoL");let r=(()=>{class e{constructor(e){this.OmniPull=e}populateCards(a,t){let i=[];for(const n of a)n.cardNo&&i.push({cardNumber:n.cardNo,cardName:n.cardName,oldCardName:n.oldCardName,cardType:n.cardType,cardTypeName:t,posLimitAmount:n.posLimitAmount,withdrawalLimit:n.cardWdLimitAmount,status:n.status,statusCode:n.statusCode,limitCheckingBy:n.limitCheckingBy,currencyBriefName:n.currencyBriefName||n.currencyBriefNameEnglish,currencyBriefNameEnglish:n.currencyBriefNameEnglish,expiryDate:n.expiryDate,currencyCountryFlag:n.currencyCountryFlag,cardNumberMask:n.cardNumberMask,primaryAccount:n.primaryAccount,cardLimit:n.cardLimit,remainingBalance:n.remainingBalance,settlementRate:n.settlementRate,debitOrCredit:t==e.CREDIT_CARD_TYPE_NAME||t==e.DEBIT_CARD_TYPE_NAME?n.debitOrCredit:void 0,outstandingBalance:n.outstandingBalance,ownerName:n.cardHolderName,loyaltyPoint:n.loyaltyPoint,lookupKey:n.cardNo,applicationId:n.applicationId,additionalRef:n.additionalRef,accGl:n.accGl,branch:n.branch,cif:n.cif,currency:n.currency,serialNo:n.serialNo,previewProperty:"cardName",primarySupplementary:n.primarySupplementary,title:n.cardName+" - "+((t==e.CREDIT_CARD_TYPE_NAME||e.DEBIT_CARD_TYPE_NAME)&&n.cardNumberMask||n.cardNo),referenceCard:t==e.PREPAID_CARD_TYPE_NAME?n.referenceCard:void 0,issueDate:t==e.PREPAID_CARD_TYPE_NAME?n.issueDate:void 0,defaultAcc:n.defaultAcc,accnumbs:n.accnumbs,cardCode:n.cardCode,cardRefnum:n.cardRefnum});return i}returnCardList(a){return a.apiCode=-1,new Promise((t,n)=>{this.OmniPull.commonRequestAjax(a.cardType===i.a.CARD_SEGMENT_NAME_PREPAID?e.prepaidCardListEndPoint:e.cardListEndPoint,a).then(e=>{t({gridModel:e.data.gridModel,totalNbRec:e.data.totalNbRec})}).catch(e=>{n(e)})})}}return e.cardListEndPoint="rest/omniCorePull/cardList",e.prepaidCardListEndPoint="rest/omniCorePull/returnPrePaidCardsList",e.CREDIT_CARD_TYPE_NAME="CREDIT",e.DEBIT_CARD_TYPE_NAME="DEBIT",e.PREPAID_CARD_TYPE_NAME="PREPAID",e.\u0275fac=function(a){return new(a||e)(o.bc(n.a))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vbr2:function(e,a,t){"use strict";t.d(a,"a",function(){return C});var i=t("fXoL"),n=t("GIS6"),o=t("V0Fi"),r=t("fOh1"),s=t("zngb"),p=t("QZhd"),c=t("EZLY"),l=t("ofXK"),_=t("BygU"),d=t("KVmc");function u(e,a){if(1&e){const e=i.Yb();i.Xb(0,"div"),i.Xb(1,"ps-container-lookup-option",4),i.fc("clickedCard",function(a){return i.Fc(e),i.ic(2).updateCard(a)}),i.Wb(),i.Wb()}if(2&e){const e=a.$implicit,t=i.ic(2);i.Fb(1),i.pc("id","ps-container-lookup-option_"+t.id)("options",t.getContainerLookUpOptions(e))("itemCard",e)}}function y(e,a){if(1&e&&(i.Xb(0,"div",2),i.Pc(1,u,2,3,"div",3),i.Wb()),2&e){const e=i.ic();i.Fb(1),i.pc("ngForOf",e.options.itemList)}}function m(e,a){if(1&e&&(i.Xb(0,"div",5),i.Sb(1,"ps-label",6),i.Wb()),2&e){const e=i.ic();i.Fb(1),i.pc("options",e.cardLabelOptions)}}let C=(()=>{class e extends c.a{constructor(e,a){super(),this.crdsSrvce=e,this.cdRef=a,this.labelValuesMap=new Map,this.headerMap=new Map,this.showSingleAccount=!1,this.requestMap=new Map,this.editRequestMap=new Map,this.cardLabelOptions={labelKey:"card_list_not_available"},this.onClickCard=new i.o,this.reloadFct=new i.o}ngOnInit(){super.init(),this.populateHeaderValueMap(),null==this.options.showOnlyList&&(this.options.showOnlyList=!1),null==this.options.cardAction&&(this.options.cardAction=!1),this.options&&this.options.listOfOptions&&(this.options.listOfOptions.map((e,a)=>e.rowIndex=a),this.options.itemList=this.options.listOfOptions),this.options&&this.options.noCardsLabel&&(this.cardLabelOptions.labelKey=this.options.noCardsLabel)}getContainerLookUpOptions(e){return this.prepareLookUp(e)}prepareLookUp(e){var a;const t={currencyFlag:"currencyBriefNameEnglish",currencyDescription:"currencyBriefName"};if(t.labelsValueMap=this.labelValuesMap,t.headerMap=this.headerMap,t.formGroup=this.options.group,t.balanceMapping=this.balanceMapping(),t.isEditable=this.options.isEditable,t.translateSubTitle=this.options.translate,t.matCardCssSelectors=e.matCardCssSelectors,t.showInitialCardValues=4,t.fcName=null===(a=this.options)||void 0===a?void 0:a.fcName,this.options.cardAction)t.pageData={},t.actionDetailsOptions=[],t.statementOptions={};else{t.editActionUrl=r.a.serviceUrl.personalizationNicknameEndPoint,t.requestMap=this.requestMap,t.editRequestMap=this.editRequestMap,t.pageData={operID:o.a.CARD_STATEMENT,title:"card_report_key"},t.actionDetailsOptions=[{id:"pin_change",label:"pin_change_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"pin-change",labelOptions:{labelKey:"pin_change_key"}},route:"card-pin-request",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.CHANGE_CREDIT_CARD_PIN:o.a.CHANGE_DEBIT_CARD_PIN,iconName:"pin-change",title:"card_pin_change_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_PIN_CHANGE}}}},{id:"pin_reset",label:"pin_reset_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"pin-reset",labelOptions:{labelKey:"pin_reset_key"}},route:"reset-pin-request",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.RESET_CREDIT_CARD_PIN:o.a.RESET_DEBIT_CARD_PIN,iconName:"pin-reset",title:"card_pin_reset_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_PIN_RESET}}}},{id:"deactivate",labelOptions:{labelKey:"deactivate_key"},buttonIcon:"deactivate",actionUrl:p.a.serviceUrl.commonSubmitAction,label:"deactivate_key",iconName:"square-outline",actionType:"Submit",operId:this.options.type==n.a.DEBIT_CARD_TYPE_NAME?o.a.DEACTIVATE_DEBIT_CARD:this.options.type==n.a.CREDIT_CARD_TYPE_NAME?o.a.DEACTIVATE_CREDIT_CARD:o.a.DEACTIVATE_PREPAID_CARD,postCallFunction:{func(){return new Promise((e,a)=>{e(this.executionClass.reloadList())})},executionClass:this,params:[]}}];const a={id:"renew_card",label:"renew_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"renew-card",labelOptions:{labelKey:"renew_card_key"}},route:"card-management",pageOptions:{operId:o.a.RENEW_DEBIT_CARD,iconName:"renew-card",title:"renew_card_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_RENEW}}}},i={id:"settle_card",label:"settle_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"settle",labelOptions:{labelKey:"settle_card_key"}},route:"credit-card-settlement",pageOptions:{operId:o.a.CREDIT_CARD_SETTLEMENT,iconName:"settle",title:"settle_card_key"},preCallFunction:{func(){return new Promise((e,a)=>{e(this.executionClass.preparesettleScreenData(t.actionDetailsOptions.find(e=>"settle_card"==e.id).actionHyperlink))})},executionClass:this,params:[]},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_SETTLE}}}},s={id:"prepaid_card_request",label:"prepaid_card_request_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"new-card-request",labelOptions:{labelKey:"prepaid_card_request_key"}},route:"prepaid-card-request",pageOptions:{operId:o.a.PREPAID_CARD_REQ,iconName:"new-card-request",title:"prepaid_card_request_key"},navigationOptions:{queryParams:{referenceCard:e.cardNumber,referenceCard_lookupKey:e.cardNumber}}}},c={id:"recharge_card",label:"recharge_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"transfers",labelOptions:{labelKey:"recharge_card_key"}},route:"prepaid-card-recharge",pageOptions:{operId:o.a.PREPAID_CARD_RECHARGE,iconName:"transfers",title:"prepaid_card_recharge_key"},navigationOptions:{queryParams:{toCard:e.cardNumber,toCard_lookupKey:e.cardNumber}}}};"1"!==e.wdLimitOverride&&"1"!==e.posLimitOverride||t.actionDetailsOptions.push({id:"limit_update",label:"limit_update_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"sync",labelOptions:{labelKey:"limit_update_key"}},route:"card-management",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.UPDATE_CREDIT_CARD_LIMIT:o.a.UPDATE_DEBIT_CARD_LIMIT,iconName:"sync",title:"card_limit_update_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_LIMIT_UPDATE,cardType:this.options.type}}}},{id:"upgrade_card",label:"upgrade_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"upgrade-card",labelOptions:{labelKey:"upgrade_card_key"}},route:"upgrade-card",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.UPGRADE_CREDIT_CARD:o.a.UPGRADE_DEBIT_CARD,iconName:"upgrade-card",title:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?"upgrade_credit_card_request_key":"upgrade_debit_card_request_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_UPGRADE}}}}),e.status!==o.a.CARD_STATUS_ACTIVE&&e.statusCode!=o.a.CARD_STATUS_ACTIVE_CODE||t.actionDetailsOptions.push({id:"replace_card",label:"replace_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"edit1",labelOptions:{labelKey:"replace_card_key"}},route:"card-management",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.REPLACE_CREDIT_CARD:o.a.REPLACE_DEBIT_CARD,iconName:"edit1",title:"replace_card_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_REPLACE}}}}),e.status!==o.a.CARD_STATUS_BLOCKED&&e.statusCode!==o.a.CARD_STATUS_BLOCKED_CODE||t.actionDetailsOptions.push({id:"unblock",label:"unblock_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"activate-card",labelOptions:{labelKey:"unblock_key"}},route:"card-management",pageOptions:{operId:this.options.type===n.a.CREDIT_CARD_TYPE_NAME?o.a.UNBLOCK_CREDIT_CARD:o.a.UNBLOCK_DEBIT_CARD,iconName:"activate-card",title:"unblock_card_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_UNBLOCK}}}}),e.status!==o.a.CARD_STATUS_ACTIVE&&e.statusCode!=o.a.CARD_STATUS_ACTIVE_CODE||t.actionDetailsOptions.push({id:"block",label:"block_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"block-card",labelOptions:{labelKey:"block_key"}},route:"card-management",pageOptions:{operId:o.a.BLOCK_DEBIT_CARD,iconName:"block-card",title:"block_card_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_BLOCK}}}}),e.primarySupplementary===o.a.CARD_PRIMARY_TYPE&&"1"===e.allowSuppCard&&t.actionDetailsOptions.push({id:"add_on_card",label:"add_on_card_key",actionHyperlink:{group:this.options.group,iconOptions:{iconName:"edit1",labelOptions:{labelKey:"add_on_card_key"}},route:"supplementary-card-request",pageOptions:{operId:this.options.type==n.a.CREDIT_CARD_TYPE_NAME?o.a.SUPPLEMENTARY_CREDIT_CARD_REQ_OPER_ID:o.a.SUPPLEMENTARY_DEBIT_CARD_REQ_OPER_ID,iconName:"card-input",title:this.options.type==n.a.CREDIT_CARD_TYPE_NAME?"supplementary_credit_card_request_key":"supplementary_debit_card_request_key"},navigationOptions:{queryParams:{action:o.a.CARD_ACTION_TYPE_ADD_ON}}}}),this.options.type===n.a.DEBIT_CARD_TYPE_NAME?this.commonProv.hasAccessOnOperation(o.a.PREPAID_CARD_REQ)&&t.actionDetailsOptions.push(s):this.options.type===n.a.CREDIT_CARD_TYPE_NAME?e.statusCode==o.a.CARD_STATUS_ACTIVE_CODE&&t.actionDetailsOptions.push(i):t.actionDetailsOptions.push(c);const l=new Date(e.expiryDate),_=new Date(e.expiryDate),d=new Date;e.maxRenewPeriod&&l.setMonth(l.getMonth()+e.maxRenewPeriod),d>_&&"1"===e.allowRenew&&Number(e.maxRenewPeriod)>0&&d<=l&&t.actionDetailsOptions.push(a),t.statementOptions={buttonIcon:"list-box",redirectUrl:"card-statement-report"}}return t.reloadFunction={func(){return new Promise((e,a)=>{e(this.executionClass.reloadList())})},executionClass:this,params:[]},t}reloadList(){this.reloadFct.emit()}populateHeaderValueMap(){let e={},a={},t={},i={},o={},r={},s={},p={},c={},l={},_={},d={},u={},y={},m={},C={},E={},A={};e={key:"expiryDate",value:""},a={key:"ownerName",value:""},o={key:"currencyBriefNameEnglish",value:""},r={key:"primaryAccount",value:""},s={key:"primaryAccount",value:""},p={key:"currentWdLimit",value:""},c={key:"remainingWithdrawLimit",value:""},l={key:"posLimitAmount",value:""},_={key:"remainingPosLimit",value:""},d={key:"paymentPercentage",value:""},u={key:"billingCycle",value:""},y={key:"loyaltyPts",value:""},m={key:"remainingBalance",value:""},C={key:"outStanding",value:""},E={key:"primarySupplementary",value:""},A={key:"primaryCard",value:"",showMappingOnNoValue:!0},t={key:"title",value:"title",isEdit:!1,formGroupMap:{placeHolder:"enter_card_type",fcName:"cardType"}},i={key:"subTitle",value:"ownerName",isEdit:!0,formGroupMap:{placeHolder:"enter_cardName",fcName:"cardName"}},this.labelValuesMap.set("primary_supplementary_key",E),this.labelValuesMap.set("primary_card_key",A),this.labelValuesMap.set("currency_key",o),this.requestMap.set("nickNameNumber","key"),this.requestMap.set("oldNickName","ownerName"),this.editRequestMap.set("newNickName","ownerName"),this.editRequestMap.set("type","C"),this.options.type===n.a.CREDIT_CARD_TYPE_NAME?(this.labelValuesMap.set("settlement_account_key",s),this.labelValuesMap.set("withdrawal_limit_key",p),this.labelValuesMap.set("remaining_withdrawal_limit_key",c),this.labelValuesMap.set("pos_limit_key",l),this.labelValuesMap.set("remaining_pos_limit_key",_),this.labelValuesMap.set("payment_percentage_key",d),this.labelValuesMap.set("billing_cycle_key",u),this.labelValuesMap.set("loyalty_points_key",y),this.labelValuesMap.set("available_balance_key",m),this.labelValuesMap.set("outstanding_balance_key",C)):this.labelValuesMap.set("primary_account_key",r),this.labelValuesMap.set("expiry_date_key",e),this.headerMap.set("title",t),this.headerMap.set("subTitle",i)}updateCard(e){e&&this.options.listOfOptions&&(this.options.itemList=this.options.listOfOptions.filter(a=>a===e),this.options.item=this.options.itemList[0],this.showSingleAccount=!this.showSingleAccount,this.options.showItemPopUp=!this.options.showItemPopUp),this.onClickCard.emit(this.options)}balanceMapping(){return[{key:"outstanding_balance_key",value:"outstandingBalance"},{key:"available_balance_key",value:"remainingBalance"}]}ngAfterViewChecked(){this.cdRef.markForCheck()}preparesettleScreenData(e){var a,t,i;const n=null===(a=this.commonProv.session.getValueOf(s.a.USERINFO).businessProfiles.find(e=>e.operVO.OPER_ID===o.a.CARDS_SEC_OPER_ID))||void 0===a?void 0:a.children.find(e=>e.operVO.OPER_ID===o.a.CREDIT_CARD_SETTLEMENT_SEC_OPER_ID),r=null==n?void 0:n.children.find(e=>e.operVO.OPER_ID===o.a.CREDIT_CARD_SETTLEMENT);e.navigationOptions.queryParams.ScreenVO={creditCard:e.navigationOptions.queryParams.cardNumber,creditCard_lookupKey:e.navigationOptions.queryParams.cardNumber,defaultSettlementAccount:!(null===(t=null==r?void 0:r.operAppChnlVO)||void 0===t?void 0:t.PARAM)||(null===(i=JSON.parse(r.operAppChnlVO.PARAM))||void 0===i?void 0:i.defaultSettlementAccount)}}}return e.\u0275fac=function(a){return new(a||e)(i.Rb(n.a),i.Rb(i.i))},e.\u0275cmp=i.Lb({type:e,selectors:[["ps-option-card"]],inputs:{options:"options"},outputs:{onClickCard:"onClickCard",reloadFct:"reloadFct"},features:[i.Cb],decls:3,vars:2,consts:[["class","ps-options-card",4,"ngIf"],["class","no-account-text",4,"ngIf"],[1,"ps-options-card"],[4,"ngFor","ngForOf"],[3,"id","options","itemCard","clickedCard"],[1,"no-account-text"],[3,"options"]],template:function(e,a){1&e&&(i.Xb(0,"ps-template-list"),i.Pc(1,y,2,1,"div",0),i.Pc(2,m,2,1,"div",1),i.Wb()),2&e&&(i.Fb(1),i.pc("ngIf",(null==a.options||null==a.options.itemList?null:a.options.itemList.length)>0),i.Fb(1),i.pc("ngIf",!a.options||!a.options.itemList||0===a.options.itemList.length))},directives:[c.a,l.o,l.n,_.a,d.a],styles:[""]}),e})()}}]);