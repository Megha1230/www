(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+BRL":function(t,o,e){"use strict";e.d(o,"a",function(){return a});var i=e("DFXC"),s=e("Q0Ba"),n=e("BYmO"),c=e("fXoL");let a=(()=>{class t extends n.a{constructor(t,o){super(t,o),this.options={},this.defaultOptions={}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}onInputChanged(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(c.Rb(s.a),c.Rb(i.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["ps-input-free-text"]],inputs:{options:"options"},features:[c.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(c.Xb(0,"ps-keyin-input",0),c.fc("onPsChange",function(t){return o.onInputChanged(t)}),c.Wb()),2&t&&c.pc("id",o.id)("options",o.defaultOptions)},directives:[n.a],styles:[""]}),t})()},"41l2":function(t,o,e){"use strict";e.d(o,"a",function(){return p});var i=e("mrSG"),s=e("ZyuK"),n=e("iOQE"),c=e("DFXC"),a=e("Q0Ba"),l=e("fXoL");let p=(()=>{class t extends n.a{constructor(t,o,e){super(t,o),this.omniPull=e,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(t=>{if(t){const o=t.get(this.options.fcName);o&&o.LOV_TYPE_ID&&o.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var t;return Object(i.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(t=this.defaultDropDownLovOptions.listOfOptions)||void 0===t?void 0:t.length)){const t=this.commonProv.getElementValidations(this.options.fcName);if(t&&t.LOV_TYPE_ID&&(this.options.lovTypeId=t.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const t=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);t&&(this.options.lovAdminFilterParamName=t[this.options.lovAdminFilterParamName])}const o={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},e=yield this.omniPull.returnLovTypesValues(o).catch(t=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",t)});if(this.defaultDropDownLovOptions.listOfOptions=[],e&&e.length>0){for(const t of e){const o={itemValue:t.itemValue,description:t.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(t.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:t};o.selectedObj[this.options.fcName]=t.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(o)}this.showLovDropdown=!0}}})}selectDropDownChange(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(l.Rb(a.a),l.Rb(c.a),l.Rb(s.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[l.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(l.Xb(0,"ps-select-dropdown",0),l.fc("onPsChange",function(t){return o.selectDropDownChange(t)}),l.Wb()),2&t&&l.pc("id",o.id)("options",o.defaultDropDownLovOptions)},directives:[n.a],styles:[""]}),t})()},BcCD:function(t,o,e){"use strict";e.d(o,"a",function(){return u});var i=e("zngb"),s=e("JpVU"),n=e("DFXC"),c=e("qEF5"),a=e("Q0Ba"),l=e("ZyuK"),p=e("r40+"),r=e("fXoL");let u=(()=>{class t extends s.a{constructor(t,o,e){super(t,o,e),this.commonProv=t,this.dateOptions={},this.omniPull=c.a.injectionHandler(l.a)}ngOnInit(){this.commonProv.copyObject(this.dateOptions,this.options,!1);const t=this.omniPull.omniCommon.session.getValueOf(i.a.preLoginResponse).parameters;this.dateOptions.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat.parameterVal:"DD/MM/YYYY",this.dateOptions.pickerFormat=this.dateOptions.displayFormat}ngOnChanges(){this.options&&this.options.min&&(this.dateOptions.min=this.options.min),this.options&&this.options.max&&(this.dateOptions.max=this.options.max)}dateChanged(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(r.Rb(a.a),r.Rb(n.a),r.Rb(p.a))},t.\u0275cmp=r.Lb({type:t,selectors:[["ps-date-day-month-year"]],inputs:{options:"options"},features:[r.Cb,r.Db],decls:1,vars:2,consts:[[1,"ps-day-month-year",3,"options","id","onPsChange","onPsInit"]],template:function(t,o){1&t&&(r.Xb(0,"ps-keyin-date",0),r.fc("onPsChange",function(t){return o.dateChanged(t)})("onPsInit",function(t){return o.onInit(t)}),r.Wb()),2&t&&r.pc("options",o.dateOptions)("id",o.id)},directives:[s.a],styles:[""]}),t})()},OEOT:function(t,o,e){"use strict";e.d(o,"a",function(){return l});var i=e("DFXC"),s=e("Q0Ba"),n=e("BcCD"),c=e("r40+"),a=e("fXoL");let l=(()=>{class t extends n.a{constructor(t,o,e){super(t,o,e),this.commonProv=t,this.dateDayMonthYearOptions={min:new Date}}ngOnInit(){this.commonProv.copyObject(this.dateDayMonthYearOptions,this.options,!1)}dataChanged(t){this.onPsChange.emit(t)}superWriteValue(t){super.writeValue(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(s.a),a.Rb(i.a),a.Rb(c.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-date-day-month-year-future"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"options","id","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-date-day-month-year",0),a.fc("onPsChange",function(t){return o.dataChanged(t)}),a.Wb()),2&t&&a.pc("options",o.dateDayMonthYearOptions)("id",o.id)},directives:[n.a],styles:[""]}),t})()},P50S:function(t,o,e){"use strict";e.d(o,"a",function(){return l});var i=e("V0Fi"),s=e("DFXC"),n=e("Q0Ba"),c=e("41l2"),a=e("fXoL");let l=(()=>{class t extends c.a{constructor(t,o){super(t,o),this.defaultSelectOptions={lovTypeId:i.a.SELLLEMENT_METHOD_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate(this.options.labelKey?this.options.labelKey:"settlement_method_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate(this.options.placeHolder?this.options.placeHolder:"select_settlement_method_key")}onChangeLov(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(n.a),a.Rb(s.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-lov-settlement-method"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-dropdown-lov",0),a.fc("onPsChange",function(t){return o.onChangeLov(t)}),a.Wb()),2&t&&a.pc("id",o.id)("options",o.defaultSelectOptions)},directives:[c.a],styles:[""]}),t})()},PCz6:function(t,o,e){"use strict";e.d(o,"a",function(){return d});var i=e("fXoL"),s=e("V0Fi"),n=e("zngb"),c=e("QZhd"),a=e("Q0Ba"),l=e("EZLY"),p=e("ofXK"),r=e("BygU");function u(t,o){if(1&t){const t=i.Yb();i.Xb(0,"div"),i.Xb(1,"ps-container-lookup-option",3),i.fc("clickedCard",function(o){return i.Fc(t),i.ic(2).updateCard(o)}),i.Wb(),i.Wb()}if(2&t){const t=o.$implicit,e=i.ic(2);i.Fb(1),i.pc("id","ps-container-lookup-option_"+e.id)("options",e.getContainerLookUpOptions(t))("itemCard",t)}}function h(t,o){if(1&t&&(i.Xb(0,"div",1),i.Pc(1,u,2,3,"div",2),i.Wb()),2&t){const t=i.ic();i.Fb(1),i.pc("ngForOf",t.options.itemList)}}let d=(()=>{class t extends l.a{constructor(t,o){super(),this.cdRef=o,this.onClickCard=new i.o,this.containerLookUpOptions={},this.labelValuesMap=new Map,this.headerMap=new Map,this.showSingleAccount=!1,this.requestMap=new Map,this.editRequestMap=new Map}ngOnInit(){var t;super.init(),this.populateHeaderValueMap(),this.userInformation=this.commonProv.session.getValueOf(n.a.USERINFO),this.tradeFinSec=null===(t=this.userInformation)||void 0===t?void 0:t.businessProfiles.find(t=>t.operVO.OPER_ID===s.a.TRADE_FIN_OPER_ID),null==this.options.showOnlyList&&(this.options.showOnlyList=!1),this.options&&this.options.listOfOptions&&(this.options.listOfOptions.map((t,o)=>t.rowIndex=o),this.options.itemList=this.options.listOfOptions)}getContainerLookUpOptions(t){var o,e;const i={currencyDescription:"currencyBriefName",currencyFlag:"currencyBriefNameEnglish"};return i.labelsValueMap=this.labelValuesMap,i.headerMap=this.headerMap,i.formGroup=this.options.group,i.balanceMapping=c.a.oper_ID!==s.a.MY_FACILITIES_OPER_ID?this.balanceMapping():null,i.isEditable=this.options.isEditable,i.requestMap=this.requestMap,i.editRequestMap=this.editRequestMap,i.itemList=this.options.itemList,c.a.oper_ID===s.a.MY_FACILITIES_OPER_ID&&"A"===t.facilityStatus&&(i.actionDetailsOptions=[{id:"facility_statement_key",label:"facility_statement_key",actionHyperlink:{iconOptions:{iconName:"document",labelOptions:{labelKey:"facility_statement_key"}},route:"facility-statement",pageOptions:{operId:s.a.FACILITY_STATEMENT_OPER_ID,iconName:"edit1",title:"facility_statement_key"},navigationOptions:{queryParams:{}}}},{id:"settlement_schedule_key",label:"settlement_schedule_key",actionHyperlink:{iconOptions:{iconName:"document",labelOptions:{labelKey:"settlement_schedule_key"}},route:"repayment-schedule-report",pageOptions:{operId:s.a.SETTLEMENT_SCHEDULE_OPER_ID,iconName:"document",title:"settlement_schedule_key"},navigationOptions:{queryParams:{}}}},(null===(o=this.tradeFinSec)||void 0===o?void 0:o.children.some(t=>t.operVO.OPER_ID===s.a.LC_REQ_OPER_ID))&&t.isEligibleLC?{label:"request_new_lc_key",actionHyperlink:{iconOptions:{iconName:"edit1",labelOptions:{labelKey:"request_new_lc_key"}},route:"letter-of-credit-request",pageOptions:{operId:s.a.LC_REQ_OPER_ID,iconName:"document",title:"request_new_lc_key"},navigationOptions:{queryParams:{disableCustomComponents:!0,settlementMethod:"I",facilityDetails:t.facilityNumber,facilityDetails_lookupKey:t.facilityNumber}}}}:{},(null===(e=this.tradeFinSec)||void 0===e?void 0:e.children.some(t=>t.operVO.OPER_ID===s.a.LG_REQ_OPER_ID))&&t.isEligibleLG?{label:"request_new_lg_key",actionHyperlink:{iconOptions:{iconName:"edit1",labelOptions:{labelKey:"request_new_lg_key"}},route:"letter-of-guarantee",pageOptions:{operId:s.a.LG_REQ_OPER_ID,iconName:"document",title:"request_new_lg_key"},navigationOptions:{queryParams:{disableCustomComponents:!0,facilityDetails:t.facilityNumber,facilityDetails_lookupKey:t.facilityNumber}}}}:{}]),this.containerLookUpOptions.statementOptions={buttonIcon:"list-box",redirectUrl:"facility-statement-report"},i}populateHeaderValueMap(){let t={},o={},e={},i={},s={},n={},c={},a={},l={},p={},r={};t={key:"facilityAmount",value:"0.0"},c={key:"facilityType",value:"",isDetailOption:!1},a={key:"facilityTypeDesc",value:"",isDetailOption:!1},e={key:"utilizedAmount",value:""},i={key:"unutilizedAmount",value:"0.0"},n={key:"outstanding",value:"",isDetailOption:!1},o={key:"expiryDate",value:"--/--/----",isDetailOption:!1},s={key:"branchName",value:"",showMappingOnNoValue:!0},r={key:"statusDesc",value:"",showMappingOnNoValue:!0},l={key:"title",value:"facilityNumber",isEdit:!1,formGroupMap:{placeHolder:"facilityNumber",fcName:"facilityNoTitle"}},p={key:"subTitle",value:"revolvingOneOffDesc",isEdit:!1},this.labelValuesMap.set("facility_amount_key",t),this.labelValuesMap.set("utilized_key",e),this.labelValuesMap.set("unutilized_key",i),this.options.isFacilityActive&&this.labelValuesMap.set("outstanding_key",n),this.labelValuesMap.set("type_key",a),this.labelValuesMap.set("expiry_date_key",o),this.labelValuesMap.set("branch_key",s),this.labelValuesMap.set("status_key",r),this.headerMap.set("title",l),this.headerMap.set("subTitle",p)}updateCard(t){t&&this.options.listOfOptions&&(this.options.itemList=this.options.listOfOptions.filter(o=>o===t),this.options.item=this.options.itemList[0],this.showSingleAccount=!this.showSingleAccount,this.options.showItemPopUp=!this.options.showItemPopUp),this.onClickCard.emit(this.options)}balanceMapping(){return[{key:"facility_amount_key",value:"facilityAmount"},{key:"unutilized_amount_key",value:"unutilizedAmount"}]}ngAfterViewChecked(){this.cdRef.markForCheck()}}return t.\u0275fac=function(o){return new(o||t)(i.Rb(a.a),i.Rb(i.i))},t.\u0275cmp=i.Lb({type:t,selectors:[["ps-option-facility"]],inputs:{options:"options"},outputs:{onClickCard:"onClickCard"},features:[i.Cb],decls:2,vars:1,consts:[["class","ps-options-facility",4,"ngIf"],[1,"ps-options-facility"],[4,"ngFor","ngForOf"],[3,"id","options","itemCard","clickedCard"]],template:function(t,o){1&t&&(i.Xb(0,"ps-template-list"),i.Pc(1,h,2,1,"div",0),i.Wb()),2&t&&(i.Fb(1),i.pc("ngIf",(null==o.options||null==o.options.itemList?null:o.options.itemList.length)>0))},directives:[l.a,p.o,p.n,r.a],styles:[""]}),t})()},S7SP:function(t,o,e){"use strict";e.d(o,"a",function(){return p});var i=e("V0Fi"),s=e("ZyuK"),n=e("iOQE"),c=e("DFXC"),a=e("Q0Ba"),l=e("fXoL");let p=(()=>{class t extends n.a{constructor(t,o,e){super(t,o),this.commonProv=t,this.loggerP=o,this.omniPull=e,this.defaultSelectOptions={}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.returnTFSDocumentType()}returnTFSDocumentType(){this.omniPull.returnTFSDocumentType({docType:this.options.docType||i.a.RETURN_ALL_DOCTYPE_PARAM,code:this.options.code}).then(t=>{if(this.defaultSelectOptions.listOfOptions=[],null!=t&&null!=t.gridModel&&t.gridModel.length>0)for(const o of t.gridModel)this.defaultSelectOptions.listOfOptions.push({itemValue:o.code,description:o.longName,selectedObj:o})},t=>{this.logger.error("Error: While fetching data : ",t)})}onDocTypeChange(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(l.Rb(a.a),l.Rb(c.a),l.Rb(s.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ps-dropdown-tfs-document-type"]],inputs:{options:"options"},features:[l.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange","onPsInit"]],template:function(t,o){1&t&&(l.Xb(0,"ps-select-dropdown",0),l.fc("onPsChange",function(t){return o.onDocTypeChange(t)})("onPsInit",function(t){return o.onInit(t)}),l.Wb()),2&t&&l.pc("id",o.id)("options",o.defaultSelectOptions)},directives:[n.a],styles:[""]}),t})()},UTjL:function(t,o,e){"use strict";e.d(o,"a",function(){return O});var i=e("fXoL"),s=e("ZyuK"),n=e("BYmO"),c=e("DFXC"),a=e("qEF5"),l=e("Q0Ba"),p=e("woXy"),r=e("zngb"),u=e("ofXK"),h=e("ilDp");const d=function(t){return{disableContent:t}};function f(t,o){if(1&t){const t=i.Yb();i.Xb(0,"ps-action-icon",3),i.fc("onClick",function(){return i.Fc(t),i.ic().getScannedData(!0)}),i.Wb()}if(2&t){const t=i.ic();i.pc("id","QrScannerIcon")("ngClass",i.sc(3,d,t.isInReadOnlyScreen))("options",t.actionOption)}}const m=function(t){return{colAcc:t}};let O=(()=>{class t extends n.a{constructor(t,o,e,s){super(t,o),this.omniPull=e,this.nav=s,this.getScannedQr=new i.o,this.actionOption={},this.custMode&&(this.options.showScannerIcon=!0)}ngOnInit(){var t;let o=this.common.returnOperCustomization();this.isInReadOnlyScreen=1==(null===(t=o.get(r.a.FORM_READONLY))||void 0===t?void 0:t.IS_READONLY),a.a.isNotNull(this.options)&&(this.options.hideValueOnError=!0),this.actionOption={iconName:"qr_code_scanner",allowCust:!0,group:this.options.group}}onChangeEvent(t){this.onPsChange.emit(t)}getScannedData(t){this.custMode||(0==this.options.forceTriggerChange&&(this.options.forceTriggerChange=!0),this.commonProv.scanQRCode().then(o=>{var e,i;if(o){o=JSON.parse(o),this.commonProv.setValInsideNestedObj(this.options.fcName,null===(e=o.AccountRef)||void 0===e?void 0:e.split("-")[1],this.options.requestObject?this.options.requestObject:{});const s=Object.assign(Object.assign({},o),{accountNumber:null===(i=o.AccountRef)||void 0===i?void 0:i.split("-")[1]});this.getScannedQr.emit([s,t])}}).catch(t=>{this.logger.error("something went wrong",t),this.nav.navigateBackward()}))}}return t.\u0275fac=function(o){return new(o||t)(i.Rb(l.a),i.Rb(c.a),i.Rb(s.a),i.Rb(p.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["ps-input-account-number"]],inputs:{options:"options"},outputs:{getScannedQr:"getScannedQr"},features:[i.Cb],decls:3,vars:6,consts:[[3,"ngClass"],[3,"id","options","onPsChange","onPsEmpty"],["class","scanQrIcon",3,"id","ngClass","options","onClick",4,"ngIf"],[1,"scanQrIcon",3,"id","ngClass","options","onClick"]],template:function(t,o){1&t&&(i.Xb(0,"div",0),i.Xb(1,"ps-keyin-input",1),i.fc("onPsChange",function(t){return o.onChangeEvent(t)})("onPsEmpty",function(t){return o.onEmpty(t)}),i.Wb(),i.Pc(2,f,1,5,"ps-action-icon",2),i.Wb()),2&t&&(i.pc("ngClass",i.sc(4,m,o.options.showScannerIcon||o.custMode)),i.Fb(1),i.pc("id",o.id)("options",o.options),i.Fb(1),i.pc("ngIf",o.options.showScannerIcon||o.custMode))},directives:[u.m,n.a,u.o,h.a],styles:[""]}),t})()},V52E:function(t,o,e){"use strict";e.d(o,"a",function(){return b});var i=e("ZF3V"),s=e("DFXC"),n=e("Q0Ba"),c=e("V0Fi"),a=e("fXoL"),l=e("Isd1"),p=e("+n0y"),r=e("+BRL"),u=e("/QlS"),h=e("ofXK"),d=e("mrSG"),f=e("ZyuK"),m=e("iOQE");let O=(()=>{class t extends m.a{constructor(t,o,e){super(t,o),this.commonProv=t,this.loggerP=o,this.omniPull=e,this.onPostalCodeChange=new a.o,this.defaultSelectOptions={labelKey:"postal_codes_key",placeHolder:"postal_codes_key",listOfOptions:[]}}ngOnChanges(){this.options.selectedCountryCode&&this.options.selectedRegionCode&&this.returnPostalCodes()}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options)}returnPostalCodes(){return Object(d.b)(this,void 0,void 0,function*(){const t={countriesCode:parseInt(this.options.selectedCountryCode),regionsCode:parseInt(this.options.selectedRegionCode),operId:c.a.POSTAL_CODE_OPER_ID},o=yield this.omniPull.returnPostalCodes(t).catch(t=>{this.logger.error("Error ! while fetching postalCodes in PsDropdownPostalCodesComponent",t)});if(o&&o.gridModel&&o.gridModel.length>0){this.defaultSelectOptions.listOfOptions=[];for(const t of o.gridModel)this.defaultSelectOptions.listOfOptions.push({itemValue:t.postalCodeCode,description:t.briefDesc?t.postalCodeCode+" - "+t.briefDesc:t.postalCodeCode,selectedObj:t})}})}onChange(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(n.a),a.Rb(s.a),a.Rb(f.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-dropdown-postal-codes"]],inputs:{options:"options"},outputs:{onPostalCodeChange:"onPostalCodeChange"},features:[a.Cb,a.Db],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-select-dropdown",0),a.fc("onPsChange",function(t){return o.onChange(t)}),a.Wb()),2&t&&a.pc("id",o.id)("options",o.defaultSelectOptions)},directives:[m.a],styles:[""]}),t})();function y(t,o){if(1&t&&a.Sb(0,"ps-dropdown-postal-codes",2),2&t){const t=a.ic();a.pc("options",t.defaultOptions.postalCodesOptions)}}let b=(()=>{class t extends i.a{constructor(t,o){super(t,o),this.commonProv=t,this.loggerP=o,this.defaultOptions={}}ngOnInit(){super.init(),this.commonProv.copyObject(this.defaultOptions,this.options,!1)}countryChanged(t){void 0!==t&&(this.defaultOptions.regionOptions.selectedCountryCode=t.itemValue,this.defaultOptions.regionOptions=Object.assign({},this.defaultOptions.regionOptions))}onRegionDDChanged(t){var o;void 0!==t&&(t.selectedDropdown===c.a.COUNTRY_DROPDOWN?(this.defaultOptions.regionOptions.selectedCountryCode=t.itemValue,this.defaultOptions.regionOptions=Object.assign({},this.defaultOptions.regionOptions),this.defaultOptions.postalCodesOptions&&(this.defaultOptions.postalCodesOptions.selectedCountryCode=t.itemValue,this.defaultOptions.postalCodesOptions=Object.assign({},this.defaultOptions.postalCodesOptions))):t.selectedDropdown===c.a.REGION_DROPDOWN&&this.defaultOptions.postalCodesOptions&&(this.defaultOptions.postalCodesOptions.selectedRegionCode=(null===(o=t.selectedObj)||void 0===o?void 0:o.countriesRegionCode)||t.itemValue,this.defaultOptions.postalCodesOptions=Object.assign({},this.defaultOptions.postalCodesOptions)))}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(n.a),a.Rb(s.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-complex-address"]],inputs:{options:"options"},features:[a.Cb],decls:6,vars:6,consts:[[3,"id","options","onPsChange"],["id","input_free_text",3,"options"],[3,"options"],[3,"options",4,"ngIf"]],template:function(t,o){1&t&&(a.Xb(0,"ps-container-complex"),a.Xb(1,"ps-complex-country-regions-cities",0),a.fc("onPsChange",function(t){return o.onRegionDDChanged(t)}),a.Wb(),a.Sb(2,"ps-input-free-text",1),a.Sb(3,"ps-input-free-text",1),a.Sb(4,"ps-input-varchar",2),a.Pc(5,y,1,1,"ps-dropdown-postal-codes",3),a.Wb()),2&t&&(a.Fb(1),a.pc("id",o.id)("options",o.defaultOptions),a.Fb(1),a.pc("options",o.defaultOptions.streetOptions),a.Fb(1),a.pc("options",o.defaultOptions.buildingOptions),a.Fb(1),a.pc("options",o.defaultOptions.poBoxInputOptions),a.Fb(1),a.pc("ngIf",o.defaultOptions.postalCodesOptions))},directives:[l.a,p.a,r.a,u.a,h.o,O],styles:[""]}),t})()},VEWP:function(t,o,e){"use strict";e.d(o,"a",function(){return O});var i=e("mrSG"),s=e("fXoL"),n=e("4lGw"),c=e("V0Fi"),a=e("ZyuK"),l=e("ZF3V"),p=e("EIUR"),r=e("DFXC"),u=e("zngb"),h=e("Q0Ba"),d=e("Isd1"),f=e("L0og");const m=["complexLookupComponentObj"];let O=(()=>{class t extends l.a{constructor(t,o,e,i){super(t,o),this.commonService=t,this.omniPull=e,this.accountsService=i,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new s.o,this.onAccountDeleted=new s.o,this.labelValuesMap=new Map,this.psCurrency=new p.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(t){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(t){return Object(i.b)(this,void 0,void 0,function*(){if(null!=t&&(this.options=t),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const o=this.commonService.session.getValueOf(u.a.USERINFO),e=this.prepareRequestData(o);this.returnAccountList(e)})}returnAccountList(t){return Object(i.b)(this,void 0,void 0,function*(){const o=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const e=yield this.omniPull.returnAccounts(t).catch(t=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});if(e&&e.gridModel.length>0){if(this.allType){t.accountType="F",t.permittedGls="F";const o=yield this.omniPull.returnAccounts(t).catch(t=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",t)});o&&o.gridModel.length>0&&(e.gridModel=[...e.gridModel,...o.gridModel])}if(this.options.listOfAccounts=e.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(t=>t.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(t=>t.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((t,o)=>t.rowIndex=o),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let t="QR"===this.options.purpose?null==o?void 0:o.defaultQrPaymentAccKey:null==o?void 0:o.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(o=>{o.personalizeKey&&o.personalizeKey===t&&(this.common.setValInsideNestedObj(this.options.fcName,o.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",o.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(t){const o=[];for(const e of t){const t={briefNameEnglish:e.briefNameEnglish,cifShortNameEnglish:e.cifShortNameEnglish,accountNumber:e.accountNumber,balance:this.psCurrency.transform(null==e.balance?"0.0":e.balance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==e.availableBalance?"0.0":e.availableBalance,e.currencyDecimalPoints)+" "+(e.currencyBriefName||e.currencyBriefNameEnglish),currencyBriefName:e.currencyBriefName||e.currencyBriefNameEnglish,currencyBriefNameEnglish:e.currencyBriefNameEnglish,currency:e.currency,accountTypeDesc:e.accountTypeDesc,additionalRef:e.additionalRef,ibanAccNo:e.ibanAccNo,accGl:e.accGl,serialNo:e.serialNo,branch:e.branch,cif:e.cif,formattedAccount:this.accountsService.returnFormattedAccount(e).formattedAccount,personalizeKey:e.personalizeKey,nickName:e.nickName,briefName:e.briefName,lookupKey:e.additionalRef,branchDescription:e.branchDescription?e.branchDescription:"",generalLedgerBriefNameEng:e.generalLedgerBriefNameEng?e.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:e.statusDescription,statusCode:e.status,accountFormat:this.accountsService.returnFormattedAccount(e).accountFormat};this.options.multiple&&(t.excludeType=e.excludeType),o.push(t)}return o}prepareRequestData(t){let o={};if(t&&t.omniUserVO&&(o={userCifNo:t.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(o={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(o.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(o.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(o.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(o.endUserId=this.options.endUserId),null!=this.options.fromCurrency?o.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(o.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)o.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let t="";for(const o in this.options.accountAllowedCurrencies)t+=this.options.accountAllowedCurrencies[o]+",";t=t.slice(0,t.lastIndexOf(",")),o.accountAllowedCurrencies=t}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)o.accountAllowedTypes=this.options.accountAllowedTypes;else{let t="";for(const o in this.options.accountAllowedTypes)t+=this.options.accountAllowedTypes[o]+",";t=t.slice(0,t.lastIndexOf(",")),o.accountAllowedTypes=t}return o}fetchAccountBasedOnCurrency(t){return this.options.listOfAccounts}onChange(t){this.logger.log(t)}populateOwnAccountMap(){let t={},o={},e={};t={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},o={key:"currentBalance",value:"0.0",isEdit:!1},e={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",t),this.labelValuesMap.set("balance_key",o),this.labelValuesMap.set("available_balance_key",e)}onChangeItem(t){this.onAccountChange.emit(t)}onDeleteItem(t){t&&this.onAccountDeleted.emit(t)}handleMultipleSelection(){const t=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(t=>this.options.requestObject[this.options.fcName].some(o=>o.accountNumber==t.accountNumber)):[];this.complexLookupOptions.selectedItems=t.filter(t=>this.options.setAllAccountsAsSelecetd&&(!t.excludeType||!(t.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||t.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(t=>Object.assign(Object.assign({item:t[t.previewProperty]},t),{itemLookup:t.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(t){t&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(o=>t.accountNumber!=o.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(t){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(t)}}return t.\u0275fac=function(o){return new(o||t)(s.Rb(h.a),s.Rb(r.a),s.Rb(a.a),s.Rb(n.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(t,o){if(1&t&&s.Wc(m,1),2&t){let t;s.Bc(t=s.gc())&&(o.complexLookupComponentObj=t.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[s.Cb,s.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(t,o){1&t&&(s.Xb(0,"ps-container-complex",0),s.Xb(1,"ps-complex-lookup",1,2),s.fc("changeItem",function(t){return o.onChangeItem(t)})("onDeleteItem",function(t){return o.onDeleteItem(t)}),s.Wb(),s.Wb()),2&t&&(s.Fb(1),s.pc("id",o.id)("options",o.complexLookupOptions))},directives:[d.a,f.a],styles:[""]}),t})()},cDcX:function(t,o,e){"use strict";e.d(o,"a",function(){return f});var i=e("mrSG"),s=e("fXoL"),n=e("3Pt+"),c=e("ZyuK"),a=e("ZF3V"),l=e("DFXC"),p=e("Q0Ba"),r=e("PCz6"),u=e("Isd1"),h=e("L0og");const d=["complexLookupComponentObj"];let f=(()=>{class t extends a.a{constructor(t,o,e){super(t,o),this.commonService=t,this.omniPull=e,this.options={requestObject:null},this.onFacilityChange=new s.o,this.formGroup=new n.f({}),this.complexLookupOptions={requestObject:null,notFoundMessage:"no_facility_found_key"},this.labelValuesMap=new Map}ngOnInit(){super.init(),this.loadfacilityDetails(),this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject,this.complexLookupOptions.component=this.options&&this.options.component?this.options.component:r.a}loadfacilityDetails(){this.returnFacilityDetails({})}returnFacilityDetails(t){return Object(i.b)(this,void 0,void 0,function*(){const o=yield this.omniPull.returnFinancingAccess(t).catch(t=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching facilities in PsLookupFacilityDetailsComponent :",t)});this.complexLookupOptions.listOfOptions=o&&o.gridModel&&o.gridModel.length>0?this.populateFacilities(o.gridModel):[]})}onChangeItem(t){this.onFacilityChange.emit(t.item)}populateFacilities(t){this.listOfFacilities=[];for(const o of t)this.listOfFacilities.push({facilityNo:o.facilityNo,facilityAmount:o.facilityAmount+" "+o.currency,expiryDate:o.expiryDate,unutilizedAmount:o.unutilizedAmount,branchName:o.branchName,key:o.key,currency:o.currency,previewProperty:"currency",lookupKey:o.lookupKey,cifLongName:o.cifLongName,facilityCode:o.facilityCode,revolvingOneOff:o.revolvingOneOff,currencyName:o.currencyName,facilityType:o.facilityType,cifNo:o.cifNo,fromApplication:o.fromApplication,cifIdNo:o.cifIdNo,facilityBranch:o.facilityBranch,facilityValue:o.facilityValue,status:o.status});return this.listOfFacilities}reset(){this.complexLookupComponentObj.resetLookUp()}}return t.\u0275fac=function(o){return new(o||t)(s.Rb(p.a),s.Rb(l.a),s.Rb(c.a))},t.\u0275cmp=s.Lb({type:t,selectors:[["ps-lookup-facility-details"]],viewQuery:function(t,o){if(1&t&&s.Wc(d,1),2&t){let t;s.Bc(t=s.gc())&&(o.complexLookupComponentObj=t.first)}},inputs:{options:"options"},outputs:{onFacilityChange:"onFacilityChange"},features:[s.Cb],decls:3,vars:2,consts:[[1,"ps-lookup-facility-details"],[3,"id","options","changeItem"],["complexLookupComponentObj",""]],template:function(t,o){1&t&&(s.Xb(0,"ps-container-complex",0),s.Xb(1,"ps-complex-lookup",1,2),s.fc("changeItem",function(t){return o.onChangeItem(t)}),s.Wb(),s.Wb()),2&t&&(s.Fb(1),s.pc("id",o.id)("options",o.complexLookupOptions))},directives:[u.a,h.a],styles:[""]}),t})()},cxvk:function(t,o,e){"use strict";e.d(o,"a",function(){return l});var i=e("V0Fi"),s=e("DFXC"),n=e("Q0Ba"),c=e("41l2"),a=e("fXoL");let l=(()=>{class t extends c.a{constructor(t,o){super(t,o),this.defaultSelectOptions={lovTypeId:i.a.CONFIRMATION_INSUTRUCTION_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("confirmation_instruction_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate("select_confirmation_instruction_key")}onChangeLov(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(n.a),a.Rb(s.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-lov-confirmation-instruction"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-dropdown-lov",0),a.fc("onPsChange",function(t){return o.onChangeLov(t)}),a.Wb()),2&t&&a.pc("id",o.id)("options",o.defaultSelectOptions)},directives:[c.a],styles:[""]}),t})()},gmKe:function(t,o,e){"use strict";e.d(o,"a",function(){return p});var i=e("DFXC"),s=e("Q0Ba"),n=e("ggmK"),c=e("zngb"),a=e("fXoL"),l=e("sYmb");let p=(()=>{class t extends n.a{constructor(t,o,e){super(t,o),this.translateSrv=e,this.defaultOptions={}}ngOnInit(){super.ngOnInit(),this.cifInfo=this.commonProv.session.getValueOf(c.a.USERINFO),this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.address=[],this.cifInfo.customerInfoCO&&(this.address="ar"===this.translateSrv.currentLang.toLocaleLowerCase()?[this.cifInfo.customerInfoCO.countryDescriptionArabic,this.cifInfo.customerInfoCO.regionDescriptionArabic,this.cifInfo.customerInfoCO.cityDescriptionArabic,this.cifInfo.customerInfoCO.streetDetailsArabic]:[this.cifInfo.customerInfoCO.country,this.cifInfo.customerInfoCO.regionName,this.cifInfo.customerInfoCO.cityName,this.cifInfo.customerInfoCO.streetDetails],this.address=this.address.concat([this.cifInfo.customerInfoCO.buildingOrHouse,this.cifInfo.customerInfoCO.poBox])),this.commonProv.setValInsideNestedObj(this.options.fcName,this.address.filter(t=>void 0!==t).join("-"),this.options.requestVO)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(s.a),a.Rb(i.a),a.Rb(l.d))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-input-display-only-cif-address-home"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:1,consts:[["id","displayOnlyCifHomeAddress",3,"options"]],template:function(t,o){1&t&&a.Sb(0,"ps-input-display-only",0),2&t&&a.pc("options",o.defaultOptions)},directives:[n.a],styles:[""]}),t})()},mpNL:function(t,o,e){"use strict";e.d(o,"a",function(){return p});var i=e("V0Fi"),s=e("ZF3V"),n=e("DFXC"),c=e("Q0Ba"),a=e("fXoL"),l=e("x91f");let p=(()=>{class t extends s.a{constructor(t,o){super(t,o),this.options={},this.categoriesOptions={}}ngOnInit(){this.categoriesOptions={type:i.a.CATEGORY_BANK,defaultLoad:!0,category:{labelKey:this.options.categoryLabelKey,placeHolder:this.options.categoryPlaceholderKey,fcName:this.options.categoryFcName,group:this.options.group},subCategory:{labelKey:this.options.subCategoryLabelKey,placeHolder:this.options.subCategoryPlaceholderKey,fcName:this.options.subCategoryFcName,group:this.options.group},requestObject:this.options.requestObject}}onBankChanged(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(c.a),a.Rb(n.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-banks"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:1,consts:[[3,"options","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-category-sub-category",0),a.fc("onPsChange",function(t){return o.onBankChanged(t)}),a.Wb()),2&t&&a.pc("options",o.categoriesOptions)},directives:[l.a],styles:[""]}),t})()},"u/mH":function(t,o,e){"use strict";e.d(o,"a",function(){return l});var i=e("V0Fi"),s=e("DFXC"),n=e("Q0Ba"),c=e("41l2"),a=e("fXoL");let l=(()=>{class t extends c.a{constructor(t,o){super(t,o),this.defaultSelectOptions={lovTypeId:i.a.CHARGES_BORNE_BY_LOV_TYPE_ID}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("charges_borne_by_key"),this.defaultSelectOptions.placeHolder="select_charges_borne_by"}onChangeLov(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Rb(n.a),a.Rb(s.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-lov-charges-borne-by"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,o){1&t&&(a.Xb(0,"ps-dropdown-lov",0),a.fc("onPsChange",function(t){return o.onChangeLov(t)}),a.Wb()),2&t&&a.pc("id",o.id)("options",o.defaultSelectOptions)},directives:[c.a],styles:[""]}),t})()}}]);