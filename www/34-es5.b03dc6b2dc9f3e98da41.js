!function(){function t(t,n,o,i){var s=e(d(1&i?t.prototype:t),n,o);return 2&i&&"function"==typeof s?function(t){return s.apply(o,t)}:s}function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var i=n(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(arguments.length<3?t:o):s.value}}).apply(null,arguments)}function n(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function r(n,o,s,a){var r=o&&o.prototype instanceof p?o:p,u=Object.create(r.prototype);return i(u,"_invoke",function(n,o,i){var s,a,r,p=0,u=i||[],l=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return s=e,a=0,r=t,f.n=n,c}};function d(n,o){for(a=n,r=o,e=0;!l&&p&&!i&&e<u.length;e++){var i,s=u[e],d=f.p,h=s[2];n>3?(i=h===o)&&(r=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=t):s[0]<=d&&((i=n<2&&d<s[1])?(a=0,f.v=o,f.n=s[1]):d<h&&(i=n<3||s[0]>o||o>h)&&(s[4]=n,s[5]=o,f.n=h,a=0))}if(i||n>1)return c;throw l=!0,o}return function(i,u,h){if(p>1)throw TypeError("Generator is already running");for(l&&1===u&&d(u,h),a=u,r=h;(e=a<2?t:r)||!l;){s||(a?a<3?(a>1&&(f.n=-1),d(a,r)):f.n=r:f.v=r);try{if(p=2,s){if(a||(i="next"),e=s[i]){if(!(e=e.call(s,r)))throw TypeError("iterator result is not an object");if(!e.done)return e;r=e.value,a<2&&(a=0)}else 1===a&&(e=s.return)&&e.call(s),a<2&&(r=TypeError("The iterator does not provide a '"+i+"' method"),a=1);s=t}else if((e=(l=f.n<0)?r:n.call(o,f))!==c)break}catch(e){s=t,a=1,r=e}finally{p=1}}return{value:e,done:l}}}(n,s,a),!0),u}var c={};function p(){}function u(){}function l(){}e=Object.getPrototypeOf;var f=[][s]?e(e([][s]())):(i(e={},s,function(){return this}),e),d=l.prototype=p.prototype=Object.create(f);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return u.prototype=l,i(d,"constructor",l),i(l,"constructor",u),u.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(d),i(d,a,"Generator"),i(d,s,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:r,m:h}})()}function i(t,e,n,o){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}(i=function(t,e,n,o){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?s?s(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,o)}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function p(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function l(t,e,n){return e=d(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,n||[],d(t).constructor):e.apply(t,n))}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(f=function(){return!!t})()}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[34,339,340,341,342,343,344,345,346,347,348,349],{"+BRL":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n("DFXC"),i=n("Q0Ba"),s=n("BYmO"),a=n("fXoL"),c=function(){var t=function(t){function e(t,n){var o;return r(this,e),(o=l(this,e,[t,n])).options={},o.defaultOptions={},o}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}},{key:"onInputChanged",value:function(t){this.onPsChange.emit(t)}}])}(s.a);return t.\u0275fac=function(e){return new(e||t)(a.Rb(i.a),a.Rb(o.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["ps-input-free-text"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(a.Xb(0,"ps-keyin-input",0),a.fc("onPsChange",function(t){return e.onInputChanged(t)}),a.Wb()),2&t&&a.pc("id",e.id)("options",e.defaultOptions)},directives:[s.a],styles:[""]}),t}()},"1hhN":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n("mrSG"),a=n("ZyuK"),c=n("iOQE"),u=n("DFXC"),f=n("Q0Ba"),d=n("fXoL"),m=function(){var t=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).omniPullService=o,i.options={},i.defaultOptions={},i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.loadProductCategories()}},{key:"loadProductCategories",value:function(){return Object(i.b)(this,void 0,void 0,o().m(function t(){var e,n,i,a,r=this;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.omniPullService.returnProductCategories({}).catch(function(t){r.logger.error("Error: While fetching Product types in PsDropdownProductCategoryComponent : ",t)});case 1:if(e=t.v,this.defaultOptions.listOfOptions=[],e&&e.gridModel&&e.gridModel.length>0){n=s(e.gridModel);try{for(n.s();!(i=n.n()).done;)a=i.value,this.defaultOptions.listOfOptions.push({itemValue:a.categoryCode,description:a.description,selectedObj:a})}catch(o){n.e(o)}finally{n.f()}}case 2:return t.a(2)}},t,this)}))}},{key:"selectDropDownChange",value:function(t){this.onPsChange.emit(t)}}])}(c.a);return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(u.a),d.Rb(a.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ps-dropdown-product-category"]],inputs:{options:"options"},features:[d.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(d.Xb(0,"ps-select-dropdown",0),d.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),d.Wb()),2&t&&d.pc("id",e.id)("options",e.defaultOptions)},directives:[c.a],styles:[""]}),t}()},"41l2":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n("mrSG"),a=n("ZyuK"),c=n("iOQE"),u=n("DFXC"),f=n("Q0Ba"),d=n("fXoL"),m=function(){var t=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).omniPull=o,i.showLovDropdown=!1,i.defaultDropDownLovOptions={isLOVDropdown:!0},i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){var t=this;this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(function(e){if(e){var n=e.get(t.options.fcName);n&&n.LOV_TYPE_ID&&n.LOV_TYPE_ID!==t.options.lovTypeId&&t.loadLovDropDown()}})}},{key:"loadLovDropDown",value:function(){var t;return Object(i.b)(this,void 0,void 0,o().m(function e(){var n,i,a,r,c,p,u,l,f=this;return o().w(function(e){for(;;)switch(e.n){case 0:if(this.defaultDropDownLovOptions.listOfOptions&&0!=(null===(t=this.defaultDropDownLovOptions.listOfOptions)||void 0===t?void 0:t.length)){e.n=5;break}if((n=this.commonProv.getElementValidations(this.options.fcName))&&n.LOV_TYPE_ID&&(this.options.lovTypeId=n.LOV_TYPE_ID),null!=this.options.lovTypeId&&void 0!==this.options.lovTypeId){e.n=1;break}return e.a(2,void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov"));case 1:if(!this.options.lovAdminFilterParamName){e.n=3;break}return e.n=2,this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);case 2:(i=e.v)&&(this.options.lovAdminFilterParamName=i[this.options.lovAdminFilterParamName]);case 3:return a={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},e.n=4,this.omniPull.returnLovTypesValues(a).catch(function(t){f.showLovDropdown=!1,f.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",t)});case 4:if(r=e.v,this.defaultDropDownLovOptions.listOfOptions=[],r&&r.length>0){c=s(r);try{for(c.s();!(p=c.n()).done;)u=p.value,(l={itemValue:u.itemValue,description:u.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(u.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:u}).selectedObj[this.options.fcName]=u.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(l)}catch(o){c.e(o)}finally{c.f()}this.showLovDropdown=!0}case 5:return e.a(2)}},e,this)}))}},{key:"selectDropDownChange",value:function(t){this.onPsChange.emit(t)}}])}(c.a);return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(u.a),d.Rb(a.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[d.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(d.Xb(0,"ps-select-dropdown",0),d.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),d.Wb()),2&t&&d.pc("id",e.id)("options",e.defaultDropDownLovOptions)},directives:[c.a],styles:[""]}),t}()},BcCD:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var o=n("zngb"),i=n("JpVU"),s=n("DFXC"),a=n("qEF5"),c=n("Q0Ba"),u=n("ZyuK"),f=n("r40+"),d=n("fXoL"),m=function(){var t=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n,o])).commonProv=t,i.dateOptions={},i.omniPull=a.a.injectionHandler(u.a),i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.dateOptions,this.options,!1);var t=this.omniPull.omniCommon.session.getValueOf(o.a.preLoginResponse).parameters;this.dateOptions.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat.parameterVal:"DD/MM/YYYY",this.dateOptions.pickerFormat=this.dateOptions.displayFormat}},{key:"ngOnChanges",value:function(){this.options&&this.options.min&&(this.dateOptions.min=this.options.min),this.options&&this.options.max&&(this.dateOptions.max=this.options.max)}},{key:"dateChanged",value:function(t){this.onPsChange.emit(t)}}])}(i.a);return t.\u0275fac=function(e){return new(e||t)(d.Rb(c.a),d.Rb(s.a),d.Rb(f.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ps-date-day-month-year"]],inputs:{options:"options"},features:[d.Cb,d.Db],decls:1,vars:2,consts:[[1,"ps-day-month-year",3,"options","id","onPsChange","onPsInit"]],template:function(t,e){1&t&&(d.Xb(0,"ps-keyin-date",0),d.fc("onPsChange",function(t){return e.dateChanged(t)})("onPsInit",function(t){return e.onInit(t)}),d.Wb()),2&t&&d.pc("options",e.dateOptions)("id",e.id)},directives:[i.a],styles:[""]}),t}()},OEOT:function(e,n,o){"use strict";o.d(n,"a",function(){return f});var i=o("DFXC"),s=o("Q0Ba"),a=o("BcCD"),c=o("r40+"),u=o("fXoL"),f=function(){var e=function(e){function n(t,e,o){var i;return r(this,n),(i=l(this,n,[t,e,o])).commonProv=t,i.dateDayMonthYearOptions={min:new Date},i}return h(n,e),p(n,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.dateDayMonthYearOptions,this.options,!1)}},{key:"dataChanged",value:function(t){this.onPsChange.emit(t)}},{key:"superWriteValue",value:function(e){t(n,"writeValue",this,3)([e])}}])}(a.a);return e.\u0275fac=function(t){return new(t||e)(u.Rb(s.a),u.Rb(i.a),u.Rb(c.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["ps-date-day-month-year-future"]],inputs:{options:"options"},features:[u.Cb],decls:1,vars:2,consts:[[3,"options","id","onPsChange"]],template:function(t,e){1&t&&(u.Xb(0,"ps-date-day-month-year",0),u.fc("onPsChange",function(t){return e.dataChanged(t)}),u.Wb()),2&t&&u.pc("options",e.dateDayMonthYearOptions)("id",e.id)},directives:[a.a],styles:[""]}),e}()},S7SP:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var o=n("V0Fi"),i=n("ZyuK"),a=n("iOQE"),c=n("DFXC"),u=n("Q0Ba"),f=n("fXoL"),d=function(){var t=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).commonProv=t,i.loggerP=n,i.omniPull=o,i.defaultSelectOptions={},i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.returnTFSDocumentType()}},{key:"returnTFSDocumentType",value:function(){var t=this;this.omniPull.returnTFSDocumentType({docType:this.options.docType||o.a.RETURN_ALL_DOCTYPE_PARAM,code:this.options.code}).then(function(e){if(t.defaultSelectOptions.listOfOptions=[],null!=e&&null!=e.gridModel&&e.gridModel.length>0){var n,o=s(e.gridModel);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.defaultSelectOptions.listOfOptions.push({itemValue:i.code,description:i.longName,selectedObj:i})}}catch(a){o.e(a)}finally{o.f()}}},function(e){t.logger.error("Error: While fetching data : ",e)})}},{key:"onDocTypeChange",value:function(t){this.onPsChange.emit(t)}}])}(a.a);return t.\u0275fac=function(e){return new(e||t)(f.Rb(u.a),f.Rb(c.a),f.Rb(i.a))},t.\u0275cmp=f.Lb({type:t,selectors:[["ps-dropdown-tfs-document-type"]],inputs:{options:"options"},features:[f.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange","onPsInit"]],template:function(t,e){1&t&&(f.Xb(0,"ps-select-dropdown",0),f.fc("onPsChange",function(t){return e.onDocTypeChange(t)})("onPsInit",function(t){return e.onInit(t)}),f.Wb()),2&t&&f.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[a.a],styles:[""]}),t}()},ULj9:function(t,e,n){"use strict";n.d(e,"a",function(){return P});var i,s,a=n("mrSG"),c=n("ZyuK"),u=n("zngb"),f=n("ZF3V"),d=n("DFXC"),m=n("Q0Ba"),y=n("V0Fi"),O=n("fXoL"),b=n("Isd1"),v=n("+n0y"),g=n("iOQE"),C=((s=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).omniPull=o,i.defaultSelectOptions={labelKey:"label_branch_key",placeHolder:"branch_key"},i.branches=[],i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultSelectOptions,this.options)}},{key:"ngOnChanges",value:function(){this.getBranches()}},{key:"getBranches",value:function(){var t=this,e={countryId:this.options.selectedCountryCode?parseInt(this.options.selectedCountryCode):null,regionId:this.options.selectedRegionCode?parseInt(this.options.selectedRegionCode):null,cityId:this.options.selectedCityCode?parseInt(this.options.selectedCityCode):null,mapTypesInclude:"'B'"};this.branches=[],this.omniPull.returnMapAtmBranches(e).then(function(e){if(t.defaultSelectOptions.listOfOptions=[],e&&null!=e.gridModel&&e.gridModel.length>0){for(var n=0;n<e.gridModel.length;n++)t.branches.push({itemValue:e.gridModel[n].vsBranchCode,description:e.gridModel[n].briefDesc,selectedObj:e.gridModel[n]});t.defaultSelectOptions.listOfOptions=t.branches;var o=t.defaultSelectOptions.group.controls[t.defaultSelectOptions.fcName].value;o&&!t.defaultSelectOptions.listOfOptions.some(function(t){return t.itemValue===o})&&t.defaultSelectOptions.group.controls[t.defaultSelectOptions.fcName].setValue(null)}else t.defaultSelectOptions.listOfOptions=[],t.defaultSelectOptions.group.controls[t.defaultSelectOptions.fcName].setValue(null),t.logger.warn(e,"empty response")}).catch(function(t){})}},{key:"onBranchChange",value:function(t){this.loggerP.log("onBranchChange"+t),this.onPsChange.emit(t)}}])}(g.a)).\u0275fac=function(t){return new(t||s)(O.Rb(m.a),O.Rb(d.a),O.Rb(c.a))},s.\u0275cmp=O.Lb({type:s,selectors:[["ps-dropdown-branches"]],inputs:{options:"options"},features:[O.Cb,O.Db],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(O.Xb(0,"ps-select-dropdown",0),O.fc("onPsChange",function(t){return e.onBranchChange(t)}),O.Wb()),2&t&&O.pc("id",e.id)("options",e.defaultSelectOptions)},directives:[g.a],styles:[""]}),s),P=((i=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).omniPull=o,i.defaultOptions={},i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){var t,e;return Object(a.b)(this,void 0,void 0,o().m(function n(){var i,s;return o().w(function(n){for(;;)switch(n.n){case 0:if(this.defaultOptions={countryRegionCityOptions:{countriesOptions:{labelKey:"country__key",placeHolder:"select_country_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.countriesOptions.fcName:"branch_country",group:this.options.group,iconOptions:{iconName:"clipboard"}},regionOptions:{labelKey:"region_key",placeHolder:"region_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.regionOptions.fcName:"branch_region",group:this.options.group},cityOptions:{labelKey:"city_key",placeHolder:"select_city_key",fcName:this.options.countryRegionCityOptions?this.options.countryRegionCityOptions.cityOptions.fcName:"branch_city",group:this.options.group}}},this.defaultOptions.branchesOptions={group:this.options.group,fcName:this.options.branchesOptions?this.options.branchesOptions.fcName:"default_branch",placeHolder:(null===(t=this.options.branchesOptions)||void 0===t?void 0:t.placeHolder)?this.options.branchesOptions.placeHolder:"branch_key",labelKey:(null===(e=this.options.branchesOptions)||void 0===e?void 0:e.labelKey)?this.options.branchesOptions.labelKey:"label_branch_key"},this.commonProv.copyObject(this.defaultOptions,this.options),i=this.commonProv.getElementValidations(this.defaultOptions.branchesOptions.fcName),!this.options.parameterToCheck){n.n=2;break}return n.n=1,this.omniPull.checkBranch(this.options.parameterToCheck);case 1:s=n.v,i=this.commonProv.getElementValidations(this.defaultOptions.branchesOptions.fcName),this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_MANDATORY,[this.defaultOptions.branchesOptions.fcName],s.enableCifBranch||this.defaultOptions.branchesOptions.fcName&&!i.IS_VISIBLE?0:i.IS_MANDATORY),n.n=3;break;case 2:this.commonProv.applyDynScreenDisplay(u.a.ACTION_TYPE_MANDATORY,[this.defaultOptions.branchesOptions.fcName],i.IS_MANDATORY);case 3:return n.a(2)}},n,this)}))}},{key:"onSelectBranch",value:function(t){this.onPsChange.emit(t)}},{key:"onChildDropdownSelected",value:function(t){if(t[y.a.SELECTED_DROPDOWN]){var e=t[y.a.SELECTED_DROPDOWN];e===y.a.COUNTRY_DROPDOWN?(this.defaultOptions.branchesOptions.selectedCountryCode=void 0!==t.selectedObj?t.selectedObj.countriesID:null!=t.newValue?t.newValue:null,this.defaultOptions.branchesOptions.selectedRegionCode=null,this.defaultOptions.branchesOptions.selectedCityCode=null):e===y.a.REGION_DROPDOWN?(this.defaultOptions.branchesOptions.selectedRegionCode=void 0!==t.selectedObj?t.selectedObj.countriesRegionID:null!=t.newValue?t.newValue:null,this.defaultOptions.branchesOptions.selectedCityCode=null):e===y.a.CITY_DROPDOWN&&(this.defaultOptions.branchesOptions.selectedCityCode=void 0!==t.selectedObj?t.selectedObj.citiesId:null!=t.newValue?t.newValue:null)}this.defaultOptions.branchesOptions=Object.assign({},this.defaultOptions.branchesOptions)}}])}(f.a)).\u0275fac=function(t){return new(t||i)(O.Rb(m.a),O.Rb(d.a),O.Rb(c.a))},i.\u0275cmp=O.Lb({type:i,selectors:[["ps-complex-select-branch"]],inputs:{options:"options"},features:[O.Cb],decls:3,vars:4,consts:[[1,"ps-complex-swift-benef-creation"],[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(O.Xb(0,"ps-container-complex",0),O.Xb(1,"ps-complex-country-regions-cities",1),O.fc("onPsChange",function(t){return e.onChildDropdownSelected(t)}),O.Wb(),O.Xb(2,"ps-dropdown-branches",1),O.fc("onPsChange",function(t){return e.onSelectBranch(t)}),O.Wb(),O.Wb()),2&t&&(O.Fb(1),O.pc("id",e.id)("options",e.defaultOptions.countryRegionCityOptions),O.Fb(1),O.pc("id",e.id)("options",e.defaultOptions.branchesOptions))},directives:[b.a,v.a,C],styles:[""]}),i)},Z774:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n("mrSG"),a=n("ZyuK"),c=n("iOQE"),u=n("DFXC"),f=n("Q0Ba"),d=n("fXoL"),m=function(){var t=function(t){function e(t,n,o){var i;return r(this,e),(i=l(this,e,[t,n])).omniPullService=o,i.options={},i.defaultOptions={},i}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.loadFacilityTypes()}},{key:"loadFacilityTypes",value:function(){return Object(i.b)(this,void 0,void 0,o().m(function t(){var e,n,i,a,r=this;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.omniPullService.returnFacilityTypes({}).catch(function(t){r.logger.error("Error: While fetching Facility types in PsDropdownFacilityTypesComponent : ",t)});case 1:if(e=t.v,this.defaultOptions.listOfOptions=[],e&&e.gridModel&&e.gridModel.length>0){n=s(e.gridModel);try{for(n.s();!(i=n.n()).done;)a=i.value,this.defaultOptions.listOfOptions.push({itemValue:a.code,description:a.briefDesc,selectedObj:a})}catch(o){n.e(o)}finally{n.f()}}case 2:return t.a(2)}},t,this)}))}},{key:"selectDropDownChange",value:function(t){this.onPsChange.emit(t)}}])}(c.a);return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(u.a),d.Rb(a.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ps-dropdown-facility-types"]],inputs:{options:"options"},features:[d.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(d.Xb(0,"ps-select-dropdown",0),d.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),d.Wb()),2&t&&d.pc("id",e.id)("options",e.defaultOptions)},directives:[c.a],styles:[""]}),t}()},gKqT:function(t,e,n){"use strict";n.r(e),n.d(e,"OmniBasePage",function(){return d});var o=n("oS+F"),i=n("zngb"),s=n("QZhd"),a=n("woXy"),c=n("qEF5"),u=n("Q0Ba"),l=n("lE2x"),f=n("fXoL"),d=function(){var t=function(){return p(function t(){r(this,t),this.isPageDisabled=!1,this.commonProv=c.a.injectionHandler(u.a),this.navigationServices=c.a.injectionHandler(a.a)},[{key:"init",value:function(){this.currentOperID=s.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();var t=this.navigationServices.getAllParams(),e={};t&&!0===t.readOnlypage?(e.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(i.a.FORM_READONLY,e)):this.customizationMap&&(e.IS_READONLY=0,this.customizationMap.set(i.a.FORM_READONLY,e)),this.screenTranslationOperIds=l.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?l.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}},{key:"ngOnInit",value:function(){this.init()}},{key:"ionViewDidEnter",value:function(){this.viewDidEnter()}},{key:"ionViewWillLeave",value:function(){this.viewWillLeave()}},{key:"ionViewWillEnter",value:function(){this.viewWillEnter()}},{key:"viewWillEnter",value:function(){}},{key:"disableForm",value:function(t){var e=this;if(void 0!==t&&this.customizationMap){var n=this.customizationMap.get(i.a.FORM_READONLY);n&&1===n.IS_READONLY&&"DISABLED"!=t.status&&(t.disable(),Object.keys(t.controls).forEach(function(t){e.commonProv.applyDynScreenDisplay(i.a.ACTION_TYPE_READONLY,[t],1)}))}}},{key:"viewDidEnter",value:function(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:s.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:s.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),o.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}},{key:"viewWillLeave",value:function(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:s.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:s.a.oper_ID,{value:!0,page:this,willLeave:!0})}},{key:"ngAfterViewChecked",value:function(){var t=this;this.isPageDisabled||setTimeout(function(){t.disableForm(t.baseFormGroup),t.isPageDisabled=!0},300)}},{key:"getScreenTranslations",value:function(t){var e=t||2222,n=s.a.activeLanguge?s.a.activeLanguge:"EN";e&&n&&this.commonProv.language.getOperTranslation(n,e)}}])}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Lb({type:t,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(t,e){2&t&&f.Hb(e.psClass)},decls:0,vars:0,template:function(t,e){},styles:[""]}),t}()},ingC:function(e,n,i){"use strict";i.r(n),i.d(n,"FacilityRequestPage",function(){return ut});var a,c=i("mrSG"),u=i("3Pt+"),f=i("fOh1"),d=i("0CJq"),m=i("ZyuK"),y=i("f42Q"),O=i("DFXC"),b=i("zngb"),v=i("qEF5"),g=i("woXy"),C=i("Q0Ba"),P=i("V0Fi"),_=i("QZhd"),D=i("gKqT"),w=i("WAnK"),N=i("S7SP"),I=i("fXoL"),S=i("ofXK"),k=i("kRg/"),T=i("uKCV"),R=i("sAFK"),F=i("+f2X"),A=i("ZF3V"),E=i("xLEv"),L=i("Isd1"),V=i("Z774"),j=i("ggmK"),B=i("/QlS"),q=i("G/Qj"),G=i("/ZU/"),Y=i("1hhN"),M=i("vjTl"),x=i("ibDU"),X=i("iOQE"),K=((a=function(t){function e(t,n){var o;return r(this,e),(o=l(this,e,[t,n])).commonProv=t,o.loggerP=n,o.purposeOptions={labelKey:"purpose_key",placeHolder:"select_purpose_key"},o}return h(e,t),p(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){this.init()}},{key:"init",value:function(){this.common.copyObject(this.purposeOptions,this.options,!1)}},{key:"onChangePurpose",value:function(t){this.commonProv.logger.log("onChangePurposebaseCom",t),this.onPsChange.emit(t)}}])}(X.a)).\u0275fac=function(t){return new(t||a)(I.Rb(C.a),I.Rb(O.a))},a.\u0275cmp=I.Lb({type:a,selectors:[["ps-dropdown-purpose"]],inputs:{options:"options"},features:[I.Cb,I.Db],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(I.Xb(0,"ps-select-dropdown",0),I.fc("onPsChange",function(t){return e.onChangePurpose(t)}),I.Wb()),2&t&&I.pc("id",e.id)("options",e.purposeOptions)},directives:[X.a],styles:[""]}),a),W=i("OEOT"),H=i("+BRL"),Q=i("KVmc"),U=["productTypes"],z=function(t){return{labelKey:t}};function Z(t,e){if(1&t&&(I.Xb(0,"p",12),I.Sb(1,"ps-label",8),I.Wb()),2&t){var n=I.ic();I.Fb(1),I.pc("options",I.sc(1,z,n.defaultOptions.errorMsg))}}var J,$=((J=function(e){function n(t,e,o){var i;return r(this,n),(i=l(this,n,[t,o])).omniPull=e,i.facilityTypeChange=new I.o,i.productClassChange=new I.o,i.fileSelected=new I.o,i.amountChange=new I.o,i.downPaymentChange=new I.o,i.requestedProductPanelOptions={isExpandable:!0,labelKey:"requested_products_key",iconName:"document",expanded:!0},i}return h(n,e),p(n,[{key:"defaultOptions",get:function(){return this.options}},{key:"ngOnInit",value:function(){t(n,"ngOnInit",this,3)([]);var e=this.common.returnOperCustomization();this.readonlyMode=e.get(b.a.FORM_READONLY).IS_READONLY||!1}},{key:"onFacilityTypeChanged",value:function(t){t&&(this.productTypesviewChild.loadProductTypes(t.selectedObj.omniFacilityTypeClassList,t.selectedObj.appType),this.readonlyMode||(t.selectedObj.appType==P.a.FACILITY_TYPE_SPECIFIC?(t.selectedObj.omniFacilityTypeClassList.length>0&&this.commonProv.setValInsideNestedObj(this.options.productClassOptions.fcName,t.selectedObj.omniFacilityTypeClassList[0].productClassCode,this.options.requestObject),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_READONLY,[this.options.productClassOptions.fcName],1)):t.selectedObj.appType===P.a.FACILITY_TYPE_GENERAL&&(this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_MANDATORY,[this.options.productClassOptions.fcName],1),this.commonProv.setValInsideNestedObj(this.options.productClassOptions.fcName,{itemValue:""},this.options.requestObject),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_READONLY,[this.options.productClassOptions.fcName],0)))),this.facilityTypeChange.emit(t)}},{key:"onProductClassChanged",value:function(t){this.productClassChange.emit(t)}},{key:"onAmountChanged",value:function(t){t&&this.amountChange.emit(t)}},{key:"onDownPaymentChange",value:function(t){t&&this.downPaymentChange.emit(t)}},{key:"selectFile",value:function(t){t&&this.fileSelected.emit(this.selectedFileData)}}])}(A.a)).\u0275fac=function(t){return new(t||J)(I.Rb(C.a),I.Rb(m.a),I.Rb(O.a))},J.\u0275cmp=I.Lb({type:J,selectors:[["ps-complex-facility-request"]],viewQuery:function(t,e){var n;1&t&&I.Wc(U,1),2&t&&I.Bc(n=I.gc())&&(e.productTypesviewChild=n.first)},inputs:{options:"options"},outputs:{facilityTypeChange:"facilityTypeChange",productClassChange:"productClassChange",fileSelected:"fileSelected",amountChange:"amountChange",downPaymentChange:"downPaymentChange"},features:[I.Cb],decls:21,vars:22,consts:[[1,"ps-complex-financial-calculator"],[3,"options","onPsChange"],["productTypes",""],["id","requestDate",3,"options"],[3,"id","options"],[3,"options","onAmountChanged"],[3,"id","options","onPsChange"],["id","'financial_amount' + id",3,"options"],[3,"options"],["id","req_product_panel",3,"options"],["class","validation-message requested-product",4,"ngIf"],["id","input_free_text",3,"options"],[1,"validation-message","requested-product"]],template:function(t,e){1&t&&(I.Xb(0,"ps-container-complex",0),I.Xb(1,"ps-dropdown-facility-types",1),I.fc("onPsChange",function(t){return e.onFacilityTypeChanged(t)}),I.Wb(),I.Xb(2,"ps-dropdown-product-types",1,2),I.fc("onPsChange",function(t){return e.onProductClassChanged(t)}),I.Wb(),I.Sb(4,"ps-input-display-only",3),I.Sb(5,"ps-input-varchar",4),I.Xb(6,"ps-complex-amount",5),I.fc("onAmountChanged",function(t){return e.onAmountChanged(t)}),I.Wb(),I.Xb(7,"ps-input-amount",6),I.fc("onPsChange",function(t){return e.onDownPaymentChange(t)}),I.Wb(),I.Sb(8,"ps-input-amount",7),I.Sb(9,"ps-dropdown-product-category",8),I.Sb(10,"ps-input-numeric",8),I.Sb(11,"ps-lov-periodicity",4),I.Xb(12,"ps-container-panel",9),I.Sb(13,"ps-ag-grid",8),I.Wb(),I.Pc(14,Z,2,3,"p",10),I.Sb(15,"ps-dropdown-purpose",8),I.Sb(16,"ps-date-day-month-year-future",8),I.Sb(17,"ps-input-free-text",11),I.Sb(18,"ps-input-free-text",11),I.Sb(19,"ps-input-free-text",11),I.Sb(20,"ps-input-free-text",11),I.Wb()),2&t&&(I.Fb(1),I.pc("options",e.options.facilitytypesOptions),I.Fb(1),I.pc("options",e.options.productClassOptions),I.Fb(2),I.pc("options",e.options.requestDateOptions),I.Fb(1),I.pc("id",e.id+"_amount")("options",e.options.revolvingAmountOptions),I.Fb(1),I.pc("options",e.options.complexAmountOptions),I.Fb(1),I.pc("id",e.id+"_amount")("options",e.options.downPaymentOptions),I.Fb(1),I.pc("options",e.options.amountLabelOptions),I.Fb(1),I.pc("options",e.options.productCategoryOptions),I.Fb(1),I.pc("options",e.options.tenureInputOptions),I.Fb(1),I.pc("id",e.id)("options",e.options.priodicityOptions),I.Fb(1),I.pc("options",e.requestedProductPanelOptions),I.Fb(1),I.pc("options",e.options.requestedProductsGridOptions),I.Fb(1),I.pc("ngIf",e.defaultOptions.errorMsg),I.Fb(1),I.pc("options",e.options.purposeOptions),I.Fb(1),I.pc("options",e.options.financingDateOptions),I.Fb(1),I.pc("options",e.options.commoditiesOptions),I.Fb(1),I.pc("options",e.options.supplySourceOptions),I.Fb(1),I.pc("options",e.options.securitiesOptions),I.Fb(1),I.pc("options",e.options.additionalCommentsOptions))},directives:[L.a,V.a,E.a,j.a,B.a,q.a,G.a,Y.a,w.a,M.a,F.a,x.a,S.o,K,W.a,H.a,Q.a],styles:[""]}),J),tt=i("b23T"),et=i("ULj9"),nt=i("iTqn");function ot(t,e){if(1&t&&I.Sb(0,"ps-input-display-only",9),2&t){var n=I.ic(2);I.pc("options",n.branchOptions)}}function it(t,e){if(1&t){var n=I.Yb();I.Xb(0,"ps-container-panel",10),I.Xb(1,"ps-file-upload-bs",11),I.fc("onPsFileSelect",function(t){return I.Fc(n),I.ic(2).selectFile(t)}),I.Wb(),I.Wb()}if(2&t){var o=I.ic(2);I.pc("options",o.attachmentPanelOptions),I.Fb(1),I.pc("options",o.fileUploadOptions)}}function st(t,e){if(1&t){var n=I.Yb();I.Xb(0,"ps-container-panel",12),I.Xb(1,"ps-complex-select-branch",13),I.fc("onPsChange",function(t){return I.Fc(n),I.ic(2).onSelectBranch(t)}),I.Wb(),I.Wb()}if(2&t){var o=I.ic(2);I.pc("options",o.panelOptions2Step1),I.Fb(1),I.pc("options",o.selectBranchOptions)}}function at(t,e){if(1&t){var n=I.Yb();I.Xb(0,"ps-form-step",3),I.Xb(1,"ps-container-panel",4),I.Pc(2,ot,1,1,"ps-input-display-only",5),I.Xb(3,"ps-complex-facility-request",6),I.fc("amountChange",function(t){return I.Fc(n),I.ic().onAmountChange(t)})("facilityTypeChange",function(t){return I.Fc(n),I.ic().onFacilityTypeChanged(t)})("downPaymentChange",function(t){return I.Fc(n),I.ic().onDownpaymentChange(t)})("fileSelected",function(t){return I.Fc(n),I.ic().selectFile(t)}),I.Wb(),I.Wb(),I.Pc(4,it,2,2,"ps-container-panel",7),I.Pc(5,st,2,2,"ps-container-panel",8),I.Wb()}if(2&t){var o=I.ic();I.pc("id",o.stepperOptions.namesofSteps[0]),I.Fb(1),I.pc("options",o.panelOptionsStep1),I.Fb(1),I.pc("ngIf",o.enableCifBranch),I.Fb(1),I.pc("options",o.facilityRequestOptions),I.Fb(1),I.pc("ngIf",!o.defaultVO.navigatedFromFL),I.Fb(1),I.pc("ngIf",!o.defaultVO.navigatedFromFL)}}function rt(t,e){if(1&t&&(I.Vb(0),I.Xb(1,"ps-container-panel",16),I.Sb(2,"ps-map-atm-branches",17),I.Wb(),I.Ub()),2&t){var n=I.ic(2);I.Fb(1),I.pc("options",n.panelOptions1Step2),I.Fb(1),I.pc("options",n.mapAtmBranchesOptions)}}function ct(t,e){if(1&t&&(I.Xb(0,"ps-form-step",14),I.Pc(1,rt,3,2,"ng-container",15),I.Wb()),2&t){var n=I.ic();I.pc("id",n.stepperOptions.namesofSteps[1]),I.Fb(1),I.pc("psStep","step2")}}var pt,ut=((pt=function(e){function n(t,e,o,i,s,a,c){var p;return r(this,n),(p=l(this,n)).datepipe=t,p.common=e,p.omniPull=o,p.logger=i,p.eventEmitterService=s,p.navService=a,p.omniCommon=c,p.formGroup=new u.f({}),p.branchOptions={labelKey:"branch_key",group:p.formGroup,fcName:"branch"},p.panelOptions2Step1={isExpandable:!0,labelKey:"select_branch_key",iconName:"document",expanded:!0},p.enableCifBranch=!0,p.defaultVO={},p.selectBranchOptions={fcName:"mapAtmBranchesDropdown",group:p.formGroup},p.requestedProductPanelOptions={isExpandable:!0,labelKey:"requested_products_key",iconName:"document",expanded:!0},p}return h(n,e),p(n,[{key:"ngOnInit",value:function(){t(n,"init",this,3)([]),this.baseFormGroup=this.formGroup,this.cifInfo=this.commonProv.session.getValueOf(b.a.USERINFO),_.a.oper_ID=P.a.FACILITY_REQUEST_OPER,_.a.pageName=P.a.FACILITY_REQUEST_TITLE,this.commonProv.copyObject(this.defaultVO,this.navService.getAllParams()?this.navService.getAllParams():{}),this.loadOptions(),this.commonProv.addDefaultValidator(this.formGroup,this.facilityRequestOptions.requestedProductsGridOptions.fcName,this.commonProv.prepareValidation(!1,null,null,null,null,null,null,null,[this.custGridValidator()])),this.fetchParameter()}},{key:"ionViewDidEnter",value:function(){t(n,"ionViewDidEnter",this,3)([]),this.fetchParameter(),this.downPaymentLabel=v.a.translate("down_payment_key"),this.commonProv.setValInsideNestedObj(this.branchOptions.fcName,this.cifInfo.cifBranch?this.cifInfo.customerInfoCO.branchBriefDesc:"",this.defaultVO),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_READONLY,[this.branchOptions.fcName,this.facilityRequestOptions.revolvingAmountOptions.fcName],1),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_VISIBLE,[this.facilityRequestOptions.revolvingAmountOptions.fcName,this.facilityRequestOptions.amountLabelOptions.fcName],0),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_MANDATORY,[this.facilityRequestOptions.tenureInputOptions.fcName,this.facilityRequestOptions.additionalCommentsOptions.fcName],0)}},{key:"loadOptions",value:function(){this.panelOptionsStep1={isExpandable:!0,labelKey:"facility_request_key",iconName:"calculator",expanded:!0},this.panelOptions1Step2={isExpandable:!0,labelKey:"atm_branches_key",iconName:"atm",expanded:!0},this.attachmentPanelOptions={isExpandable:!0,labelKey:"attachment_key",iconName:"",expanded:!0},this.facilityRequestOptions={requestObject:this.defaultVO,facilitytypesOptions:{group:this.formGroup,placeHolder:"select_facility_types_key",labelKey:"facility_types_key",fcName:"facilityType"},productClassOptions:{labelKey:"product_class_key",placeHolder:"product_class_key",fcName:"productType",group:this.formGroup},group:this.formGroup,revolvingAmountOptions:{fcName:"revolving",placeHolder:"",group:this.formGroup,labelKey:this.common.translate("revolving_key")+" "+this.common.translate("one_off_key")},amountLabelOptions:{placeHolder:"enter_total_amount_key",labelKey:"financing_amount_key",group:this.formGroup,fcName:"financing_amount"},complexAmountOptions:{currency:"",currenciesOptions:{labelKey:"currency_key",placeHolder:"select_currency_key",fcName:"currency",group:this.formGroup},amountOptions:{labelKey:"total_amount_key",placeHolder:"enter_total_amount_key",fcName:"transactionAmount",type:"amount",group:this.formGroup}},downPaymentOptions:{fcName:"downPayment",group:this.formGroup,labelKey:"down_payment_key",placeHolder:"enter_down_payment_key"},productCategoryOptions:{group:this.formGroup,placeHolder:"select_product_category_key",labelKey:"product_category_key",fcName:"productCategory"},tenureInputOptions:{labelKey:"tenure_key",placeHolder:"tenure_key",group:this.formGroup,fcName:"tenure"},priodicityOptions:{labelKey:"periodicity_key",placeHolder:"select_periodicity_key",group:this.formGroup,fcName:"periodicity"},purposeOptions:{labelKey:"purpose_key",placeHolder:"select_purpose_key",group:this.formGroup,fcName:"purpose"},financingDateOptions:{labelKey:"financing_date_key",placeHolder:"financing_date_key",group:this.formGroup,fcName:"financingDate"},commoditiesOptions:{labelKey:"commodities_key",placeHolder:"commodities_key",group:this.formGroup,fcName:"commodities"},supplySourceOptions:{labelKey:"supply_source_key",placeHolder:"supply_source_key",group:this.formGroup,fcName:"supplySource"},securitiesOptions:{labelKey:"securities_key",placeHolder:"securities_key",group:this.formGroup,fcName:"securities"},additionalCommentsOptions:{labelKey:"additional_comments_key",placeHolder:"additional_comments_key",group:this.formGroup,fcName:"additionalComments"},requestDateOptions:{placeHolder:"request_date_key",labelKey:"request_date_key",group:this.formGroup,fcName:"requestDate"},requestedProductsGridOptions:{group:this.formGroup,labelKey:"requested_products_key",fcName:"requestedProducts",gridOptions:{defaultColDef:{flex:1,minWidth:150,sortable:!0,resizable:!0},rowSelection:"multiple",applyPagination:!0,paginationPageSize:5,cacheBlockSize:1,cacheOverflowSize:10,maxConcurrentDatasourceRequests:2,infiniteInitialRowCount:500,maxBlocksInCache:200},enableEdit:!0,enableDelete:!0,columnComponents:[{columnNameKey:"product_name_key",propertyName:"productName",component:N.a,componentOptions:{listOfOptions:[]},componentType:"select"},{columnNameKey:"maximum_usance_period_days_key",propertyName:"maxUsancePeriod",component:w.a,componentOptions:{},componentType:"number"}]}},this.fileUploadOptions={group:this.formGroup,multiple:!0,fcName:"selectedFileData"},this.stepperOptions={stepperName:"fac_req_stepper",isHorizontalStepper:!0,numberOfSteps:2,namesofSteps:["facility_request_key","atm_branches_key"],group:this.formGroup,submitOptions:{group:this.formGroup,submitServiceUrl:f.a.serviceUrl.FacilityRequest,postCallFunction:{func:function(){var t=this;return new Promise(function(e,n){e(t.executionClass.redirectToSchedule())})},executionClass:this,params:[this]}},requestObject:this.defaultVO},this.mapAtmBranchesOptions={group:this.formGroup,fcName:"mapAtmBranches",labelKey:"map_atm_branch_key",mapOptions:{labelKey:"map"},showSegments:!1,mapTypesInclude:"'B'",branchIds:"1,3,5",parameterToCheck:P.a.FACILITY_CIF_BRANCH,requestVO:this.defaultVO},this.loadfacilityPurposeList()}},{key:"fetchParameter",value:function(){return Object(c.b)(this,void 0,void 0,o().m(function t(){var e,n,i=this;return o().w(function(t){for(;;)switch(t.n){case 0:return this.omniCommon.branchSelectionAndMapControl(0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:this.mapAtmBranchesOptions.fcName},{fcName:"facility_req_pane2"}],!0),t.n=1,this.omniPull.getParamValOf(P.a.FACILITY_CIF_BRANCH,P.a.AcntOpenBranchesMatAcc,P.a.AllowedBranches,b.a.AllowedFixedMaturityAccountsTypes,P.a.AllowedCurrencies,P.a.AllAllowedBranches).catch(function(t){return i.logger.log(t)});case 1:(e=t.v)&&e.RequestBranch===P.a.FACILITY_USER_INPUT_VALUE?(this.enableCifBranch=!1,this.omniCommon.branchSelectionAndMapControl(1,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:this.mapAtmBranchesOptions.fcName,mandatory:1},{fcName:"facility_req_pane2"}],!0),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_VISIBLE,[this.branchOptions.fcName],0),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_MANDATORY,["mapBranchInput"],1)):(this.enableCifBranch=!0,this.omniCommon.branchSelectionAndMapControl(0,[{fcName:this.stepperOptions.namesofSteps[1]},{fcName:this.mapAtmBranchesOptions.fcName},{fcName:"facility_req_pane2"}],!0),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_VISIBLE,[this.branchOptions.fcName],1),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_MANDATORY,["mapBranchInput"],0)),-1!==e&&e.AcntOpenBranchesMatAcc===b.a.cifBranch&&(n=e.allowedBranches?e.allowedBranches.toString().split(","):e.AllAllowedBranches.split(","),this.mapAtmBranchesOptions.branchIds=this.mapAtmBranchesOptions.branchIds+","+n);case 2:return t.a(2)}},t,this)}))}},{key:"onSelectBranch",value:function(t){void 0!==t.itemValue&&(this.formGroup.controls[this.selectBranchOptions.fcName].setValue(t),this.commonProv.setValInsideNestedObj(this.selectBranchOptions.fcName,t.selectedObj,this.defaultVO))}},{key:"onAmountChange",value:function(t){if(t&&t.amount){var e=this.formGroup.controls[this.facilityRequestOptions.downPaymentOptions.fcName].value;e="string"==typeof e?Number(e.replace(/[^0-9.-]+/g,"")):e,this.CalculateFinanceAmount(t.amount,e)}}},{key:"onDownpaymentChange",value:function(t){if(t&&(t.newValue||"number"==typeof t.newValue)){var e=this.formGroup.controls[this.facilityRequestOptions.complexAmountOptions.amountOptions.fcName].value;e="string"==typeof e?Number(e.replace(/[^0-9.-]+/g,"")):e,this.CalculateFinanceAmount(e,t.newValue)}}},{key:"CalculateFinanceAmount",value:function(t,e){this.formGroup.controls[this.facilityRequestOptions.amountLabelOptions.fcName]&&(this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_VISIBLE,[this.facilityRequestOptions.amountLabelOptions.fcName],1),this.formGroup.controls[this.facilityRequestOptions.amountLabelOptions.fcName].setValue(t-e),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_READONLY,[this.facilityRequestOptions.amountLabelOptions.fcName],1))}},{key:"redirectToSchedule",value:function(t){}},{key:"onFacilityTypeChanged",value:function(t){t&&t.selectedObj&&(this.facility=t.selectedObj,this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_READONLY,[this.facilityRequestOptions.revolvingAmountOptions.fcName],1),this.commonProv.applyDynScreenDisplay(b.a.ACTION_TYPE_VISIBLE,[this.facilityRequestOptions.revolvingAmountOptions.fcName],1),this.formGroup.controls[this.facilityRequestOptions.revolvingAmountOptions.fcName].setValue(this.common.translate("O"===t.selectedObj.revolvingOneOff?"one_off_key":"Revolving_key")),t.selectedObj.code!==this.facility.code&&(this.formGroup.controls[this.facilityRequestOptions.complexAmountOptions.amountOptions.fcName]&&this.formGroup.controls[this.facilityRequestOptions.complexAmountOptions.amountOptions.fcName].setValue(""),this.formGroup.controls[this.facilityRequestOptions.downPaymentOptions.fcName]&&this.formGroup.controls[this.facilityRequestOptions.downPaymentOptions.fcName].setValue(0)))}},{key:"loadfacilityPurposeList",value:function(){return Object(c.b)(this,void 0,void 0,o().m(function t(){var e,n,i,a,r=this;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.omniPull.returnFacilityPurposeList({}).catch(function(t){r.logger.error("Error: While fetching Product types in PsDropdownProductCategoryComponent : ",t)});case 1:if(e=t.v,this.facilityRequestOptions.purposeOptions.listOfOptions=[],e&&e.gridModel&&e.gridModel.length>0){n=s(e.gridModel);try{for(n.s();!(i=n.n()).done;)a=i.value,this.facilityRequestOptions.purposeOptions.listOfOptions.push({itemValue:a.fmsPurFinId,description:a.description,selectedObj:a})}catch(o){n.e(o)}finally{n.f()}}this.facilityRequestOptions.purposeOptions=Object.assign({},this.facilityRequestOptions.purposeOptions);case 2:return t.a(2)}},t,this)}))}},{key:"selectFile",value:function(t){t&&t[0].selectedFile.type.substring(0,t[0].selectedFile.type.indexOf("/"))}},{key:"showGridValidation",value:function(){this.facilityRequestOptions.errorMsg=this.checkGridControlsValidity(this.formGroup.controls[this.facilityRequestOptions.requestedProductsGridOptions.fcName])?"":this.commonProv.translate("value_is_missing_key")}},{key:"custGridValidator",value:function(){var t=this;return function(e){return t.checkGridControlsValidity(e)?null:{required:!0}}}},{key:"checkGridControlsValidity",value:function(t){return!(null==t.value||null!=t.value&&t.value.some(function(t){return Object.values(t).some(function(t){return""===t||null==t||null==t})}))}}])}(D.OmniBasePage)).\u0275fac=function(t){return new(t||pt)(I.Rb(S.e),I.Rb(C.a),I.Rb(m.a),I.Rb(O.a),I.Rb(y.a),I.Rb(g.a),I.Rb(d.a))},pt.\u0275cmp=I.Lb({type:pt,selectors:[["app-facility-request"]],features:[I.Cb],decls:3,vars:4,consts:[[3,"options","id","onNextPreviousStepper"],["step1","",3,"id",4,"psStep"],["step2","",3,"id",4,"ngIf"],["step1","",3,"id"],["id","facility_req_panel1",3,"options"],["id","'accountCifBranch' + id",3,"options",4,"ngIf"],[3,"options","amountChange","facilityTypeChange","downPaymentChange","fileSelected"],["id","attachment_panel",3,"options",4,"ngIf"],["id","facility_req_pane2",3,"options",4,"ngIf"],["id","'accountCifBranch' + id",3,"options"],["id","attachment_panel",3,"options"],[3,"options","onPsFileSelect"],["id","facility_req_pane2",3,"options"],[3,"options","onPsChange"],["step2","",3,"id"],[4,"psStep"],["id","facility_req_panel2",3,"options"],[1,"component-map-container",3,"options"]],template:function(t,e){1&t&&(I.Xb(0,"ps-template-stepper",0),I.fc("onNextPreviousStepper",function(){return e.showGridValidation()}),I.Pc(1,at,6,6,"ps-form-step",1),I.Pc(2,ct,2,2,"ps-form-step",2),I.Wb()),2&t&&(I.pc("options",e.stepperOptions)("id",e.stepperOptions.stepperName),I.Fb(1),I.pc("psStep","step1"),I.Fb(1),I.pc("ngIf",!e.defaultVO.navigatedFromFL))},directives:[k.a,T.a,S.o,R.a,F.a,$,j.a,tt.a,et.a,nt.a],styles:["#map[_ngcontent-%COMP%] {\n  height: 100%;\n}"]}),pt)},vjTl:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o=n("DFXC"),i=n("Q0Ba"),s=n("V0Fi"),a=n("41l2"),c=n("fXoL"),u=function(){var t=function(t){function e(t,n){var o;return r(this,e),(o=l(this,e,[t,n])).defaultOptions={lovTypeId:s.a.LOV_TYPE_ID_PRIODICITY},o}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.defaultOptions.labelKey=this.commonProv.translate("periodicity_key"),this.defaultOptions.placeHolder=this.commonProv.translate("select_periodicity_key")}},{key:"onChangePriodicityLov",value:function(t){this.onPsChange.emit(t)}}])}(a.a);return t.\u0275fac=function(e){return new(e||t)(c.Rb(i.a),c.Rb(o.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["ps-lov-periodicity"]],inputs:{options:"options"},features:[c.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(c.Xb(0,"ps-dropdown-lov",0),c.fc("onPsChange",function(t){return e.onChangePriodicityLov(t)}),c.Wb()),2&t&&c.pc("id",e.id)("options",e.defaultOptions)},directives:[a.a],styles:[""]}),t}()},xLEv:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var o=n("XNiG"),i=n("1G5W"),a=n("ZyuK"),c=n("iOQE"),u=n("DFXC"),f=n("Q0Ba"),d=n("fXoL"),m=function(){var t=function(t){function e(t,n,i){var s;return r(this,e),(s=l(this,e,[t,n])).omniPullService=i,s.options={},s.defaultOptions={},s.cancelPreviousRequest=new o.a,s}return h(e,t),p(e,[{key:"ngOnInit",value:function(){this.commonProv.copyObject(this.defaultOptions,this.options,!1),this.loadProductTypes()}},{key:"loadProductTypes",value:function(t,e){var n=this,s=[],a={};this.cancelPreviousRequest.next(),this.cancelPreviousRequest=new o.a,e&&(a={appType:e}),t?(this.defaultOptions.listOfOptions=this.defaultOptions.listOfOptions||[],s=t,this.populateProductTypes(s)):this.omniPullService.returnProductClasses(a).pipe(Object(i.a)(this.cancelPreviousRequest)).subscribe(function(t){n.defaultOptions.listOfOptions=[],t&&t.gridModel&&t.gridModel.length>0&&(s=t.gridModel),n.populateProductTypes(s)},function(t){n.logger.error("Error: While fetching Product types in PsDropdownProductTypesComponent : ",t)})}},{key:"populateProductTypes",value:function(t){var e,n=s(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;this.defaultOptions.listOfOptions.push({itemValue:o.productClassCode,description:o.briefName,selectedObj:o})}}catch(i){n.e(i)}finally{n.f()}}},{key:"selectDropDownChange",value:function(t){this.onPsChange.emit(t)}}])}(c.a);return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(u.a),d.Rb(a.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ps-dropdown-product-types"]],inputs:{options:"options"},features:[d.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(t,e){1&t&&(d.Xb(0,"ps-select-dropdown",0),d.fc("onPsChange",function(t){return e.selectDropDownChange(t)}),d.Wb()),2&t&&d.pc("id",e.id)("options",e.defaultOptions)},directives:[c.a],styles:[""]}),t}()}}])}();