{"version":3,"sources":["webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-deal-details/ps-complex-deal-details.component.scss","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-deal-details/ps-complex-deal-details.component.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-deal-details/ps-complex-deal-details.component.html"],"names":["PsComplexDealDetailsComponent","commonP","loggerC","onClickCard","containerLookUpOptions","dealsLabelValuesMap","Map","dealsHeaderMap","requestMap","editRequestMap","showSingleAccount","populateHeaderValueMap","ngOnInit","labelKey","options","currencyFlag","labelsValueMap","headerMap","formGroup","group","balanceMapping","isEditable","editActionUrl","serviceUrl","personalizationNicknameEndPoint","pageData","operID","DEAL_REPORT","title","listOfOptions","map","element","index","itemList","actionDetailsOptions","statementOptions","buttonIcon","redirectUrl","getOptionsForCard","item","fcName","dealNbr","trackByDealNumber","balanceMappingList","key","value","headerTitleMap","subTitleMap","nextPaymentDateMap","nextPaymentValMap","amountMap","settledAmountMap","maturityDateMap","pastDuesMap","lastPaymentDateMap","lastPaymentAmountMap","outstandingBalanceMap","noOfRemainingInsMap","periodicityPaymentMap","isEdit","formGroupMap","placeHolder","set","updateCard","event","filter","acct","showItemPopUp","emit","selector","template"],"mappings":"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","file":"108-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcy1jb21wbGV4LWRlYWwtZGV0YWlscy5jb21wb25lbnQuc2NzcyJ9 */\";","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { PsCommonBusinessSettings } from 'src/app/commonBussinessSRC/psServices/models/ps-commonBusiness.settings';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IMapKeyValue, IOptionsPsContainerLookupOptionComponentExposed } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsBaseFieldComponent } from './../../../../commonSRC/psComponents/ps-base/ps-base-field/ps-base-field.component';\nimport { LoggerService } from './../../../../commonSRC/psServices/logger/logger.service';\nimport { PsCommonService } from './../../../../commonSRC/psServices/ps-common/ps-common.service';\nimport { IOptionsPsComplexDealDetailsExposed } from './ps-complex-deal-details-interfaces.component';\n\n\n@Component({\n  selector: 'ps-complex-deal-details',\n  templateUrl: './ps-complex-deal-details.component.html',\n  styleUrls: ['./ps-complex-deal-details.component.scss'],\n})\nexport class PsComplexDealDetailsComponent extends PsBaseFieldComponent implements OnInit {\n\n  @Input() options: IOptionsPsComplexDealDetailsExposed;\n  @Input() itemCard: any;\n  @Output() onClickCard = new EventEmitter<any>();\n\n  item: any;\n  public containerLookUpOptions: IOptionsPsContainerLookupOptionComponentExposed = {};\n  defaultConf: IOptionsPsComplexDealDetailsExposed;\n  public dealsLabelValuesMap = new Map<string, IMapKeyValue>();\n  public dealsHeaderMap = new Map<string, IMapKeyValue>();\n  public requestMap = new Map<string, string>();\n  public editRequestMap = new Map<string, string>();\n  private showSingleAccount = false;\n\n  constructor(private commonP: PsCommonService, private loggerC: LoggerService) {\n    super(commonP, loggerC);\n    this.populateHeaderValueMap();\n  }\n\n  ngOnInit() {\n    this.containerLookUpOptions.labelKey = this.options.labelKey;\n    this.containerLookUpOptions.currencyFlag = 'currencyBriefNameEnglish';\n    this.containerLookUpOptions.labelsValueMap = this.dealsLabelValuesMap;\n    this.containerLookUpOptions.headerMap = this.dealsHeaderMap;\n    this.containerLookUpOptions.formGroup = this.options.group;\n    this.containerLookUpOptions.balanceMapping = this.balanceMapping();\n    this.containerLookUpOptions.isEditable = this.options.isEditable;\n    this.containerLookUpOptions.editActionUrl = PsCommonBusinessSettings.serviceUrl.personalizationNicknameEndPoint;\n    this.containerLookUpOptions.requestMap = this.requestMap;\n    this.containerLookUpOptions.editRequestMap = this.editRequestMap;\n    this.containerLookUpOptions.pageData = {\n      operID: ConstantCommon.DEAL_REPORT,\n      title: 'deal_report_key'\n    };\n\n    if (this.options && this.options.listOfOptions) {\n      this.options.listOfOptions.map((element, index) => element['rowIndex'] = index);\n      this.options.itemList = this.options.listOfOptions;\n    }\n\n    this.containerLookUpOptions.actionDetailsOptions = [{}];\n    this.containerLookUpOptions.statementOptions = {\n      buttonIcon: 'facilities',\n      redirectUrl: 'deal-statement-report'\n    };\n  }\n\n  getOptionsForCard(item) {\n    return {\n      ...this.containerLookUpOptions,\n      fcName : this.options.fcName + item.dealNbr\n    }\n  }\n\n  trackByDealNumber(index: number, item: any): any {\n    return item?.dealNbr ?? index;\n  }\n\n  private balanceMapping(): any[] {\n    const balanceMappingList = [\n      {\n        key: 'settled_amount_key',\n        value: 'paidAmount'\n      },\n      {\n        key: 'outstanding_balance_key',\n        value: 'outstandingBalance'\n      },\n    ];\n\n    return balanceMappingList;\n  }\n\n  private populateHeaderValueMap() {\n    let headerTitleMap: IMapKeyValue = {};\n    let subTitleMap: IMapKeyValue = {};\n    let nextPaymentDateMap: IMapKeyValue = {};\n    let nextPaymentValMap: IMapKeyValue = {};\n    let amountMap: IMapKeyValue = {};\n    let settledAmountMap: IMapKeyValue = {};\n    let maturityDateMap: IMapKeyValue = {};\n    let pastDuesMap: IMapKeyValue = {};\n    let lastPaymentDateMap: IMapKeyValue = {};\n    let lastPaymentAmountMap: IMapKeyValue = {};\n    let outstandingBalanceMap: IMapKeyValue = {};\n    let noOfRemainingInsMap: IMapKeyValue = {};\n    let periodicityPaymentMap: IMapKeyValue = {};\n\n    nextPaymentDateMap = {\n      key: 'nextPaymentDate',\n      value: '---/--/----'\n    };\n\n    nextPaymentValMap = {\n      key: 'nextPaymentVal',\n      value: '0.0'\n    };\n\n    settledAmountMap = {\n      key: 'paidAmount',\n      value: '0.0'\n    };\n\n    amountMap = {\n      key: 'amount',\n      value: '0.0'\n    };\n\n    maturityDateMap = {\n      key: 'maturityDate',\n      value: '---/--/----',\n    }\n\n    pastDuesMap = {\n      key: 'pastDues',\n      value: '0.0'\n    }\n\n    lastPaymentDateMap = {\n      key: 'lastPaymentDate',\n      value: '---/--/----',\n    };\n\n    lastPaymentAmountMap = {\n      key: 'lastPaymentAmount',\n      value: '0.0'\n    };\n\n    outstandingBalanceMap = {\n      key: 'outstandingBalanceDesc',\n      value: '0.0'\n    };\n\n    noOfRemainingInsMap = {\n      key: 'noOfRemainingIns',\n      value: '0'\n    };\n\n    periodicityPaymentMap = {\n      key: 'periodicityPayment',\n      value: '0'\n    };\n\n    headerTitleMap = {\n      key: 'title',\n      value: 'title',\n      isEdit: false,\n      formGroupMap: {\n        placeHolder: 'title_key',\n        fcName: 'title',\n      }\n    };\n\n    //edited by Marina TP id: #1486410 to fix the issue of nickName doesn't update when edited\n    subTitleMap = {\n      key: 'subTitle',\n      value: 'nickName',\n      isEdit: true,\n      formGroupMap: {\n        placeHolder: 'enter_deal_nick',\n        fcName: 'nickName',\n      }\n    };\n\n    this.dealsLabelValuesMap.set('financing_amount_key', amountMap);\n    this.dealsLabelValuesMap.set('maturity_date_key', maturityDateMap);\n    this.dealsLabelValuesMap.set('payment_key', periodicityPaymentMap);\n    this.dealsLabelValuesMap.set('no_remaining_installments_key', noOfRemainingInsMap);\n\n    this.dealsLabelValuesMap.set('settled_amount_key', settledAmountMap);\n    this.dealsLabelValuesMap.set('outstanding_balance_key', outstandingBalanceMap);\n    this.dealsLabelValuesMap.set('past_dues_key', pastDuesMap);\n    this.dealsLabelValuesMap.set('last_payment_date_key', lastPaymentDateMap);\n    this.dealsLabelValuesMap.set('last_payment_amount_key', lastPaymentAmountMap);\n    this.dealsLabelValuesMap.set('next_payment_date_key', nextPaymentDateMap);\n    this.dealsLabelValuesMap.set('next_payment_amount_key', nextPaymentValMap);\n\n    // will be used as header to template card in look up details component\n    this.dealsHeaderMap.set('title', headerTitleMap);\n    this.dealsHeaderMap.set('subTitle', subTitleMap);\n    this.requestMap.set('nickNameNumber', 'key');\n    this.requestMap.set('oldNickName', 'subTitle');\n    this.editRequestMap.set('newNickName', 'subTitle');\n    this.editRequestMap.set('type', 'A');\n\n  }\n\n  updateCard(event: any) {\n    if (event && this.options.listOfOptions) {\n      this.options.itemList = this.options.listOfOptions.filter(acct => acct === event);\n      this.options.item = this.options.itemList[0];\n      this.showSingleAccount = !this.showSingleAccount;\n      this.options.showItemPopUp = !this.options.showItemPopUp;\n      // this.options.showSelectedCard = false;\n    }\n    this.onClickCard.emit(this.options);\n  }\n}\n","export default \"<ps-container-lookup-option [id]=\\\"'deals-list-' + id + i\\\" [options]=\\\"getOptionsForCard(item)\\\" *ngFor=\\\"let item of options.itemList; let i = index; trackBy: trackByDealNumber\\\" [itemCard]=\\\"item\\\"\\n    (clickedCard)=\\\"updateCard($event)\\\">\\n\\n</ps-container-lookup-option>\";"]}