{"version":3,"sources":["./src/app/pages/activate-soft-token-otp/activate-soft-token-otp.module.ts","./src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.module.ts","./src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.ts","./src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.scss","./src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.html"],"names":[],"mappings":"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","file":"pages-activate-soft-token-otp-activate-soft-token-otp-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PsComponentsModule } from 'src/app/commonSRC/psComponents/ps-components.module';\nimport { PsComplexVascoSoftTokenComponentModule } from './../../commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.module';\nimport { PsTemplateStepperModule } from './../../commonSRC/psTemplates/ps-template-stepper/ps-template-stepper.template.module';\nimport { SharedModule } from './../../commonSRC/shared.module';\nimport { ActivateSoftTokenOtpPage } from './activate-soft-token-otp.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ActivateSoftTokenOtpPage\n  }\n];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild(routes),\n    PsComponentsModule,\n    PsTemplateStepperModule,\n    PsComplexVascoSoftTokenComponentModule,\n  ],\n  declarations: [ActivateSoftTokenOtpPage]\n})\nexport class ActivateSoftTokenOtpPageModule { }\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from 'src/app/commonSRC/shared.module';\r\nimport { PsComponentsModule } from '../../../../commonSRC/psComponents/ps-components.module';\r\nimport { PsInputVarcharComponentModule } from './../../ps-keyin-input/ps-input-varchar/ps-input-varchar.component.module';\r\nimport { PsComplexVascoSoftTokenComponent } from './ps-complex-vasco-soft-token.component';\r\n\r\n\r\n@NgModule({\r\n    declarations: [PsComplexVascoSoftTokenComponent],\r\n    imports: [\r\n        SharedModule,\r\n        PsComponentsModule,\r\n        PsInputVarcharComponentModule\r\n    ],\r\n    exports: [PsComplexVascoSoftTokenComponent],\r\n    entryComponents: [PsComplexVascoSoftTokenComponent]\r\n\r\n})\r\nexport class PsComplexVascoSoftTokenComponentModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AuthMatrixViewer } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-authentication-matrix/ps-authentication-matrix.component.interface';\nimport { AuthenticationMatrixService } from 'src/app/commonBussinessSRC/psServices/authentication-matrix/authentication-matrix.service';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IOptionsPsLabel } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsBaseFieldComponent } from '../../../../commonSRC/psComponents/ps-base/ps-base-field/ps-base-field.component';\nimport { LoggerService } from '../../../../commonSRC/psServices/logger/logger.service';\nimport { PsCommonService } from '../../../../commonSRC/psServices/ps-common/ps-common.service';\nimport { IOtionsPsComplexVascoSoftTokenExposed } from './ps-complex-vasco-soft-token.component.interface';\n\n@Component({\n  selector: 'ps-complex-vasco-soft-token',\n  templateUrl: './ps-complex-vasco-soft-token.component.html',\n  styleUrls: ['./ps-complex-vasco-soft-token.component.scss'],\n})\nexport class PsComplexVascoSoftTokenComponent extends PsBaseFieldComponent implements OnInit {\n  @Input() options: IOtionsPsComplexVascoSoftTokenExposed;\n\n  defaultOptions: IOtionsPsComplexVascoSoftTokenExposed = {\n    crontoImageOptions: {\n      imageName: ''\n    }\n  }\n\n  softTokenDisabledHintLblOptions: IOptionsPsLabel = {\n    labelKey: 'enable_soft_token_param_in_order_to_proceed_key'\n  }\n  userInfo;\n  showCrontoDetails = false;\n  constructor(public commonProv: PsCommonService, public logger: LoggerService, private omniAuthService: AuthenticationMatrixService, private omniPull: OmniPullService) {\n    super(commonProv, logger);\n  }\n\n  ngOnInit() {\n    this.commonProv.copyObject(this.defaultOptions, this.options, false);\n    this.userInfo = this.commonProv.session.getValueOf(ConstantCommon.USERINFO);\n\n  }\n\n  onActivationButtonClicked(event) {\n    this.common.presentLoading();\n    this.omniPull.getParamValOf(CommonBussinessConstant.ENABLE_OTP_GENARATION).then(res => {\n      if (res[CommonBussinessConstant.ENABLE_OTP_GENARATION]) {\n        let userInfo: any = {\n          userName: this.userInfo?.omniUserVO.NAME,\n          userCifNo: this.userInfo?.omniUserVO.CIF_NO\n        };\n        let otpAuth =\n        {\n          data: [{\n            authentionTypesEnabled: \"SmsOTP\",\n            authenticationTypesDesc: \"otp_key\",\n          }],\n          success: true\n        }\n        this.omniAuthService.showAndManageValidations(otpAuth, AuthMatrixViewer.MODAL, userInfo).then(result => {\n          if (result && result.success) {\n            this.callVascoCrontoWS();\n          }\n        }).catch((error) => {\n          this.commonProv.logger.error(error + \" : error while validating otp authentication in ActivateSoftTokenOtpPage\");\n          this.common.dismissLoading();\n        })\n      } else {\n        this.callVascoCrontoWS();\n      }\n    });\n  }\n\n  private callVascoCrontoWS() {\n    this.common.presentLoading();\n    this.omniPull.generateVascoCrontoImage({}).then((data: any) => {\n      if (data) {\n        this.showCrontoDetails = true;\n        this.defaultOptions.crontoImageOptions.imageBase64Url = data.imageBytesbase64;\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, ['activate_soft_token_btn'], 1);\n      }\n    }).finally(() => {\n      this.common.dismissLoading();\n    });\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcy1jb21wbGV4LXZhc2NvLXNvZnQtdG9rZW4uY29tcG9uZW50LnNjc3MifQ== */\";","export default \"<ps-container-complex class=\\\"ps-complex-vasco-soft-token\\\">\\n\\n  <ps-action-button id=\\\"activate_soft_token_btn\\\" [options]=\\\"defaultOptions.activateSoftTokenOptions\\\"\\n    [ngClass]=\\\"{'soft-token-btn': options.disableSoftTokenBtn}\\\" (onClick)=\\\" onActivationButtonClicked($event)\\\">\\n  </ps-action-button>\\n\\n  <div class=\\\"soft-token-hint\\\" *ngIf=\\\"options.disableSoftTokenBtn\\\">\\n    <ps-label [options]=\\\"softTokenDisabledHintLblOptions\\\">\\n    </ps-label>\\n  </div>\\n\\n  <ng-container *ngIf=\\\"showCrontoDetails\\\" id=\\\"cronto_details_panel\\\">\\n    <ps-action-image [options]=\\\"defaultOptions.crontoImageOptions\\\"></ps-action-image>\\n    <ps-input-varchar id=\\\"cronto-code\\\" [options]=\\\"defaultOptions.crontoCodeOptions\\\">\\n    </ps-input-varchar>\\n  </ng-container>\\n\\n</ps-container-complex>\";"],"sourceRoot":"webpack:///"}