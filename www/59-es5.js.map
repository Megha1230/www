{"version":3,"sources":["webpack:///src/app/pages/security-renewal/security-renewal.page.scss","webpack:///src/app/pages/security-renewal/security-renewal.page.html","webpack:///src/app/pages/security-renewal/security-renewal.page.ts","webpack:///src/app/pages/omni-base/omni-base.page.ts","webpack:///src/app/pages/omni-base/omni-base.page.html","webpack:///src/app/pages/omni-base/omni-base.page.scss"],"names":["SecurityRenewalPage","commonProv","navService","loggerP","omniCommonService","omniPull","formGroup","securityRenewalVO","securityOptions","previousSukukRenewal","previousSukukLiquidation","stepperOptions","stepperName","isHorizontalStepper","numberOfSteps","namesofSteps","group","submitOptions","extraParams","submitServiceUrl","serviceUrl","securityRenewal","requestObject","panelOptions1Step1","isExpandable","labelKey","iconName","expanded","sukukOptions","placeHolder","fcName","todayDateOptions","type","psClass","portfolioCifOptions","sukukBalanceOptions","sukukRenewalOptions","sukukLiquidationOptions","remainingOptions","availableBalOptions","isAgent","newIsdaraNumberOptions","showEmpty","valueOfLiquidationOptions","currenciesOptions","amountOptions","decimalPoints","showAvailableBal","ngOnInit","baseFormGroup","showInitialCardValues","cifInfo","session","getValueOf","USERINFO","navResult","getAllParams","push","isEditable","securityInformation","security","blockedAmount","blockedQuantity","copyObject","securityCode1","securityCode2","portfolioSeq","defaultValidations","Map","set","disabled","setDefaultValidators","ngAfterViewInit","controls","setValue","totalNumberOfSukuk","sukuCurrency","paramData","sukukSearch","linkToSecurityDetails","returnSukukCurrency","then","result","gridModel","length","currencyCode","tradingCurrencyCode","selecetdSukukPrice","sukukPrice","calculatedSukukPrice","Number","newIsdaraNumber","applyDynScreenDisplay","ACTION_TYPE_READONLY","logger","warn","error","onsukukRenewalAmountChange","options","log","newValue","value","Math","abs","presentInfoAlert","translate","remaining","sign","onsukukLiquidationAmountChange","ionViewWillLeave","selector","template","OmniBasePage","isPageDisabled","injectionHandler","navigationServices","init","currentOperID","oper_ID","customizationMap","returnOperCustomization","navParams","formDisObj","readOnlypage","IS_READONLY","FORM_READONLY","screenTranslationOperIds","MAIN_CONFIG","SCREEN_TRANSLATION_OPER","includes","getScreenTranslations","ionViewDidEnter","viewDidEnter","viewWillLeave","ionViewWillEnter","viewWillEnter","disableForm","undefined","get","status","disable","Object","keys","forEach","key","checkViewBS","next","page","didEnter","setCheckViewByOper","emitCheckViewByOper","dismissLoading","getAllSessionFcVars","setFormGroupByOper","willLeave","ngAfterViewChecked","setTimeout","screenOperId","operationId","activeLanguage","activeLanguge","language","getOperTranslation"],"mappings":"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","file":"59-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZWN1cml0eS1yZW5ld2FsLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ps-template-stepper [options]=\\\"stepperOptions\\\" [id]=\\\"stepperOptions.stepperName\\\">\\n  <ps-form-step *psStep=\\\"'step1'\\\" step1 [id]=\\\"stepperOptions.namesofSteps[0]\\\">\\n    <ps-container-panel [options]=\\\"panelOptions1Step1\\\" id=\\\"sec_renewal_panel\\\">\\n      <ps-option-expired-security id=\\\"ps-option-security-list\\\" *ngFor=\\\"let security of securityOptions\\\"\\n        [options]=\\\"security\\\" click=\\\"onclick\\\"></ps-option-expired-security>\\n\\n      <ps-input-display-only id=\\\"'newIsdaraNumber' + id\\\" [options]=\\\"newIsdaraNumberOptions\\\">\\n      </ps-input-display-only>\\n\\n\\n      <ps-input-numeric *ngIf=\\\"showAvailableBal\\\" id=\\\"'availableBal' + id\\\" [options]=\\\"availableBalOptions\\\"></ps-input-numeric>\\n\\n\\n      <ps-input-numeric id=\\\"'sukukLiquidation' + id\\\" (onPsChange)=\\\"onsukukLiquidationAmountChange($event)\\\"\\n        [options]=\\\"sukukLiquidationOptions\\\"></ps-input-numeric>\\n\\n\\n      <ps-input-numeric id=\\\"'sukukRenewal' + id\\\" (onPsChange)=\\\"onsukukRenewalAmountChange($event)\\\"\\n        [options]=\\\"sukukRenewalOptions\\\"></ps-input-numeric>\\n\\n\\n      <ps-input-numeric id=\\\"'remaining' + id\\\" [options]=\\\"remainingOptions\\\"></ps-input-numeric>\\n\\n      <ps-complex-amount id=\\\"'valueOfLiquidation' + id\\\" [options]=\\\"valueOfLiquidationOptions\\\">\\n      </ps-complex-amount>\\n\\n    </ps-container-panel>\\n  </ps-form-step>\\n</ps-template-stepper>\";","import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { IOptionsPsComplexAmountExposed } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-amount/ps-complex-amount.component.interfaces';\nimport { IOptionsPsOptionSecurityExposed, ISecurityListResponse } from 'src/app/commonBussinessSRC/psComponents/ps-container-lookup-option/ps-option-expired-security/ps-option-expired-security.component.interface';\nimport { IOptionsPsDisplayOnlyTodayDateExposed } from 'src/app/commonBussinessSRC/psComponents/ps-input-display-only/ps-display-only-today-date/ps-display-only-today-date.component.interface';\nimport { IOptionsPsInputNumericExposed } from 'src/app/commonBussinessSRC/psComponents/ps-keyin-input/ps-input-numeric/ps-input-numeric.component.interfaces';\nimport { PsCommonBusinessSettings } from 'src/app/commonBussinessSRC/psServices/models/ps-commonBusiness.settings';\nimport { OmniCommonService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-common.service';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { CommonUtils } from 'src/app/commonSRC/psServices/models/common-utils';\nimport { IdefaultValidators, IOptionsPsContainerPanel, IOptionsPsKeyinInput, IOptionsPsKeyinInputExposed, IOptionsTemplateStepper } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsNavigatorService } from 'src/app/commonSRC/psServices/navigator/ps-navigator.service';\nimport { PsCommonService } from 'src/app/commonSRC/psServices/ps-common/ps-common.service';\n\nimport { PsCommonSettings } from '../../commonSRC/psServices/models/ps-common.settings';\nimport { OmniBasePage } from '../omni-base/omni-base.page';\n\n@Component({\n  selector: 'app-security-renewal',\n  templateUrl: './security-renewal.page.html',\n  styleUrls: ['./security-renewal.page.scss'],\n})\nexport class SecurityRenewalPage extends OmniBasePage implements OnInit, AfterViewInit {\n  formGroup: FormGroup = new FormGroup({});\n  securityRenewalVO = {};\n  securityOptions: IOptionsPsOptionSecurityExposed[] = [];\n  security: ISecurityListResponse;\n  selecetdSukukPrice: number;\n  blockedAmount: number;\n  previousSukukRenewal: number = 0;\n  previousSukukLiquidation: number = 0;\n  stepperOptions: IOptionsTemplateStepper = {\n    stepperName: 'sec_ren_stepper',\n    isHorizontalStepper: true,\n    numberOfSteps: 1,\n    namesofSteps: ['sec_renewal_step1'],\n    group: this.formGroup,\n    submitOptions: {\n      extraParams: {},\n      submitServiceUrl: PsCommonBusinessSettings.serviceUrl.securityRenewal,\n      group: this.formGroup\n    },\n    requestObject: this.securityRenewalVO\n  };\n\n  panelOptions1Step1: IOptionsPsContainerPanel = {\n    isExpandable: true,\n    labelKey: 'request_key',\n    iconName: 'document',\n    expanded: true\n  };\n  sukukOptions: IOptionsPsKeyinInputExposed = {\n    placeHolder: 'renewal_liquidation_of_sukuk_key',\n    labelKey: 'renewal_liquidation_of_sukuk_key',\n    group: this.formGroup,\n    fcName: 'sukukType'\n  };\n  todayDateOptions: IOptionsPsDisplayOnlyTodayDateExposed = {\n    placeHolder: 'trx_date_key',\n    labelKey: 'trx_date_key',\n    type: 'text',\n    psClass: 'ps-disabled',\n    group: this.formGroup,\n    fcName: 'todayDate'\n  };\n  portfolioCifOptions: IOptionsPsKeyinInputExposed = {\n    placeHolder: 'portfolio_key',\n    labelKey: 'portfolio_key',\n    group: this.formGroup,\n    fcName: 'portfolioCif'\n  };\n  sukukBalanceOptions: IOptionsPsKeyinInputExposed = {\n    placeHolder: 'sukuk_balance_key',\n    labelKey: 'sukuk_balance_key',\n    group: this.formGroup,\n    fcName: 'balance'\n  };\n\n  sukukRenewalOptions: IOptionsPsInputNumericExposed = {\n    fcName: 'quantity',\n    group: this.formGroup,\n    labelKey: 'sukuk_renewal_key',\n    placeHolder: 'enter_your_amount_key',\n  };\n\n  sukukLiquidationOptions: IOptionsPsInputNumericExposed = {\n    fcName: 'sukukLiquidation',\n    group: this.formGroup,\n    labelKey: 'sukuk_liquidation_key',\n    placeHolder: 'enter_your_amount_key',\n  };\n\n\n  remainingOptions: IOptionsPsInputNumericExposed = {\n    fcName: 'remaining',\n    group: this.formGroup,\n    labelKey: 'remaining_key',\n    placeHolder: 'amount_key',\n  };\n\n\n  availableBalOptions: IOptionsPsInputNumericExposed = {\n    fcName: 'availableBal',\n    group: this.formGroup,\n    labelKey: PsCommonBusinessSettings.isAgent ? 'available_balance_key' : 'sukuk_balance_key',\n    placeHolder: 'amount_key',\n  };\n  newIsdaraNumberOptions: IOptionsPsKeyinInput = {\n      labelKey: 'new_isdara_number_key',\n      placeHolder: 'new_isdara_number_key',\n      fcName: 'newIsdaraNumber',\n      group: this.formGroup,\n      showEmpty: true,\n  };\n\n\n  valueOfLiquidationOptions: IOptionsPsComplexAmountExposed = {\n    currenciesOptions: {\n      labelKey: 'currency_key',\n      placeHolder: 'currency_key',\n      group: this.formGroup,\n      fcName: 'valueOfLiquidCurrency'\n    },\n    amountOptions: {\n      labelKey: 'value_of_liquidated_shares_key',\n      placeHolder: 'amount_key',\n      fcName: 'valueOfLiquidation',\n      group: this.formGroup,\n      type: 'amount',\n      decimalPoints: 3\n    }\n  };\n  showAvailableBal = true;\n  workingCif: string;\n  navResult: any;\n  calculatedSukukPrice: number;\n  constructor(public commonProv: PsCommonService, private navService: PsNavigatorService,\n              public loggerP: LoggerService, private omniCommonService: OmniCommonService, public omniPull: OmniPullService) {\n    super();\n  }\n\n  ngOnInit() {\n    super.init();\n    this.baseFormGroup = this.formGroup;\n   // if (PsCommonBusinessSettings.isAgent) {\n     // this.showAvailableBal = true;\n  //  } else {\n     // this.showAvailableBal = false;\n      // this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_MANDATORY, [this.availableBalOptions.currenciesOptions.fcName], 0);\n     // this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_MANDATORY, [this.availableBalOptions.fcName], 0);\n    //}\n    PsCommonSettings.showInitialCardValues = 6;\n    const cifInfo = this.commonProv.session.getValueOf(ConstantCommon.USERINFO);\n    // this.workingCif = (!this.omniCommonService.common.session.getValueOf('WORKINGCIF') ? cifInfo.omniUserVO.CIF_NO : '');\n    this.navResult = this.navService.getAllParams() ? this.navService.getAllParams() : null;\n    if (this.navResult) {\n      this.securityOptions = [];\n      this.securityOptions.push({\n        isEditable: false,\n        securityInformation: this.navResult\n      });\n      this.securityRenewalVO = this.navResult;\n      this.security = this.navResult;\n      this.blockedAmount = this.navResult.blockedQuantity? this.navResult.blockedQuantity: 0;\n      this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams, { securityCode1: this.navResult.securityCode1, securityCode2: this.navResult.securityCode2, portfolioSeq: this.navResult.portfolioSeq }, false, true);\n    }\n    const defaultValidations: Map<string, IdefaultValidators> = new Map<string, IdefaultValidators>();\n    if (!PsCommonBusinessSettings.isAgent) {\n      defaultValidations.set(this.securityRenewalVO[this.sukukLiquidationOptions.fcName], {\n        disabled: true\n      });\n    }\n\n    // defaultValidations.set(this.securityRenewalVO[this.sukukLiquidationOptions.currenciesOptions.fcName], {\n    //   disabled: true\n    // });\n   // this.securityRenewalVO[this.sukukRenewalOptions.fcName] = this.navResult.totalNumberOfSukuk;\n   // this.formGroup.controls[this.sukukRenewalOptions.fcName].setValue(this.navResult.totalNumberOfSukuk);\n    this.commonProv.setDefaultValidators(defaultValidations, this.sukukLiquidationOptions.group);\n\n\n  }\n\n  ngAfterViewInit() {\n    // this.formGroup.controls[this.sukukRenewalOptions.currenciesOptions.fcName].disable();\n    this.securityRenewalVO[this.sukukLiquidationOptions.fcName] = '';\n    this.formGroup.controls[this.sukukRenewalOptions.fcName].setValue(this.navResult.totalNumberOfSukuk - this.blockedAmount);\n    this.formGroup.controls[this.availableBalOptions.fcName].setValue(this.navResult.totalNumberOfSukuk);\n    this.sukuCurrency();\n  }\n  sukuCurrency() {\n    try {\n      const paramData: any = {\n        sukukSearch: {\n          securityCode1: this.navResult.securityCode1,\n          securityCode2: this.navResult.securityCode2\n        },\n        linkToSecurityDetails: 'Y',\n      };\n\n      // const paramData: any = {\n      //   \"workingCif\": this.workingCif,\n      //   \"sukukSearch\": {\n      //     \"securityCode1\": this.navResult.securityCode1,\n      //     \"securityCode2\": this.navResult.securityCode2\n      //   }\n      // };\n      this.omniPull.returnSukukCurrency(paramData).then((result) => {\n        if (result && result.gridModel != null && result.gridModel.length > 0) {\n          const currencyCode = result.gridModel[0].tradingCurrencyCode; // result.gridModel.find(x => x.branchesId == this.cifInfo.cifBranch);\n          this.selecetdSukukPrice = result.gridModel[0].sukukPrice;\n          this.calculatedSukukPrice = Number(result.gridModel[0].calculatedSukukPrice);\n          if (result.gridModel[0].newIsdaraNumber) {\n            this.formGroup.controls[this.newIsdaraNumberOptions.fcName].setValue(result.gridModel[0].newIsdaraNumber);\n          }\n\n          this.formGroup.controls[this.valueOfLiquidationOptions.currenciesOptions.fcName].setValue(currencyCode);\n          this.valueOfLiquidationOptions.amountOptions.group.controls[this.valueOfLiquidationOptions.amountOptions.fcName].setValue(this.calculatedSukukPrice * this.securityRenewalVO[this.sukukLiquidationOptions.fcName]);\n          this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [this.availableBalOptions.fcName], 1);\n          this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [this.valueOfLiquidationOptions.currenciesOptions.fcName], 1);\n          this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [this.valueOfLiquidationOptions.amountOptions.fcName], 1);\n          this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [this.remainingOptions.fcName], 1);\n          if (!PsCommonBusinessSettings.isAgent) {\n            this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [this.availableBalOptions.fcName], 1);\n          }\n        } else { this.commonProv.logger.warn(result, 'empty response'); }\n      }).catch((error) => { });\n    } catch (error) { }\n  }\n  public onsukukRenewalAmountChange(options) {\n    this.loggerP.log('onsukukRenewalAmountChange', options.newValue);\n    this.securityRenewalVO[this.sukukRenewalOptions.fcName]  = options.newValue;\n    // will not enter at first call, because available is 0.\n    if(Number(this.availableBalOptions.group.controls[this.availableBalOptions.fcName].value) != 0) {\n      // this is to set the liquidation update after adding the renewal, so that when check if available is less than the sum, the check will be correct\n      // plus, the absolute is added so that when liquidation is negative, that wont affect the summation.\n      // example: available 25000, renewal 26000, liquidation will be -1000. condition: 25000 < 26000 - 1000 is false, where this has to be true.\n      this.securityRenewalVO[this.sukukLiquidationOptions.fcName] = Math.abs(Number(this.availableBalOptions.group.controls[this.availableBalOptions.fcName].value) - this.blockedAmount - options.newValue);\n    }\n    if (this.security.totalNumberOfSukuk - this.blockedAmount < (Number(this.securityRenewalVO[this.sukukRenewalOptions.fcName]) + Number(this.securityRenewalVO[this.sukukLiquidationOptions.fcName]))) {\n      CommonUtils.presentInfoAlert(this.commonProv.translate('sum_of_sukuk_liquidation_and_sukuk_renewal_should_be_less_than_sukuk_balance_key'));\n      // setting the renewal to its previous amount\n      this.formGroup.controls[this.sukukRenewalOptions.fcName].setValue(this.previousSukukRenewal);\n      return;\n    }\n    // keep target of currently added amount\n    this.previousSukukRenewal = this.securityRenewalVO[this.sukukRenewalOptions.fcName];\n    this.formGroup.controls[this.sukukLiquidationOptions.fcName].setValue(this.securityRenewalVO[this.sukukLiquidationOptions.fcName]);\n    const remaining = this.security.totalNumberOfSukuk - (Number(this.securityRenewalVO[this.sukukLiquidationOptions.fcName] ) + Number(options.newValue));\n    this.remainingOptions.group.controls[this.remainingOptions.fcName].setValue(Math.sign(remaining) === -1 ? '0' : remaining);\n  }\n\n  public onsukukLiquidationAmountChange(options) {\n    this.loggerP.log('onsukukLiquidationAmountChange', options.newValue);\n    this.securityRenewalVO[this.sukukLiquidationOptions.fcName]  = options.newValue;\n    // this is to set the renewal update after adding the liquidation, so that when check if available is less than the sum, the check will be correct\n    // plus, the absolute is added so that when renewal is negative, that wont affect the summation.\n    // example: available 25000, liquidation 26000, renewal will be -1000. condition: 25000 < 26000 - 1000 is false, where this has to be true.\n    this.securityRenewalVO[this.sukukRenewalOptions.fcName] = Math.abs(Number(this.availableBalOptions.group.controls[this.availableBalOptions.fcName].value) - this.blockedAmount - options.newValue);\n    if (this.security.totalNumberOfSukuk - this.blockedAmount < (Number(this.securityRenewalVO[this.sukukRenewalOptions.fcName]) + Number(this.securityRenewalVO[this.sukukLiquidationOptions.fcName]))) {\n      CommonUtils.presentInfoAlert(this.commonProv.translate('sum_of_sukuk_liquidation_and_sukuk_renewal_should_be_less_than_sukuk_balance_key'));\n      // setting the liquidation to its previous amount\n      this.formGroup.controls[this.sukukLiquidationOptions.fcName].setValue(this.previousSukukLiquidation);\n      return;\n    }\n    // keep target of currently added amount\n    this.previousSukukLiquidation = this.securityRenewalVO[this.sukukLiquidationOptions.fcName];\n    this.formGroup.controls[this.sukukRenewalOptions.fcName].setValue(this.securityRenewalVO[this.sukukRenewalOptions.fcName]);\n    const remaining = this.security.totalNumberOfSukuk - (Number(this.availableBalOptions.group.controls[this.availableBalOptions.fcName].value) - this.blockedAmount);\n    this.remainingOptions.group.controls[this.remainingOptions.fcName].setValue(remaining);\n    this.valueOfLiquidationOptions.amountOptions.group.controls[this.valueOfLiquidationOptions.amountOptions.fcName].setValue(this.calculatedSukukPrice * this.securityRenewalVO[this.sukukLiquidationOptions.fcName]);\n  }\n\n  ionViewWillLeave() {\n    PsCommonSettings.showInitialCardValues = 3;\n  }\n\n}\n","import { AfterViewChecked, Component, HostBinding, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { CommonCustUtils } from 'src/app/commonSRC/customization/psServices/util/common-cust-utils';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IsysParamObj } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonSettings } from 'src/app/commonSRC/psServices/models/ps-common.settings';\nimport { PsNavigatorService } from 'src/app/commonSRC/psServices/navigator/ps-navigator.service';\nimport { CommonUtils } from './../../commonSRC/psServices/models/common-utils';\nimport { PsCommonService } from './../../commonSRC/psServices/ps-common/ps-common.service';\nimport { PsApplicationSettings } from 'src/app/commonSRC/psServices/models/ps-app-settings';\n\n\n@Component({\n  selector: 'app-omni-base',\n  templateUrl: './omni-base.page.html',\n  styleUrls: ['./omni-base.page.scss'],\n})\nexport class OmniBasePage implements OnInit, AfterViewChecked {\n  commonProv: PsCommonService;\n  isPageDisabled = false;\n  baseFormGroup: FormGroup;\n  private customizationMap: Map<string, any>; // Modified by Richie for #BUG 1259353\n  navigationServices?: PsNavigatorService;\n  pagesNavigationInfoSubscription?: Subscription;\n  currentOperID;\n  screenTranslationOperIds: any;\n  @HostBinding('class') psClass;\n  constructor() {\n    this.commonProv = CommonUtils.injectionHandler(PsCommonService);\n    this.navigationServices = CommonUtils.injectionHandler(PsNavigatorService);\n    // this.getScreenTranslations();\n  }\n\n  init() {\n    this.currentOperID = PsCommonSettings.oper_ID;\n    this.customizationMap = this.commonProv.returnOperCustomization();\n    const navParams: any = this.navigationServices.getAllParams();\n    const formDisObj: IsysParamObj = {};\n    // let oper = PsCommonSettings.oper_ID;\n    // PsCommonSettings.currentListOfSteps = {};\n    if (navParams && navParams.readOnlypage === true) {\n      formDisObj.IS_READONLY = 1;\n      // Modified by Richie for #BUG 1259353\n      if (this.customizationMap) {\n        this.customizationMap.set(ConstantCommon.FORM_READONLY, formDisObj);\n      }\n    } else if (this.customizationMap) {\n      formDisObj.IS_READONLY = 0;\n      this.customizationMap.set(ConstantCommon.FORM_READONLY, formDisObj);\n    }\n    // End Richie\n    \n    // AZDB-7529 - Start - AMANAOI250035 - 201195 - The system is not displaying the correct report name - Dev => Muzammil Arif\n    this.screenTranslationOperIds = PsApplicationSettings.MAIN_CONFIG.SCREEN_TRANSLATION_OPER ? PsApplicationSettings.MAIN_CONFIG.SCREEN_TRANSLATION_OPER : [];\n    if (this.screenTranslationOperIds.length > 0 && this.screenTranslationOperIds.includes(this.currentOperID)) {\n      this.getScreenTranslations(this.currentOperID);\n    }\n    // AZDB-7529 - End - AMANAOI250035 - 201195 - The system is not displaying the correct report name - Dev => Muzammil Arif\n  }\n\n  ngOnInit() {\n    this.init();\n  }\n\n  ionViewDidEnter() {\n    this.viewDidEnter();\n  }\n\n  ionViewWillLeave() {\n    this.viewWillLeave();\n  }\n\n  ionViewWillEnter() {\n    this.viewWillEnter();\n  }\n\n  viewWillEnter() {\n\n  }\n\n  private disableForm(formGroup: FormGroup) {\n    // Modified by Richie for #BUG 1259353\n    if (formGroup !== undefined && this.customizationMap) {\n      const formDisObj: IsysParamObj = this.customizationMap.get(ConstantCommon.FORM_READONLY);\n      // End Richie\n      if (formDisObj && formDisObj.IS_READONLY === 1 && formGroup.status != 'DISABLED') {\n        formGroup.disable();\n        Object.keys(formGroup.controls).forEach((key) => {\n          this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, [key], 1);\n        });\n      }\n    }\n  }\n\n  viewDidEnter() {\n    this.commonProv.checkViewBS.next({ value: true, page: this, didEnter: true });\n    this.commonProv.setCheckViewByOper(this.currentOperID ? this.currentOperID : PsCommonSettings.oper_ID);\n    this.commonProv.emitCheckViewByOper(this.currentOperID ? this.currentOperID : PsCommonSettings.oper_ID, { value: true, page: this, didEnter: true });\n\n    this.commonProv.dismissLoading();\n    this.disableForm(this.baseFormGroup);\n    CommonCustUtils.getAllSessionFcVars(this.baseFormGroup);\n    this.commonProv.setFormGroupByOper(this.baseFormGroup); // Added by Zunair For #BUG 1257538\n  }\n\n  viewWillLeave() {\n    this.commonProv.checkViewBS.next({ value: true, page: this, willLeave: true });\n    this.commonProv.setCheckViewByOper(this.currentOperID ? this.currentOperID : PsCommonSettings.oper_ID);\n    this.commonProv.emitCheckViewByOper(this.currentOperID ? this.currentOperID : PsCommonSettings.oper_ID, { value: true, page: this, willLeave: true });\n  }\n  // Edited by Salah #1556226 in some cases the fields were being editable in checker so the setTimeout was \n  // added after all the changeEvents are finished to disable the form \n  ngAfterViewChecked() {\n    if (!this.isPageDisabled) {\n      setTimeout(() => {\n        this.disableForm(this.baseFormGroup);\n        this.isPageDisabled = true\n      }, 300);\n    }\n  }\n\n  // AZDB-7529 - Start - AMANAOI250035\n  getScreenTranslations(screenOperId: number) {\n    const operationId: number = screenOperId ? screenOperId : 2222;\n    const activeLanguage: string = PsCommonSettings.activeLanguge ? PsCommonSettings.activeLanguge : 'EN';\n    if (operationId && activeLanguage) {\n      this.commonProv.language.getOperTranslation(activeLanguage, operationId);\n    }\n  }\n  // AZDB-7529 - End - AMANAOI250035\n}\n","export default \"\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvbW5pLWJhc2UucGFnZS5zY3NzIn0= */\";"]}