(window.webpackJsonp=window.webpackJsonp||[]).push([[2,339,340,341,342,343,344,345,346,347,348,349],{L0og:function(t,i,e){"use strict";e.d(i,"a",function(){return B});var o=e("fXoL"),s=e("ZF3V"),n=e("DFXC"),l=e("zngb"),p=e("qEF5"),c=e("QZhd"),a=e("woXy"),h=e("Q0Ba"),r=e("ofXK"),m=e("F1Jl"),u=e("Isd1"),d=e("BYmO"),O=e("3Pt+"),f=e("K+6K"),g=e("ilDp");function b(t,i){if(1&t){const t=o.Yb();o.Xb(0,"div",11),o.Xb(1,"span"),o.Rc(2),o.Wb(),o.Xb(3,"ps-action-icon",12),o.fc("onClick",function(){o.Fc(t);const e=i.$implicit,s=i.index;return o.ic(3).deleteSingleItem(e,s,"multi-select-single-item-"+s)}),o.Wb(),o.Wb()}if(2&t){const t=i.$implicit,e=i.index,s=o.ic(3);o.qc("id","multi-select-single-item-"+e),o.Fb(2),o.Sc(t.item),o.Fb(1),o.pc("options",s.deleteSingleItemOptions)("id",s.id+"_stat")}}function L(t,i){if(1&t&&(o.Xb(0,"div"),o.Xb(1,"div",9),o.Rc(2),o.Wb(),o.Pc(3,b,4,4,"div",10),o.Wb()),2&t){const t=o.ic(2);o.Fb(2),o.Sc(t.labelSelectedItems),o.Fb(1),o.pc("ngForOf",t.options.selectedItems)}}function I(t,i){if(1&t){const t=o.Yb();o.Xb(0,"ps-action-icon",13),o.fc("onClick",function(){return o.Fc(t),o.ic(2).confirmMultipleSelection()}),o.Wb()}if(2&t){const t=o.ic(2);o.pc("options",t.saveMultipleOptions)("id",t.id+"_stat")}}function k(t,i){if(1&t){const t=o.Yb();o.Xb(0,"ps-action-icon",13),o.fc("onClick",function(){return o.Fc(t),o.ic(2).resetMultipleSelection()}),o.Wb()}if(2&t){const t=o.ic(2);o.pc("options",t.resetMultipleOptions)("id",t.id+"_stat")}}function v(t,i){if(1&t&&(o.Xb(0,"div",5),o.Pc(1,L,4,2,"div",6),o.Xb(2,"div",7),o.Pc(3,I,1,2,"ps-action-icon",8),o.Pc(4,k,1,2,"ps-action-icon",8),o.Wb(),o.Wb()),2&t){const t=o.ic();o.Fb(1),o.pc("ngIf",t.options.multiple),o.Fb(2),o.pc("ngIf",t.options.multiple),o.Fb(1),o.pc("ngIf",t.options.multiple)}}function w(t,i){if(1&t&&o.Sb(0,"ps-keyin-input",16),2&t){const t=o.ic(2);o.pc("options",t.disableSelectDropdownOptions)}}const D=function(t){return{"fixed-keyin-multiple-container":t,"ps-container-lookup-option-details lookup-card-margin-bottom":!0}};function y(t,i){if(1&t&&(o.Xb(0,"div",14),o.Pc(1,w,1,1,"ps-keyin-input",15),o.Wb()),2&t){const t=o.ic();o.pc("ngClass",o.sc(2,D,!0===t.options.multiple)),o.Fb(1),o.pc("ngIf",t.enableEmptyOpt)}}const C=function(t,i,e,o){return{"lookup-dropdown-content-show":t,"lookup-dropdown-content":i,"lookup-dropdown-content-show-popup":e,"lookup-dropdown-content-show-multiple":o}},S=function(t,i,e){return{"select-item-card":t,"lookup-dropdown-content-show lookup-dropdown-content":i,"lookup-dropdown-content-multiple":e}};let P=(()=>{class t extends s.a{constructor(t,i){super(t,i),this.options={},this.changeItem=new o.o,this.onDeleteItem=new o.o,this.onPagination=new o.o,this.dynamicComponentOptions={},this.templateOptions=[],this.cardContentOptions=[],this.disableSelectDropdownOptions={},this.enableEmptyOpt=c.a.enableEmptyOpt,this.saveMultipleOptions={},this.resetMultipleOptions={},this.deleteSingleItemOptions={},this.totalNbRec=0,this.numberOfItrations=0,this.loadMoreData=!1,this.numberOfRowsToShow=5,this.tempItemList=[],this.tempNumberOfItrations=0,this.noCardClicked=!0,this.labelSelectedItems=this.commonProv.translate("selected_items_key")}ngOnInit(){super.ngOnInit(),this.options.selectedItems=[],this.disableSelectDropdownOptions={labelKey:"",placeHolder:"",fcName:this.options.fcName,group:new O.f({}),disablePreview:!0,allowCust:!1},this.saveMultipleOptions={iconName:"checkmark-circle-outline",allowCust:!0,labelKey:"Confirm"},this.resetMultipleOptions={labelKey:"Reset",allowCust:!0,iconName:"close-circle"},this.deleteSingleItemOptions={labelKey:"delete",allowCust:!0,iconName:"trash"},this.dynamicComponentOptions.labelKey=this.options.labelKey,this.dynamicComponentOptions.component=this.options.component,this.dynamicComponentOptions.listOfOptions=this.options.listOfOptions,this.dynamicComponentOptions.group=this.options.group,this.dynamicComponentOptions=this.options,this.loadLabelsValueMap(),null==this.options.itemList&&(this.itemArraySize=2)}onScroll(t){var i,e;if(!0===this.options.enableListPagination){const o=(null===(i=this.options.selectedItems)||void 0===i?void 0:i.length)>1&&(null===(e=this.options.itemList)||void 0===e?void 0:e.length)===this.options.selectedItems.length;if(!this.totalNbRec||o)return;const s=t.target,n=this.options.itemList.length!==this.options.listOfOptions.length||this.options.itemList.length<this.totalNbRec,l=this.lastClickedIndex===(this.tempItemList?this.tempItemList.length:0)-1;s.scrollTop+s.clientHeight>=s.scrollHeight-5&&n&&(this.noCardClicked||l)&&(this.numberOfItrations++,this.tempNumberOfItrations=this.numberOfItrations,this.loadData())}}loadData(t=!1){this.loadMoreData||(this.loadMoreData=!0,this.applyPagination(t))}applyPagination(t=!1){if(this.totalNbRec=this.options.listOfOptions?this.options.listOfOptions.length:0,this.totalNbRec>0){if(this.noCardClicked=!0,t&&(this.options.itemList=[]),this.options.enableListPagination){let t;t=0==this.numberOfItrations?this.numberOfItrations*this.numberOfRowsToShow:this.tempNumberOfItrations*this.numberOfRowsToShow;const i=this.options.listOfOptions.slice(t,t+this.numberOfRowsToShow);this.tempItemList.length>0?(this.tempItemList.push(...i),this.options.itemList=this.tempItemList):(this.options.itemList.push(...i),this.tempItemList=this.options.itemList)}else this.options.itemList.push(...this.options.listOfOptions);this.onPagination.emit(this.options.itemList),this.loadMoreData=!1}}updateLastClickedIndex(t){if(t){const i=this.options.itemList.findIndex(i=>i.lookupKey===t.lookupKey);this.lastClickedIndex=i}}onClickCard(t){this.options.enableListPagination&&(this.options.itemList=this.tempItemList,this.updateLastClickedIndex(null==t?void 0:t.item)),this.options.multiple?this.onclickCardMultiple(t):(t&&t.itemList&&(this.options.enableListPagination||(this.options.itemList=t.itemList),this.options.showSelectedCard=!0),t&&t.itemList&&1===t.itemList.length?(this.itemArraySize=1,this.options.showDefaultTemplate=!1):t&&t.itemList&&t.itemList.length>1&&(this.itemArraySize=2),this.changeItem.emit(t))}onclickCardMultiple(t){if(this.options.multiple){let i=!1;this.itemArraySize=2,this.options.enableListPagination||(this.options.itemList=t.listOfOptions),this.options.selectedItems.forEach(e=>{e.itemLookup===t.item.lookupKey&&(i=!0)}),i||this.options.selectedItems.push({item:t.item[t.item.previewProperty],itemDetailed:t.item,itemLookup:t.item.lookupKey})}}changeMarginOnItemChange(){this.options.multiple&&(document.getElementById("ps-option-list-component-dropdown").style.marginTop=(40*this.options.selectedItems.length).toString()+"px")}deleteSingleItem(t,i,e){document.getElementById(e).classList.remove("multiSelectSingleItemInAnimation"),document.getElementById(e).classList.add("multipleSelectSingleItemDeleteAnimation"),setTimeout(()=>{this.options.selectedItems.splice(i,1),this.changeMarginOnItemChange()},600),this.onDeleteItem.emit(t)}showSelectedDiv(t){this.options.multiple&&(this.itemArraySize=t?2:1)}loadLabelsValueMap(){Array.from(this.options.labelsValueMap).forEach(t=>{this.templateOptions.push({key:t[0],value:t[1].value})})}confirmMultipleSelection(){this.noCardClicked=!1,this.options.selectedItems.length>0?(this.itemArraySize=1,this.changeItem.emit({confirmMultiple:!0,itemList:this.options.selectedItems})):(this.itemArraySize=1,this.options.selectedItems=[])}resetMultipleSelection(){this.common.presentPsAlert({header:"are_you_sure_key",buttons:[{options:{labelKey:"no_key",group:null},handler:()=>{p.a.dismissAllModals()}},{options:{labelKey:"yes_key",group:null},handler:()=>{p.a.dismissAllModals(),this.options.selectedItems=[],this.itemArraySize=1,this.options.itemList=null}}]},"confirm_reset")}ngOnChanges(){this.dynamicComponentOptions.component=this.options.component,this.dynamicComponentOptions.listOfOptions=this.options.listOfOptions,this.dynamicComponentOptions.showItemPopUp=this.options.showItemPopUp,this.dynamicComponentOptions.group=this.options.group,(null==this.options.itemList||this.options.itemList.length>0||this.options.multiple&&this.options.showSelectedCard)&&(this.itemArraySize=2)}}return t.\u0275fac=function(i){return new(i||t)(o.Rb(h.a),o.Rb(n.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["ps-select-lookup-option-list"]],inputs:{options:"options"},outputs:{changeItem:"changeItem",onDeleteItem:"onDeleteItem",onPagination:"onPagination"},features:[o.Cb,o.Db],decls:5,vars:14,consts:[[3,"ngClass","scroll"],[3,"ngClass"],["id","scrollableContent","class","fixed-keyin-multiple-container-selected fixed-keyin-multiple-container ps-container-lookup-option-details lookup-card-margin-bottom",4,"ngIf"],["id","ps-option-list-component-dropdown","class","ps-option-list-component-dropdown",3,"ngClass",4,"ngIf"],[3,"options","onClickCard"],["id","scrollableContent",1,"fixed-keyin-multiple-container-selected","fixed-keyin-multiple-container","ps-container-lookup-option-details","lookup-card-margin-bottom"],[4,"ngIf"],[1,"inline-buttons-group"],["class","inline-multiple-buttons",3,"options","id","onClick",4,"ngIf"],[1,"selected-items-label"],["class","selected-items-values multiSelectSingleItemInAnimation",3,"id",4,"ngFor","ngForOf"],[1,"selected-items-values","multiSelectSingleItemInAnimation",3,"id"],[1,"single-item-delete-buttons",3,"options","id","onClick"],[1,"inline-multiple-buttons",3,"options","id","onClick"],["id","ps-option-list-component-dropdown",1,"ps-option-list-component-dropdown",3,"ngClass"],[3,"options",4,"ngIf"],[3,"options"]],template:function(t,i){1&t&&(o.Xb(0,"div",0),o.fc("scroll",function(t){return i.onScroll(t)}),o.Xb(1,"div",1),o.Pc(2,v,5,3,"div",2),o.Pc(3,y,2,4,"div",3),o.Xb(4,"ps-dynamic-component-loader",4),o.fc("onClickCard",function(t){return i.onClickCard(t)}),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.pc("ngClass",o.vc(5,C,i.options.showSelectedCard,!i.options.showSelectedCard,i.dynamicComponentOptions.itemList==i.dynamicComponentOptions.listOfOptions,!0===i.options.multiple)),o.Fb(1),o.pc("ngClass",o.uc(10,S,1===i.itemArraySize,i.itemArraySize>1,!0===i.options.multiple)),o.Fb(1),o.pc("ngIf",i.options.multiple&&i.itemArraySize>1),o.Fb(1),o.pc("ngIf",i.itemArraySize>1),o.Fb(1),o.pc("options",i.dynamicComponentOptions))},directives:[r.m,r.o,f.a,r.n,g.a,d.a],styles:[""]}),t})();var N=e("KVmc"),A=e("5oTP"),E=e("BqtM");const F=["selectLookUpRef"];function M(t,i){if(1&t&&(o.Xb(0,"div",3),o.Sb(1,"ps-icon-customization",4),o.Wb()),2&t){const t=o.ic();o.Fb(1),o.pc("options",t.custIconOptions)}}function R(t,i){if(1&t&&o.Sb(0,"ps-label",18),2&t){const t=o.ic(2);o.pc("options",t.noValidAccountsLabelOptions)}}function U(t,i){1&t&&(o.Xb(0,"div"),o.Xb(1,"p",19),o.Rc(2),o.jc(3,"translate"),o.Wb(),o.Wb()),2&t&&(o.Fb(2),o.Tc(" ",o.kc(3,1,"selected_value_not_exist_key")," "))}function _(t,i){if(1&t){const t=o.Yb();o.Xb(0,"ps-keyin-input",20),o.fc("onPsChange",function(i){return o.Fc(t),o.ic(2).onChangeItem(i)}),o.Wb()}if(2&t){const t=o.ic(2);o.pc("options",t.lookupDropDownOptions)("hidden",!0)}}const V=function(t,i,e){return{label:t,labelSelected:i,disableContent:e}},T=function(t,i){return{"is-expanded":t,"item-was-selected":i}},W=function(t,i){return{"no-value-selected":t,"value-selected":i}};function K(t,i){if(1&t){const t=o.Yb();o.Xb(0,"ps-container-complex",5),o.Xb(1,"div",6),o.Xb(2,"div",7),o.Xb(3,"div",8),o.fc("click",function(){return o.Fc(t),o.ic().presentLoader()}),o.Sb(4,"ps-keyin-input",9,10),o.Xb(6,"div",11),o.Sb(7,"div",12),o.Wb(),o.Wb(),o.Xb(8,"ps-select-lookup-option-list",13,14),o.fc("changeItem",function(i){return o.Fc(t),o.ic().emitItemDetails(i)})("onDeleteItem",function(i){return o.Fc(t),o.ic().deletedItem(i)})("onPagination",function(i){return o.Fc(t),o.ic().fillPaginationList(i)}),o.Wb(),o.Wb(),o.Wb(),o.Pc(10,R,1,1,"ps-label",15),o.Pc(11,U,4,3,"div",16),o.Pc(12,_,1,2,"ps-keyin-input",17),o.Wb()}if(2&t){const t=o.ic();o.pc("id",t.id),o.Fb(2),o.pc("ngClass",o.uc(10,V,(null==t.selectLookUpOptions||null==t.selectLookUpOptions.itemList?null:t.selectLookUpOptions.itemList.length)>=0,1===(null==t.selectLookUpOptions||null==t.selectLookUpOptions.itemList?null:t.selectLookUpOptions.itemList.length),t.disableLookup)),o.Fb(1),o.pc("ngClass",o.tc(14,T,t.toggleCardList,t.previewList.length>0)),o.Fb(1),o.pc("ngClass",o.tc(17,W,!t.hidePlaceholder(),t.hidePlaceholder()))("options",t.lookupOptions),o.Fb(4),o.pc("id",t.id)("options",t.selectLookUpOptions),o.Fb(2),o.pc("ngIf",!t.bAccountsFound),o.Fb(1),o.pc("ngIf",t.showWarning),o.Fb(1),o.pc("ngIf",(null==t.selectLookUpOptions.listOfOptions?null:t.selectLookUpOptions.listOfOptions.length)>0)}}function j(t,i){if(1&t&&o.Sb(0,"ps-label-input",25),2&t){const t=o.ic(2);o.pc("id","lbl_"+t.id)("options",t.selectLookUpOptions)}}function X(t,i){if(1&t&&(o.Xb(0,"div",21),o.Pc(1,j,1,2,"ps-label-input",22),o.Sb(2,"span",23),o.Sb(3,"ps-label-input",24),o.Wb()),2&t){const t=o.ic();o.Fb(1),o.pc("ngIf",t.selectLookUpOptions.labelKey),o.Fb(1),o.pc("innerHTML",t.delimiter,o.Gc),o.Fb(1),o.pc("id","value_preview_"+t.id)("options",t.previewValOptions)}}let B=(()=>{class t extends s.a{constructor(t,i,e,s){super(t,i),this.elementRef=e,this.navigationServices=s,this.options={requestObject:null,notFoundMessage:""},this.selectLookUpOptions={},this.changeItem=new o.o,this.onDeleteItem=new o.o,this.clickElsewhere=new o.o,this.bAccountsFound=!0,this.lookupOptions={},this.tempLookupDropDownOptions={},this.toggleCardList=!1,this.noValidAccountsLabelOptions={},this.tempItemList=[],this.lookupDropDownMultipleOptions={},this.previewList=[],this.labelValueMap="",this.itemLookupKeyArray=[]}get lookupDropDownOptions(){if(this.options&&this.options.listOfOptions&&this.options.listOfOptions.length>0){const t=this.options.listOfOptions[0];if(t){const i=p.a.extractPropertyNames(t,this.options.fcName+".");i&&i.length>0&&(this.options.group.controls[this.options.fcName][l.a.CONTROLLER_EXTRA_OPTION_DETAILS]=i)}}return this.tempLookupDropDownOptions}get disableLookup(){this.lookupOptions.labelKey=this.options.labelKey,this.lookupOptions.placeHolder=this.options.placeHolder,this.lookupOptions.allowCust=!1;const t=this.commonProv.getElementValidations(this.lookupOptions.fcName),i=this.lookupOptions.group.controls[this.options.fcName].value;return i&&Object.keys(i),!(!t||1!==t.IS_READONLY)}get showDropdownIcon(){const t=this.commonProv.getElementValidations(this.lookupOptions.fcName);return(!t||0!==t.IS_VISIBLE)&&c.a.showDropdownIcon}ngOnInit(){this.commonProv.addComponentValidator(this.options.group,this.options.fcName,this.common.prepareValidation(!1,null,null,null,null,null,null,null,[this.commonProv.custOnlyObjectAllowed()])),super.init(),this.lookupOptions={labelKey:this.options.labelKey,placeHolder:this.options.placeHolder,fcName:this.options.fcName,group:this.options.group,disablePreview:!0},this.tempLookupDropDownOptions={labelKey:this.options.labelKey,placeHolder:this.options.placeHolder,fcName:this.options.fcName+"_lookupKey",group:this.options.group,type:this.options.multiple?void 0:"true",disablePreview:!0,forceTriggerChange:!0},this.custIconOptions.component=t,this.custIconOptions.componentOptions=this.options,this.custIconOptions.allowCust=!1,this.custIconOptions.availableCustomization.IS_MANDATORY=!0,this.custIconOptions.availableCustomization.PLACEHOLDER_LABEL_ID=!0,this.lookupOptions.allowCust=!this.custMode,this.noValidAccountsLabelOptions={labelKey:""!==this.options.notFoundMessage?this.options.notFoundMessage:"no_data_found_key",translate:!0},this.loadOptions(),this.commonProv.applyDynScreenDisplay(l.a.ACTION_TYPE_MANDATORY,[this.tempLookupDropDownOptions.fcName],0)}get previewValOptions(){return{labelKey:this.fcValueDesc,psClass:"ps-value-preview",previewMode:!0}}get fcValueDesc(){return this.labelValueMap}popListUp(){this.disableLookup||(this.options&&this.options.listOfOptions&&this.options.listOfOptions.length>0&&this.toggleCardList?(this.options.listOfOptions.map((t,i)=>t.rowIndex=i),this.commonProv.setValInsideNestedObj(this.lookupOptions.fcName,null,this.options.requestObject),this.commonProv.setValInsideNestedObj(this.lookupDropDownOptions.fcName,null,this.options.requestObject),this.bAccountsFound=!0,this.selectLookUpOptions={},this.options.showDefaultTemplate=!1,this.selectLookUpOptions=this.options,this.options.enableListPagination?this.resetPagination():this.selectLookUpOptions.itemList=this.options.listOfOptions,this.selectLookUpOptions.showSelectedCard=!0,this.selectLookUpOptions.multiple=!!this.options.multiple&&this.options.multiple,this.selectLookUpRef.showSelectedDiv(!0),this.toggleSearchElement()):this.options&&void 0!==this.options.itemList&&this.options.itemList.length>=1?(this.commonProv.setValInsideNestedObj(this.lookupOptions.fcName,null,this.options.requestObject),this.commonProv.setValInsideNestedObj(this.lookupDropDownOptions.fcName,null,this.options.requestObject),this.toggleCardList=!this.toggleCardList,this.options.enableListPagination?this.resetPagination():this.selectLookUpOptions.itemList=this.options.listOfOptions):this.toggleCardList&&this.options.listOfOptions&&0===this.options.listOfOptions.length&&(this.bAccountsFound=!1),this.toggleCardList=!this.toggleCardList)}toggleSearchElement(t){if(this.selectLookUpElRef.nativeElement){const i=this.selectLookUpElRef.nativeElement.querySelector("ps-input-search-html");t&&i?(i.querySelector("*[psFcName]").value="",i.classList.add("hide-search-element")):i&&i.classList.remove("hide-search-element")}}resetPagination(){this.selectLookUpRef.numberOfItrations=0,this.selectLookUpRef.tempNumberOfItrations=0,this.selectLookUpRef.tempItemList=[],this.selectLookUpOptions.itemList=[],this.selectLookUpRef.options.itemList&&0!==this.selectLookUpRef.options.itemList.length||this.selectLookUpRef.applyPagination(!0)}fillPaginationList(t){this.selectLookUpOptions.itemList=t}presentLoader(){this.commonProv.presentLoading(),setTimeout(()=>{this.checkOnListOfOptions()},500)}checkOnListOfOptions(){if(this.options&&void 0!==this.options.listOfOptions)return this.toggleCardList=!0,this.commonProv.dismissLoading(),void this.popListUp();setTimeout(()=>{this.checkOnListOfOptions()},1e3)}onDocumentClick(t){const i=t.target;!i||this.elementRef.nativeElement.contains(i)||"showMore"===i.id||"showLess"===i.id||this.options.multiple||(this.options&&this.selectLookUpOptions&&this.selectLookUpOptions.itemList&&(1===this.selectLookUpOptions.itemList.length||this.options.multiple)?(this.selectLookUpOptions.showSelectedCard=!0,this.selectLookUpOptions.showDefaultTemplate=c.a.showDefaultTemplateOption):(this.selectLookUpOptions.showSelectedCard=!1,this.selectLookUpOptions.showDefaultTemplate=c.a.showDefaultTemplateOption))}emitItemDetails(t){if(this.toggleSearchElement(!0),this.options.multiple)t&&t.confirmMultiple&&this.setSelectedItems(t.itemList);else if(t&&void 0!==t.item){this.commonProv.setValInsideNestedObj(this.tempLookupDropDownOptions.fcName,t.item.lookupKey,this.options.requestObject);const i=this.options.listOfOptions.filter(i=>i.lookupKey===t.item.lookupKey).shift();this.commonProv.setValInsideNestedObj(this.lookupOptions.fcName,i,this.options.requestObject),i[l.a.VALIDATE_COMBINATION]=!1,this.options.group.controls[this.tempLookupDropDownOptions.fcName].value||this.options.group.controls[this.tempLookupDropDownOptions.fcName][l.a.OLD_VALUE]!=t.item.lookupKey||(i[l.a.VALIDATE_COMBINATION]=!0,this.changeItem.emit(i))}}setSelectedItems(t){let i=[];t.forEach(t=>{i.push(t.lookupKey||t.itemLookup)}),this.commonProv.setValInsideNestedObj(this.tempLookupDropDownOptions.fcName,i,this.options.requestObject)}loadOptions(){this.options.showDefaultTemplate=c.a.showDefaultTemplateOption,this.selectLookUpOptions=this.options,this.selectLookUpOptions.multiple=!!this.options.multiple&&this.options.multiple}onChangeItem(t){if(this.toggleCardList=!1,void 0!==t&&void 0!==this.options.listOfOptions)if(this.selectLookUpOptions.multiple)this.multiSelectObject(t);else{const i=this.options.listOfOptions.filter(i=>i.lookupKey==t.newValue).shift();i?(this.commonProv.setValInsideNestedObj(this.lookupOptions.fcName,i,this.options.requestObject),this.options.itemList=[],this.previewList=[],this.selectLookUpOptions.itemList[0]=i,this.previewList.push(i[i.previewProperty]),this.selectLookUpRef.onClickCard(this.selectLookUpOptions),i[l.a.VALIDATE_COMBINATION]=!0,this.changeItem.emit(i),this.previewBuilder(),this.showWarning=!1):(this.options.itemList=[],this.showWarning=!0)}}multiSelectObject(t){let i=[];"string"==typeof t.newValue?i.push(t.newValue):i=t.newValue,this.tempItemList=[],this.previewList=[],i.forEach(t=>{const i=this.options.listOfOptions.filter(i=>i.lookupKey===t).shift();i&&(this.previewList.push(i[i.previewProperty]),this.tempItemList.push(i))}),this.options.itemList=this.tempItemList,this.selectLookUpOptions.itemList=this.tempItemList,this.selectLookUpOptions.showSelectedCard=!0,this.selectLookUpRef.showSelectedDiv(!1),this.commonProv.setValInsideNestedObj(this.lookupOptions.fcName,this.tempItemList,this.options.requestObject),this.tempItemList.length>0?(this.showWarning=!1,this.changeItem.emit(this.tempItemList)):(this.options.itemList=[],this.showWarning=!0),this.previewBuilder()}previewBuilder(){if(this.labelValueMap="",this.selectLookUpOptions.multiple){if(this.previewList.length>=1)for(let t=0;t<this.previewList.length;t++){const i=this.previewList[t];this.labelValueMap+=t+1===this.previewList.length?i:i+", "}}else this.labelValueMap=this.previewList[0]}deletedItem(t){t&&void 0!==t&&this.onDeleteItem.emit(t)}resetLookUp(){var t;this.options.selectedItems=[],this.options.itemList=null,this.common.setValInsideNestedObj(this.options.fcName,null,this.options.requestObject),this.common.setValInsideNestedObj(this.lookupDropDownOptions.fcName,null,this.options.requestObject),null===(t=this.options.group.controls[this.lookupDropDownOptions.fcName])||void 0===t||t.reset()}hidePlaceholder(){var t,i,e,o,s,n,l,p,c;return(null===(i=null===(t=this.selectLookUpOptions)||void 0===t?void 0:t.itemList)||void 0===i?void 0:i.length)>=1?Array.isArray(null===(e=this.options)||void 0===e?void 0:e.requestObject[this.lookupDropDownOptions.fcName])?(null===(s=null===(o=this.options)||void 0===o?void 0:o.requestObject[this.lookupDropDownOptions.fcName])||void 0===s?void 0:s.length)==(null===(l=null===(n=this.selectLookUpOptions)||void 0===n?void 0:n.itemList)||void 0===l?void 0:l.length):(null===(p=this.options)||void 0===p?void 0:p.requestObject[this.lookupDropDownOptions.fcName])==(null===(c=this.selectLookUpOptions)||void 0===c?void 0:c.itemList[0].lookupKey):0}}return t.\u0275fac=function(i){return new(i||t)(o.Rb(h.a),o.Rb(n.a),o.Rb(o.m),o.Rb(a.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["ps-complex-lookup"]],viewQuery:function(t,i){if(1&t&&(o.Wc(F,1),o.Wc(F,1,o.m)),2&t){let t;o.Bc(t=o.gc())&&(i.selectLookUpRef=t.first),o.Bc(t=o.gc())&&(i.selectLookUpElRef=t.first)}},hostBindings:function(t,i){1&t&&o.fc("click",function(t){return i.onDocumentClick(t)},!1,o.Dc)},inputs:{options:"options"},outputs:{changeItem:"changeItem",onDeleteItem:"onDeleteItem",clickElsewhere:"clickElsewhere"},features:[o.Cb],decls:3,vars:3,consts:[["class","ps-keyin-input-label-cust",4,"ngIf"],["class","ps-complex-lookup",3,"id",4,"ngIf"],["class","ps-custom-component-preview","psPreviewEngine","",4,"ngIf"],[1,"ps-keyin-input-label-cust"],[3,"options"],[1,"ps-complex-lookup",3,"id"],[1,"select-card-dropDown"],[3,"ngClass"],[1,"select-lookup-input-wrapper",3,"ngClass","click"],[3,"ngClass","options"],["inputRef",""],[1,"ps-select-lookup-arrow-wrapper"],["id","dropdonwArrow",1,"mat-select-arrow","dropdown-arrow"],[3,"id","options","changeItem","onDeleteItem","onPagination"],["selectLookUpRef",""],["class","no-account-found-message",3,"options",4,"ngIf"],[4,"ngIf"],[3,"options","hidden","onPsChange",4,"ngIf"],[1,"no-account-found-message",3,"options"],[1,"validation-message"],[3,"options","hidden","onPsChange"],["psPreviewEngine","",1,"ps-custom-component-preview"],["class","ps-lbl-preview",3,"id","options",4,"ngIf"],[3,"innerHTML"],[1,"ps-value-preview",3,"id","options"],[1,"ps-lbl-preview",3,"id","options"]],template:function(t,i){1&t&&(o.Pc(0,M,2,1,"div",0),o.Pc(1,K,13,20,"ps-container-complex",1),o.Pc(2,X,4,4,"div",2)),2&t&&(o.pc("ngIf",i.custMode),o.Fb(1),o.pc("ngIf",i.showDropdownIcon||i.custMode),o.Fb(1),o.pc("ngIf",i.previewMode&&i.visible))},directives:[r.o,m.a,u.a,r.m,d.a,P,N.a,A.a],pipes:[E.a],styles:[""]}),t})()},gKqT:function(t,i,e){"use strict";e.r(i),e.d(i,"OmniBasePage",function(){return r});var o=e("oS+F"),s=e("zngb"),n=e("QZhd"),l=e("woXy"),p=e("qEF5"),c=e("Q0Ba"),a=e("lE2x"),h=e("fXoL");let r=(()=>{class t{constructor(){this.isPageDisabled=!1,this.commonProv=p.a.injectionHandler(c.a),this.navigationServices=p.a.injectionHandler(l.a)}init(){this.currentOperID=n.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();const t=this.navigationServices.getAllParams(),i={};t&&!0===t.readOnlypage?(i.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(s.a.FORM_READONLY,i)):this.customizationMap&&(i.IS_READONLY=0,this.customizationMap.set(s.a.FORM_READONLY,i)),this.screenTranslationOperIds=a.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?a.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}ngOnInit(){this.init()}ionViewDidEnter(){this.viewDidEnter()}ionViewWillLeave(){this.viewWillLeave()}ionViewWillEnter(){this.viewWillEnter()}viewWillEnter(){}disableForm(t){if(void 0!==t&&this.customizationMap){const i=this.customizationMap.get(s.a.FORM_READONLY);i&&1===i.IS_READONLY&&"DISABLED"!=t.status&&(t.disable(),Object.keys(t.controls).forEach(t=>{this.commonProv.applyDynScreenDisplay(s.a.ACTION_TYPE_READONLY,[t],1)}))}}viewDidEnter(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),o.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}viewWillLeave(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,willLeave:!0})}ngAfterViewChecked(){this.isPageDisabled||setTimeout(()=>{this.disableForm(this.baseFormGroup),this.isPageDisabled=!0},300)}getScreenTranslations(t){const i=t||2222,e=n.a.activeLanguge?n.a.activeLanguge:"EN";i&&e&&this.commonProv.language.getOperTranslation(e,i)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=h.Lb({type:t,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(t,i){2&t&&h.Hb(i.psClass)},decls:0,vars:0,template:function(t,i){},styles:[""]}),t})()}}]);