{"version":3,"sources":["webpack:///src/app/commonBussinessSRC/psServices/accounts/accounts.service.ts","webpack:///src/app/pages/accounts-list/accounts-list.page.scss","webpack:///src/app/pages/accounts-list/accounts-list.page.ts","webpack:///src/app/pages/accounts-list/accounts-list.page.html"],"names":["AccountsService","omniPull","logger","getAccountAsIBAN","accountAsIBAN","undefined","getParamValOf","then","res","AccountsAsIBAN","err","log","returnFormattedAccount","account","formattedAccount","accountFormat","ibanAccNo","additionalRef","branch","currency","accGl","cif","serialNo","accountNumber","providedIn","AccountsListPage","commonService","accountsService","generalLabelValuesMap","Map","generalHeaderMap","termsLabelValuesMap","termsHeaderMap","showGeneralAccounts","showTermsAccounts","noGeneralAccountFound","noTermsAccountFound","psCurrency","noTermsRecordFoundOptions","labelKey","previewMode","noGenRecordFoundOptions","complexSegmentOptions","segmentOptions","segmentList","segmentContainerOptions","numberOfSegments","namesofSegments","generalAccountsKey","termsAccountsKey","formGroup","templateViewOptions","group","ngOnInit","baseFormGroup","fcName","selected","itemValue","description","commonProv","translate","generalAccountListOptions","isEditable","generatedToQR","type","GENERAL_ACCOUNT_TYPE","balanceFcNames","termsAccountListOptions","TERM_ACCOUNT_TYPE","onClickSegment","selectedSegment","refreshTermDepositList","selectedAccountSegment","loadAccounts","segment","cifInfo","session","getValueOf","USERINFO","generalRequestData","userCifNo","omniUserVO","CIF_NO","permittedGls","accountType","returnGeneralAccountList","termsRequestData","returnTermsAccountList","requestData","listOfOptions","returnAccounts","error","result","gridModel","length","populateCustomAccounts","accountsList","iterator","briefNameEnglish","cifShortNameEnglish","balance","transform","currencyDecimalPoints","currencyBriefName","currencyBriefNameEnglish","availableBalance","personalizeKey","nickName","briefName","generalLedgerBriefNameEng","accountTypeDesc","status","statusDescription","statusCode","branchDescription","sharedMessage","generateSharedMessage","actualAmount","outstandingAmount","accumulatedAmount","push","map","element","index","updateCard","value","itemCard","message","customerInfoCO","longName","toLocaleUpperCase","companySettingsCO","companyBriefDesc","ionViewWillEnter","segmentData","controls","formData","accountsSegment","defaultSegment","selector","template"],"mappings":"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","file":"74-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { IAccountResponse } from '../models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from '../omni-common/omni-pull.service';\n/*\nCreated by Waleed Aly 03 April 2023 to encapsulated repeated code needed in different cards components \"debit,credit,prepaid\"\n*/\n@Injectable({\n  providedIn: 'root'\n})\nexport class AccountsService {\n\n  private accountAsIBAN: any;\n  constructor(private omniPull: OmniPullService, private logger: LoggerService) {\n    this.getAccountAsIBAN();\n  }\n\n  public getAccountAsIBAN() {\n    if (this.accountAsIBAN === undefined) {\n      this.omniPull.getParamValOf('AccountsAsIBAN').then(res => {\n        this.accountAsIBAN = res.AccountsAsIBAN;\n      }).catch(err => this.logger.log(err));\n    }\n  }\n\n  public returnFormattedAccount(account: IAccountResponse) {\n    let formattedAccount: any;\n    let accountFormat: string;\n    if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 1) {\n      formattedAccount = account.ibanAccNo === null || account.ibanAccNo === undefined ? '' : account.ibanAccNo;\n      accountFormat = 'IBAN';\n    } else if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 2) {\n      formattedAccount = account.additionalRef === null || account.additionalRef === undefined ? '' : account.additionalRef;\n      accountFormat = 'AddRef';\n    } else if (this.accountAsIBAN !== null && this.accountAsIBAN !== undefined && this.accountAsIBAN === 3) {\n      formattedAccount = account.branch + '-' + account.currency + '-' + account.accGl + '-' + account.cif + '-' + account.serialNo;\n      accountFormat = 'iMAL';\n    } else {\n      formattedAccount = account.additionalRef === null || account.additionalRef === undefined ? '' : account.accountNumber;\n      accountFormat = 'ACCNO';\n    }\n    return {\n      formattedAccount: formattedAccount,\n      accountFormat: accountFormat,\n    };\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50cy1saXN0LnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ViewWillEnter } from '@ionic/angular';\nimport { IOptionsPsAccountsListExposed } from 'src/app/commonBussinessSRC/psComponents/ps-accounts-list/ps-accounts-list.component.interfaces';\nimport { AccountsService } from 'src/app/commonBussinessSRC/psServices/accounts/accounts.service';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { IAccountResponse, IOmniAccountRequest } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { PsCurrencyPipe } from 'src/app/commonSRC/psPipes/ps-currency/ps-currency.pipe';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IMapKeyValue, IOptionsPsComplexSegment, IOptionsPsLabel } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonService } from 'src/app/commonSRC/psServices/ps-common/ps-common.service';\nimport { IOptionsPsTemplateView } from '../../commonSRC/psServices/models/ps-common-interface';\nimport { OmniBasePage } from '../omni-base/omni-base.page';\n\n@Component({\n  selector: 'app-accounts-list',\n  templateUrl: './accounts-list.page.html',\n  styleUrls: ['./accounts-list.page.scss'],\n})\nexport class AccountsListPage extends OmniBasePage implements OnInit, ViewWillEnter {\n\n  generalAccountListOptions: IOptionsPsAccountsListExposed;\n  termsAccountListOptions: IOptionsPsAccountsListExposed;\n  public generalLabelValuesMap = new Map<string, IMapKeyValue>();\n  public generalHeaderMap = new Map<string, IMapKeyValue>();\n  public termsLabelValuesMap = new Map<string, IMapKeyValue>();\n  public termsHeaderMap = new Map<string, IMapKeyValue>();\n  public showGeneralAccounts = true;\n  public showTermsAccounts = false;\n  public noGeneralAccountFound = false;\n  public noTermsAccountFound = false;\n  private psCurrency = new PsCurrencyPipe();\n  public noTermsRecordFoundOptions: IOptionsPsLabel = {\n    labelKey: 'no_terms_records_found_key',\n    previewMode: false\n  };\n  public noGenRecordFoundOptions: IOptionsPsLabel = {\n    labelKey: 'no_general_records_found_key',\n    previewMode: false\n  };\n  complexSegmentOptions: IOptionsPsComplexSegment = {\n    segmentOptions: {\n      segmentList: []\n    },\n    segmentContainerOptions: {\n      numberOfSegments: 2,\n      namesofSegments: ['general_account_segment', 'term_account_segment'],\n    }\n  };\n  generalAccountsKey = 'general_accounts_key';\n  termsAccountsKey = 'terms_accounts_key';\n  selectedAccountSegment: any;\n  constructor(\n    public commonService: PsCommonService,\n    public logger: LoggerService,\n    private omniPull?: OmniPullService,\n    public accountsService?: AccountsService\n  ) {\n    super();\n    //this.populateHeaderValueMap();\n  }\n  private formGroup = new FormGroup({});\n  public templateViewOptions: IOptionsPsTemplateView = {\n    group: this.formGroup\n  };\n\n  ngOnInit() {\n    super.init();\n    this.baseFormGroup = this.formGroup; // Added by Zunair For #BUG 1257538\n    this.complexSegmentOptions.group = this.formGroup;\n    this.complexSegmentOptions.segmentOptions = {\n      fcName: 'accountsSegment',\n      segmentList: [{\n        selected: true,\n        itemValue: this.generalAccountsKey,\n        description: this.commonProv.translate(this.generalAccountsKey)\n      }, {\n        selected: true,\n        itemValue: this.termsAccountsKey,\n        description: this.commonProv.translate(this.termsAccountsKey)\n      }],\n    };\n    this.generalAccountListOptions = {\n      isEditable: true,\n      generatedToQR: true,\n      group: this.formGroup,\n      type: CommonBussinessConstant.GENERAL_ACCOUNT_TYPE,\n      balanceFcNames: ['generalCurrentBalance', 'generalAvailableBalance']\n    };\n    this.termsAccountListOptions = {\n      isEditable: true,\n      group: this.formGroup,\n      type: CommonBussinessConstant.TERM_ACCOUNT_TYPE,\n      balanceFcNames: ['termCurrentBalance', 'termAvailableBalance']\n    };\n  }\n\n  onClickSegment(selectedSegment) {\n    if (selectedSegment === this.generalAccountsKey) {\n      this.termsAccountListOptions.refreshTermDepositList = false;\n      this.showTermsAccounts = false;\n      this.showGeneralAccounts = true;\n    } else {\n      this.termsAccountListOptions.refreshTermDepositList = true;\n      this.showTermsAccounts = true;\n      this.showGeneralAccounts = false;\n    }\n    this.selectedAccountSegment = this.commonProv.translate(selectedSegment);;\n    this.loadAccounts(selectedSegment);\n  }\n\n  /**\n   * populating account - fetching from server\n   */\n  private loadAccounts(segment) {\n    // TODO: when the service is ready : we will get the account list based on cif number from server. service will take the cif number -- options.cifNumber will provide the cif number\n\n    const cifInfo = this.commonService.session.getValueOf(ConstantCommon.USERINFO);\n\n    if (segment === this.generalAccountsKey) {\n      const generalRequestData: IOmniAccountRequest = {\n        userCifNo: cifInfo?.omniUserVO.CIF_NO,\n        permittedGls: 'G',\n        accountType: 'G'\n      };\n      this.returnGeneralAccountList(generalRequestData);\n    } else if (segment === this.termsAccountsKey) {\n      const termsRequestData: IOmniAccountRequest = {\n        userCifNo: cifInfo.omniUserVO.CIF_NO,\n        permittedGls: 'F',\n        accountType: 'F'\n      };\n      this.returnTermsAccountList(termsRequestData);\n    }\n  }\n\n  /**\n   * fetching general account list from server\n   * @param requestData IOmniAccountRequest\n   */\n  private async returnGeneralAccountList(requestData: IOmniAccountRequest) {\n    this.generalAccountListOptions.listOfOptions = [];\n    const result = await this.omniPull.returnAccounts(requestData).catch(error => {\n      this.logger.error('Error: While fetching accounts in PsComplexOwnAccountComponent :', error);\n    });\n\n    if (result && result.gridModel.length > 0) {\n      this.accountsService.getAccountAsIBAN();\n      this.noGeneralAccountFound = false;\n      this.generalAccountListOptions.listOfOptions = this.populateCustomAccounts(result.gridModel);\n    } else {\n      this.generalAccountListOptions.listOfOptions = [];\n      this.noGeneralAccountFound = true;\n    }\n  }\n  /**\n   * fetching terms account list from server\n   * @param requestData IOmniAccountRequest\n   */\n  private async returnTermsAccountList(requestData: IOmniAccountRequest) {\n    this.termsAccountListOptions.listOfOptions = [];\n    const result = await this.omniPull.returnAccounts(requestData).catch(error => {\n      this.logger.error('Error: While fetching accounts in PsComplexOwnAccountComponent :', error);\n    });\n\n    if (result && result.gridModel.length > 0) {\n      this.accountsService.getAccountAsIBAN();\n      this.noTermsAccountFound = false;\n      this.termsAccountListOptions.listOfOptions = this.populateCustomAccounts(result.gridModel);\n    } else {\n      this.termsAccountListOptions.listOfOptions = [];\n      this.noTermsAccountFound = true;\n    }\n  }\n\n  /**\n   * \n   * @param listOfOptions\n   */\n  private populateCustomAccounts(listOfOptions: IAccountResponse[]): IAccountResponse[] {\n\n    const accountsList: IAccountResponse[] = [];\n    for (const iterator of listOfOptions) {\n      const account: IAccountResponse = {\n        briefNameEnglish: iterator.briefNameEnglish,\n        cifShortNameEnglish: iterator.cifShortNameEnglish,\n        accountNumber: iterator.accountNumber,\n        balance: this.psCurrency.transform(iterator.balance === null || iterator.balance === undefined ? '0.0' : iterator.balance, iterator.currencyDecimalPoints) + ' ' + (iterator.currencyBriefName || iterator.currencyBriefNameEnglish),\n        availableBalance: this.psCurrency.transform(iterator.availableBalance === null || iterator.availableBalance === undefined ? '0.0' : iterator.availableBalance, iterator.currencyDecimalPoints) + ' ' + (iterator.currencyBriefName || iterator.currencyBriefNameEnglish),\n        currencyBriefName: iterator.currencyBriefName || iterator.currencyBriefNameEnglish,\n        currencyBriefNameEnglish: iterator.currencyBriefNameEnglish,\n        currency: iterator.currency,\n        additionalRef: iterator.additionalRef,\n        ibanAccNo: iterator.ibanAccNo,\n        accGl: iterator.accGl,\n        serialNo: iterator.serialNo,\n        branch: iterator.branch,\n        cif: iterator.cif,\n        formattedAccount: this.accountsService.returnFormattedAccount(iterator).formattedAccount,\n        personalizeKey: iterator.personalizeKey,\n        nickName: iterator.nickName,\n        briefName: iterator.briefName,\n        generalLedgerBriefNameEng: iterator.generalLedgerBriefNameEng,\n        accountTypeDesc: iterator.accountTypeDesc,\n        status: iterator.statusDescription,//'Active...\n        statusCode: iterator.status,//'A','I',..\n        branchDescription: iterator.branchDescription,\n        sharedMessage: this.generateSharedMessage(iterator),\n        // salah\n        actualAmount: iterator.actualAmount,\n        outstandingAmount: iterator.outstandingAmount,\n        accumulatedAmount: iterator.accumulatedAmount,\n        accountFormat: this.accountsService.returnFormattedAccount(iterator).accountFormat,\n      };\n      accountsList.push(account);\n    }\n    //AZDB-2360, Moved here by ghada from ps-accounts-list in order to reasure that data is retured from service to assign rowIndex for each record\n    accountsList.map((element, index) => element['rowIndex'] = index);\n    return accountsList;\n  }\n\n  updateCard(value) {\n  }\n\n  // Edited by ghada tp#1246612 for fixing the format as amana requested and to remove aacount name, ref and iban info from shared message\n  generateSharedMessage(itemCard) {\n    let message = '';\n    message = this.commonProv.translate('account_holder_name_key') + ': ' + this.commonProv.session.getValueOf(ConstantCommon.USERINFO).customerInfoCO.longName?.toLocaleUpperCase();\n    if (itemCard.accountNumber != null && itemCard.accountNumber != undefined) {\n      message = (message != '' ? message + '\\n' : '') + this.commonProv.translate('account_number_key') + ': ' + itemCard.accountNumber;\n    }\n    message = (message != '' ? message + '\\n' : '') + this.commonProv.translate('bank_name_key') + ': ' + this.commonProv.session.getValueOf(ConstantCommon.USERINFO).companySettingsCO.companyBriefDesc;\n    if (itemCard.branchDescription != null && itemCard.branchDescription != undefined) {\n      message = (message != '' ? message + '\\n' : '') + this.commonProv.translate('branch_name_key') + ': ' + itemCard.branchDescription;\n    }\n    return message;\n  }\n\n  ionViewWillEnter() {\n    super.viewWillEnter();\n    // added by salah AZDB-5042 to check on the selected segment on first initialization takes the default segment, \n    // else when sumbitting from the segment to send the selected segment\n    const segmentData = this.complexSegmentOptions.segmentOptions.group.controls.formData.value.accountsSegment\n      || this.complexSegmentOptions.segmentOptions.defaultSegment.itemValue;\n    this.loadAccounts(segmentData);\n\n  }\n}\n","export default \"<ps-template-view [options]=\\\"templateViewOptions\\\">\\n\\n  <ps-complex-segment id=\\\"accountsSegment\\\" (complexSegmentButtonClicked)=\\\"onClickSegment($event)\\\"\\n    [options]=\\\"complexSegmentOptions\\\">\\n\\n    <ps-content-segment segment1 [id]=\\\"complexSegmentOptions.segmentContainerOptions.namesofSegments[0]\\\">\\n      <ps-accounts-list id=\\\"general_acc\\\" [options]=\\\"generalAccountListOptions\\\"\\n        *ngIf=\\\"generalAccountListOptions?.listOfOptions?.length>0\\\"></ps-accounts-list>\\n      <ps-label [options]=\\\"noGenRecordFoundOptions\\\" *ngIf=\\\"noGeneralAccountFound \\\" class=\\\"no-account-text\\\"></ps-label>\\n    </ps-content-segment>\\n    <ps-content-segment segment2 [id]=\\\"complexSegmentOptions.segmentContainerOptions.namesofSegments[1]\\\">\\n      <ps-accounts-list id=\\\"term_acc\\\" [options]=\\\"termsAccountListOptions\\\"\\n        *ngIf=\\\"termsAccountListOptions?.listOfOptions?.length>0\\\"></ps-accounts-list>\\n      <ps-label [options]=\\\"noTermsRecordFoundOptions\\\" *ngIf=\\\"noTermsAccountFound \\\" class=\\\"no-account-text\\\"></ps-label>\\n    </ps-content-segment>\\n\\n  </ps-complex-segment>\\n\\n</ps-template-view>\";"]}