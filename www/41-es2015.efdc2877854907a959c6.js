(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"41l2":function(e,t,o){"use strict";o.d(t,"a",function(){return p});var n=o("mrSG"),s=o("ZyuK"),i=o("iOQE"),c=o("DFXC"),r=o("Q0Ba"),a=o("fXoL");let p=(()=>{class e extends i.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.showLovDropdown=!1,this.defaultDropDownLovOptions={isLOVDropdown:!0}}ngOnInit(){this.commonProv.copyObject(this.defaultDropDownLovOptions,this.options,!1),this.loadLovDropDown(),this.commonProv.returnOperCustomizationObserv().subscribe(e=>{if(e){const t=e.get(this.options.fcName);t&&t.LOV_TYPE_ID&&t.LOV_TYPE_ID!==this.options.lovTypeId&&this.loadLovDropDown()}})}loadLovDropDown(){var e;return Object(n.b)(this,void 0,void 0,function*(){if(!this.defaultDropDownLovOptions.listOfOptions||0==(null===(e=this.defaultDropDownLovOptions.listOfOptions)||void 0===e?void 0:e.length)){const e=this.commonProv.getElementValidations(this.options.fcName);if(e&&e.LOV_TYPE_ID&&(this.options.lovTypeId=e.LOV_TYPE_ID),null==this.options.lovTypeId||void 0===this.options.lovTypeId)return void this.logger.error("Error: lovTypeId is not provided, Please set lovTypeId for ps-dropdown-lov");if(this.options.lovAdminFilterParamName){const e=yield this.omniPull.getParamValOf(this.options.lovAdminFilterParamName);e&&(this.options.lovAdminFilterParamName=e[this.options.lovAdminFilterParamName])}const t={lovTypeId:this.options.lovTypeId,lovCodesInlude:this.options.lovAdminFilterParamName},o=yield this.omniPull.returnLovTypesValues(t).catch(e=>{this.showLovDropdown=!1,this.logger.error("Error: While fetching LOV types in PsDropdownLovComponent :",e)});if(this.defaultDropDownLovOptions.listOfOptions=[],o&&o.length>0){for(const e of o){const t={itemValue:e.itemValue,description:e.description,iconUrl:void 0!==this.options.iconLocation?this.options.iconLocation.concat(e.iconName+(void 0!==this.options.iconExtension?this.options.iconExtension:"")):"",selectedObj:e};t.selectedObj[this.options.fcName]=e.itemValue,this.defaultDropDownLovOptions.listOfOptions.push(t)}this.showLovDropdown=!0}}})}selectDropDownChange(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(r.a),a.Rb(c.a),a.Rb(s.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["ps-dropdown-lov"]],inputs:{options:"options"},features:[a.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(a.Xb(0,"ps-select-dropdown",0),a.fc("onPsChange",function(e){return t.selectDropDownChange(e)}),a.Wb()),2&e&&a.pc("id",t.id)("options",t.defaultDropDownLovOptions)},directives:[i.a],styles:[""]}),e})()},J2PC:function(e,t,o){"use strict";o.r(t),o.d(t,"IPNMoneyTransferPage",function(){return S});var n=o("mrSG"),s=o("3Pt+"),i=o("OVQh"),c=o("fOh1"),r=o("ZyuK"),a=o("zngb"),p=o("Q0Ba"),l=o("gKqT"),u=o("fXoL"),h=o("kRg/"),d=o("uKCV"),m=o("sAFK"),f=o("+f2X"),b=o("VEWP"),y=o("V0Fi"),O=o("DFXC"),g=o("41l2");let v=(()=>{class e extends g.a{constructor(e,t){super(e,t),this.defaultSelectOptions={iconLocation:c.a.ICON_LOCATION_GENERAL,iconExtension:c.a.IMG_GENDER_EXTENSION,lovTypeId:y.a.LOV_TYPE_ID_BENEFICIARY_ACCOUNT_TYPE}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.defaultSelectOptions.labelKey=this.commonProv.translate("beneficiary_account_type_key"),this.defaultSelectOptions.placeHolder=this.commonProv.translate("select_beneficiary_account_type_key")}onChangeLov(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(p.a),u.Rb(O.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["ps-lov-beneficiary-account-type"]],inputs:{options:"options"},features:[u.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(u.Xb(0,"ps-dropdown-lov",0),u.fc("onPsChange",function(e){return t.onChangeLov(e)}),u.Wb()),2&e&&u.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[g.a],styles:[""]}),e})();var N=o("7Cko"),C=o("ZF3V"),_=o("Isd1"),A=o("/QlS"),P=o("iOQE");let k=(()=>{class e extends P.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.defaultSelectOptions={}}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options,!1),this.loadPspHandlers()}loadPspHandlers(){return Object(n.b)(this,void 0,void 0,function*(){const e=yield this.omniPull.returnPspHandlers({}).catch(e=>{this.logger.error("Error: While fetching handlers in PsDropdownPspHandlerComponent :",e)});if(this.defaultSelectOptions.listOfOptions=[],e&&e.gridModel)for(const t of e.gridModel){const e={itemValue:t.IPN_PSPS_ID.toString(),description:"@"+t.PSP_HANDLES,selectedObj:t};this.defaultSelectOptions.listOfOptions.push(e)}})}onHandlerChange(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(p.a),u.Rb(O.a),u.Rb(r.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["ps-dropdown-psp-handler"]],inputs:{options:"options"},features:[u.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(u.Xb(0,"ps-select-dropdown",0),u.fc("onPsChange",function(e){return t.onHandlerChange(e)}),u.Wb()),2&e&&u.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[P.a],styles:[""]}),e})(),L=(()=>{class e extends C.a{constructor(e,t){super(e,t),this.commonProv=e,this.loggerP=t,this.onHandlerChange=new u.o,this.onAddressChange=new u.o}ngOnInit(){super.init()}handlerChanged(e){this.onHandlerChange.emit(e)}addressChanged(e){this.onAddressChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(p.a),u.Rb(O.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["ps-complex-instant-pay-address"]],inputs:{options:"options"},outputs:{onHandlerChange:"onHandlerChange",onAddressChange:"onAddressChange"},features:[u.Cb],decls:3,vars:2,consts:[[1,"ps-complex-instant-pay-address-container"],["id","instantPayAddress",1,"ps-input-varchar-wrapper",3,"options","onPsChange"],["id","pspHandler",1,"ps-dropdown-psp-handler-wrapper",3,"options","onPsChange"]],template:function(e,t){1&e&&(u.Xb(0,"ps-container-complex",0),u.Xb(1,"ps-input-varchar",1),u.fc("onPsChange",function(e){return t.addressChanged(e)}),u.Wb(),u.Xb(2,"ps-dropdown-psp-handler",2),u.fc("onPsChange",function(e){return t.handlerChanged(e)}),u.Wb(),u.Wb()),2&e&&(u.Fb(1),u.pc("options",t.options.addressOptions),u.Fb(1),u.pc("options",t.options.pspHandlerOptions))},directives:[_.a,A.a,k],styles:[""]}),e})();var w=o("x3b/"),T=o("mpNL"),I=o("UTjL"),D=o("G/Qj"),x=o("KVmc");function E(e,t){if(1&e){const e=u.Yb();u.Xb(0,"ps-form-step",2),u.Xb(1,"ps-container-panel",3),u.Xb(2,"ps-lookup-own-accounts",4),u.fc("onAccountChange",function(t){return u.Fc(e),u.ic().handleFromAccountChange(t)}),u.Wb(),u.Xb(3,"ps-lov-beneficiary-account-type",5),u.fc("onPsChange",function(t){return u.Fc(e),u.ic().checkFees(t)}),u.Wb(),u.Xb(4,"ps-entity-phone-number",6),u.fc("onPsChange",function(t){return u.Fc(e),u.ic().validateBeneficiary(t,"phoneNumber")}),u.Wb(),u.Sb(5,"ps-entity-phone-number",7),u.Xb(6,"ps-complex-instant-pay-address",8),u.fc("onAddressChange",function(t){return u.Fc(e),u.ic().validateBeneficiary(t,"address")})("onHandlerChange",function(t){return u.Fc(e),u.ic().validateBeneficiary(t,"handler")}),u.Wb(),u.Xb(7,"ps-input-card-number",9),u.fc("onPsChange",function(t){return u.Fc(e),u.ic().validateBeneficiary(t,"cardNumber")}),u.Wb(),u.Sb(8,"ps-banks",10),u.Sb(9,"ps-input-account-number",11),u.Sb(10,"ps-input-varchar",12),u.Sb(11,"ps-input-varchar",13),u.Xb(12,"ps-complex-amount",14),u.fc("onAmountChanged",function(t){return u.Fc(e),u.ic().checkFees(t)}),u.Wb(),u.Sb(13,"ps-label",15),u.Sb(14,"ps-input-varchar",16),u.Wb(),u.Wb()}if(2&e){const e=u.ic();u.pc("id",e.stepperOptions.namesofSteps[0]),u.Fb(1),u.pc("options",e.panelOptions1Step1),u.Fb(1),u.pc("options",e.fromAccountOptions),u.Fb(1),u.pc("options",e.beneficiaryAccountTypeOptions),u.Fb(1),u.pc("options",e.phoneNumberOptions),u.Fb(1),u.pc("options",e.mobileWalletNumberOptions),u.Fb(1),u.pc("options",e.instantPayAddressOptions),u.Fb(1),u.pc("options",e.cardNumberOptions),u.Fb(1),u.pc("options",e.banksOptions),u.Fb(1),u.pc("options",e.accountNumberOptions),u.Fb(1),u.pc("options",e.beneficiaryNameOptions),u.Fb(1),u.pc("options",e.receiverNameOptions),u.Fb(1),u.pc("options",e.amountOptions),u.Fb(1),u.pc("options",e.feesLabelOptions),u.Fb(1),u.pc("options",e.purposeOptions)}}let S=(()=>{class e extends l.OmniBasePage{constructor(e,t){super(),this.commonService=e,this.omniPull=t,this.formGroup=new s.f({}),this.IPNMonyTransferVO={},this.stepperOptions={stepperName:"IPN_money_transfer_stepper",isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["IPN_money_transfer_step1"],group:this.formGroup,submitOptions:{extraParams:{},submitServiceUrl:c.a.serviceUrl.fundstransferEndPoint,group:this.formGroup},requestObject:this.IPNMonyTransferVO},this.panelOptions1Step1={isExpandable:!0,labelKey:"IPN_money_transfer_details_key",iconName:"crop",expanded:!0},this.fromAccountOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:i.a,group:this.formGroup,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:this.IPNMonyTransferVO},this.beneficiaryAccountTypeOptions={group:this.formGroup,fcName:"beneficiaryAccountType"},this.cardNumberOptions={group:this.formGroup,labelKey:"card_number_key",placeHolder:"enter_card_number_key",fcName:"cardNumber"},this.mobileWalletNumberOptions={placeHolder:"enter_mobile_wallet_number_key",labelKey:"mobile_wallet_number_key",group:this.formGroup,fcName:"mobileWalletNumber",validate:!1},this.phoneNumberOptions={group:this.formGroup,labelKey:"mobile_number_key",placeHolder:"mobile_key",fcName:"mobileNumber",validate:!1},this.beneficiaryNameOptions={group:this.formGroup,labelKey:"beneficiary_name_key",placeHolder:"defaulted_label_key",fcName:"beneficiaryName"},this.receiverNameOptions={group:this.formGroup,labelKey:"receiver_name_key",placeHolder:"receiver_name_label_key",fcName:"receiverName"},this.instantPayAddressOptions={addressOptions:{group:this.formGroup,labelKey:"ipa_instant_pay_adress_key",placeHolder:"enter_ipa_instant_pay_address_key",fcName:"address"},pspHandlerOptions:{labelKey:"psp_handler_key",placeHolder:"select_psp_handler_key",fcName:"pspHandler",group:this.formGroup},group:this.formGroup},this.accountNumberOptions={fcName:"accountNumber",labelKey:"account_number_key",placeHolder:"enter_account_no_key",group:this.formGroup},this.banksOptions={categoryLabelKey:"bank_key",categoryPlaceholderKey:"select_bank_key",categoryFcName:"bank",subCategoryLabelKey:"branch_key",subCategoryPlaceholderKey:"select_branch_key",subCategoryFcName:"branch",group:this.formGroup,requestObject:this.IPNMonyTransferVO},this.amountOptions={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:this.formGroup,fcName:"currency"},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"amount",group:this.formGroup,type:"amount",decimalPoints:3},requestObject:this.IPNMonyTransferVO,showLimitLabel:!1},this.purposeOptions={labelKey:"purpose_key",placeHolder:"enter_purpose_key",group:this.formGroup,fcName:"purpose"},this.feesLabelOptions={fcName:"fees"}}ngOnInit(){super.init(),this.baseFormGroup=this.formGroup}ionViewDidEnter(){super.ionViewDidEnter()}checkFees(e){return Object(n.b)(this,void 0,void 0,function*(){if(this.formGroup.controls[this.amountOptions.amountOptions.fcName].value&&this.formGroup.controls[this.beneficiaryAccountTypeOptions.fcName].value){const e={amount:this.formGroup.controls[this.amountOptions.amountOptions.fcName].value,beneficiaryAccountType:this.formGroup.controls[this.beneficiaryAccountTypeOptions.fcName].value};yield this.omniPull.returnChargesDetails(e).then(e=>{this.feesLabelOptions.labelKey=this.commonService.translate("your_fees_is_20_LE_key")},e=>{console.log(e)})}})}validateBeneficiary(e,t){return Object(n.b)(this,void 0,void 0,function*(){let o={};switch(t){case"phoneNumber":o={commonParametersList:{mobileNumber:e.newValue}};break;case"cardNumber":o={commonParametersList:{cardNumber:e.newValue}};break;case"address":o=this.formGroup.controls[this.instantPayAddressOptions.pspHandlerOptions.fcName].value?{commonParametersList:{address:e.value+this.formGroup.controls.formData[this.instantPayAddressOptions.pspHandlerOptions.fcName].description}}:{};break;case"handler":o=this.formGroup.controls[this.instantPayAddressOptions.addressOptions.fcName].value?{commonParametersList:{address:this.formGroup.controls[this.instantPayAddressOptions.addressOptions.fcName].value+e.description}}:{}}Object.keys(o).length>0&&(yield this.omniPull.validateIPA(o).then(e=>{this.commonService.setValInsideNestedObj(this.beneficiaryNameOptions.fcName,"name",this.IPNMonyTransferVO)}))})}handleFromAccountChange(e){this.amountOptions.currency=e.currencyBriefNameEnglish,this.amountOptions.currencyCode=e.currency,this.commonService.setValInsideNestedObj(this.amountOptions.currenciesOptions.fcName,e.currency,this.IPNMonyTransferVO),this.commonService.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.amountOptions.currenciesOptions.fcName],1)}isAccountType(e,t){var o,n;return(null===(n=null===(o=this.formGroup)||void 0===o?void 0:o.controls[e])||void 0===n?void 0:n.value)===t}}return e.AccountType={AN:"AN",MWN:"MWN"},e.\u0275fac=function(t){return new(t||e)(u.Rb(p.a),u.Rb(r.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["app-ipn-money-transfer"]],features:[u.Cb],decls:2,vars:3,consts:[[3,"options","id"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","IPN_money_transfer_details",3,"options"],["id","fromAccount",3,"options","onAccountChange"],[3,"options","onPsChange"],["id","phoneNumber",3,"options","onPsChange"],["id","mobileWalletNumber",3,"options"],[3,"options","onAddressChange","onHandlerChange"],["id","cardNumber",3,"options","onPsChange"],["id","banks",3,"options"],["id","accountNumber",3,"options"],["id","beneficiaryName",3,"options"],["id","receiverName",3,"options"],["id","amount",3,"options","onAmountChanged"],["id","fees",3,"options"],["id","purpose",3,"options"]],template:function(e,t){1&e&&(u.Xb(0,"ps-template-stepper",0),u.Pc(1,E,15,15,"ps-form-step",1),u.Wb()),2&e&&(u.pc("options",t.stepperOptions)("id",t.stepperOptions.stepperName),u.Fb(1),u.pc("psStep","step1"))},directives:[h.a,d.a,m.a,f.a,b.a,v,N.a,L,w.a,T.a,I.a,A.a,D.a,x.a],styles:[""]}),e})()},UTjL:function(e,t,o){"use strict";o.d(t,"a",function(){return b});var n=o("fXoL"),s=o("ZyuK"),i=o("BYmO"),c=o("DFXC"),r=o("qEF5"),a=o("Q0Ba"),p=o("woXy"),l=o("zngb"),u=o("ofXK"),h=o("ilDp");const d=function(e){return{disableContent:e}};function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"ps-action-icon",3),n.fc("onClick",function(){return n.Fc(e),n.ic().getScannedData(!0)}),n.Wb()}if(2&e){const e=n.ic();n.pc("id","QrScannerIcon")("ngClass",n.sc(3,d,e.isInReadOnlyScreen))("options",e.actionOption)}}const f=function(e){return{colAcc:e}};let b=(()=>{class e extends i.a{constructor(e,t,o,s){super(e,t),this.omniPull=o,this.nav=s,this.getScannedQr=new n.o,this.actionOption={},this.custMode&&(this.options.showScannerIcon=!0)}ngOnInit(){var e;let t=this.common.returnOperCustomization();this.isInReadOnlyScreen=1==(null===(e=t.get(l.a.FORM_READONLY))||void 0===e?void 0:e.IS_READONLY),r.a.isNotNull(this.options)&&(this.options.hideValueOnError=!0),this.actionOption={iconName:"qr_code_scanner",allowCust:!0,group:this.options.group}}onChangeEvent(e){this.onPsChange.emit(e)}getScannedData(e){this.custMode||(0==this.options.forceTriggerChange&&(this.options.forceTriggerChange=!0),this.commonProv.scanQRCode().then(t=>{var o,n;if(t){t=JSON.parse(t),this.commonProv.setValInsideNestedObj(this.options.fcName,null===(o=t.AccountRef)||void 0===o?void 0:o.split("-")[1],this.options.requestObject?this.options.requestObject:{});const s=Object.assign(Object.assign({},t),{accountNumber:null===(n=t.AccountRef)||void 0===n?void 0:n.split("-")[1]});this.getScannedQr.emit([s,e])}}).catch(e=>{this.logger.error("something went wrong",e),this.nav.navigateBackward()}))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(a.a),n.Rb(c.a),n.Rb(s.a),n.Rb(p.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["ps-input-account-number"]],inputs:{options:"options"},outputs:{getScannedQr:"getScannedQr"},features:[n.Cb],decls:3,vars:6,consts:[[3,"ngClass"],[3,"id","options","onPsChange","onPsEmpty"],["class","scanQrIcon",3,"id","ngClass","options","onClick",4,"ngIf"],[1,"scanQrIcon",3,"id","ngClass","options","onClick"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"ps-keyin-input",1),n.fc("onPsChange",function(e){return t.onChangeEvent(e)})("onPsEmpty",function(e){return t.onEmpty(e)}),n.Wb(),n.Pc(2,m,1,5,"ps-action-icon",2),n.Wb()),2&e&&(n.pc("ngClass",n.sc(4,f,t.options.showScannerIcon||t.custMode)),n.Fb(1),n.pc("id",t.id)("options",t.options),n.Fb(1),n.pc("ngIf",t.options.showScannerIcon||t.custMode))},directives:[u.m,i.a,u.o,h.a],styles:[""]}),e})()},VEWP:function(e,t,o){"use strict";o.d(t,"a",function(){return b});var n=o("mrSG"),s=o("fXoL"),i=o("4lGw"),c=o("V0Fi"),r=o("ZyuK"),a=o("ZF3V"),p=o("EIUR"),l=o("DFXC"),u=o("zngb"),h=o("Q0Ba"),d=o("Isd1"),m=o("L0og");const f=["complexLookupComponentObj"];let b=(()=>{class e extends a.a{constructor(e,t,o,n){super(e,t),this.commonService=e,this.omniPull=o,this.accountsService=n,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new s.o,this.onAccountDeleted=new s.o,this.labelValuesMap=new Map,this.psCurrency=new p.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(e){return Object(n.b)(this,void 0,void 0,function*(){if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const t=this.commonService.session.getValueOf(u.a.USERINFO),o=this.prepareRequestData(t);this.returnAccountList(o)})}returnAccountList(e){return Object(n.b)(this,void 0,void 0,function*(){const t=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const o=yield this.omniPull.returnAccounts(e).catch(e=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});if(o&&o.gridModel.length>0){if(this.allType){e.accountType="F",e.permittedGls="F";const t=yield this.omniPull.returnAccounts(e).catch(e=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});t&&t.gridModel.length>0&&(o.gridModel=[...o.gridModel,...t.gridModel])}if(this.options.listOfAccounts=o.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((e,t)=>e.rowIndex=t),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let e="QR"===this.options.purpose?null==t?void 0:t.defaultQrPaymentAccKey:null==t?void 0:t.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(t=>{t.personalizeKey&&t.personalizeKey===e&&(this.common.setValInsideNestedObj(this.options.fcName,t.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",t.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(e){const t=[];for(const o of e){const e={briefNameEnglish:o.briefNameEnglish,cifShortNameEnglish:o.cifShortNameEnglish,accountNumber:o.accountNumber,balance:this.psCurrency.transform(null==o.balance?"0.0":o.balance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==o.availableBalance?"0.0":o.availableBalance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),currencyBriefName:o.currencyBriefName||o.currencyBriefNameEnglish,currencyBriefNameEnglish:o.currencyBriefNameEnglish,currency:o.currency,accountTypeDesc:o.accountTypeDesc,additionalRef:o.additionalRef,ibanAccNo:o.ibanAccNo,accGl:o.accGl,serialNo:o.serialNo,branch:o.branch,cif:o.cif,formattedAccount:this.accountsService.returnFormattedAccount(o).formattedAccount,personalizeKey:o.personalizeKey,nickName:o.nickName,briefName:o.briefName,lookupKey:o.additionalRef,branchDescription:o.branchDescription?o.branchDescription:"",generalLedgerBriefNameEng:o.generalLedgerBriefNameEng?o.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:o.statusDescription,statusCode:o.status,accountFormat:this.accountsService.returnFormattedAccount(o).accountFormat};this.options.multiple&&(e.excludeType=o.excludeType),t.push(e)}return t}prepareRequestData(e){let t={};if(e&&e.omniUserVO&&(t={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let e="";for(const t in this.options.accountAllowedCurrencies)e+=this.options.accountAllowedCurrencies[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedCurrencies=e}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{let e="";for(const t in this.options.accountAllowedTypes)e+=this.options.accountAllowedTypes[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedTypes=e}return t}fetchAccountBasedOnCurrency(e){return this.options.listOfAccounts}onChange(e){this.logger.log(e)}populateOwnAccountMap(){let e={},t={},o={};e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",o)}onChangeItem(e){this.onAccountChange.emit(e)}onDeleteItem(e){e&&this.onAccountDeleted.emit(e)}handleMultipleSelection(){const e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(e=>this.options.requestObject[this.options.fcName].some(t=>t.accountNumber==e.accountNumber)):[];this.complexLookupOptions.selectedItems=e.filter(e=>this.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(e=>Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(t=>e.accountNumber!=t.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(h.a),s.Rb(l.a),s.Rb(r.a),s.Rb(i.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,t){if(1&e&&s.Wc(f,1),2&e){let e;s.Bc(e=s.gc())&&(t.complexLookupComponentObj=e.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[s.Cb,s.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,t){1&e&&(s.Xb(0,"ps-container-complex",0),s.Xb(1,"ps-complex-lookup",1,2),s.fc("changeItem",function(e){return t.onChangeItem(e)})("onDeleteItem",function(e){return t.onDeleteItem(e)}),s.Wb(),s.Wb()),2&e&&(s.Fb(1),s.pc("id",t.id)("options",t.complexLookupOptions))},directives:[d.a,m.a],styles:[""]}),e})()},mpNL:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var n=o("V0Fi"),s=o("ZF3V"),i=o("DFXC"),c=o("Q0Ba"),r=o("fXoL"),a=o("x91f");let p=(()=>{class e extends s.a{constructor(e,t){super(e,t),this.options={},this.categoriesOptions={}}ngOnInit(){this.categoriesOptions={type:n.a.CATEGORY_BANK,defaultLoad:!0,category:{labelKey:this.options.categoryLabelKey,placeHolder:this.options.categoryPlaceholderKey,fcName:this.options.categoryFcName,group:this.options.group},subCategory:{labelKey:this.options.subCategoryLabelKey,placeHolder:this.options.subCategoryPlaceholderKey,fcName:this.options.subCategoryFcName,group:this.options.group},requestObject:this.options.requestObject}}onBankChanged(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(c.a),r.Rb(i.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["ps-banks"]],inputs:{options:"options"},features:[r.Cb],decls:1,vars:1,consts:[[3,"options","onPsChange"]],template:function(e,t){1&e&&(r.Xb(0,"ps-category-sub-category",0),r.fc("onPsChange",function(e){return t.onBankChanged(e)}),r.Wb()),2&e&&r.pc("options",t.categoriesOptions)},directives:[a.a],styles:[""]}),e})()},"x3b/":function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o("DFXC"),s=o("Q0Ba"),i=o("BYmO"),c=o("fXoL");let r=(()=>{class e extends i.a{constructor(e,t){super(e,t),this.options={},this.defaultOptions={mask:{mask:"9999 9999 9999 9999"},labelKey:"card_number_key",placeHolder:"enter_your_card_number_key",type:"tel",imageOptions:{imageName:"",psClass:"card-action-image"}}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}changeCardIcon(e){const t=e.target.value;this.defaultOptions.imageOptions.imageName=t.startsWith("4")?"Visa-Curved.png":this.checkCard(52,55,t)||this.checkCard(2221,2720,t)?"Mastercard-Curved.png":t.startsWith("34")||t.startsWith("37")?"American-Express-Curved.png":t.startsWith("6011")||t.startsWith("65")?"Discover-Straight.png":t.startsWith("36")||t.startsWith("38")||this.checkCard(300,305,t)?"DinerClub.png":t.startsWith("35")||t.startsWith("2131")||t.startsWith("1800")?"jbc-card.jpg":""}checkCard(e,t,o){let n=!1;if(o&&e&&t)for(let s=e;s<=t;s++)if(o.startsWith(s.toString())){n=!0;break}return n}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(s.a),c.Rb(n.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["ps-input-card-number"]],inputs:{options:"options"},features:[c.Cb],decls:1,vars:2,consts:[[1,"ps-input-card-number",3,"id","options","keyup"]],template:function(e,t){1&e&&(c.Xb(0,"ps-keyin-input",0),c.fc("keyup",function(e){return t.changeCardIcon(e)}),c.Wb()),2&e&&c.pc("id",t.id)("options",t.defaultOptions)},directives:[i.a],styles:[""]}),e})()}}]);