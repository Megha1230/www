(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"+BRL":function(e,t,o){"use strict";o.d(t,"a",function(){return l});var n=o("DFXC"),s=o("Q0Ba"),i=o("BYmO"),c=o("fXoL");let l=(()=>{class e extends i.a{constructor(e,t){super(e,t),this.options={},this.defaultOptions={}}ngOnInit(){this.commonProv.copyObject(this.defaultOptions,this.options,!1)}onInputChanged(e){this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(s.a),c.Rb(n.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["ps-input-free-text"]],inputs:{options:"options"},features:[c.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(c.Xb(0,"ps-keyin-input",0),c.fc("onPsChange",function(e){return t.onInputChanged(e)}),c.Wb()),2&e&&c.pc("id",t.id)("options",t.defaultOptions)},directives:[i.a],styles:[""]}),e})()},VEWP:function(e,t,o){"use strict";o.d(t,"a",function(){return f});var n=o("mrSG"),s=o("fXoL"),i=o("4lGw"),c=o("V0Fi"),l=o("ZyuK"),p=o("ZF3V"),r=o("EIUR"),a=o("DFXC"),u=o("zngb"),h=o("Q0Ba"),m=o("Isd1"),d=o("L0og");const y=["complexLookupComponentObj"];let f=(()=>{class e extends p.a{constructor(e,t,o,n){super(e,t),this.commonService=e,this.omniPull=o,this.accountsService=n,this.options={fromTo:"",requestObject:null},this.complexLookupOptions={requestObject:null,notFoundMessage:"no_valid_account_found_key",multiple:!!this.options.multiple&&this.options.multiple},this.onAccountChange=new s.o,this.onAccountDeleted=new s.o,this.labelValuesMap=new Map,this.psCurrency=new r.a,this.labelOptions={},this.allType=!1}ngOnInit(){this.loadAccounts(null),this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.title="title_key",this.complexLookupOptions.subTitle="sub_title_key",this.complexLookupOptions.labelsValueMap=this.labelValuesMap,this.allType=!!this.options.allType&&this.options.allType,this.commonProv.copyObject(this.complexLookupOptions,this.options,!1),this.complexLookupOptions.requestObject=this.options.requestObject}ngOnChanges(e){this.complexLookupOptions.labelKey=this.options.labelKey,this.complexLookupOptions.placeHolder=this.options.placeHolder}loadAccounts(e){return Object(n.b)(this,void 0,void 0,function*(){if(null!=e&&(this.options=e),this.options.listOfAccounts=[],void 0===this.options.fromTo||""===this.options.fromTo)return void this.logger.error("lookup_from_to_missing_key");const t=this.commonService.session.getValueOf(u.a.USERINFO),o=this.prepareRequestData(t);this.returnAccountList(o)})}returnAccountList(e){return Object(n.b)(this,void 0,void 0,function*(){const t=this.commonProv.session.getValueOf(c.a.PERSONALIZATION_CO);this.complexLookupOptions.listOfOptions=void 0;const o=yield this.omniPull.returnAccounts(e).catch(e=>{this.complexLookupOptions.listOfOptions=[],this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});if(o&&o.gridModel.length>0){if(this.allType){e.accountType="F",e.permittedGls="F";const t=yield this.omniPull.returnAccounts(e).catch(e=>{this.logger.error("Error: While fetching accounts in PsComplexOwnAccountComponent :",e)});t&&t.gridModel.length>0&&(o.gridModel=[...o.gridModel,...t.gridModel])}if(this.options.listOfAccounts=o.gridModel,this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber)),this.options.currency&&""!==this.options.currency&&(this.complexLookupOptions.listOfOptions=this.fetchAccountBasedOnCurrency(this.options.currency),this.options.accountNumber&&""!==this.options.accountNumber&&(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts.filter(e=>e.accountNumber!==this.options.accountNumber))),null!=this.options.accountNumber&&""!==this.options.accountNumber||(this.complexLookupOptions.listOfOptions=this.options.listOfAccounts),this.complexLookupOptions.listOfOptions=this.populateCustomAccounts(this.complexLookupOptions.listOfOptions),this.complexLookupOptions.listOfOptions.map((e,t)=>e.rowIndex=t),this.allAccounts=Object.assign([],this.complexLookupOptions.listOfOptions),null==this.complexLookupOptions.selectedItems&&(this.complexLookupOptions.selectedItems=[]),this.complexLookupOptions.multiple&&this.handleMultipleSelection(),!this.options.requestObject[this.options.fcName]&&(this.options.defaultByPersonalizedAcc=null==this.options.defaultByPersonalizedAcc||this.options.defaultByPersonalizedAcc,"from"===this.options.fromTo&&this.options.defaultByPersonalizedAcc)){let e="QR"===this.options.purpose?null==t?void 0:t.defaultQrPaymentAccKey:null==t?void 0:t.defaultTransferAccKey;this.complexLookupOptions.listOfOptions.map(t=>{t.personalizeKey&&t.personalizeKey===e&&(this.common.setValInsideNestedObj(this.options.fcName,t.lookupKey,this.options.requestObject),this.common.setValInsideNestedObj(this.options.fcName+"_lookupKey",t.lookupKey,this.options.requestObject))})}}else this.listOfAccounts=[],this.complexLookupOptions.listOfOptions=[]})}populateCustomAccounts(e){const t=[];for(const o of e){const e={briefNameEnglish:o.briefNameEnglish,cifShortNameEnglish:o.cifShortNameEnglish,accountNumber:o.accountNumber,balance:this.psCurrency.transform(null==o.balance?"0.0":o.balance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),availableBalance:this.psCurrency.transform(null==o.availableBalance?"0.0":o.availableBalance,o.currencyDecimalPoints)+" "+(o.currencyBriefName||o.currencyBriefNameEnglish),currencyBriefName:o.currencyBriefName||o.currencyBriefNameEnglish,currencyBriefNameEnglish:o.currencyBriefNameEnglish,currency:o.currency,accountTypeDesc:o.accountTypeDesc,additionalRef:o.additionalRef,ibanAccNo:o.ibanAccNo,accGl:o.accGl,serialNo:o.serialNo,branch:o.branch,cif:o.cif,formattedAccount:this.accountsService.returnFormattedAccount(o).formattedAccount,personalizeKey:o.personalizeKey,nickName:o.nickName,briefName:o.briefName,lookupKey:o.additionalRef,branchDescription:o.branchDescription?o.branchDescription:"",generalLedgerBriefNameEng:o.generalLedgerBriefNameEng?o.generalLedgerBriefNameEng:"",previewProperty:"accountNumber",status:o.statusDescription,statusCode:o.status,accountFormat:this.accountsService.returnFormattedAccount(o).accountFormat};this.options.multiple&&(e.excludeType=o.excludeType),t.push(e)}return t}prepareRequestData(e){let t={};if(e&&e.omniUserVO&&(t={userCifNo:e.omniUserVO.CIF_NO,type:"A"}),null!=this.options.queryParams&&void 0!==this.options.queryParams&&""!==this.options.queryParams&&(t={commonParametersList:this.options.queryParams}),null!=this.options.accountType&&void 0!==this.options.accountType&&""!==this.options.accountType&&(t.accountType=this.options.accountType),null!=this.options.glTypes&&void 0!==this.options.glTypes&&""!==this.options.glTypes&&(t.permittedGls=this.options.glTypes),null!=this.options.fromTo&&""!==this.options.fromTo&&(t.fromTo=this.options.fromTo),null!=this.options.endUserId&&""!==this.options.endUserId&&(t.endUserId=this.options.endUserId),null!=this.options.fromCurrency?t.fromCurrency=this.options.fromCurrency:null!=this.options.toCurrency&&(t.toCurrency=this.options.toCurrency),null!=this.options.accountAllowedCurrencies&&void 0!==this.options.accountAllowedCurrencies)if("string"==typeof this.options.accountAllowedCurrencies)t.accountAllowedCurrencies=this.options.accountAllowedCurrencies;else{let e="";for(const t in this.options.accountAllowedCurrencies)e+=this.options.accountAllowedCurrencies[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedCurrencies=e}if(null!=this.options.accountAllowedTypes&&void 0!==this.options.accountAllowedTypes)if("string"==typeof this.options.accountAllowedTypes)t.accountAllowedTypes=this.options.accountAllowedTypes;else{let e="";for(const t in this.options.accountAllowedTypes)e+=this.options.accountAllowedTypes[t]+",";e=e.slice(0,e.lastIndexOf(",")),t.accountAllowedTypes=e}return t}fetchAccountBasedOnCurrency(e){return this.options.listOfAccounts}onChange(e){this.logger.log(e)}populateOwnAccountMap(){let e={},t={},o={};e={key:"accountNumber",value:"--- --- --- ---",isEdit:!1},t={key:"currentBalance",value:"0.0",isEdit:!1},o={key:"availableBalance",value:"0.0",isEdit:!1},this.labelValuesMap.set("account_key",e),this.labelValuesMap.set("balance_key",t),this.labelValuesMap.set("available_balance_key",o)}onChangeItem(e){this.onAccountChange.emit(e)}onDeleteItem(e){e&&this.onAccountDeleted.emit(e)}handleMultipleSelection(){const e=this.options.setAllAccountsAsSelecetd?this.complexLookupOptions.listOfOptions:this.options.requestObject[this.options.fcName]?this.complexLookupOptions.listOfOptions.filter(e=>this.options.requestObject[this.options.fcName].some(t=>t.accountNumber==e.accountNumber)):[];this.complexLookupOptions.selectedItems=e.filter(e=>this.options.setAllAccountsAsSelecetd&&(!e.excludeType||!(e.excludeType.includes(c.a.GENERAL_ACCOUNT_EXCLUDE_TYPE)||e.excludeType.includes(c.a.TERM_ACCOUNT_EXCLUDE_TYPE)))||!this.options.setAllAccountsAsSelecetd).map(e=>Object.assign(Object.assign({item:e[e.previewProperty]},e),{itemLookup:e.lookupKey})),this.complexLookupOptions.selectedItems.length>0&&this.complexLookupComponentObj.setSelectedItems(this.complexLookupOptions.selectedItems)}removeAccount(e){e&&void 0!==this.allAccounts&&(this.complexLookupOptions.listOfOptions=this.allAccounts?this.allAccounts.filter(t=>e.accountNumber!=t.accountNumber):[])}reset(){this.complexLookupComponentObj.resetLookUp()}refreshAcounts(e){this.complexLookupOptions.listOfOptions=Object.assign([],this.allAccounts),this.removeAccount(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(h.a),s.Rb(a.a),s.Rb(l.a),s.Rb(i.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["ps-lookup-own-accounts"]],viewQuery:function(e,t){if(1&e&&s.Wc(y,1),2&e){let e;s.Bc(e=s.gc())&&(t.complexLookupComponentObj=e.first)}},inputs:{options:"options"},outputs:{onAccountChange:"onAccountChange",onAccountDeleted:"onAccountDeleted"},features:[s.Cb,s.Db],decls:3,vars:2,consts:[[1,"ps-complex-own-account"],[3,"id","options","changeItem","onDeleteItem"],["complexLookupComponentObj",""]],template:function(e,t){1&e&&(s.Xb(0,"ps-container-complex",0),s.Xb(1,"ps-complex-lookup",1,2),s.fc("changeItem",function(e){return t.onChangeItem(e)})("onDeleteItem",function(e){return t.onDeleteItem(e)}),s.Wb(),s.Wb()),2&e&&(s.Fb(1),s.pc("id",t.id)("options",t.complexLookupOptions))},directives:[m.a,d.a],styles:[""]}),e})()},i0F6:function(e,t,o){"use strict";o.r(t),o.d(t,"OnlineBillPaymentPage",function(){return L});var n=o("3Pt+"),s=o("OVQh"),i=o("/M2N"),c=o("V0Fi"),l=o("fOh1"),p=o("ZyuK"),r=o("DFXC"),a=o("zngb"),u=o("QZhd"),h=o("woXy"),m=o("Q0Ba"),d=o("gKqT"),y=o("fXoL"),f=o("kRg/"),O=o("uKCV"),b=o("sAFK"),g=o("+f2X"),C=o("iOQE");let A=(()=>{class e extends C.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.defaultSelectOptions={labelKey:"category_key",placeHolder:"select_category_key"},this.billTypes=[]}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.getBillTypes()}onCategoryChange(e){this.loggerP.log("onCategory"+e),this.onPsChange.emit(e)}getBillTypes(){this.omniPull.returnBillTypeList({}).then(e=>{if(e&&null!=e.gridModel&&e.gridModel.length>0){for(let t=0;t<e.gridModel.length;t++)this.billTypes.push({itemValue:e.gridModel[t].code,description:e.gridModel[t].longDesc,selectedObj:e.gridModel[t]});this.defaultSelectOptions.listOfOptions=this.billTypes}else this.defaultSelectOptions.listOfOptions=[],this.logger.warn(e,"empty response")}).catch(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(y.Rb(m.a),y.Rb(r.a),y.Rb(p.a))},e.\u0275cmp=y.Lb({type:e,selectors:[["ps-dropdown-billers-category"]],inputs:{options:"options"},features:[y.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(y.Xb(0,"ps-select-dropdown",0),y.fc("onPsChange",function(e){return t.onCategoryChange(e)}),y.Wb()),2&e&&y.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[C.a],styles:[""]}),e})();var x=o("ofXK"),P=o("+BRL"),N=o("VEWP");let k=(()=>{class e extends C.a{constructor(e,t,o){super(e,t),this.omniPull=o,this.defaultSelectOptions={labelKey:"biller_key",placeHolder:"select_biller_key"},this.billerTypes=[]}ngOnInit(){this.commonProv.copyObject(this.defaultSelectOptions,this.options),this.options.listofItems&&(this.defaultSelectOptions.listOfOptions=this.options.listofItems)}onTypeChange(e){this.loggerP.log("onType"+e),this.onPsChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(y.Rb(m.a),y.Rb(r.a),y.Rb(p.a))},e.\u0275cmp=y.Lb({type:e,selectors:[["ps-dropdown-biller"]],inputs:{options:"options"},features:[y.Cb],decls:1,vars:2,consts:[[3,"id","options","onPsChange"]],template:function(e,t){1&e&&(y.Xb(0,"ps-select-dropdown",0),y.fc("onPsChange",function(e){return t.onTypeChange(e)}),y.Wb()),2&e&&y.pc("id",t.id)("options",t.defaultSelectOptions)},directives:[C.a],styles:[""]}),e})();function _(e,t){if(1&e){const e=y.Yb();y.Xb(0,"ps-dropdown-biller",9),y.fc("onPsChange",function(t){return y.Fc(e),y.ic(2).onBillerChange(t)}),y.Wb()}if(2&e){const e=y.ic(2);y.pc("options",e.typeOptions)}}function T(e,t){if(1&e){const e=y.Yb();y.Xb(0,"ps-form-step",2),y.Xb(1,"ps-container-panel",3),y.Xb(2,"ps-dropdown-billers-category",4),y.fc("onPsChange",function(t){return y.Fc(e),y.ic().onCategoryChange(t)}),y.Wb(),y.Pc(3,_,1,1,"ps-dropdown-biller",5),y.Sb(4,"ps-input-free-text",6),y.Xb(5,"ps-lookup-own-accounts",7),y.fc("onAccountChange",function(t){return y.Fc(e),y.ic().onAccountChange(t)}),y.Wb(),y.Xb(6,"ps-input-free-text",8),y.fc("onPsChange",function(t){return y.Fc(e),y.ic().onRefChange(t)}),y.Wb(),y.Sb(7,"ps-complex-exchange",0),y.Wb(),y.Wb()}if(2&e){const e=y.ic();y.pc("id",e.stepperOptions.namesofSteps[0]),y.Fb(1),y.pc("options",e.panelOptionsStep1),y.Fb(1),y.pc("options",e.categoryOptions),y.Fb(1),y.pc("ngIf",e.showBiller),y.Fb(1),y.pc("options",e.hintOptions),y.Fb(1),y.pc("options",e.accountListOptions),y.Fb(1),y.pc("options",e.briefExplanationOptions),y.Fb(1),y.pc("options",e.complexExchangeOptions)}}let L=(()=>{class e extends d.OmniBasePage{constructor(e,t,o,i){super(),this.commonProv=e,this.loggerP=t,this.omniPull=o,this.navService=i,this.billPaymentForm=new n.f({}),this.defaultVO={},this.stepperOptions={isHorizontalStepper:!0,numberOfSteps:1,namesofSteps:["bill_payment_step1"],group:this.billPaymentForm,submitOptions:{extraParams:{},submitServiceUrl:l.a.serviceUrl.billPaymentEndPoint,group:this.billPaymentForm,postCallFunction:{func(e){return new Promise((t,o)=>{t(this.executionClass.serviceRes(e))})},params:[this],executionClass:this}},requestObject:this.defaultVO},this.accountListOptions={labelKey:"from_account_key",placeHolder:"select_from_account_key",component:s.a,currency:"USD",group:this.billPaymentForm,accountAllowedCurrencies:[],accountAllowedTypes:[],glTypes:"G",fcName:"fromAccount",accountType:"G",fromTo:"from",requestObject:this.defaultVO},this.panelOptionsStep1={isExpandable:!0,labelKey:"bill_payment_key",iconName:"document",expanded:!0},this.psComplexAmountOptions={currenciesOptions:{labelKey:"currency_key",placeHolder:"currency_key",group:this.billPaymentForm,fcName:"currency"},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"amount",group:this.billPaymentForm,type:"amount",decimalPoints:3}},this.complexExchangeOptions={editableMode:!0,showToCurrencyOptions:!0,fromAmountOptions:{currency:"",group:this.billPaymentForm,currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"fromAccountCurrency",group:this.billPaymentForm},amountOptions:{labelKey:"amount_key",placeHolder:"enter_amount_key",fcName:"transactionAmount",group:this.billPaymentForm}},toAmountOptions:{group:this.billPaymentForm,currency:"",currenciesOptions:{placeHolder:"currency_key",labelKey:"currency_key",fcName:"currency",group:this.billPaymentForm},amountOptions:{labelKey:"exchanged_amount_key",placeHolder:"enter_exchanged_amount_key",fcName:"toAmount",group:this.billPaymentForm}}},this.briefExplanationOptions={labelKey:"bill_reference_key",placeHolder:"enter_bill_reference_key",fcName:"reference",group:this.billPaymentForm,iconOptions:{iconName:"clipboard"}},this.hintOptions={placeHolder:"enter_hint_key",labelKey:"billers_hint_key",group:this.billPaymentForm,fcName:"hint"},this.categoryOptions={fcName:"category",group:this.billPaymentForm},this.typeOptions={fcName:"biller",group:this.billPaymentForm},this.showBiller=!1,this.billerTypes=[]}ngOnInit(){super.init(),this.baseFormGroup=this.billPaymentForm,u.a.oper_ID=c.a.BILL_PAYMENTS_OPER_ID}onAccountChange(e){e&&(this.defaultVO[this.complexExchangeOptions.toAmountOptions.amountOptions.fcName]="",this.defaultVO[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName]=e.currency.toString(),this.complexExchangeOptions.toAmountOptions.currencyCode=Number(e.currency),this.commonProv.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.currenciesOptions.fcName],1),this.commonProv.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.toAmountOptions.amountOptions.fcName],1),this.commonProv.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName],1),this.showExchangeRate())}showExchangeRate(){this.exchangeChild.showToCurrency()}ngAfterViewInit(){setTimeout(()=>{this.commonProv.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName],1),this.showExchangeRate()},100)}onCategoryChange(e){e.selectedObj.longDesc&&(this.showBiller=!1,this.defaultVO[this.hintOptions.fcName]=e.selectedObj.longDesc,this.getBillerTypes(e))}onBillerChange(e){e.selectedObj&&(this.commonProv.applyDynScreenDisplay(a.a.ACTION_TYPE_READONLY,[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName],1),this.defaultVO[this.complexExchangeOptions.fromAmountOptions.currenciesOptions.fcName]=e.selectedObj.currencyCode.toString(),this.complexExchangeOptions.fromAmountOptions.currencyCode=Number(e.selectedObj.currencyCode),this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{toAccount:{accountNumber:e.selectedObj.accountNumber},cifBank:e.selectedObj.accCIF,additionalNumber:e.selectedObj.billTypeCode,billerCode:e.selectedObj.organizationCode},!1,!0))}getBillerTypes(e){this.omniPull.returnBillersList({commonParametersList:{category:e}}).then(e=>{if(this.showBiller=!1,this.billerTypes=[],e&&null!=e.gridModel&&e.gridModel.length>0){for(let t=0;t<e.gridModel.length;t++)this.billerTypes.push({itemValue:e.gridModel[t].itemValue,description:e.gridModel[t].description,selectedObj:e.gridModel[t]});this.typeOptions.listofItems=this.billerTypes,this.showBiller=!0}else this.loggerP.warn(e,"empty response")}).catch(e=>{})}onRefChange(e){e&&this.commonProv.copyObject(this.stepperOptions.submitOptions.extraParams,{soReference:e.newValue},!1,!0)}}return e.\u0275fac=function(t){return new(t||e)(y.Rb(m.a),y.Rb(r.a),y.Rb(p.a),y.Rb(h.a))},e.\u0275cmp=y.Lb({type:e,selectors:[["app-online-bill-payment"]],viewQuery:function(e,t){if(1&e&&y.Wc(i.a,1),2&e){let e;y.Bc(e=y.gc())&&(t.exchangeChild=e.first)}},features:[y.Cb],decls:2,vars:2,consts:[[3,"options"],["step1","",3,"id",4,"psStep"],["step1","",3,"id"],["id","amana_online_bill_pmt_panel1",3,"options"],["id","'category' + id",3,"options","onPsChange"],["id","'type' + id",3,"options","onPsChange",4,"ngIf"],["id","'hint' + id",3,"options"],["id","'transferFrom'+ id",3,"options","onAccountChange"],["id","input_free_text",3,"options","onPsChange"],["id","'type' + id",3,"options","onPsChange"]],template:function(e,t){1&e&&(y.Xb(0,"ps-template-stepper",0),y.Pc(1,T,8,8,"ps-form-step",1),y.Wb()),2&e&&(y.pc("options",t.stepperOptions),y.Fb(1),y.pc("psStep","step1"))},directives:[f.a,O.a,b.a,g.a,A,x.o,P.a,N.a,i.a,k],styles:[""]}),e})()}}]);