{"version":3,"sources":["webpack:///src/app/pages/upgrade-card/upgrade-card.page.scss","webpack:///src/app/pages/upgrade-card/upgrade-card.page.ts","webpack:///src/app/pages/upgrade-card/upgrade-card.page.html"],"names":["UpgradeCardPage","loggerP","nav","omniPull","translateSrv","formGroup","upgradeCardVO","showDebitCard","enableRequestCifBranch","cifInfo","stepperOptions","stepperName","isHorizontalStepper","numberOfSteps","namesofSteps","group","submitOptions","extraParams","submitServiceUrl","serviceUrl","commonSubmitAction","postCallFunction","func","response","Promise","resolve","reject","executionClass","checkUnsettledBalance","params","requestObject","panelOptions1Step1","isExpandable","labelKey","iconName","expanded","cardHolderNameOptions","placeHolder","fcName","primaryAccountOptions","currency","accountAllowedCurrencies","accountAllowedTypes","glTypes","GeneralType","component","fromTo","accountType","secondaryAccountOptions","debitCardTypeOptions","cardType","CARDTYPE_D","creditCardTypeOptions","CARDTYPE_C","settlementAccountOptions","panelOptions2Step1","selectBranchOptions","deliveryAddressDetails","collectionModeOptions","branchLocationOptions","countryRegionCityOptions","countriesOptions","regionOptions","cityOptions","branchesOptions","homeAddressOptions","requestVO","workAddressOptions","otherAddressOptions","rows","cols","branchCifOptions","cifBranchChecking","ngOnInit","baseFormGroup","commonProv","activePage","value","operID","UPGRADE_CREDIT_CARD","applyDynScreenDisplay","ACTION_TYPE_VISIBLE","ionViewDidEnter","fetchParameter","defaultCardAccount","getAllParams","primaryAccount","secondaryAccount","setValInsideNestedObj","defaultCardHolderName","currentLang","toLocaleLowerCase","session","getValueOf","USERINFO","customerInfoCO","longNameArabic","longName","getParamValOf","CARDS_REQUEST_BRANCH","error","result","RequestBranch","END_USER_INPUT_ID","hideShowRequestBranch","onSelectBranch","event","itemValue","undefined","controls","setValue","selectedObj","hideMap","modeOfCollection","SPECIFIC_BRANCH_VALUE","enableCifBranch","outputCode","settleBalanceAlertController","cssClass","id","header","headerImageOptions","imageName","imageBase64Url","buttons","role","options","psClass","handler","dismissAllModals","settlementPage","title","icon","param","accountNumber","openPage","presentPsAlert","selector","template"],"mappings":"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","file":"102-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGdyYWRlLWNhcmQucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { PsAccountsListComponent } from 'src/app/commonBussinessSRC/psComponents/ps-accounts-list/ps-accounts-list.component';\nimport { IOptionsPsComplexLocationExposed } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-location/ps-complex-location.component.interface';\nimport { IOptionsPsComplexSelectBranchComponentExposed } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-select-branch/ps-complex-select-branch.component.interface';\nimport { IOptionsPsInputVarcharExposed } from 'src/app/commonBussinessSRC/psComponents/ps-keyin-input/ps-input-varchar/ps-input-varchar.component.interfaces';\nimport { IOptionsPsLookupOwnAccountsExposed } from 'src/app/commonBussinessSRC/psComponents/ps-lookup/ps-lookup-own-accounts/ps-lookup-own-accounts.component.interfaces';\nimport { IOptionsPsDropdownCardTypesExposed } from 'src/app/commonBussinessSRC/psComponents/ps-select-dropdown/ps-dropdown-card-types/ps-dropdown-card-types.component.interface';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { UpgradeCardRequestVO } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { CommonUtils } from 'src/app/commonSRC/psServices/models/common-utils';\nimport { IOptionsPsContainerPanel, IOptionsTemplateStepper, IPageCommon } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonSettings } from 'src/app/commonSRC/psServices/models/ps-common.settings';\nimport { PsNavigatorService } from 'src/app/commonSRC/psServices/navigator/ps-navigator.service';\nimport { IOptionsPsComplexAlertController } from 'src/app/commonSRC/psTemplates/ps-template-alert-controller/ps-template-alert-controller.template.interfaces';\nimport { OmniBasePage } from '../omni-base/omni-base.page';\n\n@Component({\n  selector: 'app-upgrade-card',\n  templateUrl: './upgrade-card.page.html',\n  styleUrls: ['./upgrade-card.page.scss'],\n})\nexport class UpgradeCardPage extends OmniBasePage implements OnInit {\n  private formGroup: FormGroup = new FormGroup({});\n  upgradeCardVO: UpgradeCardRequestVO = {};\n  defaultCardAccount: any;\n  showDebitCard: boolean = false;\n  enableRequestCifBranch: boolean = false;\n  cifInfo: any = {};\n\n  stepperOptions: IOptionsTemplateStepper = {\n    stepperName: 'upgrade_card_stepper',\n    isHorizontalStepper: true,\n    numberOfSteps: 1,\n    namesofSteps: ['upgrade_card_step1'],\n    group: this.formGroup,\n    submitOptions: {\n      extraParams: {},\n      submitServiceUrl: PsCommonSettings.serviceUrl.commonSubmitAction,\n      group: this.formGroup,\n      postCallFunction: {\n        func(response) {\n          return new Promise<any>((resolve, reject) => {\n            resolve(this.executionClass.checkUnsettledBalance(response));\n          });\n        },\n        params: [this],\n        executionClass: this\n      },\n    },\n    requestObject: this.upgradeCardVO,\n  };\n  panelOptions1Step1: IOptionsPsContainerPanel = {\n    isExpandable: true,\n    labelKey: 'card_details_key',\n    iconName: 'document',\n    expanded: true\n  };\n\n  cardHolderNameOptions: IOptionsPsInputVarcharExposed = {\n    labelKey: 'card_holder_name_key',\n    placeHolder: 'card_holder_name_key',\n    group: this.formGroup,\n    fcName: 'cardHolderName'\n  };\n\n  primaryAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'primary_account_key',\n    placeHolder: 'primary_account_key',\n    currency: '',\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: ConstantCommon.GeneralType,\n    fcName: 'primaryAccount',\n    component: PsAccountsListComponent,\n    fromTo: 'from',\n    accountType: ConstantCommon.GeneralType,\n    requestObject: this.upgradeCardVO,\n  };\n  secondaryAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'secondary_account_key',\n    placeHolder: 'secondary_account_key',\n    currency: '',\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: ConstantCommon.GeneralType,\n    fcName: 'secondaryAccount',\n    component: PsAccountsListComponent,\n    fromTo: 'from',\n    accountType: ConstantCommon.GeneralType,\n    requestObject: this.upgradeCardVO,\n  };\n\n  debitCardTypeOptions: IOptionsPsDropdownCardTypesExposed = {\n    labelKey: 'debit_card_type_key',\n    placeHolder: 'select_card_type_key',\n    group: this.formGroup,\n    fcName: 'debitCardType',\n    cardType: ConstantCommon.CARDTYPE_D\n  };\n  creditCardTypeOptions: IOptionsPsDropdownCardTypesExposed = {\n    labelKey: 'credit_card_type_key',\n    placeHolder: 'select_card_type_key',\n    group: this.formGroup,\n    fcName: 'creditCardType',\n    cardType: ConstantCommon.CARDTYPE_C\n  };\n  settlementAccountOptions: IOptionsPsLookupOwnAccountsExposed = {\n    labelKey: 'settlement_account_key',\n    placeHolder: 'settlement_account_key',\n    currency: '',\n    group: this.formGroup,\n    accountAllowedCurrencies: [],\n    accountAllowedTypes: [],\n    glTypes: ConstantCommon.GeneralType,\n    fcName: 'settlementAccount',\n    component: PsAccountsListComponent,\n    fromTo: 'from',\n    accountType: ConstantCommon.GeneralType,\n    requestObject: this.upgradeCardVO,\n  };\n  panelOptions2Step1: IOptionsPsContainerPanel = {\n    isExpandable: true,\n    labelKey: 'select_map_branch_key',\n    iconName: 'location-pin',\n    expanded: true,\n  };\n  selectBranchOptions: IOptionsPsComplexSelectBranchComponentExposed = {\n    fcName: 'mapAtmBranchesDropdown',\n    group: this.formGroup,\n  };\n  deliveryAddressDetails: IOptionsPsComplexLocationExposed = {\n    collectionModeOptions: {\n      group: this.formGroup,\n      fcName: 'deliveryLoc'\n    },\n    branchLocationOptions: {\n      fcName: 'destinationBranchesDropdown',\n      group: this.formGroup,\n      countryRegionCityOptions: {\n        countriesOptions: {\n          fcName: 'destinationBranchCountry'\n        },\n        regionOptions: {\n          fcName: 'destinationBranchRegion'\n        },\n        cityOptions: {\n          fcName: 'destinationBranchCity'\n        }\n      },\n      branchesOptions: {\n        fcName: 'destinationBranch'\n      }\n    },\n    homeAddressOptions: {\n      placeHolder: 'home_address_key',\n      labelKey: 'home_address_key',\n      group: this.formGroup,\n      fcName: 'homeAddress',\n      requestVO: this.upgradeCardVO,\n    },\n    workAddressOptions: {\n      placeHolder: 'work_address_key',\n      labelKey: 'work_address_key',\n      group: this.formGroup,\n      fcName: 'workAddress',\n      requestVO: this.upgradeCardVO,\n    },\n    otherAddressOptions: {\n      labelKey: 'address_details_key',\n      rows: '3',\n      cols: '10',\n      fcName: 'otherAddressDetails',\n      group: this.formGroup,\n    },\n    branchCifOptions: {\n      labelKey: 'account_branch_key', // account or cif branch\n      group: this.formGroup,\n      fcName: 'branchName',\n    },\n    cifBranchChecking: true\n  };\n\n  constructor(public loggerP: LoggerService, public nav: PsNavigatorService, private omniPull: OmniPullService, private translateSrv: TranslateService) {\n    super();\n  }\n  ngOnInit() {\n    super.init();\n    this.baseFormGroup = this.formGroup;\n    this.showDebitCard = this.commonProv.activePage.value.operID === CommonBussinessConstant.UPGRADE_CREDIT_CARD ? false : true;\n    if (this.showDebitCard) {\n      this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.creditCardTypeOptions.fcName, this.cardHolderNameOptions.fcName, this.settlementAccountOptions.fcName], 0);\n      this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.debitCardTypeOptions.fcName, this.primaryAccountOptions.fcName, this.secondaryAccountOptions.fcName], 1);\n    } else {\n      this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.creditCardTypeOptions.fcName, this.cardHolderNameOptions.fcName, this.settlementAccountOptions.fcName], 1);\n      this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.debitCardTypeOptions.fcName, this.primaryAccountOptions.fcName, this.secondaryAccountOptions.fcName], 0);\n\n    }\n  }\n\n  ionViewDidEnter() {\n    super.ionViewDidEnter();\n    this.fetchParameter();\n    this.defaultCardAccount = this.nav.getAllParams().primaryAccount;\n\n    if (this.showDebitCard) {\n      const secondaryAccount = this.nav.getAllParams().secondaryAccount;\n      this.commonProv.setValInsideNestedObj(this.primaryAccountOptions.fcName, this.defaultCardAccount, this.upgradeCardVO);\n      this.commonProv.setValInsideNestedObj(this.primaryAccountOptions.fcName + \"_lookupKey\", this.defaultCardAccount, this.upgradeCardVO);\n      if (secondaryAccount) {\n        this.commonProv.setValInsideNestedObj(this.secondaryAccountOptions.fcName, secondaryAccount, this.upgradeCardVO);\n        this.commonProv.setValInsideNestedObj(this.secondaryAccountOptions.fcName + \"_lookupKey\", secondaryAccount, this.upgradeCardVO);\n      }\n    } else {\n      const defaultCardHolderName = this.translateSrv.currentLang.toLocaleLowerCase() === 'ar' ? this.commonProv.session.getValueOf(ConstantCommon.USERINFO).customerInfoCO?.longNameArabic : this.commonProv.session.getValueOf(ConstantCommon.USERINFO).customerInfoCO?.longName;\n      this.commonProv.setValInsideNestedObj(this.cardHolderNameOptions.fcName, defaultCardHolderName, this.upgradeCardVO);\n      this.commonProv.setValInsideNestedObj(this.settlementAccountOptions.fcName, this.defaultCardAccount, this.upgradeCardVO);\n      this.commonProv.setValInsideNestedObj(this.settlementAccountOptions.fcName + \"_lookupKey\", this.defaultCardAccount, this.upgradeCardVO);\n    }\n  }\n\n  async fetchParameter() {\n    this.cifInfo = this.commonProv.session.getValueOf(ConstantCommon.USERINFO);\n    const result = await this.omniPull.getParamValOf(CommonBussinessConstant.CARDS_REQUEST_BRANCH)\n      .catch((error) => {\n        this.loggerP.error(error);\n      });\n    if (result !== -1 && result.RequestBranch === CommonBussinessConstant.END_USER_INPUT_ID) {\n      this.enableRequestCifBranch = false;\n    } else {\n      this.enableRequestCifBranch = true;\n    }\n    this.hideShowRequestBranch();\n  }\n\n  onSelectBranch(event) {\n    if (event.itemValue !== undefined) {\n      this.formGroup.controls[this.selectBranchOptions.fcName].setValue(event);\n      this.commonProv.setValInsideNestedObj(this.selectBranchOptions.fcName, event.selectedObj, this.upgradeCardVO);\n    }\n  }\n\n  hideMap() {\n    let modeOfCollection = this.upgradeCardVO ? this.upgradeCardVO[this.deliveryAddressDetails.collectionModeOptions.fcName] : {};\n    if (modeOfCollection?.itemValue === CommonBussinessConstant.SPECIFIC_BRANCH_VALUE || modeOfCollection === CommonBussinessConstant.SPECIFIC_BRANCH_VALUE) {\n\n      if (this.deliveryAddressDetails.enableCifBranch == 1) {\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.stepperOptions.namesofSteps[1]], 1, true);\n      } else {\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, ['destBranch'], 1, true);\n      }\n    } else {\n      if (this.deliveryAddressDetails.enableCifBranch == 1) {\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, [this.stepperOptions.namesofSteps[1]], 0, true);\n      } else {\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, ['destBranch'], 0, true);\n      }\n    }\n  }\n\n  hideShowRequestBranch() {\n    this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_VISIBLE, ['upgrade_card_req_panel2'], !this.enableRequestCifBranch);\n  }\n\n  async checkUnsettledBalance(response) {\n    if (!this.showDebitCard) {\n      // TODO: check for any unsettled balance on the current ((credit)) card  --> Call web service\n      if (response && response.outputCode === -1) {\n        const settleBalanceAlertController: IOptionsPsComplexAlertController = {\n          cssClass: 'cronto-code',\n          id: 'settle-balance',\n          header: 'please_settle_oustanding_balance_in_order_to_proceed_key',\n          headerImageOptions: {\n            imageName: '',\n            imageBase64Url: ''\n          },\n          buttons: [\n            {\n              role: 'cancel',\n              options: {\n                labelKey: 'cancel_key',\n                psClass: 'ps-drafts-report-cancel-button',\n                group: null\n              },\n              handler: () => {\n                CommonUtils.dismissAllModals();\n              }\n            }, {\n              role: 'cancel',\n              options: {\n                labelKey: 'ok_key',\n                iconName: '',\n                psClass: 'ps-drafts-report-submit-button',\n                group: null\n              },\n              handler: () => {\n                let settlementPage: IPageCommon = {\n                  operID: 51,\n                  title: 'CREDIT_CARD_SETTLEMENT_REQ',\n                  component: 'credit-card-settlement',\n                  icon: \"card-status-report\",\n                  param: {\n                    accountNumber: this.defaultCardAccount,\n                  }\n                };\n                this.nav.openPage(settlementPage);\n              }\n            }\n          ]\n        };\n        this.commonProv.presentPsAlert(settleBalanceAlertController, 'settle-balance');\n      }\n    }\n  }\n}\n","export default \"<ps-template-stepper [options]=\\\"stepperOptions\\\" [id]=\\\"stepperOptions.stepperName\\\">\\n  <ps-form-step *psStep=\\\"'step1'\\\" step1 [id]=\\\"stepperOptions.namesofSteps[0]\\\">\\n    <ps-container-panel [options]=\\\"panelOptions1Step1\\\" id=\\\"upgrade_card_req_panel\\\">\\n\\n      <ps-input-varchar id=\\\"cardHolderName\\\" [options]=\\\"cardHolderNameOptions\\\"></ps-input-varchar>\\n\\n      <ps-lookup-own-accounts id=\\\"'primaryAccount'+ id\\\" [options]=\\\"primaryAccountOptions\\\">\\n      </ps-lookup-own-accounts>\\n\\n      <ps-dropdown-card-types id=\\\"debitCardType\\\" [options]=\\\"debitCardTypeOptions\\\">\\n      </ps-dropdown-card-types>\\n      <ps-dropdown-card-types id=\\\"creditCardType\\\" [options]=\\\"creditCardTypeOptions\\\">\\n      </ps-dropdown-card-types>\\n\\n      <ps-lookup-own-accounts id=\\\"'secondaryAccount'+ id\\\" [options]=\\\"secondaryAccountOptions\\\">\\n      </ps-lookup-own-accounts>\\n\\n      <ps-lookup-own-accounts id=\\\"settlementAccountid\\\" [options]=\\\"settlementAccountOptions\\\">\\n      </ps-lookup-own-accounts>\\n\\n      <ps-complex-location (parentFun)=\\\"hideMap()\\\" [options]=\\\"deliveryAddressDetails\\\">\\n      </ps-complex-location>\\n\\n    </ps-container-panel>\\n    <ps-container-panel [options]=\\\"panelOptions2Step1\\\" id=\\\"upgrade_card_req_panel2\\\">\\n      <ps-complex-select-branch [options]=\\\"selectBranchOptions\\\" (onPsChange)=\\\"onSelectBranch($event)\\\">\\n      </ps-complex-select-branch>\\n    </ps-container-panel>\\n\\n  </ps-form-step>\\n</ps-template-stepper>\";"]}