{"version":3,"sources":["webpack:///src/app/pages/account-statement-list/account-statement-list.page.scss","webpack:///src/app/pages/account-statement-list/account-statement-list.page.html","webpack:///src/app/pages/account-statement-list/account-statement-list.page.ts"],"names":["AccountStatementListPage","commonService","logger","navService","omniPull","id","requestWasSent","noTransactionsFound","paramList","formGroup","templateViewOptions","group","psDatePipe","accountStatementListOptions","reportFilterOptions","noTransactionsOptions","labelKey","exportOptions","sendOptions","ngOnInit","getAllParams","reportParametersList","isEditable","oper_ID","loadAccountStatement","appliedFilters","generalRequestData","commonParametersList","status","accountNumber","additionalRef","accountCategory","accountTypeCategory","ibanAccNo","accGl","dateFrom","repFltfilterFromDate","dateTo","repFltfilterToDate","minAmount","repFltfromAmount","maxAmount","repFlttoAmount","referenceNo","repFltReferenceNumber","transactionTypeIndicator","repFlttrsTypeInd","returnAccountStatement","requestData","result","gridModel","transactionNo","toAccountAccGl","fromAccountCif","fromAccountAccGl","transactionTypeShortNameEnglish","fromAccountCurrency","cifShortName","fromAccountAdditionalRef","transactionCurrency","amount","startDate","transactionDate","currencyBriefNameEnglish","transactionType","toAccountBranch","statusDescription","toAccountCif","cvAmount","description","merchantLogo","merchantName","branch","valueDate","chequeNo","payeeName","chequeDate","length","listOfOptions","populateAccountTransactions","transactionslist","transactions","iterator","trans","transform","toString","transactionName","reference","soReference","transactionAmount","bankCifShortNameEng","fromAccount","fromAccount_lookupKey","toAccount","toAccountAdditionalRef","toAccount_lookupKey","getParamValOf","then","res","defaultLogo","err","log","push","filterCriteria","filterData","fromDate","todate","selector","template"],"mappings":"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","file":"77-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50LXN0YXRlbWVudC1saXN0LnBhZ2Uuc2NzcyJ9 */\";","export default \"<ps-template-view [options]=\\\"templateViewOptions\\\">\\n  <ps-complex-report-filter-criteria (onPsChange)=\\\"filterCriteria($event)\\\" [options]=\\\"reportFilterOptions\\\"\\n    [id]=\\\"'filter_criteria'\\\">\\n  </ps-complex-report-filter-criteria>\\n  <ng-container *ngIf=\\\"!requestWasSent\\\">\\n    <ps-account-statement-list [options]=\\\"accountStatementListOptions\\\" (reloadFct)=\\\"loadAccountStatement()\\\">\\n    </ps-account-statement-list>\\n    <div *ngIf=\\\"noTransactionsFound\\\" class=\\\"no-transfers-text\\\">\\n      <ps-label [options]=\\\"noTransactionsFound\\\"></ps-label>\\n    </div>\\n  </ng-container>\\n\\n  <ng-container footer>\\n    <ps-button-send-email class=\\\"footer-buttons\\\" [options]=\\\"sendOptions\\\" [id]=\\\"'rep_send_' + id\\\">\\n    </ps-button-send-email>\\n    <ps-button-export class=\\\"footer-buttons\\\" [options]=\\\"exportOptions\\\" [id]=\\\"'rep_export_' + id\\\"></ps-button-export>\\n  </ng-container>\\n\\n</ps-template-view>\";","import { Component, Input, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { IOptionsPsOptionAccountStatementExposed } from 'src/app/commonBussinessSRC/psComponents/ps-account-statement-list/ps-account-statement-list.component.interface';\nimport { IOptionsPsComplexReportFilterCriteriaComponent } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-report-filter-criteria/ps-complex-report-filter-criteria.component.interfaces';\nimport { ITransactionResponse } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-interfaces';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { PsDateFormatPipe } from 'src/app/commonSRC/psPipes/ps-date-format/ps-date-format.pipe';\nimport { LoggerService } from 'src/app/commonSRC/psServices/logger/logger.service';\nimport { IOptionsPsButtonSendEmail, IOptionsPsLabel, IOptionsPsTemplateView } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsCommonSettings } from 'src/app/commonSRC/psServices/models/ps-common.settings';\nimport { PsNavigatorService } from 'src/app/commonSRC/psServices/navigator/ps-navigator.service';\nimport { PsCommonService } from 'src/app/commonSRC/psServices/ps-common/ps-common.service';\nimport { OmniBasePage } from '../omni-base/omni-base.page';\nimport { IAccountStatementDetails } from './account-statement-list.page.iterface';\nimport { IOptionsPsButtonExport } from 'src/app/commonBussinessSRC/psComponents/ps-button-export/ps-button-export.component.interface';\n\n@Component({\n  selector: 'app-account-statement-list',\n  templateUrl: './account-statement-list.page.html',\n  styleUrls: ['./account-statement-list.page.scss'],\n})\nexport class AccountStatementListPage extends OmniBasePage implements OnInit {\n  @Input() public id = 'default_stepper_id';\n  requestWasSent = true;\n  noTransactionsFound = false;\n  paramList: any = {}\n  private formGroup = new FormGroup({});\n  public templateViewOptions: IOptionsPsTemplateView = {\n    group: this.formGroup\n  };\n  private psDatePipe = new PsDateFormatPipe();\n  accountStatementListOptions: IOptionsPsOptionAccountStatementExposed = {}\n  reportFilterOptions: IOptionsPsComplexReportFilterCriteriaComponent = {};\n  noTransactionsOptions: IOptionsPsLabel = {\n    labelKey: 'no_transactions_available_key'\n  };\n  exportOptions: IOptionsPsButtonExport = {\n    group: this.formGroup\n  };\n  sendOptions: IOptionsPsButtonSendEmail = {\n    group: this.formGroup\n  }\n\n  constructor(\n    public commonService: PsCommonService,\n    public logger: LoggerService,\n    private navService: PsNavigatorService,\n    private omniPull?: OmniPullService,\n  ) {\n    super();\n  }\n\n  //commented code are for demo purposes till the required services are done\n\n  ngOnInit() {\n    super.init();\n    this.paramList = this.navService.getAllParams() ? this.navService.getAllParams() : null;\n    this.exportOptions.reportParametersList = this.paramList;\n    this.sendOptions.reportParametersList = this.paramList;\n    this.accountStatementListOptions = {\n      isEditable: true,\n      group: this.formGroup\n    };\n    PsCommonSettings.oper_ID = 63;\n    this.loadAccountStatement();\n  }\n\n  //prepare service request data\n  loadAccountStatement(appliedFilters?) {\n    const generalRequestData: any = {\n      commonParametersList: {\n        status: \"A\",\n        accountNumber: this.paramList.accountNumber,\n        additionalRef: this.paramList.additionalRef,\n      },\n      accountCategory: this.paramList.accountTypeCategory,\n      ibanAccNo: this.paramList.ibanAccNo,\n      accGl: this.paramList.accGl,\n      dateFrom: appliedFilters?.repFltfilterFromDate,\n      dateTo: appliedFilters?.repFltfilterToDate,\n      minAmount: appliedFilters?.repFltfromAmount,\n      maxAmount: appliedFilters?.repFlttoAmount,\n      referenceNo: appliedFilters?.repFltReferenceNumber,\n      transactionTypeIndicator: appliedFilters?.repFlttrsTypeInd,\n\n    };\n    this.returnAccountStatement(generalRequestData);\n  }\n\n  //fetching account statement data\n  private async returnAccountStatement(requestData: any) {\n    this.requestWasSent = true;\n    // await this.omniPull.returnTransactionsList({\n    //   commonParametersList: {\n    //     status: \"A\",\n    //   }\n    // },).catch(error => {\n    //   this.logger.error('Error: While fetching account statement  :', error);\n    // });\n\n    // dummy data for demo should be removed\n    const result: any = {\n      gridModel: [\n        {\n          transactionNo: \"2317524\",\n          toAccountAccGl: \"47004000000004259078\",\n          fromAccountCif: \"1000087\",\n          fromAccountAccGl: \"272101\",\n          transactionTypeShortNameEnglish: \"Purchase Jpay*Jumia\",\n          fromAccountCurrency: \"788\",\n          cifShortName: \"FARAJ\",\n          fromAccountAdditionalRef: \"47004000000003180923\",\n          transactionCurrency: \"788\",\n          amount: \"10\",\n          startDate: '22/11/2022',\n          transactionDate: 1665435600000,\n          currencyBriefNameEnglish: \"TND\",\n          transactionType: \"3\",\n          toAccountBranch: \"1004\",\n          statusDescription: \"Approved\",\n          toAccountCif: \"1000087\",\n          cvAmount: \"10\",\n          status: \"P\",\n          description: \"Purchase Jpay*Jumia\",\n          merchantLogo: \"jumia\",\n          merchantName: \"Jumia\",\n          branch: 'Perth'\n        }, {\n          transactionNo: \"2317524\",\n          toAccountAccGl: \"47004000000004259078\",\n          fromAccountCif: \"1000087\",\n          fromAccountAccGl: \"272101\",\n          transactionTypeShortNameEnglish: \"Purchase google youtube music\",\n          fromAccountCurrency: \"788\",\n          cifShortName: \"FARAJ\",\n          fromAccountAdditionalRef: \"47004000000003180923\",\n          transactionCurrency: \"788\",\n          amount: \"10\",\n          startDate: 1665435600000,\n          transactionDate: 1665435600000,\n          currencyBriefNameEnglish: \"TND\",\n          transactionType: \"2\",\n          toAccountBranch: \"1004\",\n          statusDescription: \"Approved\",\n          toAccountCif: \"1000087\",\n          cvAmount: \"10\",\n          status: \"P\",\n          description: \"Purchase google youtube music\",\n          merchantLogo: \"youtube\",\n          merchantName: \"youtube\",\n          branch: 'Sydney'\n        }, {\n          transactionNo: \"2317524\",\n          toAccountAccGl: \"47004000000004259078\",\n          fromAccountCif: \"1000087\",\n          fromAccountAccGl: \"272101\",\n          transactionTypeShortNameEnglish: \"Purchase zara\",\n          fromAccountCurrency: \"788\",\n          cifShortName: \"FARAJ\",\n          fromAccountAdditionalRef: \"47004000000003180923\",\n          transactionCurrency: \"788\",\n          amount: \"10\",\n          startDate: 1665435600000, // demo\n          transactionDate: 1665435600000,\n          currencyBriefNameEnglish: \"TND\",\n          transactionType: \"1\",\n          toAccountBranch: \"1004\",\n          statusDescription: \"Approved\",\n          toAccountCif: \"1000087\",\n          cvAmount: \"10\",\n          status: \"P\",\n          description: \"Purchase zara\",\n          merchantLogo: \"zara\",\n          merchantName: \"zara\",\n          branch: 'Gold Coast'\n        },\n        {\n          transactionNo: \"2317524\",\n          toAccountAccGl: \"47004000000004259078\",\n          fromAccountCif: \"1000087\",\n          fromAccountAccGl: \"272101\",\n          transactionTypeShortNameEnglish: \"Local transfer to Peter John\",\n          fromAccountCurrency: \"788\",\n          cifShortName: \"FARAJ\",\n          fromAccountAdditionalRef: \"47004000000003180923\",\n          transactionCurrency: \"788\",\n          amount: \"10\",\n          valueDate: 1665435600000,\n          transactionDate: 1665435600000,\n          currencyBriefNameEnglish: \"TND\",\n          transactionType: \"4\",\n          toAccountBranch: \"1004\",\n          statusDescription: \"Approved\",\n          toAccountCif: \"1000087\",\n          cvAmount: \"10\",\n          status: \"P\",\n          description: \"Local transfer to Peter John\",\n          chequeNo: \"123456\",\n          payeeName: \"Peter John\",\n          chequeDate: 1665435600000,\n        }, {\n          transactionNo: \"2317524\",\n          toAccountAccGl: \"47004000000004259078\",\n          fromAccountCif: \"1000087\",\n          fromAccountAccGl: \"272101\",\n          transactionTypeShortNameEnglish: \"Purches from TND\",\n          fromAccountCurrency: \"788\",\n          cifShortName: \"FARAJ\",\n          fromAccountAdditionalRef: \"47004000000003180923\",\n          transactionCurrency: \"788\",\n          amount: \"10\",\n          valueDate: 1665435600000,\n          transactionDate: 1665435600000,\n          currencyBriefNameEnglish: \"TND\",\n          transactionType: \"6\",\n          toAccountBranch: \"1004\",\n          statusDescription: \"Approved\",\n          toAccountCif: \"1000087\",\n          cvAmount: \"10\",\n          status: \"P\",\n          description: \"Purches from TND\",\n          chequeNo: \"123456\",\n          payeeName: \"TND\",\n          chequeDate: 1665435600000,\n        }\n      ]\n    }\n    if (result && result.gridModel.length > 0) {\n      this.accountStatementListOptions.listOfOptions = this.populateAccountTransactions(result.gridModel);\n    } else {\n      this.accountStatementListOptions.listOfOptions = [];\n    }\n    this.requestWasSent = false;\n\n  }\n\n  private populateAccountTransactions(transactionslist: ITransactionResponse[]): IAccountStatementDetails[] {\n    const transactions: IAccountStatementDetails[] = [];\n    for (const iterator of transactionslist) {\n      const trans: IAccountStatementDetails = {\n        transactionDate: this.psDatePipe.transform(iterator.transactionDate, 'DD/MM/YYYY').toString(),\n        transactionName: iterator.transactionTypeShortNameEnglish,\n        reference: iterator.soReference,\n        transactionAmount: iterator.amount + ' ' + iterator.currencyBriefNameEnglish,\n        valueDate: this.psDatePipe.transform(iterator.valueDate, 'DD/MM/YYYY').toString(),\n        branch: iterator.bankCifShortNameEng,\n        fromAccount: iterator.fromAccountAdditionalRef ? iterator.fromAccountAdditionalRef : iterator.fromAccountAccGl,\n        fromAccount_lookupKey: iterator.fromAccountAdditionalRef ? iterator.fromAccountAdditionalRef : iterator.fromAccountAccGl,\n        toAccount: iterator.toAccountAdditionalRef ? iterator.toAccountAdditionalRef : iterator.toAccountAccGl,\n        toAccount_lookupKey: iterator.toAccountAdditionalRef ? iterator.toAccountAdditionalRef : iterator.toAccountAccGl,\n        chequeNo: iterator.chequeNo,\n        chequeDate: iterator.chequeDate,\n        payeeName: iterator.payeeName,\n        description: iterator.description,\n        merchantName: iterator.merchantName,\n        merchantLogo: iterator.merchantLogo\n      };\n      //if the transaction related to a merchant check on his logo if it's not returned set default logo from admin\n      if (iterator.merchantName) {\n        if (!iterator.merchantLogo) {\n          this.omniPull.getParamValOf('DefaultLogo').then(res => {\n            trans.merchantLogo = res.gridModel.defaultLogo;\n          }).catch(err => this.logger.log(err));\n        }\n      }\n      //leave only reqired data for each transaction type\n      if (iterator.transactionType == \"1\") {\n        delete trans.toAccount;\n        delete trans.toAccount_lookupKey;\n        delete trans.chequeNo;\n        delete trans.chequeDate;\n        delete trans.payeeName;\n\n      }\n      else if (iterator.transactionType == \"2\") {\n        delete trans.fromAccount;\n        delete trans.fromAccount_lookupKey;\n        delete trans.chequeNo;\n        delete trans.chequeDate;\n        delete trans.payeeName;\n\n      }\n      else if (iterator.transactionType == \"3\") {\n        delete trans.chequeNo;\n        delete trans.chequeDate;\n        delete trans.payeeName;\n\n      }\n      else if (iterator.transactionType == \"4\") {\n        delete trans.toAccount;\n        delete trans.toAccount_lookupKey;\n\n      }\n      else if (iterator.transactionType == \"5\") {\n        delete trans.fromAccount;\n        delete trans.fromAccount_lookupKey;\n\n      }\n\n      transactions.push(trans);\n\n\n    }\n    return transactions;\n  }\n\n  filterCriteria(filterData) {\n    this.sendOptions.fromDate = filterData.repFltfilterFromDate\n    this.sendOptions.todate = filterData.repFltfilterToDate\n    this.loadAccountStatement(filterData)\n  }\n\n}\n\n\n"]}