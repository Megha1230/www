(window.webpackJsonp=window.webpackJsonp||[]).push([[40,339,340,341,342,343,344,345,346,347,348,349],{BcCD:function(t,e,o){"use strict";o.d(e,"a",function(){return d});var s=o("zngb"),i=o("JpVU"),n=o("DFXC"),r=o("qEF5"),a=o("Q0Ba"),c=o("ZyuK"),p=o("r40+"),l=o("fXoL");let d=(()=>{class t extends i.a{constructor(t,e,o){super(t,e,o),this.commonProv=t,this.dateOptions={},this.omniPull=r.a.injectionHandler(c.a)}ngOnInit(){this.commonProv.copyObject(this.dateOptions,this.options,!1);const t=this.omniPull.omniCommon.session.getValueOf(s.a.preLoginResponse).parameters;this.dateOptions.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat.parameterVal:"DD/MM/YYYY",this.dateOptions.pickerFormat=this.dateOptions.displayFormat}ngOnChanges(){this.options&&this.options.min&&(this.dateOptions.min=this.options.min),this.options&&this.options.max&&(this.dateOptions.max=this.options.max)}dateChanged(t){this.onPsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(a.a),l.Rb(n.a),l.Rb(p.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ps-date-day-month-year"]],inputs:{options:"options"},features:[l.Cb,l.Db],decls:1,vars:2,consts:[[1,"ps-day-month-year",3,"options","id","onPsChange","onPsInit"]],template:function(t,e){1&t&&(l.Xb(0,"ps-keyin-date",0),l.fc("onPsChange",function(t){return e.dateChanged(t)})("onPsInit",function(t){return e.onInit(t)}),l.Wb()),2&t&&l.pc("options",e.dateOptions)("id",e.id)},directives:[i.a],styles:[""]}),t})()},EZLY:function(t,e,o){"use strict";o.d(e,"a",function(){return l});var s=o("fXoL"),i=o("uqA0"),n=o("xV2m"),r=o("KVmc");const a=["templateList"],c=function(){return{labelKey:"no_matching_found_key",translate:!0}},p=["*"];let l=(()=>{class t extends i.a{constructor(){super(),this.searchOptions={contentReference:"container-lookup-option",selectors:"ion-label,span:not(:has(ps-label,ion-label),.highlight)",actionType:"filter"}}ngOnInit(){this.init()}init(){super.init()}ngAfterViewInit(){this.searchOptions.templateRef=this.templateList}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Lb({type:t,selectors:[["ps-template-list"]],viewQuery:function(t,e){if(1&t&&s.Wc(a,1,s.m),2&t){let t;s.Bc(t=s.gc())&&(e.templateList=t.first)}},features:[s.Cb],ngContentSelectors:p,decls:7,vars:3,consts:[[1,"ps-template-list-searchbar-wrapper"],["id","search_in_template_list",3,"options"],[1,"ps-template-list-container"],["templateList",""],[1,"no-matching-found",3,"options"],["id","ps-template-list-main-content"]],template:function(t,e){1&t&&(s.oc(),s.Xb(0,"div",0),s.Sb(1,"ps-input-search-html",1),s.Wb(),s.Xb(2,"div",2,3),s.Sb(4,"ps-label",4),s.Xb(5,"div",5),s.nc(6),s.Wb(),s.Wb()),2&t&&(s.Fb(1),s.pc("options",e.searchOptions),s.Fb(3),s.pc("options",s.rc(2,c)))},directives:[n.a,r.a],encapsulation:2}),t})()},HAMJ:function(t,e,o){"use strict";o.d(e,"a",function(){return L});var s=o("zngb"),i=o("qEF5"),n=o("lE2x"),r=o("QZhd"),a=o("uqA0"),c=o("fXoL"),p=o("ofXK"),l=o("GmoW"),d=o("ilDp"),h=o("+U2o"),u=o("Mapq");function m(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",5),c.Xb(1,"ps-action-icon",6),c.fc("onClick",function(){return c.Fc(t),c.ic().onBackIconClicked()}),c.Wb(),c.Xb(2,"ps-action-icon",7),c.fc("onClick",function(){return c.Fc(t),c.ic().openPage()}),c.Wb(),c.Wb()}if(2&t){const t=c.ic();c.Fb(1),c.pc("options",t.arrowIconOptios),c.Fb(1),c.pc("options",t.homeOptions)}}function b(t,e){if(1&t&&c.Sb(0,"ps-action-icon",11),2&t){const t=c.ic(2);c.pc("options",t.headerIconOptions)}}function f(t,e){if(1&t&&(c.Xb(0,"div",8),c.Pc(1,b,1,1,"ps-action-icon",9),c.Sb(2,"ps-label-header",10),c.Wb()),2&t){const t=c.ic();c.Fb(1),c.pc("ngIf",t.headerIconOptions.iconName),c.Fb(1),c.pc("options",t.optionsHeader)}}function g(t,e){if(1&t){const t=c.Yb();c.Xb(0,"ps-action-icon",16),c.fc("click",function(){return c.Fc(t),c.ic(2).showLess()}),c.Wb()}if(2&t){const t=c.ic(2);c.pc("options",t.collapseOptions)}}function w(t,e){if(1&t&&(c.Xb(0,"div",17),c.Sb(1,"ps-complex-menu",10),c.Wb()),2&t){const t=c.ic(2);c.Fb(1),c.pc("options",t.quickMenuHeader)}}function D(t,e){if(1&t){const t=c.Yb();c.Xb(0,"ps-action-icon",18),c.fc("click",function(){return c.Fc(t),c.ic(2).showMore()}),c.Wb()}if(2&t){const t=c.ic(2);c.pc("options",t.expandOptions)}}const O=function(t){return{collapsed:t}};function P(t,e){if(1&t&&(c.Xb(0,"div",12),c.Pc(1,g,1,1,"ps-action-icon",13),c.Pc(2,w,2,1,"div",14),c.Pc(3,D,1,1,"ps-action-icon",15),c.Wb()),2&t){const t=c.ic();c.pc("ngClass",c.sc(4,O,t.collapsed)),c.Fb(1),c.pc("ngIf",!t.collapsed),c.Fb(1),c.pc("ngIf",!t.collapsed),c.Fb(1),c.pc("ngIf",t.collapsed)}}const v=[[["","saveAsDraftButton",""]],[["","extraHeader",""]],"*",[["","psFooter",""]]],I=function(t){return{"center-header":t}},C=["[saveAsDraftButton]","[extraHeader]","*","[psFooter]"];let L=(()=>{class t extends a.a{constructor(){super(),this.collapseOptions={iconName:"arrow-down",labelOptions:{labelKey:"show_more_key"}},this.expandOptions={iconName:"arrow-up",labelOptions:{labelKey:"show_less_key"}},this.helpLabelOptions={labelKey:"help_key"},this.menuIcon={iconName:"menu"},this.closeIcon={iconName:"close"},this.arrowIconOptios={iconName:"arrow-back",allowCust:!0},this.homeOptions={iconName:"lock"},this.optionsHeader={},this.headerIconOptions={},this.quickMenuHeader={quicklinkMenu:!0},this.collapsed=!1,this.operId="operId_"+r.a.oper_ID,this.iconShouldBePresent=!1,this.iconShouldBeChecked=!1,this.hasSubscribed=!1}ngOnInit(){var t;this.landingType=n.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_UI_TYPE,(null===(t=this.screenOptions)||void 0===t?void 0:t.quickMenuCollapsed)&&(this.collapsed=!0),this.isMobile=this.commonProv.isMobileLayout(),super.init(),this.navService.isUserLoggedIn&&(this.homeOptions.iconName="menu"),this.checkViewSubscriptionC=this.commonProv.getCheckViewByOper(r.a.oper_ID>0?r.a.oper_ID:s.a.DEFAULT_FALLBACK_OPER).subscribe(t=>{if(t){if(this.activePageSubscription&&this.activePageSubscription.unsubscribe(),t&&t.didEnter){this.hasSubscribed=!0;const t=this.navService.activePage;t&&this.updateHeader(t)}t&&t.willLeave&&this.hasSubscribed&&this.checkViewSubscriptionC&&this.checkViewSubscriptionC.unsubscribe()}else this.activePageSubscription=this.commonProv.activePage.subscribe(t=>{t?setTimeout(()=>{this.updateHeader(t)},500):this.activePageSubscription&&this.activePageSubscription.unsubscribe()})}),(this.commonProv.isWebLayout()||4==this.landingType)&&this.navService.isUserLoggedIn?this.iconShouldBeChecked=!0:this.iconShouldBePresent=!0}updateHeader(t){this.optionsHeader.labelKey="",this.headerIconOptions.iconName=null,this.optionsHeader.labelKey=t.title,this.headerIconOptions.iconName=t.icon}openPage(){this.navService.navigateToMain()}onBackIconClicked(){this.navService.onCancelClicked().then(t=>{t&&this.screenOptions.nextPageOptions&&this.navService.openPage(this.screenOptions.nextPageOptions)})}ngOnDestroy(){this.checkViewSubscriptionC&&this.checkViewSubscriptionC.unsubscribe()}get ifHomePage(){const t=n.a.CLIENT_ASSETS_CONFIG.UI_CONFIGURATION.LANDING_PAGE_OPER;return this.iconShouldBeChecked=!1,this.iconShouldBePresent=!i.a.isNotNull(t)||t!==r.a.oper_ID,this.iconShouldBePresent}showMore(){this.collapsed=!1}showLess(){this.collapsed=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["ps-template-screen"]],hostVars:2,hostBindings:function(t,e){2&t&&c.Hb(e.operId)},inputs:{screenOptions:"screenOptions"},features:[c.Cb],ngContentSelectors:C,decls:11,vars:6,consts:[["psHeader",""],[1,"widget-style",3,"ngClass"],["class","widget-menu-icon widget-menu-icon-back",4,"ngIf"],["class","widget-header-title",4,"ngIf"],["class","common-quick-menu",3,"ngClass",4,"ngIf"],[1,"widget-menu-icon","widget-menu-icon-back"],["id","back_icon",1,"menu-icon","arrow_icon",3,"options","onClick"],[1,"menu-icon","home_icon",3,"options","onClick"],[1,"widget-header-title"],["class","menu-icon widget-header-icon",3,"options",4,"ngIf"],[3,"options"],[1,"menu-icon","widget-header-icon",3,"options"],[1,"common-quick-menu",3,"ngClass"],["class","material-icons show-more-less-icon expanded home-quick-links-expanded",3,"options","click",4,"ngIf"],["class","home-quick-links",4,"ngIf"],["class","material-icons show-more-less-icon collapsed home-quick-links-collapsed",3,"options","click",4,"ngIf"],[1,"material-icons","show-more-less-icon","expanded","home-quick-links-expanded",3,"options","click"],[1,"home-quick-links"],[1,"material-icons","show-more-less-icon","collapsed","home-quick-links-collapsed",3,"options","click"]],template:function(t,e){1&t&&(c.oc(v),c.Xb(0,"ps-template-base"),c.Vb(1,0),c.Xb(2,"div",1),c.Pc(3,m,3,2,"div",2),c.Pc(4,f,3,2,"div",3),c.nc(5),c.Wb(),c.nc(6,1),c.Ub(),c.Xb(7,"ps-container-form"),c.nc(8,2),c.Wb(),c.nc(9,3,["psFooter",""]),c.Pc(10,P,4,6,"div",4),c.Wb()),2&t&&(c.Fb(2),c.pc("ngClass",c.sc(4,I,!e.iconShouldBePresent)),c.Fb(1),c.pc("ngIf",e.iconShouldBeChecked&&!e.ifHomePage||e.iconShouldBePresent),c.Fb(1),c.pc("ngIf",e.optionsHeader.labelKey),c.Fb(6),c.pc("ngIf",e.navService.isUserLoggedIn&&e.showQuickMenu))},directives:[a.a,p.m,p.o,l.a,d.a,h.a,u.a],styles:[""]}),t})()},Kk3n:function(t,e,o){"use strict";o.d(e,"a",function(){return h});var s=o("mrSG"),i=o("ZyuK"),n=o("JpVU"),r=o("DFXC"),a=o("zngb"),c=o("Q0Ba"),p=o("r40+"),l=o("fXoL"),d=o("BcCD");let h=(()=>{class t extends n.a{constructor(t,e,o,s){super(t,e,s),this.commonC=t,this.loggerC=e,this.omniPull=o,this.filterFromDate={},this.filterToDate={}}ngOnInit(){return Object(s.b)(this,void 0,void 0,function*(){this.filterFromDate={labelKey:"from_date_key",fcName:this.options.fromDate.fcName,group:this.options.fromDate.group,placeHolder:this.options.fromDate.placeHolder,overrideDefaultCust:this.options.fromDate.overrideDefaultCust},this.filterToDate={labelKey:"to_date_key",fcName:this.options.toDate.fcName,group:this.options.toDate.group,placeHolder:this.options.toDate.placeHolder,overrideDefaultCust:this.options.toDate.overrideDefaultCust};const t=yield this.omniPull.getParamValOf("DefaultDateFormat").catch(t=>this.logger.log(t));t&&(this.filterFromDate.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat:a.a.PREV_DATE_FORMAT,this.filterToDate.displayFormat=t.DefaultDateFormat?t.DefaultDateFormat:a.a.PREV_DATE_FORMAT)})}fromDateChange(t){this.filterToDate.min=t.newValue,this.filterToDate=Object.assign({},this.filterToDate)}toDateChange(t){this.filterFromDate.max=t.newValue,this.filterFromDate=Object.assign({},this.filterFromDate)}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(c.a),l.Rb(r.a),l.Rb(i.a),l.Rb(p.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ps-complex-date-filter"]],inputs:{options:"options"},features:[l.Cb],decls:2,vars:4,consts:[[3,"options","id","onPsChange"]],template:function(t,e){1&t&&(l.Xb(0,"ps-date-day-month-year",0),l.fc("onPsChange",function(t){return e.fromDateChange(t)}),l.Wb(),l.Xb(1,"ps-date-day-month-year",0),l.fc("onPsChange",function(t){return e.toDateChange(t)}),l.Wb()),2&t&&(l.pc("options",e.filterFromDate)("id",e.id+"_from_date"),l.Fb(1),l.pc("options",e.filterToDate)("id",e.id+"_to_date"))},directives:[d.a],styles:[""]}),t})()},Sx1r:function(t,e,o){"use strict";o.d(e,"a",function(){return P});var s=o("mrSG"),i=o("fXoL"),n=o("ZF3V"),r=o("DFXC"),a=o("zngb"),c=o("Q0Ba"),p=o("TEn/"),l=o("Isd1"),d=o("ofXK"),h=o("KVmc"),u=o("ilDp"),m=o("qNfM"),b=o("BqtM");function f(t,e){if(1&t){const t=i.Yb();i.Xb(0,"div",8),i.Xb(1,"ps-action-icon",9),i.fc("onClick",function(){return i.Fc(t),i.ic(2).onBackIconClicked()}),i.Wb(),i.Wb()}if(2&t){const t=i.ic(2);i.Fb(1),i.pc("options",t.backIconOptions)}}const g=function(t,e){return[t,e]};function w(t,e){if(1&t){const t=i.Yb();i.Vb(0),i.Xb(1,"ps-select-dropdown-widget",10),i.fc("onPsChange",function(e){return i.Fc(t),i.ic(2).onItemSelected(e)}),i.Wb(),i.Ub()}if(2&t){const t=e.$implicit,o=e.index;i.Fb(1),i.pc("options",t)("ngClass",i.tc(2,g,t&&t.psClass?t.psClass:"","level-"+o))}}function D(t,e){if(1&t&&(i.Vb(0),i.Xb(1,"div",3),i.Pc(2,f,2,1,"div",4),i.Xb(3,"div",5),i.Sb(4,"ps-label",6),i.Wb(),i.Wb(),i.Pc(5,w,2,5,"ng-container",7),i.Ub()),2&t){const t=i.ic();i.Fb(2),i.pc("ngIf",t.showIcon),i.Fb(2),i.pc("options",t.headerLabelOptions),i.Fb(1),i.pc("ngForOf",t.options.dropdowns)}}function O(t,e){if(1&t&&(i.Xb(0,"p",11),i.Rc(1),i.jc(2,"translate"),i.Wb()),2&t){const t=i.ic();i.Fb(1),i.Sc(i.kc(2,1,t.selectionErrorMessage))}}let P=(()=>{class t extends n.a{constructor(t,e,o){super(t,e),this.commonProv=t,this.loggerP=e,this.modalController=o,this.onSecondValueChange=new i.o,this.numberOfDropdowns=0,this.currentDropdownPosition=0,this.selectedItemsList=[],this.selectReportsError=!1,this.selectionErrorMessage="no_selected_reports_key",this.headerLabelOptions={},this.backIconOptions={iconName:"arrow-back"},this.backClicked=!1,this.showIcon=!1,this.isPreviouslySelected=!1}ngOnInit(){this.options.dropdowns&&this.options.dropdowns.length>0&&(this.numberOfDropdowns=this.options.dropdowns.length,this.options.dropdowns[0].renderDropdown=!0,this.currentDropdownPosition=1,this.headerLabelOptions.labelKey=this.options.dropdowns[0].labelKey)}onItemSelected(t){if(this.options.requestObject&&this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName]&&t.itemValue===this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName].itemValue&&this.options.dropdowns[this.currentDropdownPosition]&&this.options.dropdowns[this.currentDropdownPosition].listOfOptions&&this.options.dropdowns[this.currentDropdownPosition].listOfOptions.length>0)this.options.dropdowns.length>this.currentDropdownPosition&&(this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",this.options.dropdowns[this.currentDropdownPosition].psClass="show-dropdown",this.currentDropdownPosition++,this.showIcon=!0);else if(this.options.dropdowns.length>1||1==this.options.dropdowns.length&&this.options.dropdowns[0].asyncURL)this.isPreviouslySelected=!(!this.options.requestObject[this.options.dropdowns[this.currentDropdownPosition-1].fcName]||!this.options.requestObject[a.a.HEADER_LABEL]),this.commonProv.setValInsideNestedObj(this.options.dropdowns[this.currentDropdownPosition-1].fcName,t,this.options.requestObject),this.options.dropdowns.length>this.currentDropdownPosition?(this.backClicked&&(this.commonProv.setValInsideNestedObj(this.options.dropdowns[this.currentDropdownPosition].fcName,null,this.options.requestObject),this.options.dropdowns[this.currentDropdownPosition].renderDropdown=!1,this.options.dropdowns[this.currentDropdownPosition]={group:this.options.dropdowns[this.currentDropdownPosition].group,fcName:this.options.dropdowns[this.currentDropdownPosition].fcName,labelKey:this.options.dropdowns[this.currentDropdownPosition].labelKey,asyncURL:this.options.dropdowns[this.currentDropdownPosition].asyncURL,mapResponseProperties:this.options.dropdowns[this.currentDropdownPosition].mapResponseProperties,enablePagination:this.options.dropdowns[this.currentDropdownPosition].enablePagination,listOfOptions:[],componentInstance:this.options.dropdowns[this.currentDropdownPosition].componentInstance},this.headerLabelOptions.labelKey=this.options.dropdowns[this.currentDropdownPosition-1].labelKey),this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj?this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj.commonParametersList=t.selectedObj:this.options.dropdowns[this.currentDropdownPosition].serviceRequestObj={commonParametersList:t.selectedObj},this.options.dropdowns[this.currentDropdownPosition].renderDropdown=!0,this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",-1!==this.headerLabelOptions.labelKey.indexOf("-")?(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,this.headerLabelOptions.labelKey.lastIndexOf("-")+1),this.headerLabelOptions.labelKey.replace(this.commonProv.translate(this.options.dropdowns[this.currentDropdownPosition-1].fcName),t.description),this.headerLabelOptions.labelKey.endsWith("-")&&(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,-1)),this.headerLabelOptions.labelKey+=" - "+this.options.dropdowns[this.currentDropdownPosition].fcName):(this.headerLabelOptions.labelKey=t.description,this.headerLabelOptions.labelKey+=" - "+this.options.dropdowns[this.currentDropdownPosition].fcName),this.showIcon=!0,this.currentDropdownPosition++,this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].reset(),this.options.dropdowns[this.currentDropdownPosition-1].componentInstance.callService()):this.options.dropdowns.length===this.currentDropdownPosition&&(this.headerLabelOptions.labelKey=this.headerLabelOptions.labelKey.slice(0,this.isPreviouslySelected?this.headerLabelOptions.labelKey.indexOf("-")+1:this.headerLabelOptions.labelKey.lastIndexOf("-")+1),this.headerLabelOptions.labelKey+=t.description,this.options.requestObject[a.a.HEADER_LABEL]=this.headerLabelOptions.labelKey,this.common.presentLoading(),setTimeout(()=>{this.onSecondValueChange.emit(this.options.requestObject),this.common.dismissLoading()},500),this.showDescriptionModal(t));else if(1==this.options.dropdowns.length&&!this.options.dropdowns[0].asyncURL){let e=!1;this.selectReportsError=!1;const o=this.options.dropdowns[0].fcName;this.selectedItemsList.forEach((o,s)=>{o.itemValue==t.itemValue&&(e=!0,o.selected=!1,this.selectedItemsList.splice(s,1))}),e||this.selectedItemsList.push(t),0==this.selectedItemsList.length&&(this.selectReportsError=!0,this.options.group.controls[o].setValue([]),this.options.group.get(o).setValue([])),this.selectedItemsList.forEach(t=>{t.selected=!0}),this.options.group.controls[o].setValue(this.selectedItemsList),this.options.group.get(o).setValue(this.selectedItemsList),this.commonProv.setValInsideNestedObj(this.options.dropdowns[0].fcName,this.selectedItemsList,this.options.requestObject)}}showDescriptionModal(t){return Object(s.b)(this,void 0,void 0,function*(){if(this.options.detailsObject){const e=this.options.detailsObject.detailsModalId,o=yield this.modalController.create({component:this.options.detailsObject.detailsModal,componentProps:{data:Object.assign({},t.selectedObj),actions:this.options.detailsObject.detailsActionsList},cssClass:this.options.detailsObject.detailsModalClass,animated:!1,id:e});yield o.present()}})}onBackIconClicked(){this.backClicked=!0,this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].invalid&&this.options.group.controls[this.options.dropdowns[this.currentDropdownPosition-1].fcName].reset(),this.options.dropdowns[this.currentDropdownPosition-1].psClass="hide-dropdown",this.options.dropdowns[this.currentDropdownPosition-2].psClass="show-dropdown",this.currentDropdownPosition--,1===this.currentDropdownPosition&&(this.showIcon=!1)}resetSelections(){const t=this.options.dropdowns[0].fcName;this.selectedItemsList.forEach(t=>{t.selected=!1}),this.selectedItemsList=[],this.options.group.controls[t].setValue([]),this.options.group.get(t).setValue(this.selectedItemsList),this.commonProv.setValInsideNestedObj(this.options.dropdowns[0].fcName,this.selectedItemsList,this.options.requestObject),this.selectReportsError=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(c.a),i.Rb(r.a),i.Rb(p.N))},t.\u0275cmp=i.Lb({type:t,selectors:[["ps-complex-widget-dropdowns"]],inputs:{options:"options"},outputs:{onSecondValueChange:"onSecondValueChange"},features:[i.Cb],decls:3,vars:2,consts:[[1,"ps-complex-widget-dropdowns"],[4,"ngIf"],["class","select-documents-validation-message",4,"ngIf"],[1,"ps-complex-widget-dropdowns_header"],["class","ps-complex-widget-dropdowns_header-back",4,"ngIf"],[1,"ps-complex-widget-dropdowns_header-label"],[3,"options"],[4,"ngFor","ngForOf"],[1,"ps-complex-widget-dropdowns_header-back"],[3,"options","onClick"],[3,"options","ngClass","onPsChange"],[1,"select-documents-validation-message"]],template:function(t,e){1&t&&(i.Xb(0,"ps-container-complex",0),i.Pc(1,D,6,3,"ng-container",1),i.Pc(2,O,3,3,"p",2),i.Wb()),2&t&&(i.Fb(1),i.pc("ngIf",(null==e.options?null:e.options.dropdowns.length)>0),i.Fb(1),i.pc("ngIf",e.selectReportsError))},directives:[l.a,d.o,h.a,d.n,u.a,m.a,d.m],pipes:[b.a],encapsulation:2}),t})()},gKqT:function(t,e,o){"use strict";o.r(e),o.d(e,"OmniBasePage",function(){return d});var s=o("oS+F"),i=o("zngb"),n=o("QZhd"),r=o("woXy"),a=o("qEF5"),c=o("Q0Ba"),p=o("lE2x"),l=o("fXoL");let d=(()=>{class t{constructor(){this.isPageDisabled=!1,this.commonProv=a.a.injectionHandler(c.a),this.navigationServices=a.a.injectionHandler(r.a)}init(){this.currentOperID=n.a.oper_ID,this.customizationMap=this.commonProv.returnOperCustomization();const t=this.navigationServices.getAllParams(),e={};t&&!0===t.readOnlypage?(e.IS_READONLY=1,this.customizationMap&&this.customizationMap.set(i.a.FORM_READONLY,e)):this.customizationMap&&(e.IS_READONLY=0,this.customizationMap.set(i.a.FORM_READONLY,e)),this.screenTranslationOperIds=p.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER?p.a.MAIN_CONFIG.SCREEN_TRANSLATION_OPER:[],this.screenTranslationOperIds.length>0&&this.screenTranslationOperIds.includes(this.currentOperID)&&this.getScreenTranslations(this.currentOperID)}ngOnInit(){this.init()}ionViewDidEnter(){this.viewDidEnter()}ionViewWillLeave(){this.viewWillLeave()}ionViewWillEnter(){this.viewWillEnter()}viewWillEnter(){}disableForm(t){if(void 0!==t&&this.customizationMap){const e=this.customizationMap.get(i.a.FORM_READONLY);e&&1===e.IS_READONLY&&"DISABLED"!=t.status&&(t.disable(),Object.keys(t.controls).forEach(t=>{this.commonProv.applyDynScreenDisplay(i.a.ACTION_TYPE_READONLY,[t],1)}))}}viewDidEnter(){this.commonProv.checkViewBS.next({value:!0,page:this,didEnter:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,didEnter:!0}),this.commonProv.dismissLoading(),this.disableForm(this.baseFormGroup),s.a.getAllSessionFcVars(this.baseFormGroup),this.commonProv.setFormGroupByOper(this.baseFormGroup)}viewWillLeave(){this.commonProv.checkViewBS.next({value:!0,page:this,willLeave:!0}),this.commonProv.setCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID),this.commonProv.emitCheckViewByOper(this.currentOperID?this.currentOperID:n.a.oper_ID,{value:!0,page:this,willLeave:!0})}ngAfterViewChecked(){this.isPageDisabled||setTimeout(()=>{this.disableForm(this.baseFormGroup),this.isPageDisabled=!0},300)}getScreenTranslations(t){const e=t||2222,o=n.a.activeLanguge?n.a.activeLanguge:"EN";e&&o&&this.commonProv.language.getOperTranslation(o,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Lb({type:t,selectors:[["app-omni-base"]],hostVars:2,hostBindings:function(t,e){2&t&&l.Hb(e.psClass)},decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()},kAgI:function(t,e,o){"use strict";o.r(e),o.d(e,"DocumentsPage",function(){return R});var s=o("3Pt+"),i=o("wd/R"),n=o.n(i),r=o("Sx1r"),a=o("0CJq"),c=o("ZyuK"),p=o("BygU"),l=o("zngb"),d=o("DUM0"),h=o("gKqT"),u=o("qEF5"),m=o("fXoL"),b=o("HAMJ"),f=o("+f2X"),g=o("Kk3n"),w=o("CRGX"),D=o("LYvI"),O=o("EZLY"),P=o("ofXK"),v=o("Wp6s"),I=o("5YYs"),C=o("BqtM");function L(t,e){if(1&t&&(m.Xb(0,"mat-card-subtitle",8),m.Rc(1),m.jc(2,"translate"),m.Wb()),2&t){const t=m.ic(3);m.Fb(1),m.Sc(m.kc(2,1,t.noDataMessage))}}function y(t,e){if(1&t){const t=m.Yb();m.Xb(0,"mat-card-content",9),m.Xb(1,"ps-action-image",10),m.fc("click",function(){m.Fc(t);const e=m.ic().$implicit;return m.ic(2).export(1,e)}),m.Wb(),m.Xb(2,"ps-action-image",10),m.fc("click",function(){m.Fc(t);const e=m.ic().$implicit;return m.ic(2).export(2,e)}),m.Wb(),m.Wb()}if(2&t){const t=m.ic(3);m.Fb(1),m.pc("options",t.pdfOptions),m.Fb(1),m.pc("options",t.excelOptions)}}function F(t,e){if(1&t&&(m.Xb(0,"div"),m.Xb(1,"mat-card",4),m.Xb(2,"mat-card-header",5),m.Xb(3,"mat-card-title"),m.Rc(4),m.jc(5,"translate"),m.Wb(),m.Pc(6,L,3,3,"mat-card-subtitle",6),m.Wb(),m.Pc(7,y,3,2,"mat-card-content",7),m.Wb(),m.Wb()),2&t){const t=e.$implicit;m.Fb(4),m.Sc(m.kc(5,3,t.documentName)),m.Fb(2),m.pc("ngIf",!t.showExports),m.Fb(1),m.pc("ngIf",t.showExports)}}function k(t,e){if(1&t&&(m.Xb(0,"ps-template-list",2),m.Pc(1,F,8,5,"div",3),m.Wb()),2&t){const t=m.ic();m.Fb(1),m.pc("ngForOf",t.options.itemList)}}function _(t,e){if(1&t&&(m.Xb(0,"div"),m.Xb(1,"p",11),m.Rc(2),m.jc(3,"translate"),m.Wb(),m.Wb()),2&t){const t=m.ic();m.Fb(2),m.Sc(m.kc(3,1,t.noFilteredReportsMessage))}}let S=(()=>{class t extends O.a{constructor(t,e){super(),this.omniCommonService=t,this.cdRef=e,this.noDataMessage="no_data_found_key",this.noFilteredReportsMessage="no_filtered_details_found_key",this.pdfOptions={imageName:"pdf.png",imagePath:"assets/branding/default_theme/imgs/"},this.excelOptions={imageName:"excel.png",imagePath:"assets/branding/default_theme/imgs/"}}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewChecked(){this.cdRef.detectChanges()}export(t,e){let o=this.options.itemCard;o.repFltfilterFromDate=this.options.fromDate,o.repFltfilterToDate=this.options.toDate,this.omniCommonService.exportData(1==t?d.f.PDF:d.f.EXCEL,o,e.operId)}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(a.a),m.Rb(m.i))},t.\u0275cmp=m.Lb({type:t,selectors:[["ps-documents-list"]],inputs:{options:"options"},features:[m.Cb],decls:2,vars:2,consts:[["class","documents-reports-list",4,"ngIf"],[4,"ngIf"],[1,"documents-reports-list"],[4,"ngFor","ngForOf"],[1,"matCard"],[1,"document-info"],["class","doc-validation-message",4,"ngIf"],["class","document-exports",4,"ngIf"],[1,"doc-validation-message"],[1,"document-exports"],[1,"export-action",3,"options","click"],[1,"noFiltered"]],template:function(t,e){1&t&&(m.Pc(0,k,2,1,"ps-template-list",0),m.Pc(1,_,4,3,"div",1)),2&t&&(m.pc("ngIf",(null==e.options||null==e.options.itemList?null:e.options.itemList.length)>0),m.Fb(1),m.pc("ngIf",0==(null==e.options||null==e.options.itemList?null:e.options.itemList.length)))},directives:[P.o,O.a,P.n,v.a,v.d,v.g,v.f,v.b,I.a],pipes:[C.a],styles:[""]}),t})();const N=["productDetails"],E=["documentsDropdownWidget"];let R=(()=>{class t extends h.OmniBasePage{constructor(t,e){super(),this.omniPull=t,this.omniCommonService=e,this.formGroup=new s.f({}),this.documentsPageData={},this.panelOptions1={isExpandable:!0,iconName:"document",expanded:!0},this.panelOptions2={isExpandable:!0,labelKey:"documents_filter_key",iconName:"document",expanded:!0},this.panelOptions3={isExpandable:!0,labelKey:"documents_key",iconName:"document",expanded:!0},this.filterDate={},this.resetOptions={labelKey:"reset_key",group:this.formGroup},this.filterOptions={labelKey:"filter_key",group:this.formGroup},this.widgetDropdownsOptions={group:this.formGroup,requestObject:this.documentsPageData,dropdowns:[{group:this.formGroup,fcName:"documentsDropdown",enablePagination:!1,requestObject:this.documentsPageData}]},this.documentListOptions={itemList:[]}}ngOnInit(){this.baseFormGroup=this.formGroup;const t=this.omniPull.omniCommon.session.getValueOf(l.a.preLoginResponse).parameters,e=t.DefaultDateFormat?t.DefaultDateFormat.parameterVal:"DD/MM/YYYY";this.filterDate={fromDate:{group:this.formGroup,fcName:"fromDate",displayFormat:e,placeHolder:"from_date_key"},toDate:{group:this.formGroup,fcName:"toDate",displayFormat:e,placeHolder:"to_date_key"}},this.lookup.showDocuments=!1,this.cardOptions=this.navigationServices.getParamKey("options"),this.cardOptions.isEditable=!1,this.cardOptions.actionDetailsOptions=null,this.cardOptions.listOfStatementOptions=null,this.itemCard=this.navigationServices.getParamKey("itemCard");let o=this.navigationServices.getParamKey("fromOperName"),s=o;s.startsWith("My")&&(s=s.replace("My ","")),s=s.replace(" Documents",""),o.startsWith("My")&&s.endsWith("s")&&(s=s.replace("s","")),this.panelOptions1.labelKey=s+" Details",this.parentDocuments=this.getParentDocumentsList()}ionViewDidEnter(){super.ionViewDidEnter(),this.fromDateCtrlFormat=this.formGroup.controls[this.filterDate.fromDate.fcName][l.a.CONTROLLER_DATE_FORMAT],this.toDateCtrlFormat=this.formGroup.controls[this.filterDate.toDate.fcName][l.a.CONTROLLER_DATE_FORMAT]}resetFilter(){this.documentsComplexWidget.resetSelections(),this.formGroup.get(this.filterDate.fromDate.fcName).setValue(""),this.formGroup.get(this.filterDate.toDate.fcName).setValue(""),this.formGroup.controls[this.filterDate.fromDate.fcName].markAsTouched(),this.formGroup.controls[this.filterDate.toDate.fcName].markAsTouched()}getParentDocumentsList(){const t=this.navigationServices.getParamKey("fromOper"),e=this.omniCommonService.getParentDocumentsList(t);this.widgetDropdownsOptions.dropdowns[0].listOfOptions=e}filterDocuments(){const t=this.documentsComplexWidget.selectedItemsList,e=n()(this.formGroup.get(this.filterDate.fromDate.fcName).value).format(this.fromDateCtrlFormat),o=n()(this.formGroup.get(this.filterDate.toDate.fcName).value).format(this.toDateCtrlFormat);if(this.formGroup.valid){if(t.length>0){this.documentListOptions.fromDate=e,this.documentListOptions.toDate=o;const s=[];t.forEach(t=>{s.push(t.itemValue)});const i={reportType:l.a.REPORT_TYPE,reportFormat:d.f.HTML,reportParametersList:{operIds:s,fromDate:e,toDate:o}};this.commonProv.presentLoading(),this.omniPull.returnFilteredDocuments(i).then(e=>{if(e&&e.gridModel&&e.gridModel.length>0){const t=[];e.gridModel.forEach(e=>{t.push({documentName:e.operName,operId:e.operChildId,showExports:e.hasData})}),this.documentListOptions.itemList=t,this.documentListOptions.itemCard=this.itemCard}else 0==t.length&&(this.documentsComplexWidget.selectReportsError=!0),u.a.presentInfoAlert(this.commonProv.translate("no_data_found_key"))}).catch(t=>this.commonProv.logger.log(t)).finally(()=>{this.commonProv.dismissLoading()})}}else for(const s of Object.keys(this.formGroup.controls))this.formGroup.controls[s].errors&&(this.formGroup.get(s).setValue(""),this.formGroup.controls[s].markAsTouched())}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(c.a),m.Rb(a.a))},t.\u0275cmp=m.Lb({type:t,selectors:[["documents"]],viewQuery:function(t,e){if(1&t&&(m.Wc(N,3),m.Wc(E,3)),2&t){let t;m.Bc(t=m.gc())&&(e.lookup=t.first),m.Bc(t=m.gc())&&(e.documentsComplexWidget=t.first)}},features:[m.Cb],decls:16,vars:10,consts:[["id","documents_panel_1",1,"ps-container-panel-doc",3,"options"],[3,"options","itemCard"],["productDetails",""],["id","documents_panel_2",1,"ps-container-panel-doc",3,"options"],[1,"documentsDropdown"],["id","documents_list_dropdown",3,"options"],["documentsDropdownWidget",""],["id","filterDate",3,"options"],[1,"documents-actions"],[1,"reset-documents-button"],[3,"options","onClick"],[1,"filter-documents-button"],["id","documents_panel_3",1,"ps-container-panel-doc",3,"options"],[3,"options"]],template:function(t,e){1&t&&(m.Xb(0,"ps-template-screen"),m.Xb(1,"ps-container-panel",0),m.Sb(2,"ps-container-lookup-option",1,2),m.Wb(),m.Xb(4,"ps-container-panel",3),m.Xb(5,"div",4),m.Sb(6,"ps-complex-widget-dropdowns",5,6),m.Wb(),m.Sb(8,"ps-complex-date-filter",7),m.Xb(9,"div",8),m.Xb(10,"div",9),m.Xb(11,"ps-button-reset",10),m.fc("onClick",function(){return e.resetFilter()}),m.Wb(),m.Wb(),m.Xb(12,"div",11),m.Xb(13,"ps-button-standard",10),m.fc("onClick",function(){return e.filterDocuments()}),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xb(14,"ps-container-panel",12),m.Sb(15,"ps-documents-list",13),m.Wb(),m.Wb()),2&t&&(m.Fb(1),m.pc("options",e.panelOptions1),m.Fb(1),m.pc("options",e.cardOptions)("itemCard",e.itemCard),m.Fb(2),m.pc("options",e.panelOptions2),m.Fb(2),m.pc("options",e.widgetDropdownsOptions),m.Fb(2),m.pc("options",e.filterDate),m.Fb(3),m.pc("options",e.resetOptions),m.Fb(2),m.pc("options",e.filterOptions),m.Fb(1),m.pc("options",e.panelOptions3),m.Fb(1),m.pc("options",e.documentListOptions))},directives:[b.a,f.a,p.a,r.a,g.a,w.a,D.a,S],styles:[""]}),t})()}}]);