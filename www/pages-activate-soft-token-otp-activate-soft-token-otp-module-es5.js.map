{"version":3,"sources":["webpack:///src/app/pages/activate-soft-token-otp/activate-soft-token-otp.module.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.module.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.ts","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.scss","webpack:///src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.html"],"names":["routes","path","component","ActivateSoftTokenOtpPageModule","imports","forChild","declarations","PsComplexVascoSoftTokenComponentModule","exports","entryComponents","PsComplexVascoSoftTokenComponent","commonProv","logger","omniAuthService","omniPull","defaultOptions","crontoImageOptions","imageName","softTokenDisabledHintLblOptions","labelKey","showCrontoDetails","ngOnInit","copyObject","options","userInfo","session","getValueOf","USERINFO","onActivationButtonClicked","event","common","presentLoading","getParamValOf","ENABLE_OTP_GENARATION","then","res","userName","omniUserVO","NAME","userCifNo","CIF_NO","otpAuth","data","authentionTypesEnabled","authenticationTypesDesc","success","showAndManageValidations","MODAL","result","callVascoCrontoWS","error","dismissLoading","generateVascoCrontoImage","imageBase64Url","imageBytesbase64","applyDynScreenDisplay","ACTION_TYPE_READONLY","selector","template"],"mappings":"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","file":"pages-activate-soft-token-otp-activate-soft-token-otp-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PsComponentsModule } from 'src/app/commonSRC/psComponents/ps-components.module';\nimport { PsComplexVascoSoftTokenComponentModule } from './../../commonBussinessSRC/psComponents/ps-complex-components/ps-complex-vasco-soft-token/ps-complex-vasco-soft-token.component.module';\nimport { PsTemplateStepperModule } from './../../commonSRC/psTemplates/ps-template-stepper/ps-template-stepper.template.module';\nimport { SharedModule } from './../../commonSRC/shared.module';\nimport { ActivateSoftTokenOtpPage } from './activate-soft-token-otp.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ActivateSoftTokenOtpPage\n  }\n];\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild(routes),\n    PsComponentsModule,\n    PsTemplateStepperModule,\n    PsComplexVascoSoftTokenComponentModule,\n  ],\n  declarations: [ActivateSoftTokenOtpPage]\n})\nexport class ActivateSoftTokenOtpPageModule { }\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from 'src/app/commonSRC/shared.module';\r\nimport { PsComponentsModule } from '../../../../commonSRC/psComponents/ps-components.module';\r\nimport { PsInputVarcharComponentModule } from './../../ps-keyin-input/ps-input-varchar/ps-input-varchar.component.module';\r\nimport { PsComplexVascoSoftTokenComponent } from './ps-complex-vasco-soft-token.component';\r\n\r\n\r\n@NgModule({\r\n    declarations: [PsComplexVascoSoftTokenComponent],\r\n    imports: [\r\n        SharedModule,\r\n        PsComponentsModule,\r\n        PsInputVarcharComponentModule\r\n    ],\r\n    exports: [PsComplexVascoSoftTokenComponent],\r\n    entryComponents: [PsComplexVascoSoftTokenComponent]\r\n\r\n})\r\nexport class PsComplexVascoSoftTokenComponentModule { }\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AuthMatrixViewer } from 'src/app/commonBussinessSRC/psComponents/ps-complex-components/ps-authentication-matrix/ps-authentication-matrix.component.interface';\nimport { AuthenticationMatrixService } from 'src/app/commonBussinessSRC/psServices/authentication-matrix/authentication-matrix.service';\nimport { CommonBussinessConstant } from 'src/app/commonBussinessSRC/psServices/models/ps-common-bussiness-constant';\nimport { OmniPullService } from 'src/app/commonBussinessSRC/psServices/omni-common/omni-pull.service';\nimport { ConstantCommon } from 'src/app/commonSRC/psServices/models/common-constant';\nimport { IOptionsPsLabel } from 'src/app/commonSRC/psServices/models/ps-common-interface';\nimport { PsBaseFieldComponent } from '../../../../commonSRC/psComponents/ps-base/ps-base-field/ps-base-field.component';\nimport { LoggerService } from '../../../../commonSRC/psServices/logger/logger.service';\nimport { PsCommonService } from '../../../../commonSRC/psServices/ps-common/ps-common.service';\nimport { IOtionsPsComplexVascoSoftTokenExposed } from './ps-complex-vasco-soft-token.component.interface';\n\n@Component({\n  selector: 'ps-complex-vasco-soft-token',\n  templateUrl: './ps-complex-vasco-soft-token.component.html',\n  styleUrls: ['./ps-complex-vasco-soft-token.component.scss'],\n})\nexport class PsComplexVascoSoftTokenComponent extends PsBaseFieldComponent implements OnInit {\n  @Input() options: IOtionsPsComplexVascoSoftTokenExposed;\n\n  defaultOptions: IOtionsPsComplexVascoSoftTokenExposed = {\n    crontoImageOptions: {\n      imageName: ''\n    }\n  }\n\n  softTokenDisabledHintLblOptions: IOptionsPsLabel = {\n    labelKey: 'enable_soft_token_param_in_order_to_proceed_key'\n  }\n  userInfo;\n  showCrontoDetails = false;\n  constructor(public commonProv: PsCommonService, public logger: LoggerService, private omniAuthService: AuthenticationMatrixService, private omniPull: OmniPullService) {\n    super(commonProv, logger);\n  }\n\n  ngOnInit() {\n    this.commonProv.copyObject(this.defaultOptions, this.options, false);\n    this.userInfo = this.commonProv.session.getValueOf(ConstantCommon.USERINFO);\n\n  }\n\n  onActivationButtonClicked(event) {\n    this.common.presentLoading();\n    this.omniPull.getParamValOf(CommonBussinessConstant.ENABLE_OTP_GENARATION).then(res => {\n      if (res[CommonBussinessConstant.ENABLE_OTP_GENARATION]) {\n        let userInfo: any = {\n          userName: this.userInfo?.omniUserVO.NAME,\n          userCifNo: this.userInfo?.omniUserVO.CIF_NO\n        };\n        let otpAuth =\n        {\n          data: [{\n            authentionTypesEnabled: \"SmsOTP\",\n            authenticationTypesDesc: \"otp_key\",\n          }],\n          success: true\n        }\n        this.omniAuthService.showAndManageValidations(otpAuth, AuthMatrixViewer.MODAL, userInfo).then(result => {\n          if (result && result.success) {\n            this.callVascoCrontoWS();\n          }\n        }).catch((error) => {\n          this.commonProv.logger.error(error + \" : error while validating otp authentication in ActivateSoftTokenOtpPage\");\n          this.common.dismissLoading();\n        })\n      } else {\n        this.callVascoCrontoWS();\n      }\n    });\n  }\n\n  private callVascoCrontoWS() {\n    this.common.presentLoading();\n    this.omniPull.generateVascoCrontoImage({}).then((data: any) => {\n      if (data) {\n        this.showCrontoDetails = true;\n        this.defaultOptions.crontoImageOptions.imageBase64Url = data.imageBytesbase64;\n        this.commonProv.applyDynScreenDisplay(ConstantCommon.ACTION_TYPE_READONLY, ['activate_soft_token_btn'], 1);\n      }\n    }).finally(() => {\n      this.common.dismissLoading();\n    });\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcy1jb21wbGV4LXZhc2NvLXNvZnQtdG9rZW4uY29tcG9uZW50LnNjc3MifQ== */\";","export default \"<ps-container-complex class=\\\"ps-complex-vasco-soft-token\\\">\\n\\n  <ps-action-button id=\\\"activate_soft_token_btn\\\" [options]=\\\"defaultOptions.activateSoftTokenOptions\\\"\\n    [ngClass]=\\\"{'soft-token-btn': options.disableSoftTokenBtn}\\\" (onClick)=\\\" onActivationButtonClicked($event)\\\">\\n  </ps-action-button>\\n\\n  <div class=\\\"soft-token-hint\\\" *ngIf=\\\"options.disableSoftTokenBtn\\\">\\n    <ps-label [options]=\\\"softTokenDisabledHintLblOptions\\\">\\n    </ps-label>\\n  </div>\\n\\n  <ng-container *ngIf=\\\"showCrontoDetails\\\" id=\\\"cronto_details_panel\\\">\\n    <ps-action-image [options]=\\\"defaultOptions.crontoImageOptions\\\"></ps-action-image>\\n    <ps-input-varchar id=\\\"cronto-code\\\" [options]=\\\"defaultOptions.crontoCodeOptions\\\">\\n    </ps-input-varchar>\\n  </ng-container>\\n\\n</ps-container-complex>\";"]}